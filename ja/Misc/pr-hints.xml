<?xml version="1.0" encoding="ISO-2022-JP"?>
<!DOCTYPE webpage
  PUBLIC "-//NetBSD//DTD Website-based NetBSD Extension//EN"
    "http://www.NetBSD.org/XML/htdocs/lang/share/xml/website-netbsd.dtd">

<webpage id="ja-Misc-pr-hints">
<config param="desc" value="問題報告の書き方"/>
<config param="cvstag" value="$NetBSD: pr-hints.xml,v 1.5 2005/07/16 17:13:44 heinz Exp $"/>
<!-- Based on english version: -->
<!-- NetBSD: pr-hints.xml,v 1.5 2005/07/16 17:13:44 heinz Exp   -->
<config param="rcsdate" value="$Date: 2005/07/16 17:13:44 $"/>
<head>
<title>問題報告の書き方</title>
</head>


<sect1 id="page-top">

<itemizedlist>
<listitem><ulink url="#general-advice">一般的な助言</ulink></listitem>
<listitem><ulink url="#kernel-panic">カーネルパニックを報告する場合</ulink></listitem>
</itemizedlist>

<para>
データベースが有用になるかどうかは、含まれるデータ次第です。
一般的に、ソフトウェアの問題を追跡したり解決したりするために、
どんな種類の情報が最も有用となるかは、常識 (そんなしろものがあるとして)
で決まります。
</para>

<sect2 id="general-advice">
<title>一般的な助言</title>

<itemizedlist>
<listitem><emphasis>あなた</emphasis>が他人の報告を読む場合に必要とするであろう情報は、
すべて記入します。あなたの環境の詳細について毎回書く必要はありませんが、
他人の環境とは異なっているであろう部分
(たとえばパス) はすべて書いてください。
</listitem>

<listitem>出来事をある程度絞って述べると、その情報は多くの場合、有用なものになります。
A が実行されてから B が実行され、そして C が実行されたことがバグに対処できる人にわかれば、
これらの事象のつながりが原因で失敗するような中間ステップを実現させうるとか、
余計なステップが原因で問題を顕在化させるような環境の変化を引き起こしうる、
ということがわかるかもしれません。
繰り返しますが、内容を絞ることは常に望ましいことですが
(「構築を実行するようにしてから、コーヒー (コロンビア、クリーム入り、砂糖抜き)
を取りに行き、シーラと電話で話したのちに、*この問題* は起きた…」)、
関連のある事項はすべて含めるようにしてください。
</listitem>

<listitem>Richard Stallman は次のように書いています。
<blockquote>
有用なバグ報告の基本方針はこれだ:
<emphasis role="bold">事実をすべて報告する。</emphasis>
書くべきか書かざるべきか迷うのなら書きなさい!
</blockquote>
これは、コンピューターソフトウェア・社会不正・オートバイの保守など、
あらゆる問題報告システムに通用することです。そしてこれは、一見些細な変化
(変数の変更、セミコロンが足りない、などなど) が大きな違いをもたらしうる
ソフトウェア分野では、特に重要なことです。
</listitem>

<listitem>各問題報告では、
ただ<emphasis>ひとつ</emphasis>の問題を提出するようにしてください。
複数の問題があれば、問題報告を複数に分けてください。こうすることで、
各問題の追跡や、またそのプログラムに関連する問題の分析の助けとなります。
</listitem>

<listitem>報告前に、そのバグがすでに報告されているかどうか、
ちょっと調べてみることは悪いことではありません。
ほとんどのソフトウェアでは、
既知のバグのリストが載ったリリースノートが附属しています。
さらに、あなたが遭遇した問題がすでに報告されているかどうか、
<ulink url="query-pr.html">NetBSD GNATS 問題報告データベースを検索する</ulink>
のがよいでしょう (その問題を誰が知っているか?
また、修正や回避策がデータベースにすでにあるかもしれません)。
</listitem>

<listitem>さらに、問題報告に限っていえば、データベース管理者が
報告された情報を適切に振り分けるために労力を使わなくていいように、
標準的な形式での報告が必要です。あらゆる人手や時間は、
問題の修正そのものに使われるべきであることを念頭に置いてください。
従って、もっとも重要なことは、報告の時点で、
問題報告に含まれる情報をできるかぎり正確に (フォーマットと内容のいずれも)
記述することです。より詳しくは、問題報告の
<ulink url="pr-fields.html">項目の説明</ulink>
を参照してください。
</listitem>
</itemizedlist>

</sect2>

<sect2 id="kernel-panic">
<title>カーネルパニックを報告する場合</title>

<para>
カーネルがパニックし、十六進の数字がたくさん出て、停止したとします。
この現象の報告は重要です。
本物のオペレーティングシステムは、ハードウェアに重大な問題がない限り、
決してクラッシュやパニックを起こさないべきものだからです
(ハードウェアの問題に対して OS ができることはほとんどありません)。
このほかパニックの原因となるものとしてはカーネルのバグがありますが、 NetBSD
をさらに安定かつ強堅にするため、問題を追跡してバグをつぶす必要があります。
</para>

<para>
問題は、カーネルが出力するスタックダンプは、各カーネルに固有のもので
あることです。そこで、この数字を実際のシンボルテーブルの参照に変換して、
あなたのシステムのカーネルを持っていない人が
カーネルが死んだ時点の正確な状況がわかるようにする必要があります。
</para>

<para>
少なくとも、 "PC" の数値を書き写してシンボル参照に変換します
-  "PC" は、実行された時点のコンピューターの <emphasis>プログラムカウンター</emphasis> です; 
理想的には、すべてをカット &amp; ペーストできれば、
そうするほうが望ましいです。
</para>

<para>
カーネルが、以下のように出力したとします (たいていはこれが複数行あります):
</para>

<para>
<programlisting>
pc = 0xf80ff430  args = (0x0, 0x41001fe5, 0xf8139c00, 0xf8123d20, 0xf8101e38, 0xf8143800, 0xf8123c68) fp = 0xf8123c68
</programlisting>
</para>

<para>
PC の数値はカーネル毎に固有のもので、別のカーネルでは異なるものになります。
このため、シンボル参照に変換する必要があります。
十六進の PC 値をシンボル参照に変換するため、
以下のように &man.gdb.1; を使います:
</para>

<para>
<programlisting>
gdb -k /netbsd
x 0xf80ff430

0xf80ff430 &lt;cpu_reboot+196&gt;:     0x40000093
</programlisting>
</para>

<para>
&man.gdb.1; で得られたこの "&lt;cpureboot+196&gt;" が、
問題報告をもとに作業する人に必要ですので、これを
(できれば残りの "args" 行も一緒に) 問題報告に含めてください。
</para>

<para>
カーネルパニックの徹底的な問題報告の例としては、
<ulink url="http://www.NetBSD.org/cgi-bin/query-pr-single.pl?number=3765">問題報告
#3765</ulink> を参照してください。
</para>
</sect2>

<html:hr/>
<ulink url="#page-top">[Page&nbsp;top]</ulink>
<ulink url="../Gnats/">[GNATS&nbsp;summary]</ulink>
<ulink url="query-pr.html">[Query&nbsp;PR]</ulink>
<ulink url="pr-fields.html">[PR&nbsp;fields]</ulink>
<ulink url="pr-states.html">[PR&nbsp;states]</ulink>

</sect1>
</webpage>
