<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'updating.list' AND RUN 'make' -->

<!-- Copyright (c) 2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <title>Updating a stable NetBSD release</title>
  </head>

<body bgcolor="#FFFFFF" text="#000000">

<table><tr><td>
    <a href="../Misc/disclaimer.html#bsd-daemon"><img
     align="middle" src="../../images/BSD-daemon.jpg" origlink="../images/BSD-daemon.jpg" border="0"
     width=146 height=129 alt="BSD daemon"></a>
  </td><td align=center>
    <h1>NetBSD ドキュメンテーション:</h1>
    <h1>安定版 NetBSD リリースの更新</h1>
</td></tr></table>
<p>

<ul>
<li>
<a href="#update-src">ソースを更新する</a></li>
<li>
<a href="#kernel">新しいカーネルを構築する</a></li>
<li>
<a href="#userland">ユーザーランドを更新する</a></li>
<li>
<a href="#parts">ソースツリーの一部だけを更新する</a></li>
<li>
<a href="#summary">簡潔なまとめ</a></li>
<li>
<a href="#current">-current を追跡する</a></li>
</ul>


<p><h3>
<a name="update-src">ソースを更新する</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

安定版 (<a
href="../Releases/formal-1.6/">NetBSD 1.6.1</a> など) の NetBSD リリースを、
製作環境として使っている場合、
そのリリース向けのセキュリティー上の修正を取り込むために、
時々ソースを更新のうえシステムまたはカーネルを再構築すべきです。
<p>
リリース版のソースの再現や更新は、適切な枝タグを指定して、 <a
href="current/#using-anoncvs-over-ssh">anoncvs オーバー ssh</a> を使っておこなうことができます。
たとえば、 NetBSD 1.6.1 リリースのソースをチェックアウトするためには、
以下のようにします<br>
<pre><tt>
	$ cd /usr/src
	$ cvs co -r netbsd-1-6 -dP
</tt></pre>
<p>
既存のソースツリーを更新するには以下のようにします:
<pre><tt>
	$ cd /usr/src
	$ cvs update -dP
</tt></pre>

</dd></dl>
<p><h3>
<a name="kernel">新しいカーネルを構築する</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

新しいカーネルを構築する方法は、<a
href="kernel/#how_to_build_a_kernel">この文書</a>で説明している方法とほぼ同じですが、
<tt>build.sh</tt> スクリプトの書式が違うことにご注意ください。 <tt>build.sh</tt>
は、 NetBSD 1.6 と -current では大幅に変わっています; -current を使っているのでなければ、
カーネルの構築に <tt>build.sh</tt> は<em>使えません</em>。

</dd></dl>
<p><h3>
<a name="userland">ユーザーランドを更新する</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

かならず <tt>build.sh -h</tt> の説明を見て、詳細は <em>UPDATING</em>
と <em>BUILDING</em> ファイルで確認するようにしてください─コマンドラインや
<tt>/etc/mk.conf</tt> で指定できるオプションが<em>たくさん</em>あるので、
これは重要なことです。結局は、単一のコマンドに要約されます: <tt><b>build.sh -d</b></tt>
<p>
これは、ユーザーランド<em>すべて</em>を更新することになるのに注意してください。

</dd></dl>
<p><h3>
<a name="parts">ソースツリーの一部だけを更新する</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

セキュリティー勧告が発行され、再構築が必要となったライブラリーや
アプリケーションだけを構築したい場合、最善の選択は、勧告に書かれた
説明どおりにすることです。一例としては以下のようになります:
<p>
<pre><tt>
	$ cd src                                                        
	$ cvs update -d -P -r netbsd-1-6 gnu/dist/sendmail/sendmail
	$ cd gnu/usr.sbin/sendmail
	$ make USETOOLS=no cleandir dependall
	$ su
	# make USETOOLS=no install
</tt></pre>

</dd></dl>
<p><h3>
<a name="summary">簡潔なまとめ</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

<ul>
	<li>ソースの更新:<br>
	<pre><tt>
	$ cd /usr/src
	$ cvs update -dP
	</pre></tt>
	</li>
	<li>カーネルの再構築:<br>
	<pre></tt>
	$ cd /usr/src/sys/arch/&lt;ARCH&gt;/conf
	$ config &lt;KERNEL&gt;
	$ cd /usr/src/sys/arch/&lt;ARCH&gt;/compile/&lt;KERNEL&gt;
	$ make depend all
	$ su
	# mv /netbsd /netbsd.old
	# mv /usr/src/sys/arch/&lt;ARCH&gt;/compile/&lt;KERNEL&gt;/netbsd /
	</pre></tt>
	</li>
	<li>ユーザーランドの更新:<br>
	<pre></tt>
	$ cd /usr/src
	$ ./build.sh -h
	$ su
	# ./build.sh -d &lt;other options&gt;
	</pre></tt>
	</li>
</ul>

</dd></dl>
<p><h3>
<a name="current">-current を追跡する</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

-current の追跡方法についての資料は、
<a href="current/">この文書</a>をご覧ください。

</dd></dl>
<hr>

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../"><img
	src="../../images/NetBSD-flag.gif" origlink="../images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../"><img
	src="../../images/empty.gif" origlink="../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../Documentation/"><img
	src="../../images/NetBSD-flag.gif" origlink="../images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../Documentation/"><img
	src="../../images/empty.gif" origlink="../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.netbsd.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@JP.NetBSD.ORG">日本語:
       www@JP.NetBSD.ORG</a>)<br>
  $NetBSD: updating.list,v 1.1 2003/06/10 14:22:38 jschauma Exp $<br>
  <a href="../Misc/disclaimer.html">Copyright &copy; 1994-2003
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
