<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<!-- Copyright (c) 2000-2003
        The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.org">
<title>Printing to a remote SMB printer from NetBSD</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<HEADING>NetBSD からリモート SMB プリンターへの印刷

NetBSD マシンから、MS Windows マシン(あるいは、プリンターを共有するために 
SMB を使用しているマシン)に接続されたプリンターへ印刷する方法

<LIST>

<SECTION>NetBSD からリモート SMB プリンターへの印刷

<ENTRY>introduction 概要
今から説明する設定は、ポストスクリプトドキュメントを、NetBSD マシンから 
MS Windows PC に接続された HP Laserjet 4L で印刷するために、数年間使われ
ているものです。この設定は、1) GhostScript を使い、PS 出力を 非 PS プリ
ンター(この場合は HP-PCL)が理解できる形式に変換し、2) /etc/printcap を
設定し、lpr で印刷したものを SMB を話すプリンターへ送信する例です。

<ENTRY>prerequisites 事前準備
まだ準備が完了していなければ、以下の手順を、NetBSD からリモート SMB 
プリンターに印刷するための設定をおこなう前に実行しておいてください。
<p>
<ol>
<li><PKGSRC>net/samba パッケージのインストール
<p>
<li>もし、ポストスクリプトでないプリンターでポストスクリプトファイル
(つまり、アプリケーションがポストスクリプトを出力するという事です)を
印刷したい場合、<PKGSRC>print/ghostscript パッケージをインストール
してください。
</ol>

<ENTRY>setting-up samba を使ったリモート印刷のための設定
以下の手順で、プリンター共有のために samba を使い、NetBSD からリモート
プリンターへ印刷できるようになります。
<p>
<ol>
<li>ファイル 「<A HREF="smbprint">smbprint</A>」を /usr/local/bin に置き、
実行パーミッションを設定してください。
<p>
<li>リモートプリンター毎に、printcap のエントリーを作成してください。ここ
にあるファイル「<A HREF="printcap">printcap</A>」の例が参考になるでしょう。
<p>
<li>リモートプリンター毎に、/etc/lpd/PRINTERNAME ディレクトリーを作成し、
そこに config ファイルを置いてください。ここにあるファイル「<A HREF="config">
config</A>」が参考になるでしょう。
<p>
<li>printcap のエントリーで指定したスプールディレクトリーを作成して
ください。
<p>
<li>リモートマシン上のプリンターに接続できるかどうか、手動で確認して
ください:
<p><pre>
	smbclient //machinename/printername
</pre><p>
もし、smb: \&gt; プロンプトが表示されれば、たぶん大丈夫です。もし、表示
されない場合は、/usr/local/bin/smbprint の中の smbclient コマンドの引数
に、「-I IPアドレス」を追加する必要があります。できれば、nmblookup を
使ってリモートマシンの SMB 名から IP アドレスを求める方法を使うことを
お勧めします。そうすれば、アドレスをハードコードしなくてすみます(ハード
コードすると、スクリプトはある一台のプリンター専用になってしまいます)。
<p>
<li>何か印刷してみてください。もし、config ファイルの中で gs デバイスを
指定している場合は、lpr で PostScript ファイルを印刷 <i> しなければ
ならない </i> 事を覚えておいてください。a2ps のようなプログラムの出力を
パイプで lpr に渡すか、Ghostscript のディストリビューションに含まれる
サンプルを印刷するとよいでしょう。
<p>
<li>printcap の中の二つの異なるエントリーを指定することができる事に注意
してください。ひとつは Ghostscript で変換され、もうひとつは 変換なしです
(これらの config ファイルは異なるディレクトリーにおいて、同じ「server=」
オプション、異なる「device=」オプションを使用してください)です。これに
より、プリンターのネイティブ言語(例えば PCL)や、必要なら単なる ASCII 
を送信することができ、かつ PostScript を出力するプログラムのための
デバイスも使用することができます。
</ol>

</LIST>

<a href="../"><em>NetBSD ドキュメンテーション: Miscellaneous</em>にもどる</a>
<hr>

<DOCLINK>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@JP.NetBSD.org">日本語:
       www@JP.NetBSD.org</a>)<br>
  $NetBSD: index.list,v 1.3 2000/09/18 04:21:33 dent Exp $<br>
  <a href="../../../Misc/disclaimer.html">Copyright &copy; 2000-2003
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
