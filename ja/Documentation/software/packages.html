<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'packages.list' AND RUN 'make' -->

<!-- Copyright (c) 1994-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<link rel="shortcut icon" href="../../../favicon.ico" origlink="/favicon.ico" type="image/x-icon">
<title>pkgsrc - The NetBSD packages collection</title>
</head>
<body bgcolor="#ffffff" text="#000000">

<table><tr><td>
    <a href="../../Misc/disclaimer.html#bsd-daemon"><img
     align="middle" src="../../../images/BSD-daemon.jpg" origlink="../../images/BSD-daemon.jpg" border="0"
     width=146 height=129 alt="BSD daemon"></a>
  </td><td align=center>
    <h1>NetBSD ドキュメンテーション:</h1>
    <h1>NetBSD パッケージコレクション (pkgsrc)</h1>
</td></tr></table>
<p>

<ul>
<li>
<a href="#introduction">序説</a></li>
<li>
<a href="#advantages">利点</a></li>
<li>
<a href="#precompiled">コンパイル済みバイナリーパッケージのインストール</a></li>
<li>
<a href="#bootstrap">pkgsrc を使えるようにする (Darwin, FreeBSD, IRIX, Linux, OpenBSD, Solaris)</a></li>
<li>
<a href="#setting_up_pkgsrc">NetBSD パッケージコレクションの設定</a></li>
<li>
<a href="#using_pkgsrc">NetBSD パッケージコレクションの使用</a></li>
<li>
<a href="#compiling-problems">パッケージのコンパイルに関する問題</a></li>
<li>
<a href="#mk.conf">/etc/mk.conf って何 ?</a></li>
<li>
<a href="#searching_pkgsrc">利用可能な NetBSD パッケージコレクションの見つけ方</a></li>
<li>
<a href="#vulnerabilities">インストール済パッケージの脆弱性チェック</a></li>
<li>
<a href="#pkg_versions">インストール済パッケージのより新しいバージョンが pkgsrc にあるかどうか調べる</a></li>
<li>
<a href="#other_commands">その他のNetBSDパッケージコレクション用コマンド</a></li>
<li>
<a href="#pkgsrc_admin">pkgsrc メンテナンスツール</a></li>
</ul>


<h2>他の関連ページ</h2>
<ul>
<li><a href="http://man.netbsd.org/man/packages+7+NetBSD-current">packages(7)</a> マニュアルページ</li>
<li><a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html">
    利用可能なソフトウェアのカテゴリー別の索引</a></li>
<li><a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README-all.html">
    すべてのパッケージのアルファベット順の索引</a></li>
<li><a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README-IPv6.html">
    すべての IPv6 対応パッケージの索引</a></li>
<li><a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/Packages.txt">
	完全な pkgsrc のドキュメント</a> (<a
href="http://www.jp.netbsd.org/ja/JP/Documentation/Packages/Packages.txt">日本語版</a>)
</li>
<li><a href="pkg-growth.html">パッケージシステムの成長</a></li>
<li><a href="pkg-wildcards.html">ワイルドカードと NetBSD パッケージコレクション</a>
</li>
<li> 
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README">
	pkgsrc の README</a>
</li>
<li>
<a href="../../Changes/pkg-changes.html">
	最近の pkgsrc の変更点</a>
</li>
<li><a href="http://www.bsdconeurope.org/papers/crooks.pdf">
	 Package Views の概要を解説した論文</a>
</li>
</ul>



<p><h3>
<a name="introduction">序説</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

NetBSD パッケージ(packages)コレクション、 <b>pkgsrc</b> は、サードパーティー製
ソフトウェア構築用のパッケージシステムで、 3000 を超えるパッケージがあります。
もともと pkgsrc は NetBSD 用に開発されたものですが、今では
<a href="#bootstrap">他のプラットフォーム</a>にも対応するようになりました。

<p>
パッケージコレクションソフトウェアでは以下のことが行なえます:
<p>

<ol>
<li>ソフトウェアをそのホームサイトやミラーサイトから探して持ってきます
(何らかの方法でインターネットに接続していることが必要です)。
<li>そして、それが正しいものか確かめ、
<li>パッチが用意されていればそれを当て、
<li>NetBSDのためにそのソフトウェアを設定してから、構築・インストールします。
<li>パッケージユーティリティーを使ったソフトウェアを容易に削除できるよう、
    インストールされたすべてのファイルを記録しておき、
<li>オプションで、他のホストにインストールできるようバイナリーパッケージを作ります。
</ol>

<p>
また、その構築や実行に必要なソフトウェアも、同じように、自動的に
ダウンロード・構築・インストールされます。

</dd></dl>
<p><h3>
<a name="advantages">利点</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

ソフトウェアソースやバイナリーをそれらのホームサイトから自分自身で得ること、
に対するパッケージの利点をいくつか挙げます。
<p>

<ul>
<li>パッケージはすでに、あなたのシステムで正しくコンパイル、
インストールされるように設定されているので、
自分自身でソフトウェアを移植する必要がありません。
<li>ソフトウェアのプログラムの最新バージョンとそのパッチが得られ、
NetBSDで動くようにまとめられています。
<li>ダイアルアップ接続においてさえ簡単にすばやく使うことができます。
<li>他の人に役立つように、
あなたの移植作業をパッケージシステムに追加して貢献することができます。
<li>パッケージのセットを簡単にインストールするためのスクリプトを作り、
ネットワーク上のホスト向けに標準的なソフトウェアの保守ができます。
<li>バイナリーとソースベースのパッケージのいずれにも、
ひとしく使用と保守を容易さを提供します。
<li>バイナリー、ライブラリー、マニュアルページ、その他の文書など、
すべてのパッケージは首尾一貫したディレクトリーツリーにインストールされます。
<li>オプション設定パラメーターは単一の設定ファイルによって管理されます。
これは、インストール先、受け入れ可能なソフトウェアライセンス、
(米国)国内向けか国際版の暗号が必要か、などです。
<li>パッケージはカテゴリーで分類され、閲覧用の便利なリストが提供され、
すべて動作が確認されています。
<li>pkgsrc はソースパッケージの一次配布元とミラーサイトの情報を持っているので、
その URL を知っていなくてもインストールできます。
</ul>

</dd></dl>
<p><h3>
<a name="precompiled">コンパイル済みバイナリーパッケージのインストール</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

1.5以降のNetBSD用の
コンパイル済みバイナリーパッケージセレクションは、
<a href="../../mirrors/">NetBSD ftp サイト</a> の
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/">/pub/NetBSD/packages/</a>
(訳註:<a href="ftp://ftp.jp.netbsd.org/pub/NetBSD/packages/">日本でのミラー</a>)
にて利用できます。
<p>
おそらく大多数のユーザーには、
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html">ブラウズ可能なリスト</a> (訳註:<a
href="ftp://ftp.jp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html"
>日本でのミラー</a>)
が最も有用でしょう。
<p>
これらのバイナリーパッケージは、他の必要なパッケージと一緒に
手元のディスクにダウンロードして
<pre><tt>
	pkg_add &lt;package&gt;
</tt></pre>
というようにインストールすることができますし、
<pre><tt>
	pkg_add ftp://ftp.netbsd.org/pub/NetBSD/packages/&lt;os_release&gt;/&lt;arch&gt;/&lt;type&gt;/&lt;package&gt;
</tt></pre>
というように直接 pkg_add に完全なURLを指定して、インストールすることもできます。
他の必要なパッケージは、同じリモートディレクトリーにあれば、
自動的に探してインストールされます。
<p>
(訳注: ファイルの取得はネットワーク的に近いサイトから行いましょう。
日本国内では<a href="ftp://ftp.jp.netbsd.org/pub/NetBSD/"
>ftp.jp.netbsd.org</a>をはじめとした
<a href="http://www.jp.netbsd.org/ja/JP/sites.html#FTP">ミラーサイト</a>を
ご利用ください。)
<p>
パッケージは、通常 <tt>/usr/pkg</tt> にインストールされます。
パス変数(PATH)に確実に <tt>/usr/pkg/bin</tt> と <tt>/usr/pkg/sbin</tt>
を加えてください(一番の方法は、<tt>/etc/csh.cshrc</tt>で設定することです)。

</dd></dl>
<p><h3>
<a name="bootstrap">pkgsrc を使えるようにする (Darwin, FreeBSD, IRIX, Linux, OpenBSD, Solaris)</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
<i>NetBSD 上で pkgsrc を使っている場合は、この項は読み飛ばして <a
href="#setting_up_pkgsrc">NetBSD パッケージコレクションの設定</a>に進んでもかまいません。</i>
<p>
NetBSD 以外のオペレーティングシステム用に、 pkgsrc を使うために必要な
ツールを構築するブートストラップキット 'bootstrap-pkgsrc'
を用意してあります。これは Zoularis の枠組みの後継です。
ブートストラップキットを使うと、以下のオペレーテシングシステムで、
元の NetBSD と同じように pkgsrc が使えるようになります:
<p>
<ul>
<li>Darwin (MacOS X)</li>
<li>FreeBSD</li>
<li>IRIX</li>
<li>Linux</li>
<li>OpenBSD</li>
<li>Solaris</li>
</ul>
<p>
その他のプラットフォームのサポートは開発中です。
<p>
bootstrap のソースは、 <a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-pkgsrc.tar.gz">FTP でダウンロード</a>するか、
以下のように anoncvs でチェックアウトすることができます:
<p>
<pre><tt>
	# cvs checkout othersrc/bootstrap-pkgsrc
</tt></pre>
<p>
anoncvs の設定は、 <a href="../current/#using-anoncvs">NetBSD-current
の追跡</a>の説明に従っておこなってください。
ソースのダウンロード・展開後、ブートストラップキットのインストールは、
以下のようにするだけの単純なものです:
<pre><tt>
	# cd othersrc/bootstrap-pkgsrc
	# ./bootstrap
</tt></pre>
<p>
デフォルトでは、 <i>prefix</i> は <tt>/usr/pkg</tt> に、
パッケージデータベースディレクトリーは <tt>/var/db/pkg</tt> になりますが、
これらはコマンドラインで変数を使って変更可能です (利用可能なオプションは、
<tt>./bootstrap --help</tt> で見られます)。
<p>

bootstrap-pkgsrc を使う際には、システム標準の 'make' コマンドを実行しないように
するために、 "make" ではなく "<tt>bmake</tt>" コマンドを使うことに
注意してください。システム標準の 'make' コマンドは、 bootstrap-pkgsrc
に附属してくる BSD ベースの 'make' とはおそらく異なりますし、実際 pkgsrc
には BSD ベースの 'make' が必要なのです。
<p>

pkgsrc ツール群のバイナリーパッケージと、最初のパッケージセットは、
以下のものが利用可能です:
<p>

<table border=1>
	<tr valign="top" align="left">
		<th>プラットフォーム</th>
		<th>最新スナップショット</th>
		<th>ブートストラップキット</th>
		<th>バイナリーパッケージ</th>
	</tr>
	<tr valign="top">
		<td>Darwin 5.5/powerpc<br>(MacOS X 10.1.5)</td>
		<td>20021209</td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/schmonz/bootstrap-pkgsrc-Darwin-5.5-powerpc-20021209.tar.gz">ブートストラップキット</a></td>
		<td>&nbsp;</td>
	</tr>
	<tr valign="top">
		<td>Darwin 6.2/powerpc<br>(MacOS X 10.2.2)</td>
		<td>20021219</td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-pkgsrc-Darwin-6.2-powerpc-20021219.tar.gz">ブートストラップキット</a></td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/Darwin/6.2/powerpc/">バイナリーパッケージ</a></td>
	</tr>
	<tr valign="top">
		<td>Darwin 6.3/powerpc<br>(MacOS X 10.2.3)</td>
		<td>20030221</td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-pkgsrc-Darwin-6.3-powerpc-20030221.tar.gz">ブートストラップキット</a></td>
		<td>&nbsp;</td>
	</tr>
	<tr valign="top">
		<td>FreeBSD 4.7/i386</td>
		<td>20021211</td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-pkgsrc-FreeBSD-4.7-RELEASE-i386-20021211.tar.gz">ブートストラップキット</a></td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/FreeBSD/4.7-RELEASE/i386/">バイナリーパッケージ</a></td>
	</tr>
	<tr valign="top">
		<td>FreeBSD 5.0/i386</td>
		<td>20030221</td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-pkgsrc-FreeBSD-5.0-RELEASE-i386-20030221.tar.gz">ブートストラップキット</a></td>
		<td>&nbsp;</td>
	</tr>
	<tr valign="top">
		<td>IRIX 6.5</td>
		<td>20030225</td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-pkgsrc-IRIX-6.5-mipseb-20030225.tar.gz">n32-ビット ABI</a><br>
			<a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-pkgsrc-IRIX64-6.5-mipseb-20030225.tar.gz">64-ビット ABI</a></td>
		<td>&nbsp;</td>
	</tr>
	<tr valign="top">
		<td>OpenBSD 3.2/i386</td>
		<td>20021217</td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-OpenBSD-3.2-i386-20021217.tar.gz">ブートストラップキット</a></td>
		<td>&nbsp;</td>
	</tr>
	<tr valign="top">
		<td>Solaris 8/sparc</td>
		<td>20021219</td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-pkgsrc-SunOS-5.8-sparc-20021219.tar.gz">ブートストラップキット</a></td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/SunOS/5.8/sparc/">バイナリーパッケージ</a></td>
	</tr>
	<tr valign="top">
		<td>Solaris 8/i386</td>
		<td>20030102</td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-pkgsrc-SunOS-5.8-i386-20030102.tar.gz">ブートストラップキット</a></td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/SunOS/5.8/i386/">バイナリーパッケージ</a></td>
	</tr>
	<tr valign="top">
		<td>Solaris 9/sparc</td>
		<td>20030202</td>
		<td><a
href="ftp://ftp.netbsd.org/pub/NetBSD/misc/grant/pkgsrc/bootstrap-pkgsrc-SunOS-5.9-sparc-20030202.tar.gz">ブートストラップキット</a></td>
		<td>&nbsp;</td>
	</tr>
</table>


</dd></dl>
<p><h3>
<a name="setting_up_pkgsrc">NetBSD パッケージコレクションの設定</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
NetBSD パッケージコレクションは、
サードパーティー製プログラムを容易にコンパイルできるようにするための
Makefile 、簡単な説明、パッチが、カテゴリー別に分類されて構成されています。
<p>
pkgsrc をインストールすると、パッケージコレクションに含まれるどのソフトウェアも
容易にコンパイル・インストールできるようになります。
<p>
pkgsrc の入手方法はいくつかあります:
<p>

<ol>

<li><b>CD-ROM</b><br>
    NetBSD 公式 CD-ROM をお持ちなら、 pkgsrc も入っています。他の CD にも
    pkgsrc は入っているはずです。これはちゃんと使えるはずですが、
    pkgsrc は日々更新され続けているため、インターネットから最新のものを
    ダウンロードするのがよいでしょう。
    <p>

<li><b>sup</b><br>
    おすすめの方法です。最初のダウンロードには時間がかかりますが、
    その後は <a href="http://man.netbsd.org/man/sup+1+NetBSD-current">sup(1)</a> を実行するたびに更新されたファイルだけをダウンロードし、
    自動的に古いファイルを消します。
    sup のもっとも簡単な設定方法は次のとおりです。
    <p>
    <ul>
    <li><tt>mkdir /etc/supfiles /usr/sup</tt>.</li>
    <li><tt>cp /usr/share/examples/supfiles/<em>serverhost</em>
	/etc/supfiles/coll.list'</tt>, ここで <em>serverhost</em> は
	「最も近所の」ホストか、単に 'sup.netbsd.org' とします)</li>
    <li><tt>/etc/supfiles/coll.list</tt> を編集し、
	<tt><b>current release=pkgsrc</b></tt> で始まる 2 行を除き、
	すべての行をコメントアウト (行頭に「#」を追加) します。</li>
    </ul>
    <p>
    これで、 'sup -s -v' すると sup を使って pkgsrc をアップデートできます
    (あるいは単に 'sup -s' して冗長な出力を抑制できます) 。
    sup はさまざまな NetBSD ソースツリーの取得にも使えます
    ─より詳しくは coll.list の内容を見てください。
    <p>

<li><b>ftp</b><br>
    最も単純な方法ですが、毎回、すべての pkgsrc アーカイブファイル (現在、
    gzip しても 5MB を超えます) をダウンロードすることになります。
    <p>
    <ul>
    <li>
    NetBSD パッケージコレクションは毎週アーカイブされ、
    tar+gzipされたファイルとしてNetBSD ftp サイトと
    多数のミラーサイトに置かれます。
    このファイルを NetBSD サイトの <a
    href="ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-current/tar_files/pkgsrc.tar.gz">
    ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-current/tar_files/pkgsrc.tar.gz</a>
    もしくは近くの
    <a href="../../mirrors/#ftp">ミラーサイト</a>から、入手します。
    <p>
 
    <li>
	一旦自分のシステムにpkgsrc.tar.gzをダウンロードしたら、
	<tt>su -</tt> して root 権限で、
	<i>/usr</i> ディレクトリーにそのファイルをコピーします。
    <p>

    <li>
	もし、以前の pkgsrc.tar.gz を展開していたならば、まずそれを削除します。
	<pre><tt>
	cd /usr ; rm -rf pkgsrc
	</tt></pre>
    <p>

    <li>
	そしてtarを使って次のように、
	そのファイルを伸長し新たなホーム(<tt>/usr/pkgsrc</tt>)に展開します。
	<pre><tt>
	cd /usr ; tar -xzvpf pkgsrc.tar.gz
	</tt></pre>
    <p>

    <li>
	コレクションからパッケージを構築するときは、
	通常新しいディレクトリーツリー '<i>/usr/pkg/</i>' を作成し、
	そこにインストールすることになります。
	例えば、'<tt>LOCALBASE=/usr/local</tt>' を
	<tt>/etc/mk.conf</tt> に加えることにより、これを変更することができます。
    <p>
    <li>
       ファイルの取得を近くのミラーサイトから行うように設定することができます。
       '<i>/usr/pkgsrc/mk/bsd.pkg.defaults.mk</i>' に掲載されている
       あなたの国向けの MASTER_SITE_* の設定例を '<i>/etc/mk.conf</i>'
       にコピーし、行頭の '#' を削除します。
    <p>
    </ul>
   <p>

<li><b>AnonCVS</b><br>

    これは 2 段階からなります。まず設定が必要で、そのあとは好きな時に
    全体または一部のアップデートができるようになります。

    <p>設定は、<a
    href="../current/#using-anoncvs">anoncvs を用いた NetBSD-current
    の追跡</a>の最初の 4 段階に従います; チェックアウトが必要なモジュールは
    <b>pkgsrc</b> (予想通りでしょう) で、デフォルトの場所は
    '<i>/usr/pkgsrc</i>' ですが、任意の場所にできます。

    <p>アップデートは、次のようにしてできます
    <p>
    <tt>cd /usr/pkgsrc</tt><br>
    <tt>cvs update -dP</tt><br>

    <p>一部だけアップデートしたい場合は次のようにします (依存関係があるため、
    おすすめしません):
    <tt>cvs update -dP category/package</tt><br>

    <p>非常に細い回線を使っている場合は、コマンドラインで -z5
    (あるいは 1 から 9 までのいずれか) を、コマンドの<em>前</em>に追加します
    (たとえば "<tt><b>cvs -z5 update -d -P</b></tt>");
    こうするとデータはすべて圧縮されます。これは cvs サーバーに余計な負荷を
    かけることに注意してください。<br>
</ol>

</dd></dl>
<p><h3>
<a name="using_pkgsrc">NetBSD パッケージコレクションの使用</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

<ol>
<li>
<i>/usr/pkgsrc/</i> ディレクトリーには、
カテゴリー別に整理されたサブディレクトリーが含まれます。
オンラインでパッケージの索引を見られますし、また、 /usr/pkgsrc
ディレクトリーで 'make readme' してローカルで README.html
を作ることもできます。各ディレクトリーでは <i>README</i> ファイルで、
それぞれのユーティリティー/アプリケーションが何なのかを知ることができます。
<p>

<li>
アプリケーションのひとつをインストールするのは非常に簡単です。
例えば、あなたのシステムに Joe というエディター(Joeは、WordstarやEmacs
のようなエディターを真似た、小さいけれどパワフルなエディターです)
をインストールするには、まず次のようにカレントディレクトリーを変更します。
<pre><tt>
	cd /usr/pkgsrc/editors/joe
</tt></pre>
<p>

<li>
もしダイアルアップ接続によりインターネットにアクセスしているならば、
ソフトウェアソースおよびあらゆるパッチを探して持ってくるために、
この時点で接続してください。
<p>
<tt>/usr/pkgsrc/distfiles</tt>に必要なファイルが
すでに存在していれば、インターネットに接続する必要はありません。
CD-ROMなどにdistfilesがある場合には、CD-ROMを<tt>/cdrom</tt>にmountし
'DISTDIR=/cdrom/pkgsrc/distfiles' を <tt>/etc/mk.conf</tt>
に加えるか、'make DISTDIR=/cdrom/pkgsrc/distfiles'
などの様に指定します。
<p>
パッケージが他のパッケージ(例えばkdeなど)に依存している場合、
ダウンロードとコンパイルを交互に繰り返すことがあります。
最初に必要なすべてのソースを確実にダウンロードするには、
次のコマンドを使用します:
<pre><tt>
	make fetch-list | sh
</tt></pre>
このコマンドは必要なファイルを取ってきて<tt>/usr/pkgsrc/distfiles</tt>
に保存するためのシェルコマンドを出力、実行します。このファイルは手動で
<tt>/usr/pkgsrc/distfiles</tt>へダウンロードすることもできますが、
手動で取得するのはかなり面倒なので最後の手段とすべきでしょう。
<p>

<li>
そして <i>/usr/pkgsrc/editors/joe</i> ディレクトリーにて、
<pre><tt>
	make
</tt></pre>
と入力します。ソースと、(もしあれば)パッチ、
コンパイルに必要な他のソフトウェアが
あなたのシステムにダウンロードされるでしょう。
<p>

<li>
ソフトウェアがダウンロードされると、パッチが適用された上で、
コンパイルされます。それにかかる時間はあなたのコンピューターによりますし、
そのソフトウェアが依存している他のパッケージの数とそれらのコンパイルに
かかる時間にもよります。
<p>

<li>
これが完了し、どんなエラーも表示されなければ、
ダイアルアップ接続を切断してもかまいません(電話代は節約しましょう!)。
<p>

<li><p>
次は新たにコンパイルされたプログラムを、
実際にあなたのシステムにインストールします。
<i>/usr/pkgsrc/editors/joe</i> ディレクトリーにいる間に
(もしくはインストールのためのディレクトリーで)
<pre><tt>
	make install
</tt></pre>
と入力してください。
<p>

<li>
そのソフトウェアは今まさにインストールされ、
使用できるようにセットアップされたことになります。
もうこれ以上コンパイル後の作業ファイルは必要とされないので、
<pre><tt>
	make clean
</tt></pre>
と入力し作業ディレクトリー内のファイルを削除してしまってもかまいません。
もし、プログラムをコンパイルするときに、
依存関係により他のパッケージがコンパイル/インストールされたならば、
それらも次のコマンドにより、きちんと削除することができます。
<pre><tt>
	make clean CLEANDEPENDS=YES
</tt></pre>
</ol>

</dd></dl>
<p><h3>
<a name="compiling-problems">パッケージのコンパイルに関する問題</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
ポートによっては、いくらかの巨大なパッケージに対して、
デフォルトのリソースの制限が小さすぎます─もし "virtual memory exhausted"
と言われてコンパイルが失敗したら、コンパイル FAQ の <a
href="compiling.html#unlimit">unlimit</a>の項をどうぞご覧ください。

</dd></dl>
<p><h3>
<a name="mk.conf">/etc/mk.conf って何 ?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
/etc/mk.conf はパッケージシステムに対していくらかの変数を定義するのに使えます。
デフォルトでは用意されていませんが、必要な場合に作ることができます。
設定可能な多くの変数は、次のようなものです:
<p>
<ul>
<li><tt>ACCEPTABLE_LICENSES=non-commercial-use fee-based-commercial-use</tt><br>
    受け入れ可能なライセンスをパッケージに対して表明します。
<p>
<li><tt>WRKOBJDIR=/usr/obj/pkg</tt><br>
    パッケージの展開と構築を /usr/obj/pkg で行ないます。
<p>
<li><tt>PACKAGES=${_PKGSRCDIR}/packages/${OS_VERSION}/${MACHINE_ARCH}</tt><br>
    バイナリーパッケージを作るときに、それらを OS_VERSION と MACHINE_ARCH
    別のサブディレクトリーに保存します。
<p>
<li><tt>USA_RESIDENT=NO</tt><br>
    「 NO 」の場合、いくつかのプログラムのライセンス認証の決定に使われます。
    「 YES 」の場合、いくつかのプログラムのライセンス認証の決定に使われます。
<p>
<li><tt>USE_RSAREF2=NO</tt><br>
    たとえば <a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/security/ssh/README.html">ssh</a> で、 RSAREF2 を使うか否か。
<p>
<li><tt>DEPENDS_TARGET?=package</tt><br>
    依存関係にあるバイナリーパッケージを自動的に構築・保存します。
</ul>
<p>
また、 <a href="http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/pkgsrc/mk/bsd.pkg.defaults.mk">/usr/pkgsrc/mk/bsd.pkg.defaults.mk</a>
で、 pkgsrc で使われるデフォルト値が与えられます。このファイルは /etc/mk.conf
での設定の指針として使えます - このデフォルト値と異なる部分について、
値を設定する必要があるだけです。

</dd></dl>
<p><h3>
<a name="searching_pkgsrc">利用可能な NetBSD パッケージコレクションの見つけ方</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
<p>
コレクション中にどんなパッケージがあるのかを知る、もっとも良い方法は、
pkgsrc の一番上のディレクトリー(これは通常 /usr/pkgsrc でしょう)に移動し、
"make readme" と入力することです。
これにより、README.html というファイルが pkgsrc の一番上のディレクトリー、
またすべてのカテゴリーとパッケージディレクトリーに作成され、
lynx (pkgsrc/www/<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/www/lynx/README.html">lynx</a>) や Mozilla (pkgsrc/www/<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/www/mozilla/README.html">mozilla</a>)
や <a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/www/communicator/README.html">communicator</a> のようなブラウザーを使うことで、
パッケージの機能に付いての短い(一行)コメントと、
詳細な説明へのポインターを見ることができるようになります。 <a
href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html">パッケージの
一覧</a>
(訳註:<a href="ftp://ftp.jp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html">日本でのミラー</a>)
や<a
href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README-all.html">完全な
一覧</a>
(訳註:<a href="ftp://ftp.jp.netbsd.org/pub/NetBSD/packages/pkgsrc/README-all.html">日本でのミラー</a>)
(長い!) も参照してください。
<p>

コレクション中のパッケージを見つける別の方法としては、
pkgsrc の一番上のディレクトリーに移動して、
"make index" と入力するというのもあります。
これは、"make print-index | more" で見ることができる
pksrc/INDEX を作成します。
また、パッケージやキーワードを "make search key=&lt;somekeyword&gt;" により
検索することもできます。

</dd></dl>
<p><h3>
<a name="vulnerabilities">インストール済パッケージの脆弱性チェック</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
NetBSD セキュリティーオフィサーとパッケージグループでは、
pkgsrc に含まれる (あるいは含まれていた) パッケージの既知の脆弱性のリストを
保守しています。このリストは、以下の NetBSD FTP
サイトから入手できます:
<p>
<blockquote>
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/distfiles/vulnerabilities">ftp://ftp.netbsd.org/pub/NetBSD/packages/distfiles/vulnerabilities</a>
</blockquote>
<p>
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/security/audit-packages/README.html">audit-packages</a> を使うと、
このリストを自動的にダウンロードし、
システムにインストールされているパッケージすべてについて
セキュリティー検証をすることができます。
<p>
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/security/audit-packages/README.html">audit-packages</a> は、ふたつの部分からできています。
ひとつは <tt>download-vulnerability-list</tt> で、 NetBSD FTP サイトから
脆弱性のリストをダウンロードするものです。もうひとつは
<tt>audit-packages</tt> で、インストールされているパッケージに脆弱性が
ないかどうか検証するものです。脆弱性のあるパッケージがあった場合、
次のように出力してくれます:
<p>
<blockquote><tt>
Package samba-2.0.9 has a local-root-shell vulnerability, see \<br>
http://www.samba.org/samba/whatsnew/macroexploit.html
</tt></blockquote>
<p>
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/security/audit-packages/README.html">audit-packages</a>
では、
<tt><a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/distfiles/vulnerabilities">vulnerabilties</a></tt>
ファイルを毎日ダウンロードして、さらに、パッケージの検証を
daily security script で行なうように設定することができます。
これについての詳細は、 <a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/security/audit-packages/README.html">audit-packages</a> の
<a href="http://cvsweb.netbsd.org/bsdweb.cgi/pkgsrc/security/audit-packages/pkg/MESSAGE?rev=HEAD&amp;content-type=text/x-cvsweb-markup">MESSAGE</a>
ファイルに書かれています。

</dd></dl>
<p><h3>
<a name="pkg_versions">インストール済パッケージのより新しいバージョンが pkgsrc にあるかどうか調べる</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
インストール済パッケージのより新しいバージョンが NetBSD パッケージコレクション
にあるかどうか調べるには、まず pkgsrc/pkgtools/<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/pkgtools/pkglint/README.html">pkglint</a>
をインストールします。そうすると、新しいバージョンがある場合、
<b>lintpkgsrc -i</b> を実行するとわかります。
<p>

たとえば、すでに pkgsrc/shells/tcsh のバージョン 6.09.00
をインストールしてあり、 pkgsrc のバージョンは 6.10.00 になっている場合、
lintpkgsrc -i すると次のように教えてくれます。
<p>

<pre>   Version mismatch: 'tcsh' 6.09.00 vs 6.10.00</pre>

</dd></dl>
<p><h3>
<a name="other_commands">その他のNetBSDパッケージコレクション用コマンド</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

NetBSD パッケージコレクションを使う上で、役に立つその他のコマンドは
<p>

<ul>
<li>
<tt>make deinstall</tt> - システムにインストールされたパッケージを削除します。
上記手順の逆を行います。あらかじめ適切な pkgsrc ディレクトリーに移動してから
実行します。
</li>
<li>
<tt>pkg_delete</tt> - カレントディレクトリーとは関係なく、
指定した名前のパッケージを削除します。
</li>
<li>
<tt>pkg_info</tt> - システムにインストールされたパッケージを表示します
(パッケージのインストールによりデータベースに追加されています)。
</li>
</ul>

</dd></dl>
<p><h3>
<a name="pkgsrc_admin">pkgsrc メンテナンスツール</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

pkgsrc には、 pkgsrc システムのメンテナンスに使うための
追加のツールがたくさんあります。そのなかでもよく使われるものは、
以下のものです:
<p>

<ul>
<li><b><code>cpuflags</code></b> - devel/<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/devel/cpuflags/README.html">cpuflags</a> 。
    cpuflags は、お使いの CPU とコンパイラー用にコードを最適化するための
    コンパイラーのフラグを考えてくれます。</li>
<li><b><code>lintpkgsrc</code></b> - pkgtools/<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/pkgtools/pkglint/README.html">pkglint</a>
    に含まれます。 lintpkgsrc を使って、インストール済のパッケージとローカル
    pkgsrc ツリーのバージョンを比較したり、それをもとに
    古いバイナリーパッケージや古くなった distfiles を削除したりできます。</li>
<li><b><code>pkg_chk</code></b> - pkgtools/<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/pkgtools/pkgchk/README.html">pkgchk</a> 。
    pkg_chk は、インストール済のパッケージを、
    ローカル pkgsrc ツリーのバージョンや、
    ホスト名・アーキテクチャーその他もろもろの変数をもとに
    必要なパッケージを列挙できる設定ファイルと比較したりします。</li>
<li><b><code>pkg_comp</code></b> - pkgtools/<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/pkgtools/pkg_comp/README.html">pkg_comp</a> 。
    pkg_comp を使うと、パッケージのコンパイルを chroot された隔離環境内で
    行なうことができます。例えば、別バージョンの NetBSD 用パッケージの構築や、
    デバッグ用に使え、便利です。
</ul>

</dd></dl>
<hr>

<p>
NetBSD パッケージコレクションについての、より詳細な、役立つ情報は、
pkgsrc に含まれている  <a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/Packages.txt">Packages.txt</a> で入手できます。
<p>

<font size="-1">Simon Rowe の NetBSD ページに多謝</font>
</p>


<a href="./"><em>NetBSD ドキュメンテーション: ソフトウェア</em>に戻る</a>
<hr>

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../"><img
	src="../../../images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../"><img
	src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../Documentation/"><img
	src="../../../images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../Documentation/"><img
	src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="../../Misc/feedback.html">英語</a>,
       <a href="mailto:www@JP.NetBSD.ORG">日本語:
       www@JP.NetBSD.ORG</a>)<br>
  $NetBSD: packages.html,v 1.45 2003/02/26 22:26:38 kano Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
