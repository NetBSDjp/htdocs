<html>
<head>
<!-- Copyright (c) 1997, 1998
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>NetBSD パッケージコレクション</title>
</head>
<body bgcolor="#ffffff" text="#000000">

<h2 align=center><font color="#8080ff">
	NetBSD パッケージコレクション
</font></h2>

<p>
手短に言えば、NetBSD パッケージ(packages)コレクションは、
NetBSDに移植されたソフトウェアユーティリティーとライブラリーの集まりです。

<p>
パッケージコレクションソフトウェアは、
ソフトウェアをそのホームサイトから探して持ってきます
(何らかの方法でインターネットに接続していることが必要です)。
そして、それが正しいものか確かめ、
パッチが用意されていればそれを当て、
NetBSDのためにそのソフトウェアを設定し、構築します。
また、その構築や実行に必要なソフトウェアも、
同じように構築されインストールされます。
ソフトウェアのインストールとアンインストールは、
パッケージユーティリティーにより管理されます。

<p>
ソフトウェアソースやバイナリーを
それらのホームサイトから自分自身で得ること、
に対するパッケージの利点をいくつか挙げます。
<ul>
<li>パッケージはすでに、
	あなたのシステムで正しくコンパイル、
	インストールされるように設定されているので、
	自分自身でソフトウェアを移植する必要がありません。
<li>ソフトウェアのプログラムの最新バージョンとそのパッチが得られ、
	NetBSDで動くようにまとめられています。
<li>いったん使い方がわかれば、
	ダイアルアップ接続においてさえ簡単にすばやく使うことができます。
<li>他の人に役立つように、
	あなたの移植作業をパッケージシステムに追加して貢献することができます。
</ul>

<p>
パッケージでは、コンパイル済みのバイナリーパッケージか、
ソフトウェアをインストールおよび保守するための
'パッケージソース(pkgsrc)'を使用することができます。
</P>

<hr>
<h3><font color="#8080ff">コンパイル済み
	バイナリーパッケージのインストール</font></h3>

1.3以降のNetBSD用の
コンパイル済みバイナリーパッケージセレクションは、
<a href="../../Sites/net.html">NetBSD ftp サイト</a>の
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/">/pub/NetBSD/packages/</a>
(<a href="ftp://ftp.jp.netbsd.org/pub/NetBSD/packages/">日本でのミラー</a>)
にて利用できます。
<p>
おそらく大多数のユーザーには、
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html">ブラウズ可能なリスト</a>(<a
href="ftp://ftp.jp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html"
>日本でのミラー</a>)
が最も有用でしょう。
<p>
これらのバイナリーパッケージは、手元のディスクにダウンロードして
<pre>    pkg_add &lt;package&gt;</pre>
というようにインストールすることができますし、
<pre>    pkg_add ftp://ftp.netbsd.org/pub/NetBSD/packages/&lt;os_release&gt;/&lt;arch&gt/&lt;type&gt/&lt;package&gt;</pre>
というように直接 pkg_add に完全なURLを指定して、インストールすることもできます。

<p>
(訳注: ファイルの取得はネットワーク的に近いサイトから行いましょう。
日本国内では<a href="ftp://ftp.jp.netbsd.org/pub/NetBSD/"
>ftp.jp.netbsd.org</a>をはじめとした
<a href="/ja/JP/sites.html#FTP">ミラーサイト</a>をご利用ください。)

<p>
パッケージは、通常 <tt>/usr/pkg</tt> にインストールされます。
パス変数(PATH)に確実に <tt>/usr/pkg/bin</tt> と <tt>/usr/pkg/sbin</tt>
を加えてください(一番の方法は、<tt>/etc/csh.cshrc</tt>で設定することです)。

<hr>
<h3><font color="#8080ff">NetBSD パッケージコレクションの設定</font></h3>

<ol>
<li><p>
    NetBSD パッケージコレクションは毎週アーカイブされ、
    tar+gzipされたファイルとしてNetBSD ftp サイトと
    多数のミラーサイトに置かれます。
    
    この'<i>パッケージソースファイル (pkgsrc)</i>'は、
    現在のパッケージコレクション中の、
    各々のソフトウェアの説明と情報が含まれています。
    
    このpkgsrcを得てシステムにインストールすることにより、
    そのコレクションに含まれるソフトウェアを簡単にコンパイル、
    インストールすることができます。
    
    まず必要なことは、
    パッケージコレクションソースファイル(pkgsrc)をダウンロードすることです。
    NetBSDサイト
    もしくは近くの<a href="../../Sites/net.html">ミラーサイト</a>から、
    <a href="ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-current/tar_files/pkgsrc.tar.gz">
    ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-current/tar_files/pkgsrc.tar.gz</a>
    (<a href="ftp://ftp.jp.netbsd.org/pub/NetBSD/NetBSD-current/tar_files/pkgsrc.tar.gz"
    >日本でのミラー</a>)
    を得ます。
</li>
<li><p>
    一旦自分のシステムにpkgsrc.tar.gzをダウンロードしたら、
    '<tt>su -</tt>' のようにrootでログインし、
    '<i>/usr</i>' ディレクトリーにそのファイルをコピーします。
</li>

<li><p>
    もし、以前の pkgsrc.tar.gz を展開していたならば、まずそれを削除します。
<pre>
	rm -rf pkgsrc
</pre>
</li>
<li><p>
    そしてtarを使って次のように、
    そのファイルを伸長し新たなホーム(<tt>/usr/pkgsrc</tt>)に展開します。
<pre>
	tar -xzvpf pkgsrc.tar.gz
</pre>
</li>
<li><p>
    コレクションからパッケージを構築するときは、
    通常新しいディレクトリーツリー '<i>/usr/pkg/</i>' を作成し、
    そこにインストールすることになります。
    例えば、'<tt>LOCALBASE=/usr/local</tt>' を
    <tt>/etc/mk.conf</tt> に加えることにより、これを変更することができます。
</li>
<li><p>
    (訳注: ファイルの取得を近くのミラーサイトから行うように設定します。
    <tt>/usr/pkgsrc/mk/mk.conf.example</tt> に、日本国内向けの設定例
    (<tt># Japan</tt>で始まる13行)が掲載されています。
    <tt>/usr/pkgsrc/mk/mk.conf.example</tt> を <tt>/etc/mk.conf</tt>
    にコピー(すでに<tt>/etc/mk.conf</tt>が
    存在する場合は、日本国内向けの設定例を追加)し、
    <tt># Japan</tt>の次の行から、行頭の '<tt>#</tt>' を削除します。
    そして、<tt>MASTER_SITE_FREEBSD=yes</tt>
    という行も追加します。)
</li>
</ol>

<h3><font color="#8080ff">NetBSD パッケージコレクションの使用</font></h3>

<ol>
<li><p>
'<i>/usr/pkgsrc/</i>' ディレクトリーには、
カテゴリー別に整理されたサブディレクトリーが含まれます。
各ディレクトリーでは '<i>README</i>' ファイルで、
それぞれのユーティリティー/アプリケーションが何なのかを知ることができます。
</li>
<li><p>
アプリケーションのひとつをインストールするのは非常に簡単です。
例えば、あなたのシステムに Joe というエディター(Joeは、WordstarやEmacs
のようなエディターを真似た、小さいけれどパワフルなエディターです)
をインストールするには、まず次のようにカレントディレクトリーを変更します。
<pre>
	cd /usr/pkgsrc/editors/joe
</pre>
</li>
<li><p>
もしダイアルアップ接続によりインターネットにアクセスしているならば、
ソフトウェアソースおよびあらゆるパッチを探して持ってくるために、
この時点で接続してください。
<p>(訳注: <tt>/usr/pkgsrc/distfiles</tt>に必要なファイルが
すでに存在していれば、インターネットに接続する必要はありません。
CD-ROMなどにdistfilesがある場合には、CD-ROMを<tt>/cdrom</tt>にmountし
<tt>DISTDIR=/cdrom/pkgsrc/distfiles</tt> を <tt>/etc/mk.conf</tt>
に加えるか、<tt>make DISTDIR=/cdrom/pkgsrc/distfiles</tt>
などの様に指定します。)
<p>
パッケージが他のパッケージ(例えばkdeなど)に依存している場合、
ダウンロードとコンパイルを交互に繰り返すことがあります。
最初に必要なすべてのソースを確実にダウンロードするには、
次のコマンドを使用します:
<pre>
	make fetch-list | sh
</pre>
このコマンドは必要なファイルを取ってきて<tt>/usr/pkgsrc/distfiles</tt>
に保存するためのシェルコマンドを出力、実行します。このファイルは手動で
<tt>/usr/pkgsrc/distfiles</tt>へダウンロードすることもできますが、
手動で取得するのはかなり面倒なので最後の手段とすべきでしょう。
</p></li>

<li><p>
そして '<i>/usr/pkgsrc/editors/joe</i>' ディレクトリーにて、
<pre>
	make
</pre>
と入力します。ソースと、(もしあれば)パッチ、
コンパイルに必要な他のソフトウェアが
あなたのシステムにダウンロードされるでしょう。
</li>
<li><p>
ソフトウェアがダウンロードされると、パッチが適用された上で、
コンパイルされます。それにかかる時間はあなたのコンピューターによりますし、
そのソフトウェアが依存している他のパッケージの数にもよります。
</li>
<li><p>
これが完了し、どんなエラーも表示されなければ、
ダイアルアップ接続を切断してもかまいません(電話代は節約しましょう!)。
</li>
<li><p>
次は新たにコンパイルされたプログラムを、
実際にあなたのシステムにインストールします。
'<i>/usr/pkgsrc/editors/joe</i>' ディレクトリーにいる間に
(もしくはインストールのためのディレクトリーで)
<pre>
	make install
</pre>
と入力してください。
</li>
<li><p>
そのソフトウェアは今まさにインストールされ、
使用できるようにセットアップされたことになります。

もうこれ以上コンパイル後の作業ファイルは必要とされないので、
<pre>
	make clean
</pre>
と入力し作業ファイルを削除してしまってもかまいません。

もし、プログラムをコンパイルするときに、
依存関係により他のpackagesがコンパイル/インストールされたならば、
それらも次のコマンドにより、きちんと削除することができます。
<pre>
	make clean-depends
</pre>
</li>
</ol>

<h3><font color="#8080ff">
	利用することができるNetBSD パッケージコレクションの見つけ方
</font></h3>
<p>
コレクション中にどんなパッケージがあるのかを知る、もっとも良い方法は、
pkgsrc の一番上のディレクトリー(これは通常 /usr/pkgsrc でしょう)に移動し、
"make readme" と入力することです。

これにより、README.html というファイルが pkgsrc の一番上のディレクトリー、
またすべてのカテゴリーとパッケージディレクトリーに作成され、
lynx (pkgsrc/www/lynx) や Mozilla (pkgsrc/www/mozilla) や Communicator
のようなブラウザーを使うことで、
パッケージの機能に付いての短い(一行)コメントと、
詳細な説明へのポインターを見ることができるようになります。

これはまた次のURLでも見ることができます。

<pre>	<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html">ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html</a>(<a
href="ftp://ftp.jp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html"
>日本でのミラー</a>)</pre>
<p>

コレクション中のパッケージを見つける別の方法としては、
pkgsrc の一番上のディレクトリーに移動して、
"make index" と入力するというのもあります。

これは、"make print-index | more" で見ることができる
pksrc/INDEX を作成します。

また、パッケージやキーワードを "make search key=&lt;somekeyword&gt;" により
検索することもできます。


<h3><font color="#8080ff">その他のNetBSD
パッケージコレクション用コマンド</font></h3>

<p>
NetBSD パッケージコレクションを使う上で、役に立つその他のコマンドは

<ul>
<li>
<tt>make deinstall</tt> - システムにインストールされたパッケージを削除します。
上記手順の逆を行います。
</li>
<li>
<tt>pkg_info</tt> - システムにインストールされたパッケージを表示します
(パッケージのインストールによりデータベースに追加されています)。
</li>
</ul>

<p>
NetBSD パッケージコレクションについての、より詳細な、役立つ情報は
NetBSD サイトで入手できます。
いくつかのリンクを挙げておきます。

<ul>
<li>
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/Packages.txt">
	Complete documentation on the NetBSD Package System</a>
(<a href="ftp://ftp.jp.netbsd.org/pub/NetBSD/packages/pkgsrc/Packages.txt">
	日本でのミラー</a>)
</li>
<li>
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README">
	Welcome to NetBSD Packages Collection</a>
(<a href="ftp://ftp.jp.netbsd.org/pub/NetBSD/packages/pkgsrc/README">
	日本でのミラー</a>)
</li>
<li>
<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html">
	Web page front end to the NetBSD Packages Collection</a>
(<a href="ftp://ftp.jp.netbsd.org/pub/NetBSD/packages/pkgsrc/README.html">
	日本でのミラー</a>)
</li>
<li>
<a href="../../Changes/pkg-changes.html">
	Changes to the NetBSD Packages Collection</a>
</li>
</ul>

<p align=right>
<font size="-1">Many thanks to <a href="http://www.ewor.demon.co.uk/unix/netbsd/packages.html">Simon Rowe's NetBSD pages</a></font>

<hr>
<a href="index.html"><em>NetBSD ドキュメンテーション: ソフトウェア</em>に戻る</a>

<hr>
<table width="100%"><tr>
  <td>
    <table><tr>
      <td>
	<a href="../../index.html">
	<img src="../../images/NetBSD-banner.gif" alt="NetBSD&nbsp;Home"></a>
      </td><td>
	<a href="../../index.html">ホームページ</a>
      </td>
    </tr></table>
  </td><td>
    <table><tr>
      <td>
	<a href="../index.html">
	<img src="../../images/NetBSD-banner.gif"
	alt="NetBSD&nbsp;Documentation"></a>
      </td><td>
	<a href="../index.html">NetBSD ドキュメンテーション</a>
      </td>
    </tr></table>
  </td>
</tr></table>

<hr>
<address>
  www@JP.NetBSD.ORG<br>
  $NetBSD: packages.html,v 1.8 1999/04/24 04:34:14 kenn Exp $<br>
  <a href="../Misc/disclaimer.html">Copyright &copy; 1997, 1998
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
</address>

</body>
</html>
