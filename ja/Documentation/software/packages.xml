<?xml version="1.0"?>
<!DOCTYPE webpage
  PUBLIC "-//Norman Walsh//DTD Website V2.2//EN"
	 "http://docbook.sourceforge.net/release/website/2.2/website.dtd">

<webpage id="pkgsrc-home">
<config param="desc" value="pkgsrc"/>
<config param="cvstag" value="$NetBSD: packages.xml,v 1.3 2003/04/12 15:56:51 grant Exp $"/>
<config param="rcsdate" value="$Date: 2003/04/12 15:56:51 $"/>

<!-- The top part of the html output comes from the pkgsrc-home XSL
     template -->
<pkgsrc-home>

<sect1 id="why-pkgsrc">
<title id="why-pkgsrc.title">Why pkgsrc?</title>

<para>
pkgsrc provides the following key features:
</para>

<itemizedlist>
<listitem>It provides easy building of software from source as well as the
  creation and installation of binary packages. The source and latest
  patches are retrieved from a master or mirror download site, checksum
  verified, then built on your system.</listitem>
<listitem>All packages are installed in a consistent directory tree,
  including binaries, libraries, man pages and other
  documentation.</listitem>
<listitem>Package dependencies, including when performing package updates,
  are handled automatically. The configuration files of various
  packages are handled automatically during updates, so local changes
  are preserved.</listitem>
<listitem>Like NetBSD, <emphasis>pkgsrc</emphasis> is designed with
  portability in mind and consists of highly portable code. This allows
  the greatest speed of development when porting to new a platform. This
  portability also ensures that pkgsrc is <emphasis>consistent across all
  platforms</emphasis>.</listitem>
<listitem>The installation prefix, acceptable software licenses,
  international encryption requirements and build-time options for a
  large number of packages are all set in a simple, central
  <link linkend="mk.conf">configuration file</link>.</listitem>
<listitem>The entire source (not including the distribution files) is
  freely available under a BSD license, so you may extend and adapt
  <emphasis>pkgsrc</emphasis> to your needs. Support for local packages
  and patches is available right out of the box, so you can configure it
  for your environment.</listitem>
</itemizedlist>
</sect1>

<sect1 id="platforms">
<title id="platforms.title">Supported platforms</title>

<itemizedlist>
  <listitem>Darwin (MacOS X)</listitem>
  <listitem>FreeBSD</listitem>
  <listitem>IRIX</listitem>
  <listitem>Linux</listitem>
  <listitem>OpenBSD</listitem>
  <listitem>Solaris 2.x</listitem>
</itemizedlist>

<para>
pkgsrc consists of both a <link linkend="bootstrap"
endterm="bootstrap.title"/> and a
<link linkend="binary" endterm="binary.title"/> for these operating
systems. After retrieving the required source or binaries, you can be
up and running with pkgsrc in just minutes!
</para>
</sect1>

<sect1 id="available-packages">
<title id="available-packages.title">Available packages</title>

<itemizedlist>
  <listitem><ulink url="../../Changes/pkg-changes.html">Latest pkgsrc changes</ulink></listitem>
  <listitem><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README.html">Available
    packages indexed by category</ulink></listitem>
  <listitem><ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README-all.html">Complete
    list of all packages</ulink></listitem>
  <listitem><ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README-IPv6.html">List
    of IPv6-enabled packages</ulink></listitem>
</itemizedlist>

</sect1>

<sect1 id="docs">
<title id="docs.title">Documentation</title>

<itemizedlist>
  <listitem><ulink
    url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/Packages.txt">Complete
    pkgsrc documentation</ulink> (<ulink
    url="http://www.jp.NetBSD.org/ja/JP/Documentation/Packages/Packages.txt">Japanese</ulink>)</listitem>
  <listitem><ulink
url="http://man.NetBSD.org/man/packages+7+NetBSD-current">packages(7)</ulink>
    manual page, an introduction to pkgsrc</listitem>
</itemizedlist>

<!-- XXX wildly out of date, leave it out for now
<li><a href="pkg-growth.html">Packages system growth</a>.</li>
-->

</sect1>

<sect1 id="bootstrap">
<title id="bootstrap.title">Source distribution</title>

<para>
<emphasis>If you are using pkgsrc on NetBSD, you can skip to <link
linkend="setting_up_pkgsrc">Setting up The NetBSD Packages
Collection</link>.</emphasis>
</para>

<para>
For Operating Systems other than NetBSD, we provide the pkgsrc tools
in the form of a bootstrap kit which compiles the tools from source
(you may also choose to use the <link linkend="binary"
endterm="binary.title"/>, see below).
</para>

<para>
You can <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc.tar.gz">download
the bootstrap-pkgsrc tarball</ulink> or checkout the latest sources using
AnonCVS:
</para>

<screen>% cvs checkout othersrc/bootstrap-pkgsrc</screen>

<para>
(for setting up AnonCVS, see <ulink
url="../current/#using-anoncvs">Tracking NetBSD-current</ulink>).
</para>

<para>
After downloading and/or extracting the sources, installing the bootstrap
kit should be as simple as:
</para>

<screen># cd othersrc/bootstrap-pkgsrc
# ./bootstrap</screen>

<para>
This will use the defaults of <filename>/usr/pkg</filename> for the
<emphasis>prefix</emphasis> and <filename>/var/db/pkg</filename> for
the package database directory.  However, these can also be set using
command-line parameters (use <command>./bootstrap --help</command>
to see the available options).
</para>

<para>
Note that when using pkgsrc on a non-NetBSD system, use the
<command>bmake</command> command instead of <quote>make</quote> to run
the NetBSD make, which is required for correct pkgsrc operation. Simply
substitute <quote>bmake</quote> for <quote>make</quote> in pkgsrc
documentation.
</para>

</sect1>

<sect1 id="binary">
<title id="binary.title">Binary distribution</title>

<para>
Binary pkgsrc kits and an initial set of packages is available for:
</para>

<table>
  <title></title>
  <tgroup cols="4">
    <thead>
      <row>
	<entry>Platform</entry>
	<entry>Latest snapshot</entry>
	<entry>Binary kit</entry>
	<entry>Binary packages</entry>
      </row>
    </thead>
    <tbody>
      <row>
	<entry>Darwin 5.5/powerpc (MacOS X 10.1.5)</entry>
	<entry>20021209</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/schmonz/bootstrap-pkgsrc-Darwin-5.5-powerpc-20021209.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Darwin 6.2/powerpc (MacOS X 10.2.2)</entry>
	<entry>20021219</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Darwin-6.2-powerpc-20021219.tar.gz">binary kit</ulink></entry>
	<entry><ulink href="ftp://ftp.NetBSD.org/pub/NetBSD/misc/grant/pkgsrc/Darwin/6.2/powerpc/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>Darwin 6.3/powerpc (MacOS X 10.2.3)</entry>
	<entry>20030412</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Darwin-6.3-powerpc-20030412.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Debian GNU Linux/i386</entry>
	<entry>20030410</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Linux-2.4.20-debian-i386-20030410.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/jschauma/pkgsrc/Linux/i386/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>FreeBSD 3.5/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-3.5-STABLE-i386-20030411.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>FreeBSD 4.7/i386</entry>
	<entry>20021211</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-4.7-RELEASE-i386-20021211.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/grant/pkgsrc/FreeBSD/4.7-RELEASE/i386/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>FreeBSD 5.0/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-5.0-RELEASE-i386-20030411.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>IRIX 6.5 n32-bit ABI</entry>
	<entry>20030410</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-IRIX-6.5-mips-20030410.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/jschauma/pkgsrc/IRIX/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>IRIX 6.5 64-bit ABI</entry>
	<entry>20030225</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-IRIX64-6.5-mips-20030225.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/jschauma/pkgsrc/IRIX/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>OpenBSD 3.2/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-OpenBSD-3.2-i386-20030411.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Slackware Linux 8.1/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Linux-2.4.18-slackware-20030411.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Solaris 8/sparc</entry>
	<entry>20021219</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.8-sparc-20021219.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Solaris 8/i386</entry>
	<entry>20030330</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.8-i386-20030330.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Solaris 9/sparc</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.9-sparc-20030411.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/grant/pkgsrc/SunOS/5.9/sparc/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>Solaris 9/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.9-i386-20030411.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
    </tbody>
  </tgroup>
</table>

</sect1>

<sect1 id="precompiled">
<title id="precompiled.title">Installing binary packages</title>

<para>
A selection of precompiled binary packages for NetBSD 1.5.x and 1.6 are
available from <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/">/pub/NetBSD/packages</ulink>
on <ulink url="../../mirrors/">NetBSD FTP sites</ulink>.
</para>

<para>
The majority of users will probably find the <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README.html">browsable
web listing</ulink> most useful.
</para>

<para>
These can be installed either by downloading a package and its prerequisites 
to a local disk and running
</para>

<screen># pkg_add &lt;package&gt;</screen>

<para>
or directly by specifying the full URL as in:
</para>

<screen># pkg_add ftp://ftp.NetBSD.org/pub/NetBSD/packages/&lt;os_release&gt;/&lt;arch&gt;/&lt;type&gt;/&lt;package&gt;</screen>

<para>
Prerequisites will be automatically retrieved and installed if they are
available in the same remote directory.
</para>

<para>
Packages are installed by default into <filename>/usr/pkg</filename>.
You should ensure that <filename>/usr/pkg/bin</filename> and
<filename>/usr/pkg/sbin</filename> are in your PATH variable (best set
in <filename>/etc/csh.cshrc</filename>).
</para>

</sect1>

<sect1 id="setting_up_pkgsrc">
<title id="setting_up_pkgsrc.title">Setting up the NetBSD Packages Collection</title>

<para>
The NetBSD Packages Collection consists of a set
of Makefiles, brief descriptions, and any patches needed to ensure easy
compilation of third-party programs, sorted by category.
</para>

<para>
Installing pkgsrc will allow you to easily compile and install any of
the software contained in the collection.
</para>

<para>
There are several methods for obtaining pkgsrc:
</para>

<orderedlist>

<listitem>CD-ROM
<para>
If you have an official NetBSD CD-ROM it includes pkgsrc. Other CD
producers should have included it also. This should work fine,
though since pkgsrc is being continually updated it is usually
preferable to download the most recent copy from the 'net.
</para>
</listitem>

<listitem>sup
<para>
This is the recommended method. It takes longer to download initially,
but after that each time sup(1) is run it will download only the
updated files, and will automatically handle deleting old files.
The simplest way to setup sup is:
</para>

<para>
<itemizedlist>
<listitem>
<para>
Create the <filename>/etc/supfiles/coll.list</filename> file:
</para>

<screen>% mkdir /etc/supfiles /usr/sup
% cp /usr/share/examples/supfiles/<emphasis>serverhost</emphasis> /etc/supfiles/coll.list</screen>

<para>
(where <emphasis>serverhost</emphasis> is the 'nearest' host, or just
<quote>sup.NetBSD.org</quote>).
</para>
</listitem>

<listitem>
Edit <filename>/etc/supfiles/coll.list</filename>, and comment out (add a
'#' to the start) all lines except the block of
two lines that start <quote>current release=pkgsrc</quote>.
</listitem>
</itemizedlist>
</para>

<para>
From this point you can run sup to update pkgsrc with <command>sup -s
-v</command> (or just <command>sup -s</command> to avoid the verbose
output). sup can also be used to pull down the various NetBSD source
trees - see the lines in <filename>coll.list</filename> for details.
</para>
</listitem>

<listitem>FTP
<para>
This is the simplest method, though it does involve downloading the
complete pkgsrc tarball each time (currently over 15MB gzip'd).
</para>

<para>
<itemizedlist>
<listitem>
The NetBSD Package Collection is archived weekly, and stored as a 
gzip'd tar file on the NetBSD FTP server and its many mirrors.
Obtain it from the NetBSD site at <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-current/tar_files/pkgsrc.tar.gz"/>
or a close
<ulink url="../../mirrors/#ftp">mirror</ulink>.
</listitem>

<listitem>
Once you have downloaded the file onto your system, <command>su -</command>
to use root privileges. Copy the file to the <filename>/usr</filename>
directory on your system.
</listitem>

<listitem>
If you have extracted a previous pkgsrc.tar.gz ensure you
remove it first:
<para>
<screen># cd /usr; rm -rf pkgsrc</screen>
</para>
</listitem>

<listitem>
The file now need to be decompressed and untared into its new home,
<filename>/usr/pkgsrc</filename>:
<para>
<screen># cd /usr; tar -zxvpf pkgsrc.tar.gz</screen>
</para>
</listitem>

<listitem>
When you build a package from the collection it will by default
create a new directory tree <filename>/usr/pkg</filename> and install
itself there. You can alter this behavior, for example,
by adding <varname>LOCALBASE=/usr/local</varname> to
<filename>/etc/mk.conf</filename>.
</listitem>

<listitem>
You can get the files from mirror servers near your network.
Please copy <varname>MASTER_SITE_*</varname> for your country from
<filename>pkgsrc/mk/bsd.pkg.defaults.mk</filename> to
<filename>/etc/mk.conf</filename>
and remove <quote>#</quote> at the begining of the lines.
</listitem>
</itemizedlist>
</para>

</listitem>

<listitem>AnonCVS
<para>
There are two steps to this. You have to set it up once, and then
you can update it partially or completely at any time.
</para>

<para>
For setting it up, follow the first four steps of <ulink
url="../current/#using-anoncvs">Tracking NetBSD-current
with anoncvs</ulink>; the module you will want to check out is called
<quote>pkgsrc</quote> (no surprises here), and the default location is
<filename>/usr/pkgsrc</filename>, but any place will do.
</para>

<para>Updating is done by</para>
<screen>% cd /usr/pkgsrc
% cvs update -dP</screen>

<para>
If you just want to update part of it (not recommended because of
dependencies):</para>

<screen>% cvs update -dP category/package</screen>

<para>
If you're on a very low bandwidth line, you may want to add
<quote>-z5</quote> (or some other number from 1 to 9) to your command
line <emphasis>before</emphasis> the command (eg. <command>cvs -z5
update -dP</command>); this turns on compression of all data. Keep in
mind that this will put an extra load on the CVS server.
</para>
</listitem>

</orderedlist>

</sect1>

<sect1 id="using_pkgsrc">
<title id="using_pkgsrc.title">Using the NetBSD Packages Collection</title>

<orderedlist>

<listitem>
<para>
The <filename>/usr/pkgsrc</filename> directory now contains a set of
subdirectories, organized into categories. You can browse the online
index of packages, or run <command>make readme</command> from the
<filename>/usr/pkgsrc</filename> directory to build local README.html
files for all of the packages. You can look in the directories at the
<emphasis>README.html</emphasis> files for help on what each
utility/application is.
</para>
</listitem>

<listitem>
<para>
If you decide you want to install one of the applications, it is very easy.
For example to install the editor called Joe onto your system
(<pkg>editors/joe</pkg> is a small but powerful editor that mimics other
editors such as Wordstar or Emacs), first change directory as follows:
</para>
<screen>% cd /usr/pkgsrc/editors/joe</screen>
</listitem>

<listitem>
<para>
If you use a dialup connection to gain access to the internet, connect now,
so the software source can be retrieved for you.
</para>

<para>
If you have all files that you need in
<filename>/usr/pkgsrc/distfiles</filename>,
you don't need to connect. If the distfiles are on CD-ROM, you can
mount the CD-ROM on to /cdrom and add
<varname>DISTDIR=/cdrom/pkgsrc/distfiles</varname>
to <filename>/etc/mk.conf</filename>, or just type <quote>make
DISTDIR=/cdrom/pkgsrc/distfiles</quote>.
</para>

<para>
If a package depends on many other packages (such as kde), the build
process may alternate between periods of downloading source, and
compiling. To ensure you have all the source downloaded initially you
can run the command:
<screen>% make fetch-list | sh</screen>
which will output and run a set of shell commands to fetch the
necessary files into <filename>/usr/pkgsrc/distfiles</filename>.  You can
also manually download the necessary files into
<filename>/usr/pkgsrc/distfiles</filename>,
though since this is significantly more effort, it should probably only be
used as a last resort.
</para>
</listitem>

<listitem>
<para>
Now type
<screen>% make</screen>
from within the <filename>/usr/pkgsrc/editors/joe</filename> directory.
The sources and any patches, plus any software that the compilation of
the program requires will now be downloaded to your system. 
</para>
</listitem>

<listitem>
<para>
Once the software has download, any patches will be applied, then it will be
compiled for you. This may take some time depending on your computer, and
how many other packages the software depends on and their compile time.
</para>
</listitem>

<listitem>
<para>
Once this has completed, and you don't see any errors, you can hangup your
dialup connection (save the phone bill!).
</para>
</listitem>

<listitem>
<para>
The next stage is to actually install the newly compiled program onto your
system. Do this by entering:
<screen>% make install</screen>
while you are still in the <filename>/usr/pkgsrc/editors/joe</filename>
directory, (or the directory for whatever it is you are installing). 
</para>
</listitem>

<listitem>
<para>
That's it, the software should now be installed and setup for use. You can
enter:
<screen>% make clean</screen>
to remove the compiled files in the work directory, as you shouldn't need
them any more. If other packages were also added to your system
(dependencies) to allow your program to compile, you can tidy these up
also with the command:
<screen>% make clean-depends</screen>
</para>
</listitem>
</orderedlist>

</sect1>

<sect1 id="compiling-problems">
<title id="compiling-problems.title">Problems compiling packages</title>
<para>
The default resource limits on some ports are too small for certain
massive packages - if a compile fails with <quote>virtual memory
exhausted</quote>, please see the compiling FAQ entry on <ulink
url="compiling.html#unlimit">unlimit</ulink>.
</para>
</sect1>

<sect1 id="mk.conf">
<title id="mk.conf.title">What is /etc/mk.conf?</title>

<para>
<filename>/etc/mk.conf</filename> can be used to define certain variables
for the package system. It is not present by default, but can be created
when needed. Among the many values which can be set are:
</para>

<itemizedlist>
<listitem>
<varname>ACCEPTABLE_LICENSES=non-commercial-use fee-based-commercial-use</varname>
<para>
Inform the package system which licences are acceptable.
</para>
</listitem>

<listitem>
<varname>WRKOBJDIR=/usr/obj/pkg</varname>
<para>
Extract and build the packages in <filename>/usr/obj/pkg</filename>.
</para>
</listitem>

<listitem>
<varname>PACKAGES=${_PKGSRCDIR}/packages/${OS_VERSION}/${MACHINE_ARCH}</varname>
<para>
When binary packages are made, save them in an
<varname>OS_VERSION</varname> and <varname>MACHINE_ARCH</varname>
specific subdirectory.
</para>
</listitem>

<listitem>
<varname>USA_RESIDENT=NO</varname>
<para>
If <quote>NO</quote>, this is used by some programs to determine licence
authorisation. If <quote>YES</quote>, it is used by some programs to
determine license authorization.
</para>
</listitem>

<listitem>
<varname>USE_RSAREF2=NO</varname>
<para>
Whether or not to use RSAREF2, for example in <pkg>security/ssh</pkg>.
</para>
</listitem>

<listitem>
<varname>DEPENDS_TARGET=package</varname>
<para>
Automatically build and save binary packages on dependencies
</para>
</listitem>
</itemizedlist>

<para>
Also,
<ulink url="http://cvsweb.NetBSD.org/bsdweb.cgi/~checkout~/pkgsrc/mk/bsd.pkg.defaults.mk">/usr/pkgsrc/mk/bsd.pkg.defaults.mk</ulink>
gives the defaults which are used in pkgsrc.  This file can be used as a
guide to set values in <filename>/etc/mk.conf</filename> - it is only
necessary to set values where they differ from the defaults.
</para>
</sect1>

<sect1 id="searching_pkgsrc">
<title id="searching_pkgsrc.title">Finding out what is available in the NetBSD Packages Collection</title>
<para>
The best way to find out what packages are in the collection is to
move to the top-level pkgsrc directory (this will usually be
<filename>/usr/pkgsrc</filename>), and type <command>make
readme</command>. This will create a file
called README.html in the top-level pkgsrc directory, and also in
all category and package directories.  You can then see what packages
are available, along with a short (one-line) comment about the
function of the package, and a pointer to a fuller description, by
using a browser like lynx (see <pkg>www/lynx</pkg>) or
something like Mozilla (<pkg>www/mozilla</pkg>), or
Netscape Communicator (<pkg>www/communicator</pkg>). See also the <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README.html">list
of packages</ulink> and the <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README-all.html">full
list</ulink> (long!).
</para>

<para>
Another way to find out what packages are in the collection is to
move to the top-level pkgsrc directory and type <command>make
index</command>. This will create <filename>pkgsrc/INDEX</filename> which
can be watched via <command>make print-index | more</command>.
You can also search for particular packages or keywords via
<command>make search key=&lt;somekeyword&gt;</command>.
</para>
</sect1>

<sect1 id="vulnerabilities">
<title id="vulnerabilities.title">Checking for security vulnerabilities in installed packages</title>
<para>
The NetBSD Security-Officer and Packages Groups maintain a list of
known security vulnerabilities to packages which are (or have been)
included in pkgsrc.  The list is available from the NetBSD
FTP site at <ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/distfiles/vulnerabilities"/>.
</para>

<para>
Through <pkg>security/audit-packages</pkg>, this list can be downloaded
automatically, and a security audit of all packages installed on a system
can take place.
</para>

<para>
There are two components to <pkg>security/audit-packages</pkg>.  The first
component, <quote>download-vulnerability-list</quote>, is for downloading
the list of vulnerabilities from the NetBSD FTP site.  The second
component, <quote>audit-packages</quote>, checks to see if any of your
installed packages are vulnerable.  If a package is vulnerable, you
will see output similar to the following:
</para>

<screen>Package samba-2.0.9 has a local-root-shell vulnerability, see
http://www.samba.org/samba/whatsnew/macroexploit.html</screen>

<para>
One can set up <pkg>security/audit-packages</pkg> to download the
<ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/distfiles/vulnerabilities">vulnerabilities</ulink>
file daily, and include a package audit in the daily security script.
Details on this are located in the <ulink
url="http://cvsweb.NetBSD.org/bsdweb.cgi/pkgsrc/security/audit-packages/MESSAGE?rev=HEAD&amp;content-type=text/x-cvsweb-markup">MESSAGE</ulink>
file for <pkg>security/audit-packages</pkg>.
</para>
</sect1>

<sect1 id="pkg_versions">
<title id="pkg_versions.title">Finding if newer versions of your installed packages are in pkgsrc</title>
<para>
To find out if newer versions of your installed packages are available
in the NetBSD Packages Collection, you should first install
<pkg>pkgtools/pkglint</pkg>.  After that, if there is a newer
version available, running <command>lintpkgsrc -i</command> will tell
you about it.
</para>

<para>
For example, if you have <pkg>shells/tcsh</pkg> version 6.09.00
installed, and the version in pkgsrc at that point is 6.10.00,
lintpkgsrc -i will tell you the following:
</para>
<screen>Version mismatch: 'tcsh' 6.09.00 vs 6.10.00</screen>
</sect1>

<sect1 id="other_commands">
<title id="other_commands.title">Other Commands for the NetBSD Packages Collection</title>
<para>
Other useful command to use with the NetBSD Package Collection are shown
below.
</para>

<itemizedlist>
<listitem>
<command>make deinstall</command>
<para>
removes an installed package from your system. The
reverse to the procedure performed above. Change to the appropriate pkgsrc
directory before use.
</para>
</listitem>

<listitem>
<command>pkg_delete</command>
<para>
removes a pkg by name, regardless of your current working directory.
</para>
</listitem>

<listitem>
<command>pkg_info</command>
<para>
shows what packages are installed on your system, as any that you add
are kept track of.
</para>
</listitem>
</itemizedlist>
</sect1>

<sect1 id="pkgsrc_admin">
<title id="pkgsrc_admin.title">pkgsrc maintenance tools</title>
<para>
There are a number of additional tools in pkgsrc that provide
additional features for maintaining a pkgsrc system. Some of the
more frequently used are:
</para>

<itemizedlist>
<listitem>
<command>cpuflags</command>
<para>
<pkg>devel/cpuflags</pkg> will determine the best compiler flags to
optimise code for your current CPU and compiler.
</para>
</listitem>

<listitem>
<command>lintpkgsrc</command>
<para>
part of <pkg>pkgtools/pkglint</pkg>, lintpkgsrc allows you to check
installed packages against the versions in your local pkgsrc tree, plus
delete old binary packages and obsolete distfiles.
</para>
</listitem>

<listitem>
<command>pkgchk</command>
<para>
<pkg>pkgtools/pkg_chk</pkg> checks installed packages against the
versions in your local pkgsrc tree and/or a config file which can
list desired packages by hostname, architecture and various other
parameters.
</para>
</listitem>

<listitem>
<command>pkg_comp</command>
<para>
<pkg>pkgtools/pkg_comp</pkg> allows you to compile packages inside a
chroot jail. This is useful, for example, to build packages for other
versions of NetBSD than the installed one, or for debugging purposes.
</para>
</listitem>
</itemizedlist>
</sect1>

<sect1 id="other">
<title id="other.title">Other information</title>

<itemizedlist>
<listitem><ulink url="pkg-wildcards.html">Wildcards and the NetBSD
  Packages Collection</ulink></listitem>
<listitem>The <ulink
  url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README">pkgsrc
  README</ulink></listitem>
<listitem>A <ulink url="pkgviews.pdf">Paper describing Package
  Views</ulink></listitem>
</itemizedlist>

<para>
More detailed and helpful information about the NetBSD Packages Collection
is available via the
<ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/Packages.txt">Packages.txt</ulink>
file contained within pkgsrc.
</para>

<para>
Many thanks to Simon Rowe's NetBSD pages
</para>
</sect1>

</pkgsrc-home>

</webpage>
