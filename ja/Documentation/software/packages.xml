<?xml version="1.0"?>
<!DOCTYPE webpage
  PUBLIC "-//Norman Walsh//DTD Website V2.2//EN"
	 "http://docbook.sourceforge.net/release/website/2.2/website.dtd">

<webpage id="pkgsrc-home">
<config param="desc" value="pkgsrc"/>
<config param="cvstag" value="$NetBSD: packages.xml,v 1.67 2005/02/02 01:32:11 jschauma Exp $"/>
<config param="rcsdate" value="$Date: 2005/02/02 01:32:11 $"/>

<!-- The top part of the html output comes from the pkgsrc-home XSL
     template -->
<pkgsrc-home>

<sect1 id="available-packages">
<title id="available-packages.title">Available packages</title>

<itemizedlist>
  <listitem><ulink url="../../Changes/pkg-changes.html">Latest pkgsrc changes</ulink></listitem>
  <listitem><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README.html">Available
    packages indexed by category</ulink></listitem>
  <listitem><ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README-all.html">Complete
    list of all packages</ulink></listitem>
  <listitem><ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README-IPv6.html">List
    of IPv6-enabled packages</ulink></listitem>
</itemizedlist>
</sect1>

<sect1 id="docs">
<title id="docs.title">Documentation</title>

<itemizedlist>
  <listitem><ulink
    url="../pkgsrc/">Complete pkgsrc documentation</ulink>
    <!-- ja documentation needs to be converted to DocBook
    (<ulink
    url="http://www.jp.NetBSD.org/ja/JP/Documentation/Packages/Packages.txt">Japanese</ulink>) -->
  </listitem>
  <listitem><ulink
url="http://man.NetBSD.org/man/packages+7+NetBSD-current">packages(7)</ulink>
    manual page, an introduction to pkgsrc</listitem>
</itemizedlist>
<!-- XXX wildly out of date, leave it out for now
<li><a href="pkg-growth.html">Packages system growth</a>.</li>
-->
</sect1>

<sect1 id="why-pkgsrc">
<title id="why-pkgsrc.title">Why pkgsrc?</title>

<para>
pkgsrc provides the following key features:
</para>

<itemizedlist>
<listitem>Easy building of software from source as well as the creation
  and installation of binary packages. The source and latest
  patches are retrieved from a master or mirror download site, checksum
  verified, then built on your system. Support for binary-only
  distributions is available for both native platforms and NetBSD
  emulated platforms.</listitem>
<listitem>All packages are installed in a consistent directory tree,
  including binaries, libraries, man pages and other
  documentation.</listitem>
<listitem>Package dependencies, including when performing package updates,
  are handled automatically. The configuration files of various
  packages are handled automatically during updates, so local changes
  are preserved.</listitem>
<listitem>Like NetBSD, pkgsrc is designed with portability in mind and
  consists of highly portable code. This allows the greatest speed of
  development when porting to new a platform. This portability also
  ensures that pkgsrc is <emphasis>consistent across all
  platforms</emphasis>.</listitem>
<listitem>The installation prefix, acceptable software licenses,
  international encryption requirements and build-time options for a
  large number of packages are all set in a simple, central
  <link linkend="mk.conf">configuration file</link>.</listitem>
<listitem>The entire source (not including the distribution files) is
  freely available under a BSD license, so you may extend and adapt
  pkgsrc to your needs. Support for local packages and patches is
  available right out of the box, so you can configure it specifically
  for your environment.</listitem>
</itemizedlist>
</sect1>

<sect1 id="platforms">
<title id="platforms.title">Supported platforms</title>

<para>
pkgsrc consists of both a <link linkend="bootstrap"
endterm="bootstrap.title"/> and a
<link linkend="binarydist" endterm="binarydist.title"/> for these operating
systems. After retrieving the required source or binaries, you can be
up and running with pkgsrc in just minutes!
</para>

<table id="supported-platforms">
  <title>Platforms supported by pkgsrc</title>
  <tgroup cols = "2">
    <thead>
      <row>
        <entry>Platform</entry>
        <entry>Date Support Added</entry>
      </row>
    </thead>
    <tbody>
      <row>
        <entry><ulink url="../../">NetBSD</ulink></entry>
        <entry align="center">Aug 1997</entry>
      </row>
      <row>
        <entry><ulink url="http://wwws.sun.com/software/solaris/">Solaris</ulink></entry>
        <entry align="center">Mar 1999</entry>
      </row>
      <row>
        <entry><ulink url="http://www.kernel.org">Linux</ulink></entry>
        <entry align="center">Jun 1999</entry>
      </row>
      <row>
        <entry>
          <ulink url="http://developer.apple.com/darwin/">Darwin</ulink>
          (<ulink url="http://developer.apple.com/macosx/">Mac OS X</ulink>)
        </entry>
        <entry align="center">Oct 2001</entry>
      </row>
      <row>
        <entry><ulink url="http://www.freebsd.org">FreeBSD</ulink></entry>
        <entry align="center">Nov 2002</entry>
      </row>
      <row>
        <entry><ulink url="http://www.openbsd.org">OpenBSD</ulink></entry>
        <entry align="center">Nov 2002</entry>
      </row>
      <row>
        <entry><ulink url="http://www.sgi.com/software/irix/">IRIX</ulink></entry>
        <entry align="center">Dec 2002</entry>
      </row>
      <row>
        <entry>BSD/OS</entry>
        <entry align="center">Dec 2003</entry>
      </row>
      <row>
        <entry><ulink url="http://www-1.ibm.com/servers/aix/">AIX</ulink></entry>
        <entry align="center">Dec 2003</entry>
      </row>
      <row>
        <entry>
          <ulink url="http://www.microsoft.com/windows/sfu/">Interix</ulink>
          (Microsoft Windows Services for Unix)
        </entry>
        <entry align="center">Mar 2004</entry>
      </row>
      <row>
        <entry><ulink url="http://www.dragonflybsd.org/">DragonFlyBSD</ulink></entry>
        <entry align="center">Oct 2004</entry>
      </row>
      <row>
        <entry><ulink url="http://www.tru64.org//">OSF/1</ulink></entry>
        <entry align="center">Nov 2004</entry>
      </row>
    </tbody>
  </tgroup>
</table>
</sect1>

<sect1 id="getting-started">
<title id="getting-started.title">Getting started</title>

<para>
If you are using NetBSD, you can get started with pkgsrc right
away. Skip ahead to <link linkend="binary" endterm="binary.title"/>.
</para>
</sect1>

<sect1 id="binarydist">
<title id="binarydist.title">Binary distribution</title>
<para>
We provide a bootstrap kit in both source and binary form for other
platforms, consisting of the pkg administration tools and other
tools required to use pkgsrc and build packages.
</para>

<note>
Older binary snapshots are available in the
<ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/archive/">bootstrap-pkgsrc/archive</ulink>
directory on ftp.NetBSD.org.
</note>

<table id="binary-kits">
  <title>Binary kits and available packages</title>
  <tgroup cols="4">
    <thead>
      <row>
	<entry>Platform</entry>
	<entry>Latest snapshot</entry>
	<entry>Binary kit</entry>
	<entry>Binary packages</entry>
      </row>
    </thead>
    <tbody>
      <row>
	<entry>Darwin 5.5/powerpc (Mac OS X 10.1.5)</entry>
	<entry>20021209</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/schmonz/bootstrap-pkgsrc-Darwin-5.5-powerpc-20021209.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Darwin 6.2/powerpc (Mac OS X 10.2.2)</entry>
	<entry>20021219</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Darwin-6.2-powerpc-20021219.tar.gz">binary kit</ulink></entry>
      </row>
      <row>
	<entry>Darwin 6.3/powerpc (Mac OS X 10.2.3)</entry>
	<entry>20030412</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Darwin-6.3-powerpc-20030412.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Darwin 6.6/powerpc (Mac OS X 10.2.6)</entry>
	<entry>20030623</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Darwin-6.6-powerpc-20030623.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Darwin 7.0/powerpc (Mac OS X 10.3.0)</entry>
	<entry>20031103</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Darwin-7.0.0-powerpc-20031103.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Darwin 7.3/powerpc (Mac OS X 10.3.3)</entry>
	<entry>20040418</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Darwin-7.3.0-powerpc-20040418.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/mbw/pkgsrc/Darwin/7.3.0/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>Debian GNU Linux/i386</entry>
	<entry>20031023</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Linux-2.4.22-debian-i386-20031023.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/jschauma/pkgsrc/Linux/2.4.25/i386/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>FreeBSD 3.5/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-3.5-STABLE-i386-20030411.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>FreeBSD 4.7/i386</entry>
	<entry>20021211</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-4.7-RELEASE-i386-20021211.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>FreeBSD 5.0/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-5.0-RELEASE-i386-20030411.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>FreeBSD 5.1/i386</entry>
	<entry>20030630</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-5.1-RELEASE-i386-20030630.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>FreeBSD 5.2.1/i386</entry>
	<entry>20040227</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-5.2.1-RELEASE-i386-20040227.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>FreeBSD 5.3/i386</entry>
	<entry>20050119</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-5.3-RELEASE-i386-20050119.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Interix 3.5</entry>
	<entry>20050105</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Interix-3.5-i386-20050105.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/pkgsrc/packages/Interix-3.5/i386/current/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>IRIX 6.5 n32-bit ABI</entry>
	<entry>20040911</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-IRIX-6.5-mips-20040911.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/pkgsrc/packages/IRIX-6.5/n32/pkgsrc-2004Q4/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>IRIX 6.5 64-bit ABI</entry>
	<entry>20040912</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-IRIX64-6.5-mips-20040912.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/pkgsrc/packages/IRIX-6.5/64/pkgsrc-2004Q4/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>OpenBSD 3.2/i386</entry>
	<entry>20030417</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-OpenBSD-3.2-i386-20030417.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>OpenBSD 3.5/i386</entry>
	<entry>20040507</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-OpenBSD-3.5-i386-20040703.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Slackware Linux 8.1/i386</entry>
	<entry>20030417</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Linux-2.4.18-slackware-20030417.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Slackware Linux 9/i386</entry>
	<entry>20031023</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Linux-2.4.22-i386-slackware9-20040703.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Solaris 8/sparc</entry>
	<entry>20030701</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.8-sparc-20030701.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Solaris 8/i386</entry>
	<entry>20030330</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.8-i386-20030330.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Solaris 9/sparc</entry>
	<entry>20040110</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.9-sparc-20040704.tar.gz">binary kit</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/pkgsrc/packages/SunOS-5.9/sparc/">binary packages</ulink></entry>
      </row>
      <row>
	<entry>Solaris 9/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.9-i386-20030411.tar.gz">binary kit</ulink></entry>
	<entry></entry>
      </row>
    </tbody>
  </tgroup>
</table>

<para>
Simply download the binary kit for your platform, and extract it into
<filename>/</filename> e.g.
</para>

<screen><prompt>#</prompt> <userinput>cd /</userinput>
<prompt>#</prompt> <userinput>gzip -c -d /tmp/bootstrap-pkgsrc-SunOS-5.9-sparc-20031023.tar.gz \
  | tar -xpf -</userinput></screen>

<para>
Of course, as with any binary distributions, you should verify the
checksum against the <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/SUM">SUM</ulink>
or <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/CKSUM">CKSUM</ulink>
file and inspect the contents before extracting it.
</para>
</sect1>

<sect1 id="bootstrap">
<title id="bootstrap.title">Source distribution</title>

<para>
You can <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc.tar.gz">download
the pkgsrc tarball</ulink> (updated weekly) or checkout the latest
sources using AnonCVS:
</para>

<screen><prompt>#</prompt> <userinput>cvs checkout -P pkgsrc</userinput></screen>

<para>
(for setting up AnonCVS, see <ulink
url="../current/#using-anoncvs">Tracking NetBSD-current</ulink>).
</para>

<para>
After downloading and/or extracting the sources, installing the bootstrap
kit should be as simple as:
</para>

<screen><prompt>#</prompt> <userinput>cd pkgsrc/bootstrap</userinput>
<prompt>#</prompt> <userinput>./bootstrap</userinput></screen>

<para>
This will use the defaults of <filename>/usr/pkg</filename> for the
<emphasis>prefix</emphasis> and <filename>/var/db/pkg</filename> for
the package database directory.  However, these can also be set using
command-line parameters (use <command>./bootstrap --help</command>
to see the available options).
</para>

<para>
Note that when using pkgsrc on a non-NetBSD system, use the
<command>bmake</command> command instead of <quote>make</quote> to run
the NetBSD make, which is required for correct pkgsrc operation. Simply
substitute <quote>bmake</quote> for <quote>make</quote> in pkgsrc
documentation.
</para>
</sect1>

<sect1 id="binary">
<title id="binary.title">Installing packages</title>

<para>
A selection of precompiled binary packages for NetBSD 1.5.x and 1.6.x is
available from <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/">/pub/NetBSD/packages</ulink>
on <ulink url="../../mirrors/">NetBSD FTP sites</ulink>.
</para>

<para>
The majority of users will find the <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README.html">browsable
web listing</ulink> most useful.
</para>

<para>
Packages can be installed either by downloading a package and its
prerequisites to a local disk and running:
</para>

<screen><prompt>#</prompt> <userinput>pkg_add &lt;package&gt;</userinput></screen>

<para>
or directly by specifying the full URL as in:
</para>

<screen><prompt>#</prompt> <userinput>pkg_add ftp://ftp.NetBSD.org/pub/NetBSD/packages/&lt;os_release&gt;/&lt;arch&gt;/&lt;type&gt;/&lt;package&gt;</userinput></screen>

<para>
Prerequisites will be automatically retrieved and installed if they are
available in the same remote directory.
</para>

<para>
Packages are installed by default into <filename>/usr/pkg</filename>.
You should ensure that <filename>/usr/pkg/bin</filename> and
<filename>/usr/pkg/sbin</filename> are in your PATH variable (best set
in <filename>/etc/csh.cshrc</filename>).
</para>

</sect1>

<sect1 id="using-pkgsrc">
<title id="using-pkgsrc.title">Using pkgsrc</title>

<para>
The NetBSD Packages Collection consists of a set of Makefiles, brief
descriptions, and any patches needed to ensure easy compilation of
third-party programs.
</para>

<para>
Installing pkgsrc will allow you to easily compile and install any of
the software contained in the collection.
</para>

<para>
There are several methods for obtaining pkgsrc, including <ulink
url="../../mirrors/#anoncvs">AnonCVS</ulink> and <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc.tar.gz">FTP</ulink>.
More details can be found in the full <ulink url="../pkgsrc/">pkgsrc
documentation</ulink>.
</para>

</sect1>

<sect1 id="source">
<title id="source.title">Building packages from source</title>

<para>
After obtaining pkgsrc, the <filename>/usr/pkgsrc</filename> directory
now contains a set of packages, organized into categories. You can browse
the online index of packages, or run <command>make readme</command>
from the <filename>/usr/pkgsrc</filename> directory to build local
README.html files for all packages, viewable with any web browser such as
<pkg>www/lynx</pkg> or <pkg>www/mozilla</pkg>.
</para>

<para>
The default <emphasis>prefix</emphasis> for installed packages is
<filename>/usr/pkg</filename>. If you wish to change this, you should
do so by setting <varname>LOCALBASE</varname> in
<filename>/etc/mk.conf</filename> (<link linkend="mk.conf"
endterm="mk.conf.title"/>). You should not try to use multiple
different <varname>LOCALBASE</varname> definitions on the same system
(inside a chroot is an exception).
</para>

<orderedlist>
<listitem>
<para>
Installing packages is quite easy. For example, to install the editor
called Joe onto your system (<pkg>editors/joe</pkg> is a small but
powerful editor that mimics other editors such as Wordstar or Emacs),
first change directory as follows:
</para>
<screen><prompt>%</prompt> <userinput>cd /usr/pkgsrc/editors/joe</userinput></screen>
</listitem>

<listitem>
<para>
If you use a dialup connection to gain access to the internet, connect now,
so the software source can be retrieved for you.
</para>

<para>
If you have all files that you need in
<filename>/usr/pkgsrc/distfiles</filename>,
you don't need to connect. If the distfiles are on CD-ROM, you can
mount the CD-ROM on <filename>/cdrom</filename> and add:
<screen>DISTDIR=/cdrom/pkgsrc/distfiles</screen>
to <filename>/etc/mk.conf</filename>.
</para>

<para>
If a package depends on many other packages (such as
<pkg>x11/kde3</pkg>), the build process may alternate between periods of
downloading source, and compiling. To ensure you have all the source
downloaded initially you can run the command:
<screen><prompt>%</prompt> <userinput>make fetch-list | sh</userinput></screen>
which will output and run a set of shell commands to fetch the
necessary files into <filename>/usr/pkgsrc/distfiles</filename>.  You can
also choose to download the files into
<filename>/usr/pkgsrc/distfiles</filename> manually.
</para>

<para>
You can retrieve the files from mirror servers near your network.
just copy the <varname>MASTER_SITE_*</varname> definitions for your
country from <filename>pkgsrc/mk/bsd.pkg.defaults.mk</filename> to
<filename>/etc/mk.conf</filename>.
</para>
</listitem>

<listitem>
<para>
Now run
<screen><prompt>%</prompt> <userinput>make</userinput></screen>
from within the <filename>/usr/pkgsrc/editors/joe</filename> directory.
The sources and any patches, plus any software that the compilation of
the program requires will now be downloaded to your system. 
</para>
</listitem>

<listitem>
<para>
Once the software has downloaded, any patches will be applied, then it
will be compiled for you. This may take some time depending on your
computer, and how many other packages the software depends on and their
compile time.
</para>
</listitem>

<listitem>
<para>
The next stage is to actually install the newly compiled program onto your
system. Do this by entering:
<screen><prompt>%</prompt> <userinput>make install</userinput></screen>
while you are still in the <filename>/usr/pkgsrc/editors/joe</filename>
directory, (or the directory for whatever it is you are installing). 
</para>
</listitem>

<listitem>
<para>
That's it, the software should now be installed and setup for use. You can
enter:
<screen><prompt>%</prompt> <userinput>make clean</userinput></screen>
to remove the compiled files in the work directory, as you shouldn't need
them any more. If other packages were also added to your system
(dependencies) to allow your program to compile, you can tidy these up
also with the command:
<screen><prompt>%</prompt> <userinput>make clean-depends</userinput></screen>
</para>
</listitem>
</orderedlist>

</sect1>

<sect1 id="mk.conf">
<title id="mk.conf.title">What is /etc/mk.conf?</title>

<para>
<filename>/etc/mk.conf</filename> can be used to define certain variables
for the package system. It is not present by default, but can be created
when needed. Among the many values which can be set are:
</para>

<itemizedlist>
<listitem>
<varname>LOCALBASE=/local</varname>
<para>
Defines the <emphasis>prefix</emphasis> used by pkgsrc, the default is
<filename>/usr/pkg</filename>. This should not be changed on a system
which is already using pkgsrc.
</para>
</listitem>

<listitem>
<varname>ACCEPTABLE_LICENSES=non-commercial-use fee-based-commercial-use</varname>
<para>
Inform the package system which licences are acceptable.
</para>
</listitem>

<listitem>
<varname>WRKOBJDIR=/usr/obj/pkg</varname>
<para>
Extract and build the packages in <filename>/usr/obj/pkg</filename>.
</para>
</listitem>

<listitem>
<varname>PACKAGES=${_PKGSRCDIR}/packages/${OS_VERSION}/${MACHINE_ARCH}</varname>
<para>
When binary packages are made, save them in an
<varname>OS_VERSION</varname> and <varname>MACHINE_ARCH</varname>
specific subdirectory.
</para>
</listitem>

<listitem>
<varname>USA_RESIDENT=NO</varname>
<para>
If <quote>NO</quote>, this is used by some programs to determine licence
authorisation. If <quote>YES</quote>, it is used by some programs to
determine license authorization.
</para>
</listitem>

<listitem>
<varname>USE_RSAREF2=NO</varname>
<para>
Whether or not to use RSAREF2, for example in <pkg>security/ssh</pkg>.
</para>
</listitem>

<listitem>
<varname>DEPENDS_TARGET=package</varname>
<para>
Automatically build and save binary packages on dependencies.
</para>
</listitem>
</itemizedlist>

<para>
Also,
<ulink url="http://cvsweb.NetBSD.org/bsdweb.cgi/~checkout~/pkgsrc/mk/bsd.pkg.defaults.mk">pkgsrc/mk/bsd.pkg.defaults.mk</ulink>
gives the defaults which are used in pkgsrc.  This file can be used as a
guide to set values in <filename>/etc/mk.conf</filename> - it is only
necessary to set values where they differ from the defaults.
</para>
</sect1>

<sect1 id="vulnerabilities">
<title id="vulnerabilities.title">Checking for security vulnerabilities in installed packages</title>
<para>
The NetBSD Security-Officer and Packages Groups maintain a list of
known security vulnerabilities to packages which are (or have been)
included in pkgsrc.  The list is available from the NetBSD
FTP site at <ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/distfiles/vulnerabilities"/>.
</para>

<para>
Through <pkg>security/audit-packages</pkg>, this list can be downloaded
automatically, and a security audit of all packages installed on a system
can take place.
</para>

<para>
There are two components to <pkg>security/audit-packages</pkg>.  The first
component, <quote>download-vulnerability-list</quote>, is for downloading
the list of vulnerabilities from the NetBSD FTP site.  The second
component, <quote>audit-packages</quote>, checks to see if any of your
installed packages are vulnerable.  If a package is vulnerable, you
will see output similar to the following:
</para>

<screen>Package samba-2.0.9 has a local-root-shell vulnerability, see
http://www.samba.org/samba/whatsnew/macroexploit.html</screen>

<para>
One can set up <pkg>security/audit-packages</pkg> to download the
<ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/distfiles/vulnerabilities">vulnerabilities</ulink>
file daily, and include a package audit in the daily security script.
Details on this are located in the <ulink
url="http://cvsweb.NetBSD.org/bsdweb.cgi/pkgsrc/security/audit-packages/MESSAGE?rev=HEAD&amp;content-type=text/x-cvsweb-markup">MESSAGE</ulink>
file for <pkg>security/audit-packages</pkg>.
</para>
</sect1>

<sect1 id="pkg_versions">
<title id="pkg_versions.title">Finding if newer versions of your installed packages are in pkgsrc</title>
<para>
Install <pkg>pkgtools/pkglint</pkg> and run <command>lintpkgsrc</command> with the <quote>-i</quote>
argument to check if your packages are up-to-date, e.g.
</para>
<screen><prompt>%</prompt> <userinput>lintpkgsrc -i</userinput>
...
Version mismatch: 'tcsh' 6.09.00 vs 6.10.00</screen>
<para>You can then use <command>make update</command> to update the
package on your system and rebuild any dependencies.
</para>
</sect1>

<sect1 id="other_commands">
<title id="other_commands.title">Other Commands for the NetBSD Packages Collection</title>
<para>
Other useful command to use with the NetBSD Package Collection are shown
below.
</para>

<itemizedlist>
<listitem>
<command>make deinstall</command>
<para>
removes an installed package from your system. The
reverse to the procedure performed above. Change to the appropriate pkgsrc
directory before use.
</para>
</listitem>

<listitem>
<command>pkg_delete</command>
<para>
removes a pkg by name, regardless of your current working directory.
</para>
</listitem>

<listitem>
<command>pkg_info</command>
<para>
shows what packages are installed on your system, as any that you add
are kept track of.
</para>
</listitem>
</itemizedlist>
</sect1>

<sect1 id="pkgsrc_admin">
<title id="pkgsrc_admin.title">pkgsrc maintenance tools</title>
<para>
  There are a number of additional tools in pkgsrc that provide
  additional features for maintaining a pkgsrc system. See the
  <ulink url="../pkgsrc/faq.html#faq-pkgtools">Utilities for package
  management (pkgtools)</ulink> section of the pkgsrc guide for a
  list.
</para>

</sect1>

<sect1 id="other">
<title id="other.title">Other related reading</title>

<itemizedlist>
<listitem><ulink url="../pkgsrc/">The pkgsrc guide</ulink> (formerly
          known as <quote>Packages.txt</quote>)</listitem>
<listitem><ulink url="pkg-wildcards.html">Wildcards and the NetBSD
  Packages Collection</ulink></listitem>
<listitem>A <ulink url="pkgviews.pdf">Paper describing Package
  Views</ulink></listitem>
<listitem><ulink
  url="http://users.piuha.net/martti/comp/slackware/slackware.html">Slackware
  Linux with pkgsrc Packages</ulink></listitem>
<listitem><ulink
  url="http://pkgsrc.netbsd.se">A web frontend for pkgsrc</ulink>, provided by
<ulink url="http://www.netbsd.se">NetBSD Sweden</ulink></listitem>
</itemizedlist>
</sect1>

</pkgsrc-home>

</webpage>
