<?xml version="1.0" encoding="ISO-2022-JP"?>
<!DOCTYPE webpage
  PUBLIC "-//Norman Walsh//DTD Website V2.2//EN"
	 "http://docbook.sourceforge.net/release/website/2.2/website.dtd">

<webpage id="ja-pkgsrc-home">
<config param="desc" value="pkgsrc"/>
<config param="cvstag" value="$NetBSD: packages.xml,v 1.3 2003/04/12 15:56:51 grant Exp $"/>
<!-- Based on english version: -->
<!-- NetBSD: packages.xml,v 1.3 2003/04/12 15:56:51 grant Exp   -->
<config param="rcsdate" value="$Date: 2003/04/12 15:56:51 $"/>

<!-- The top part of the html output comes from the pkgsrc-home XSL
     template -->
<pkgsrc-home>

<sect1 id="why-pkgsrc">
<title id="why-pkgsrc.title">なぜ pkgsrc なのか?</title>

<para>
pkgsrc が提供する重要な機能は、以下のようなものです
</para>

<itemizedlist>
<listitem>ソフトウェアのソースからの構築のほか、バイナリーパッケージの作成および
  インストールが容易にできるようになります。ソースと最新のパッチを
  マスターサイトかミラーダウンロードサイトから取得し、チェックサムを検証してから、
  あなたのシステムで構築をおこないます。</listitem>
<listitem>バイナリー、ライブラリー、マニュアルページ、その他の文書など、
  すべてのパッケージは首尾一貫したディレクトリーツリーにインストールされます。</listitem>
<listitem>パッケージの依存関係は、パッケージ更新時も含め、
  自動的に解決されます。更新の際には、
  さまざまなパッケージの設定ファイルが自動的に処理され、
  ローカルな変更点は保持されます。</listitem>
<listitem>NetBSD と同様、 <emphasis>pkgsrc</emphasis> は移植性を意図して設計されており、
  高い移植性を持つコードでできています。これにより、
  新しいプラットフォームへの移植は、きわめて迅速な開発が可能です。
  この移植性はまた、 pkgsrc を <emphasis>全プラットフォームの間で一貫したもの</emphasis>にしています。</listitem>
<listitem>膨大な数のパッケージに対する、インストール先、
  受け入れ可能なソフトウェアライセンス、国際版の暗号が必要か、
  および構築時オプションは、
  すべて単一の<ulink linkend="mk.conf">設定ファイル</ulink>で管理されます。</listitem>
<listitem>完全なソース (ソフトウェアの配布ファイルは含みません) は、
  BSD ライセンスの下で自由に使用できますので、必要に応じて 
  <emphasis>pkgsrc</emphasis> の拡張や改造ができます。そのままでローカルパッケージやパッチに
  対応しているので、あなたの環境に合わせて設定することができます。</listitem>
</itemizedlist>
</sect1>

<sect1 id="platforms">
<title id="platforms.title">対応プラットフォーム</title>

<itemizedlist>
  <listitem>Darwin (MacOS X)</listitem>
  <listitem>FreeBSD</listitem>
  <listitem>IRIX</listitem>
  <listitem>Linux</listitem>
  <listitem>OpenBSD</listitem>
  <listitem>Solaris 2.x</listitem>
</itemizedlist>

<para>
pkgsrc には、これらのオペレーティングシステム用の<link linkend="bootstrap"
endterm="bootstrap.title"/>および
<link linkend="binary" endterm="binary.title"/>の両形態があります。
必要なソースまたはバイナリーを取ってくれば、
すぐに pkgsrc で作業を始めることができます。
</para>
</sect1>

<sect1 id="available-packages">
<title id="available-packages.title">利用可能なパッケージ</title>

<itemizedlist>
  <listitem><ulink url="../../Changes/pkg-changes.html">最近の pkgsrc の変更点</ulink></listitem>
  <listitem><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README.html">
    利用可能なパッケージのカテゴリー別の索引</ulink></listitem>
  <listitem><ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README-all.html">
    すべてのパッケージの完全な一覧</ulink></listitem>
  <listitem><ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README-IPv6.html">
    IPv6 対応パッケージの一覧</ulink></listitem>
</itemizedlist>

</sect1>

<sect1 id="docs">
<title id="docs.title">ドキュメンテーション</title>

<itemizedlist>
  <listitem><ulink
    url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/Packages.txt">完全な
    pkgsrc のドキュメント</ulink> (<ulink
    url="http://www.jp.NetBSD.org/ja/JP/Documentation/Packages/Packages.txt">日本語版</ulink>)</listitem>
  <listitem><ulink
url="http://man.NetBSD.org/man/packages+7+NetBSD-current">packages(7)</ulink>
    マニュアルページ: pkgsrc への導入です</listitem>
</itemizedlist>

<!-- XXX wildly out of date, leave it out for now
<li><a href="pkg-growth.html">Packages system growth</a>.</li>
-->

</sect1>

<sect1 id="bootstrap">
<title id="bootstrap.title">ソース配布</title>

<para>
<emphasis>NetBSD 上で pkgsrc を使っている場合は、この項は読み飛ばして <link
linkend="setting_up_pkgsrc">NetBSD パッケージコレクションの設定</link>に進んでもかまいません。</emphasis>
</para>

<para>
NetBSD 以外のオペレーティングシステム用に、 pkgsrc のツールを、
ソースから構築するブートストラップキットという形式で用意してあります。
(<link linkend="binary"
endterm="binary.title"/>を使うという方法もあります。
これについては後の項目をご覧ください)。
</para>

<para>
<ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc.tar.gz">bootstrap-pkgsrc
の tarball を FTP でダウンロード</ulink>するか、
以下のように AnonCVS で最新のソースをチェックアウトすることができます:
</para>

<screen>% cvs checkout othersrc/bootstrap-pkgsrc</screen>

<para>
(AnonCVS の設定については、 <ulink url="../current/#using-anoncvs">NetBSD-current
の追跡</ulink>の説明をご覧ください) 。
</para>

<para>
ソースのダウンロード・展開後、ブートストラップキットのインストールは、
以下のようにするだけの単純なものです:
</para>

<screen># cd othersrc/bootstrap-pkgsrc
# ./bootstrap</screen>

<para>
デフォルトでは、 <emphasis>prefix</emphasis> は <filename>/usr/pkg</filename> に、
パッケージデータベースディレクトリーは <filename>/var/db/pkg</filename> になりますが、
これらはコマンドラインで変数を使って変更可能です (利用可能なオプションは、
<command>./bootstrap --help</command> で見られます)。
</para>

<para>
NetBSD 以外のシステムで pkgsrc を使う際には、 NetBSD の make
を実行するために、 <quote>make</quote> ではなく <command>bmake</command>
コマンドを使うことに注意してください。これは pkgsrc
の適切な操作のために必要なのです。 pkgsrc ドキュメンテーション中の
<quote>make</quote> は <quote>bmake</quote> に読み替えてください。
</para>

</sect1>

<sect1 id="binary">
<title id="binary.title">バイナリー配布</title>

<para>
バイナリー pkgsrc キットと、初期パッケージセットは、以下のものが利用可能です:
</para>

<table>
  <title></title>
  <tgroup cols="4">
    <thead>
      <row>
	<entry>プラットフォーム</entry>
	<entry>最新スナップショット</entry>
	<entry>バイナリーキット</entry>
	<entry>バイナリーパッケージ</entry>
      </row>
    </thead>
    <tbody>
      <row>
	<entry>Darwin 5.5/powerpc (MacOS X 10.1.5)</entry>
	<entry>20021209</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/schmonz/bootstrap-pkgsrc-Darwin-5.5-powerpc-20021209.tar.gz">バイナリーキット</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Darwin 6.2/powerpc (MacOS X 10.2.2)</entry>
	<entry>20021219</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Darwin-6.2-powerpc-20021219.tar.gz">バイナリーキット</ulink></entry>
	<entry><ulink href="ftp://ftp.NetBSD.org/pub/NetBSD/misc/grant/pkgsrc/Darwin/6.2/powerpc/">バイナリーパッケージ</ulink></entry>
      </row>
      <row>
	<entry>Darwin 6.3/powerpc (MacOS X 10.2.3)</entry>
	<entry>20030412</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Darwin-6.3-powerpc-20030412.tar.gz">バイナリーキット</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Debian GNU Linux/i386</entry>
	<entry>20030410</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Linux-2.4.20-debian-i386-20030410.tar.gz">バイナリーキット</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/jschauma/pkgsrc/Linux/i386/">バイナリーパッケージ</ulink></entry>
      </row>
      <row>
	<entry>FreeBSD 3.5/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-3.5-STABLE-i386-20030411.tar.gz">バイナリーキット</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>FreeBSD 4.7/i386</entry>
	<entry>20021211</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-4.7-RELEASE-i386-20021211.tar.gz">バイナリーキット</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/grant/pkgsrc/FreeBSD/4.7-RELEASE/i386/">バイナリーパッケージ</ulink></entry>
      </row>
      <row>
	<entry>FreeBSD 5.0/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-FreeBSD-5.0-RELEASE-i386-20030411.tar.gz">バイナリーキット</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>IRIX 6.5 n32-bit ABI</entry>
	<entry>20030410</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-IRIX-6.5-mips-20030410.tar.gz">バイナリーキット</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/jschauma/pkgsrc/IRIX/">バイナリーパッケージ</ulink></entry>
      </row>
      <row>
	<entry>IRIX 6.5 64-bit ABI</entry>
	<entry>20030225</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-IRIX64-6.5-mips-20030225.tar.gz">バイナリーキット</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/jschauma/pkgsrc/IRIX/">バイナリーパッケージ</ulink></entry>
      </row>
      <row>
	<entry>OpenBSD 3.2/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-OpenBSD-3.2-i386-20030411.tar.gz">バイナリーキット</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Slackware Linux 8.1/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-Linux-2.4.18-slackware-20030411.tar.gz">バイナリーキット</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Solaris 8/sparc</entry>
	<entry>20021219</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.8-sparc-20021219.tar.gz">バイナリーキット</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Solaris 8/i386</entry>
	<entry>20030330</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.8-i386-20030330.tar.gz">バイナリーキット</ulink></entry>
	<entry></entry>
      </row>
      <row>
	<entry>Solaris 9/sparc</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.9-sparc-20030411.tar.gz">バイナリーキット</ulink></entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/grant/pkgsrc/SunOS/5.9/sparc/">バイナリーパッケージ</ulink></entry>
      </row>
      <row>
	<entry>Solaris 9/i386</entry>
	<entry>20030411</entry>
	<entry><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/bootstrap-pkgsrc/bootstrap-pkgsrc-SunOS-5.9-i386-20030411.tar.gz">バイナリーキット</ulink></entry>
	<entry></entry>
      </row>
    </tbody>
  </tgroup>
</table>

</sect1>

<sect1 id="precompiled">
<title id="precompiled.title">バイナリーパッケージのインストール</title>

<para>
NetBSD 1.5.x および 1.6 用の
コンパイル済みバイナリーパッケージセレクションは、
<ulink url="../../mirrors/">NetBSD FTP サイト</ulink> の <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/">/pub/NetBSD/packages</ulink>
(訳註:<ulink url="ftp://ftp.jp.NetBSD.org/pub/NetBSD/packages/">日本でのミラー</ulink>)
にて利用できます。
</para>

<para>
おそらく大多数のユーザーには、<ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README.html">ブラウズ可能なリスト</ulink> (訳註:<ulink
url="ftp://ftp.jp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README.html"
>日本でのミラー</ulink>)
が最も有用でしょう。
</para>

<para>
これらのバイナリーパッケージは、他の必要なパッケージと一緒に
手元のディスクにダウンロードして
</para>

<screen># pkg_add &lt;package&gt;</screen>

<para>
というようにインストールすることができますし、
</para>

<screen># pkg_add ftp://ftp.NetBSD.org/pub/NetBSD/packages/&lt;os_release&gt;/&lt;arch&gt;/&lt;type&gt;/&lt;package&gt;</screen>

<para>
というように直接 pkg_add に完全なURLを指定して、インストールすることもできます。
他の必要なパッケージは、同じリモートディレクトリーにあれば、
自動的に探してインストールされます。
</para>

<para>
パッケージは、通常 <filename>/usr/pkg</filename> にインストールされます。
パス変数(PATH)に確実に <filename>/usr/pkg/bin</filename> と <filename>/usr/pkg/sbin</filename>
を加えてください(一番の方法は、<filename>/etc/csh.cshrc</filename>で設定することです)。
</para>

</sect1>

<sect1 id="setting_up_pkgsrc">
<title id="setting_up_pkgsrc.title">NetBSD パッケージコレクションの設定</title>

<para>
NetBSD パッケージコレクションは、
サードパーティー製プログラムを容易にコンパイルできるようにするための
Makefile 、簡単な説明、パッチが、カテゴリー別に分類されて構成されています。
</para>

<para>
pkgsrc をインストールすると、パッケージコレクションに含まれるどのソフトウェアも
容易にコンパイル・インストールできるようになります。
</para>

<para>
pkgsrc の入手方法はいくつかあります:
</para>

<orderedlist>

<listitem>CD-ROM
<para>
NetBSD 公式 CD-ROM をお持ちなら、 pkgsrc も入っています。他の CD にも
pkgsrc は入っているはずです。これはちゃんと使えるはずですが、
pkgsrc は日々更新され続けているため、インターネットから最新のものを
ダウンロードするのがよいでしょう。
</para>
</listitem>

<listitem>sup
<para>
おすすめの方法です。最初のダウンロードには時間がかかりますが、
その後は sup(1) を実行するたびに更新されたファイルだけをダウンロードし、
自動的に古いファイルを消します。
sup のもっとも簡単な設定方法は次のとおりです。
</para>

<para>
<itemizedlist>
<listitem>
<para>
<filename>/etc/supfiles/coll.list</filename> ファイルを作ります。
</para>

<screen>% mkdir /etc/supfiles /usr/sup
% cp /usr/share/examples/supfiles/<emphasis>serverhost</emphasis> /etc/supfiles/coll.list</screen>

<para>
(ここで <emphasis>serverhost</emphasis> は
「最も近所の」ホストか、単に <quote>sup.NetBSD.org</quote> とします)。
</para>
</listitem>

<listitem>
<filename>/etc/supfiles/coll.list</filename> を編集し、
<quote>current release=pkgsrc</quote> で始まる 2 行を除き、
すべての行をコメントアウト (行頭に「#」を追加) します。
</listitem>
</itemizedlist>
</para>

<para>
これで、 <command>sup -s -v</command> すると sup を使って pkgsrc をアップデートできます
(あるいは単に <command>sup -s</command> して冗長な出力を抑制できます) 。
sup はさまざまな NetBSD ソースツリーの取得にも使えます
─より詳しくは <filename>coll.list</filename> の内容を見てください。
</para>
</listitem>

<listitem>FTP
<para>
最も単純な方法ですが、毎回、すべての pkgsrc アーカイブファイル (現在、
gzip しても 15MB を超えます) をダウンロードすることになります。
</para>

<para>
<itemizedlist>
<listitem>
NetBSD パッケージコレクションは毎週アーカイブされ、
tar+gzipされたファイルとしてNetBSD FTP サイトと
多数のミラーサイトに置かれます。
このファイルを NetBSD サイトの <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-current/tar_files/pkgsrc.tar.gz"/>
もしくは近くの
<ulink url="../../mirrors/#ftp">ミラーサイト</ulink>から、入手します。
</listitem>

<listitem>
一旦自分のシステムにpkgsrc.tar.gzをダウンロードしたら、
<command>su -</command> して root 権限で、
<filename>/usr</filename> ディレクトリーにそのファイルをコピーします。
</listitem>

<listitem>
もし、以前の pkgsrc.tar.gz を展開していたならば、まずそれを削除します。
<para>
<screen># cd /usr; rm -rf pkgsrc</screen>
</para>
</listitem>

<listitem>
そしてtarを使って次のように、
そのファイルを伸長し新たなホーム(<code>/usr/pkgsrc</code>)に展開します。
<para>
<screen># cd /usr; tar -zxvpf pkgsrc.tar.gz</screen>
</para>
</listitem>

<listitem>
コレクションからパッケージを構築するときは、
通常新しいディレクトリーツリー <filename>/usr/pkg</filename> を作成し、
そこにインストールすることになります。
例えば、<varname>LOCALBASE=/usr/local</varname> を
<filename>/etc/mk.conf</filename> に加えることにより、これを変更することができます。
</listitem>

<listitem>
ファイルの取得を近くのミラーサイトから行うように設定することができます。
<filename>pkgsrc/mk/bsd.pkg.defaults.mk</filename> に掲載されている
あなたの国向けの <varname>MASTER_SITE_*</varname> の設定例を <filename>/etc/mk.conf</filename>
にコピーし、行頭の <quote>#</quote> を削除します。
</listitem>
</itemizedlist>
</para>

</listitem>

<listitem>AnonCVS
<para>
これは 2 段階からなります。まず設定が必要で、そのあとは好きな時に
全体または一部のアップデートができるようになります。
</para>

<para>
設定は、<ulink
url="../current/#using-anoncvs">anoncvs を用いた NetBSD-current
の追跡</ulink>の最初の 4 段階に従います; チェックアウトが必要なモジュールは
<quote>pkgsrc</quote> (予想通りでしょう) で、デフォルトの場所は
<filename>/usr/pkgsrc</filename> ですが、任意の場所にできます。
</para>

<para>アップデートは、次のようにしてできます</para>
<screen>% cd /usr/pkgsrc
% cvs update -dP</screen>

<para>
一部だけアップデートしたい場合は次のようにします (依存関係があるため、
おすすめしません):</para>

<screen>% cvs update -dP category/package</screen>

<para>
非常に細い回線を使っている場合は、コマンドラインで <quote>-z5</quote>
(あるいは 1 から 9 までのいずれか) を、コマンドの<emphasis>前</emphasis>に追加します
(たとえば <command>cvs -z5 update -dP</command>);
こうするとデータはすべて圧縮されます。これは cvs サーバーに余計な負荷を
かけることに注意してください。
</para>
</listitem>

</orderedlist>

</sect1>

<sect1 id="using_pkgsrc">
<title id="using_pkgsrc.title">NetBSD パッケージコレクションの使用</title>

<orderedlist>

<listitem>
<para>
<filename>/usr/pkgsrc</filename> ディレクトリーには、
カテゴリー別に整理されたサブディレクトリーが含まれます。
オンラインでパッケージの索引を見られますし、また、 <filename>/usr/pkgsrc</filename>
ディレクトリーで <command>make readme</command> してローカルで README.html
を作ることもできます。各ディレクトリーでは <emphasis>README.html</emphasis> ファイルで、
それぞれのユーティリティー/アプリケーションが何なのかを知ることができます。
</para>
</listitem>

<listitem>
<para>
アプリケーションのひとつをインストールするのは非常に簡単です。
例えば、あなたのシステムに Joe というエディター(<pkg>editors/joe</pkg> は、WordstarやEmacs
のようなエディターを真似た、小さいけれどパワフルなエディターです)
をインストールするには、まず次のようにカレントディレクトリーを変更します。
</para>
<screen>% cd /usr/pkgsrc/editors/joe</screen>
</listitem>

<listitem>
<para>
もしダイアルアップ接続によりインターネットにアクセスしているならば、
ソフトウェアソースおよびあらゆるパッチを探して持ってくるために、
この時点で接続してください。
</para>

<para>
<filename>/usr/pkgsrc/distfiles</filename>
に必要なファイルが
すでに存在していれば、インターネットに接続する必要はありません。
CD-ROMなどにdistfilesがある場合には、CD-ROMを /cdrom にmountし
<varname>DISTDIR=/cdrom/pkgsrc/distfiles</varname>
を <filename>/etc/mk.conf</filename>
に加えるか、<quote>make
DISTDIR=/cdrom/pkgsrc/distfiles</quote>
などの様に指定します。
</para>

<para>
パッケージが他のパッケージ(例えばkdeなど)に依存している場合、
ダウンロードとコンパイルを交互に繰り返すことがあります。
最初に必要なすべてのソースを確実にダウンロードするには、
次のコマンドを使用します:
<screen>% make fetch-list | sh</screen>
このコマンドは必要なファイルを取ってきて<filename>/usr/pkgsrc/distfiles</filename>
に保存するためのシェルコマンドを出力、実行します。このファイルは手動で
<filename>/usr/pkgsrc/distfiles</filename>
へダウンロードすることもできますが、
手動で取得するのはかなり面倒なので最後の手段とすべきでしょう。
</para>
</listitem>

<listitem>
<para>
そして <filename>/usr/pkgsrc/editors/joe</filename> ディレクトリーにて、
<screen>% make</screen>
と入力します。ソースと、(もしあれば)パッチ、
コンパイルに必要な他のソフトウェアが
あなたのシステムにダウンロードされるでしょう。
</para>
</listitem>

<listitem>
<para>
ソフトウェアがダウンロードされると、パッチが適用された上で、
コンパイルされます。それにかかる時間はあなたのコンピューターによりますし、
そのソフトウェアが依存している他のパッケージの数とそれらのコンパイルに
かかる時間にもよります。
</para>
</listitem>

<listitem>
<para>
これが完了し、どんなエラーも表示されなければ、
ダイアルアップ接続を切断してもかまいません(電話代は節約しましょう!)。
</para>
</listitem>

<listitem>
<para>
次は新たにコンパイルされたプログラムを、
実際にあなたのシステムにインストールします。
<filename>/usr/pkgsrc/editors/joe</filename> ディレクトリーにいる間に
(もしくはインストールのためのディレクトリーで)
<screen>% make install</screen>
と入力してください。
</para>
</listitem>

<listitem>
<para>
そのソフトウェアは今まさにインストールされ、
使用できるようにセットアップされたことになります。
もうこれ以上コンパイル後の作業ファイルは必要とされないので、
<screen>% make clean</screen>
と入力し作業ディレクトリー内のファイルを削除してしまってもかまいません。
もし、プログラムをコンパイルするときに、
依存関係により他のパッケージがコンパイル/インストールされたならば、
それらも次のコマンドにより、きちんと削除することができます。
<screen>% make clean-depends</screen>
</para>
</listitem>
</orderedlist>

</sect1>

<sect1 id="compiling-problems">
<title id="compiling-problems.title">パッケージのコンパイルに関する問題</title>
<para>
ポートによっては、いくらかの巨大なパッケージに対して、
デフォルトのリソースの制限が小さすぎます─もし <quote>virtual memory
exhausted</quote>
と言われてコンパイルが失敗したら、コンパイル FAQ の <ulink
url="compiling.html#unlimit">unlimit</ulink>の項をどうぞご覧ください。
</para>
</sect1>

<sect1 id="mk.conf">
<title id="mk.conf.title">/etc/mk.conf って何?</title>

<para>
<filename>/etc/mk.conf</filename> はパッケージシステムに対していくらかの変数を定義するのに使えます。
デフォルトでは用意されていませんが、必要な場合に作ることができます。
設定可能な多くの変数は、次のようなものです:
</para>

<itemizedlist>
<listitem>
<varname>ACCEPTABLE_LICENSES=non-commercial-use fee-based-commercial-use</varname>
<para>
受け入れ可能なライセンスをパッケージに対して表明します。
</para>
</listitem>

<listitem>
<varname>WRKOBJDIR=/usr/obj/pkg</varname>
<para>
パッケージの展開と構築を <filename>/usr/obj/pkg</filename> で行ないます。
</para>
</listitem>

<listitem>
<varname>PACKAGES=${_PKGSRCDIR}/packages/${OS_VERSION}/${MACHINE_ARCH}</varname>
<para>
バイナリーパッケージを作るときに、それらを
<varname>OS_VERSION</varname> と <varname>MACHINE_ARCH</varname>
別のサブディレクトリーに保存します。
</para>
</listitem>

<listitem>
<varname>USA_RESIDENT=NO</varname>
<para>
<quote>NO</quote>の場合、いくつかのプログラムのライセンス認証の決定に使われます。
<quote>YES</quote>の場合、いくつかのプログラムのライセンス認証の決定に使われます。
</para>
</listitem>

<listitem>
<varname>USE_RSAREF2=NO</varname>
<para>
たとえば <pkg>security/ssh</pkg> で、 RSAREF2 を使うか否か。
</para>
</listitem>

<listitem>
<varname>DEPENDS_TARGET=package</varname>
<para>
依存関係にあるバイナリーパッケージを自動的に構築・保存します。
</para>
</listitem>
</itemizedlist>

<para>
また、
<ulink url="http://cvsweb.NetBSD.org/bsdweb.cgi/~checkout~/pkgsrc/mk/bsd.pkg.defaults.mk">/usr/pkgsrc/mk/bsd.pkg.defaults.mk</ulink>
で、 pkgsrc で使われるデフォルト値が与えられます。このファイルは <filename>/etc/mk.conf</filename>
での設定の指針として使えます - このデフォルト値と異なる部分について、
値を設定する必要があるだけです。
</para>
</sect1>

<sect1 id="searching_pkgsrc">
<title id="searching_pkgsrc.title">利用可能な NetBSD パッケージコレクションの見つけ方</title>
<para>
コレクション中にどんなパッケージがあるのかを知る、もっとも良い方法は、
pkgsrc の一番上のディレクトリー(これは通常 <filename>/usr/pkgsrc</filename> でしょう)に移動し、
<command>make
readme</command> と入力することです。
これにより、README.html というファイルが pkgsrc の一番上のディレクトリー、
またすべてのカテゴリーとパッケージディレクトリーに作成され、
lynx (<pkg>www/lynx</pkg>) や Mozilla (<pkg>www/mozilla</pkg>)
や Netscape Communicator (<pkg>www/communicator</pkg>) のようなブラウザーを使うことで、
パッケージの機能に付いての短い(一行)コメントと、
詳細な説明へのポインターを見ることができるようになります。 <ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README.html">パッケージの
一覧</ulink>
(訳註:<ulink url="ftp://ftp.jp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README.html">日本でのミラー</ulink>)
や<ulink
url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README-all.html">完全な
一覧</ulink>
(訳註:<ulink url="ftp://ftp.jp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README-all.html">日本でのミラー</ulink>)
(長い!) も参照してください。
</para>

<para>
コレクション中のパッケージを見つける別の方法としては、
pkgsrc の一番上のディレクトリーに移動して、
<command>make
index</command> と入力するというのもあります。
これは、<command>make print-index | more</command> で見ることができる
<filename>pkgsrc/INDEX</filename> を作成します。
また、パッケージやキーワードを
<command>make search key=&lt;somekeyword&gt;</command>
により検索することもできます。
</para>
</sect1>

<sect1 id="vulnerabilities">
<title id="vulnerabilities.title">インストール済パッケージの脆弱性チェック</title>
<para>
NetBSD セキュリティーオフィサーとパッケージグループでは、
pkgsrc に含まれる (あるいは含まれていた) パッケージの既知の脆弱性のリストを
保守しています。このリストは、 NetBSD FTP サイトの
<ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/distfiles/vulnerabilities"/>
から入手できます
</para>

<para>
<pkg>security/audit-packages</pkg> を使うと、
このリストを自動的にダウンロードし、
システムにインストールされているパッケージすべてについて
セキュリティー検証をすることができます。
</para>

<para>
<pkg>security/audit-packages</pkg> は、ふたつの部分からできています。
ひとつは <quote>download-vulnerability-list</quote> で、 NetBSD FTP サイトから
脆弱性のリストをダウンロードするものです。もうひとつは
<quote>audit-packages</quote> で、インストールされているパッケージに脆弱性が
ないかどうか検証するものです。脆弱性のあるパッケージがあった場合、
次のように出力してくれます:
</para>

<screen>Package samba-2.0.9 has a local-root-shell vulnerability, see
http://www.samba.org/samba/whatsnew/macroexploit.html</screen>

<para>
<pkg>security/audit-packages</pkg>
では、
<ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/distfiles/vulnerabilities">vulnerabilities</ulink>
ファイルを毎日ダウンロードして、さらに、パッケージの検証を
daily security script で行なうように設定することができます。
これについての詳細は、 <pkg>security/audit-packages</pkg> の <ulink
url="http://cvsweb.NetBSD.org/bsdweb.cgi/pkgsrc/security/audit-packages/MESSAGE?rev=HEAD&amp;content-type=text/x-cvsweb-markup">MESSAGE</ulink>
ファイルに書かれています。
</para>
</sect1>

<sect1 id="pkg_versions">
<title id="pkg_versions.title">インストール済パッケージのより新しいバージョンが pkgsrc にあるかどうか調べる</title>
<para>
インストール済パッケージのより新しいバージョンが NetBSD パッケージコレクション
にあるかどうか調べるには、まず <pkg>pkgtools/pkglint</pkg>
をインストールします。そうすると、新しいバージョンがある場合、
<command>lintpkgsrc -i</command> を実行するとわかります。
</para>

<para>
たとえば、すでに <pkg>shells/tcsh</pkg> のバージョン 6.09.00
をインストールしてあり、 pkgsrc のバージョンは 6.10.00 になっている場合、
lintpkgsrc -i すると次のように教えてくれます。
</para>
<screen>Version mismatch: 'tcsh' 6.09.00 vs 6.10.00</screen>
</sect1>

<sect1 id="other_commands">
<title id="other_commands.title">その他のNetBSDパッケージコレクション用コマンド</title>
<para>
このほか、 NetBSD パッケージコレクションを使う上で役に立つコマンドは、
以下のものがあります。
</para>

<itemizedlist>
<listitem>
<command>make deinstall</command>
<para>
システムにインストールされたパッケージを削除します。
上記手順の逆を行います。あらかじめ適切な pkgsrc ディレクトリーに移動してから
実行します。
</para>
</listitem>

<listitem>
<command>pkg_delete</command>
<para>
カレントディレクトリーとは関係なく、
指定した名前のパッケージを削除します。
</para>
</listitem>

<listitem>
<command>pkg_info</command>
<para>
システムにインストールされたパッケージを表示します
(パッケージのインストールによりデータベースに追加されています)。
</para>
</listitem>
</itemizedlist>
</sect1>

<sect1 id="pkgsrc_admin">
<title id="pkgsrc_admin.title">pkgsrc メンテナンスツール</title>
<para>
pkgsrc には、 pkgsrc システムのメンテナンスに使うための
追加のツールがたくさんあります。そのなかでもよく使われるものは、
以下のものです:
</para>

<itemizedlist>
<listitem>
<command>cpuflags</command>
<para>
<pkg>devel/cpuflags</pkg> は、お使いの CPU とコンパイラー用にコードを最適化するための
コンパイラーのフラグを考えてくれます。
</para>
</listitem>

<listitem>
<command>lintpkgsrc</command>
<para>
<pkg>pkgtools/pkglint</pkg> に含まれます。 lintpkgsrc を使って、インストール済のパッケージとローカル
pkgsrc ツリーのバージョンを比較したり、それをもとに
古いバイナリーパッケージや古くなった distfiles を削除したりできます。
</para>
</listitem>

<listitem>
<command>pkgchk</command>
<para>
<pkg>pkgtools/pkg_chk</pkg> は、インストール済のパッケージを、
ローカル pkgsrc ツリーのバージョンや、
ホスト名・アーキテクチャーその他もろもろの変数をもとに
必要なパッケージを列挙できる設定ファイルと比較したりします。
</para>
</listitem>

<listitem>
<command>pkg_comp</command>
<para>
<pkg>pkgtools/pkg_comp</pkg> を使うと、パッケージのコンパイルを chroot された隔離環境内で
行なうことができます。例えば、別バージョンの NetBSD 用パッケージの構築や、
デバッグ用に使え、便利です。
</para>
</listitem>
</itemizedlist>
</sect1>

<sect1 id="other">
<title id="other.title">その他の情報</title>

<itemizedlist>
<listitem><ulink url="pkg-wildcards.html">ワイルドカードと NetBSD
  パッケージコレクション</ulink></listitem>
<listitem><ulink
  url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/README">pkgsrc
  の README</ulink></listitem>
<listitem><ulink url="pkgviews.pdf">Package Views
  の概要を解説した論文</ulink></listitem>
</itemizedlist>

<para>
NetBSD パッケージコレクションについての、より詳細な、役立つ情報は、
pkgsrc に含まれている
<ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/Packages.txt">Packages.txt</ulink>
で入手できます。
</para>

<para>
Simon Rowe の NetBSD ページに多謝
</para>
</sect1>

</pkgsrc-home>

</webpage>
