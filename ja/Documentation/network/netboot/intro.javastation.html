<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
<!-- Copyright (c) 1998-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>Diskless NetBSD HOW-TO, 序説 (JavaStation 固有な部分)</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<a href="intro.html">戻る</a> |
<a href="dhcpd.html">進む</a> |
<a href="./">目次</a>

<hr>

<h1>Diskless NetBSD HOW-TO, 序説
(Open Firmware ベースの JavaStation 固有な部分)</h1>

<h2>Sun Firmware での手順</h2>
<dl><dt><dd>
<big><b>どの JavaStations が netboot 可能か</b></big>
<p>

すべての JavaStations は、デフォルトでネットワークインターフェースからブートします。
<p>

現在のところ、 JavaStation-1 と JavaStation-10 のふたつのサポート機種が
あります。 JavaStation-1 の一部のユニットは OpenBoot PROM 2 を持っており、
こちらは通常の <a href="intro.sun.html">sparc 固有</a> の Diskless NetBSD
HOW-TO の方法に従ってください。これ以外の JavaStation-1 とすべての
JavaStation-10 ユニットは Open Firmware を持っています。これらでは、
以下に示す手順に従ってください。
<p>

<big><b>イーサネットハードウェアアドレスを調べる</b></big>
<p>
マシンの電源を入れると MAC アドレスが表示されます。このとき、
イーサネットアドレスが <tt>ff:ff:ff:ff:ff:ff</tt> であると表示された場合は、
NVRAM バッテリーが切れています。
<a href="http://www.squirrel.com/squirrel/sun-nvram-hostid.faq.html">Sun
NVRAM/Hostid FAQ</a> を参照してください。動作する NVRAM がないとネットブートはできません。
<p>

<big><b>IP アドレスの取得とブートローダーのダウンロード</b></big>
<p>

Open Firmware ベースの JavaStation は、まず、 Dynamic Host Configuration
protocol (DHCP) を使って IP アドレスを得ようとします。 dhcpd サーバーは、
クライアントのイーサネットアドレス (MAC) をもとに、割り当てる
IP アドレスとブートローダーのファイル名を決定します。
このリクエストが成功すると、 Open Firmware は
Trivial File Transfer Protocol (TFTP) を使って
2 段階目のブートプログラムをダウンロードする体制に入ります。
これは、最初の DHCP のリクエストに応えたサーバーに TFTP コネクションを張り、
サーバーから教えられたファイル名のファイルを要求することで行なわれます。
2 段階目のブートプログラムは、 DHCP で得られたサーバーとパスを元に
NFS を使ってカーネルをロードします。

<p>Open Firmware ベースの JavaStation 用のブートローダーは、 <tt>boot.net</tt>
では<i>なく</i>、 <tt>bootjs.elf</tt> を使う必要があります。
</dd></dt></dl>

<h2>Open Firmware のコマンド</h2>
<dl><dt><dd>
デフォルトのブートデバイスは <tt>net</tt> です。 JavaStation をネットブート
するために Open Firmware 環境に入る必要すらありません。別の NetBSD カーネル名
(たとえば <tt>netbsd-test</tt>) を指定したい場合は、 Open Firmware
プロンプトで以下のようにタイプします:
<pre>0 &gt; <b>boot net netbsd-test</b></pre>
</dd></dl>

<h2>設定を始める (次の順番に読むのが良いでしょう):</h2>
<dl><dt><dd>
NetBSD/sparc 配布物に含まれる <tt>bootjs.elf</tt> を用意してください。これは
TFTP で送られるものです。このファイルを <tt>/tftpboot</tt> にコピーしておきます。
<p>

<ol>
<li><a href="dhcpd.html"><tt>dhcpd</tt></a>
<li><a href="tftpd.html"><tt>tftpd</tt></a>
<li><a href="nfs.html"><tt>nfs</tt></a>
<li><a href="files.html">クライアントのファイルシステム</a>
<li><a href="finish.html">完了</a>
</ol>
</dd></dl>

<hr>

<a href="intro.html">戻る</a> |
<a href="dhcpd.html">進む</a> |
<a href="./">目次</a>

<hr> 

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../../"><img
        src="../../../images/NetBSD-flag.gif" border="0"
        width="91" height="42" alt=""></a> 
  </td><td>
    <a href="../../../"><img
        src="../../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td> 
    <a href="../../../Documentation/"><img
        src="../../../images/NetBSD-flag.gif" border="0"
        width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../../Documentation/"><img
        src="../../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.netbsd.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@JP.NetBSD.ORG">日本語:
       www@JP.NetBSD.ORG</a>)<br>
  $NetBSD: intro.javastation.html,v 1.3 2003/03/08 19:44:23 grant Exp $<br>
  <a href="../../../Misc/disclaimer.html">Copyright &copy; 1998-2003
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
