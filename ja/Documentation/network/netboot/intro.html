<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
<!-- Copyright (c) 1998, 1999, 2000, 2001
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@NetBSD.ORG">
<title>Introduction, Diskless NetBSD HOW-TO</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<a href="./">Table of Contents</a>

<hr>

<h1>Introduction, Diskless NetBSD HOW-TO</h1>

<h2>Overview</h2>
<dl><dt><dd>
This guide is intended to aid you in setting up a diskless NetBSD workstation.
If your client isn't one of the following architectures, you can stop reading
now:
<ul>
   <li><a href="../../../Ports/alpha/">alpha</a>
   <li><a href="../../../Ports/arm32/">arm32</a>
   <li><a href="../../../Ports/cobalt/">cobalt</a>
   <li><a href="../../../Ports/hp300/">hp300</a>
   <li><a href="../../../Ports/hp700/">hp700</a>
   <li><a href="../../../Ports/i386/">i386</a>
   <li><a href="../../../Ports/luna68k/">luna68k</a>
   <li><a href="../../../Ports/macppc/">macppc</a>
   <li><a href="../../../Ports/mvme68k/">mvme68k</a>
   <li><a href="../../../Ports/next68k/">next68k</a>
   <li><a href="../../../Ports/ofppc/">ofppc</a>
   <li><a href="../../../Ports/pmax/">pmax</a>
   <li><a href="../../../Ports/sgimips/">sgimips</a>
   <li><a href="../../../Ports/sparc/">sparc</a>
   <li><a href="../../../Ports/sparc64/">sparc64</a>
   <li><a href="../../../Ports/sun2/">sun2</a>
   <li><a href="../../../Ports/sun3/">sun3</a>
   <li><a href="../../../Ports/vax/">vax</a>
</ul>
<p>

It covers from start to finish all of the steps necessary to configure and
set up the server(s) and some basic information on setting up the client.
<p>

This document only covers the steps to boot a NetBSD system from the
network.  It does not describe how to set up a local hard drive to boot
NetBSD.  That information is covered in the INSTALL notes for your
platform.  The procedure described here can be used to either netboot a
NetBSD installer (to configure a local hard drive), or to netboot a
complete NetBSD distribution on a system with no local storage.
<p>

If you are only netbooting an installer, follow the directions for your
architecture until you reach the NFS set upage.  There is a link to
instructions on installation tools.  If your client system does not
support local console <i>and</i> does not support serial console (such as 
an hp425e or iBook), then you can still netboot a working system.  Follow
the directions for your architecture until you reach the filesystem
page.  There is a link to a page describing extra steps you must perform.
<p>

This document is very long in an attempt to be thorough.  If you are already
comfortable with most of these concepts, you should still skim the 
Introduction pages.  Feel free to skip this page and go straight to your
<a href="#platformspecific">platform-specific introduction page</a>.
<p>

Each of the architectures listed above use a different proprietary scheme of 
loading the initial bootloader code.  Here is a general overview of the 
netbooting process:
<p>

<ol>
<li>The client-specific bootloader is retrieved from the server
<p>
  <ul>
  <li>For hp300 and hp700, <tt>rbootd</tt> loads the NetBSD bootprogram
    <ol>
    <li>HP bootrom does a search for bootable system and takes first one found,
        unless there is user intervention.
    <li>As part of the search for bootable systems, the bootrom sends a 
        RMP request (HP Remote Maintenance Protocol).  The <tt>rbootd</tt>
	server responds with the name of the bootprogram.
    <li>The HP bootrom retrieves the bootprogram from the server and starts
        running it.
    </ol>
  </li>
  </ul>

  <ul>
  <li>For i386, Windows is set up to load the kernel from a FAT partition.
    <ol>
    <li>The appropriate bootup files must be installed, and Windows will offer
        a choice of OSes.
    <li>The kernel is loaded from disk.
    </ol>
  </li>
  </ul>

  <ul>
  <li>For alpha, macppc, next68k, or pmax, <tt>bootpd</tt> or
  <tt>dhcpd</tt>
  sets up <tt>tftp</tt> to load the NetBSD bootprogram.
    <ol>
    <li>Manually set up the firmware (the first time) to load the bootprogram
        via <tt>bootp</tt> and <tt>tftp</tt>.
    <li>The firmware sends a <tt>bootp/dhcp</tt> request, and gets the 
        necessary information from the <tt>bootpd/dhcp</tt> server.
    <li>The firmware uses <tt>tftp</tt> to retrieve the bootprogram
        from the machine which responded to the <tt>bootp/dhcp</tt> request 
	and starts running it.
    </ol>
  </li>
  </ul>

  <ul>
  <li>For sun2, <tt>ndbootd</tt> loads the NetBSD bootprogram
    <ol>
    <li>If your machine is truly diskless, the firmware will always attempt
	to load the bootprogram via Network Disk (ND, served by 
	<tt>ndbootd</tt>).  Otherwise, you must explicitly break into
	the monitor and issue the netboot command each time.
    <li>The firmware uses ND to retrieve the bootprogram
        from the machine which responded to the ND request and 
	starts running it.
    </ol>
  </li>
  </ul>

  <ul>
  <li>For sparc and sun3, <tt>rarpd</tt> sets up <tt>tftp</tt> to load the
  NetBSD bootprogram
    <ol>
    <li>Manually set up the firmware (the first time) to load the bootprogram
        via <tt>tftp</tt>.
    <li>The firmware sends a <tt>rarp</tt> request, and gets the necessary 
        information from the <tt>rarp</tt> server.
    <li>The firmware uses <tt>tftp</tt> to retrieve the bootprogram
        from the machine which responded to the <tt>rarp</tt> request and 
	starts running it.
    </ol>
  </li>
  </ul>

  <ul>
  <li>For vax, <tt>mop</tt> downloads the NetBSD bootprogram
    <ol>
    <li>Manually set up the firmware to load the bootprogram
        via <tt>mop</tt>.
    <li>The firmware sends a <tt>mop</tt> request, and gets the necessary 
        information from the <tt>mop</tt> server.
    <li>The firmware uses <tt>mop</tt> to retrieve the bootprogram
        from the machine which responded to the <tt>mop</tt> request and 
	starts running it.
    </ol>
  </li>
  </ul>
</li>

<li>The bootloader gets the kernel from the server.<p>
    There are four schemes used by the various platforms at this stage.
<p>
  <ul>
  <li><tt>rarpd</tt>, <tt>bootparamd</tt>, and <tt>nfsd</tt>,<br>
    <ol>
    <li>The NetBSD bootprogram sends out a RARP request (Reverse ARP (Address 
       Resolution Protocol)) to determine its IP address.  The
       server sends a RARP response mapping the ethernet hardware address to 
       an IP address.
    <li>The NetBSD bootprogram then broadcasts a RPC/BOOTPARAMS/WHOAMI request 
        to the server asking for the client name and IP address.
    <li>The NetBSD bootprogram then requests a RPC/BOOTPARAMS/GETFILE to
        determine the nfs server and root directory, using the client name 
	specified in the RPC/BOOTPARAMS/WHOAMI request.
    <li>The NetBSD bootprogram mounts the root directory from the nfs server.
    <li>The NetBSD bootprogram loads the specified kernel using NFS read calls
    <li>The NetBSD bootprogram then transfers control to the kernel.
    </ol>
  </li>

  <li><tt>bootp</tt> and <tt>tftp</tt>,<br>
    <ol>
    <li>The NetBSD bootloader sends out a bootp request to determine 
       various bits of information, namely its IP address, subnet mask,
       TFTP server, kernel name, and NFS path.
    <li>The NetBSD bootprogram then connects to the TFTP server and downloads
       the kernel.
    <li>The NetBSD bootprogram then transfers control to the kernel.
    </ol>
  </li>

  <li><tt>dhcp</tt> and <tt>tftp</tt>,<br>
    <ol>
    <li>The NetBSD bootloader sends out a dhcp request to determine 
       various bits of information, namely its IP address, subnet mask,
       TFTP server, kernel name, and NFS path.
    <li>The NetBSD bootprogram then connects to the TFTP server and downloads
       the kernel.
    <li>The NetBSD bootprogram then transfers control to the kernel.
    </ol>
  </li>

  <li><tt>rboot</tt>,<br>
    <ol>
    <li>The NetBSD bootloader uses the firmware to send out <tt>rboot</tt>
       requests to download the kernel.
    <li>The NetBSD bootprogram then transfers control to the kernel.
    </ol>
  </li>
  </ul>
</li>

<li>The kernel takes control and begins mounting the nfs filesystem and
    switches to multi-user.
<p>
    The kernel needs to repeat the work of the bootloader, since there is 
    currently no standard method of transfering that information.  This
    means that it will use the one of the methods above to determine its
    IP address and the NFS path on the NFS server.
<p>
   Typically the kernel is configured to use the same protocols as the 
   bootloader, however, this can be configured differently when compiling
   a new kernel.
</ol>
</dd></dl>

<h2>Server hardware/OS requirements</h2>
<dl><dt><dd>
The server must have ethernet support and enough disk space to store
the necessary files for an installation of NetBSD.  See your platform's
INSTALL guide for details on which packages are necessary and how
much space they require.
<p>

If the server has the same architecture (e.g. Motorola 680X0 microprocessor
for NetBSD/hp300 and next68k, Sparc microprocessor for NetBSD/sparc, and Vax 
microprocessor for NetBSD/vax), and is
running NetBSD, then the client will be able to use the <tt>/usr</tt> directory
structure from the server, saving a significant amount of disk space.
<p>

If the server is the same port (not just the same microprocessor), then you
can set up a pseudo-clustered environment where almost everything is
shared between the client(s) and the server.
<p>

It is worth noting, that each stage of the netbooting process can be
handled by a different server, running a different OS.  This means,
you can use HP-UX to handle the <tt>rbootd</tt> requests (e.g. for
NetBSD/hp300), SunOS to respond to the <tt>rarp</tt> and
<tt>bootparams</tt> request, and NeXTSTEP to deal with the nfs
filesystem.  This lends quite a bit of flexibility to the process, and
is the reason these pages are broken up by daemon and not by OS.
<p>

<big><b><a name="platdaemon">Platform/daemon chart</a></b></big>
<p>

Here's a quick and dirty breakdown of which client architectures require
which daemons to be running on the server.
<p>

<table border="1" cellspacing="1" cellpadding="5">
<tr><td><h3>
Platform\daemon
</h3></td><td><h4>
<tt>rbootd</tt>
</h4></td><td><h4>
<tt>mopd</tt>
</h4></td><td><h4>
<tt>ndbootd</tt>
</h4></td><td><h4>
<tt>rarpd</tt>
</h4></td><td><h4>
<tt>bootparamd</tt>
</h4></td><td><h4>
<tt>bootpd&nbsp;(1)</tt>
</h4></td><td><h4>
<tt>dhcpd&nbsp;(1)</tt>
</h4></td><td><h4>
<tt>tftpd</tt>
</h4></td><td><h4>
<tt>nfsd</tt>
</h4></td></tr>

<tr><td>
<a href="intro.alpha.html">alpha</a>
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
no
</td><td>
yes
</td><td>
yes
</td></tr>

<tr><td>
<a href="intro.hp300.html">hp300</a>
</td><td>
yes
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
yes
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes
</td></tr>

<tr><td>
<a href="intro.hp700.html">hp700</a>
</td><td>
yes&nbsp;(2)
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
no
</td><td>
yes&nbsp;(2)
</td><td>
yes
</td></tr>

<tr><td>
<a href="intro.i386.html">i386</a>
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td></tr>

<tr><td>
<a href="intro.macppc.html">macppc</a>
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes&nbsp;
</td><td>
no
</td><td>
yes
</td><td>
yes
</td></tr>

<tr><td>
<a href="intro.next68k.html">next68k</a>
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
no
</td><td>
yes
</td><td>
yes
</td></tr>

<tr><td>
<a href="intro.pmax.html">pmax</a>
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
no
</td><td>
yes
</td><td>
yes
</td></tr>

<tr><td>
<a href="intro.sun.html">sparc</a>
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes&nbsp;(3)
</td><td>
yes&nbsp;(3)
</td><td>
no
</td><td>
yes&nbsp;(3)
</td><td>
yes
</td><td>
yes
</td></tr>

<tr><td>
<a href="intro.sun2.html">sun2</a>
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes
</td></tr>

<tr><td>
<a href="intro.sun.html">sun3</a>
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
yes
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
yes
</td></tr>

<tr><td>
<a href="intro.vax.html">vax</a>
</td><td>
no
</td><td>
yes
</td><td>
no
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
no
</td><td>
no
</td><td>
yes
</td></tr>
</table>
<p>

(1) <tt>dhcpd</tt> can act as a <tt>bootpd</tt> server.<br>
(2) newer models of hp700 workstations need tftp instead of rbootd.<br>
(3) some versions of the JavaStation need dhcp instead of rarp and
bootparams.<br>
<p>

<big><b><a name="servdaemon">Server/daemon compatability chart</a></b></big>
<p>

Here's a breakdown of what daemons are available on which server OSes.
Unless otherwise specified, the software will work on any architecture
the server OS supports (e.g. for Solaris, it is assumed to work on both
sparc and i386 architecture).
<p>

There are two additional pieces of software required on the server: 
<tt>gzip</tt> and <tt>gnutar</tt>.  Now would be a good time to get and 
compile <tt><a href="ftp://ftp.gnu.org/pub/gnu/gzip/gzip-1.2.4a.shar">gzip
</a></tt> and 
<tt><a href="ftp://ftp.gnu.org/pub/gnu/tar/tar-1.13.tar.gz">gnutar</a></tt> if
there is a <tt>(c)</tt> next to them for your server operating system in the 
table below.  <tt>gnutar</tt> is necessary to preserve the proper <tt>uid</tt> 
and <tt>gid</tt> numbers when extracting the client's filesystem.
<p>

<table border="1" cellspacing="1" cellpadding="5">
<tr><td><h3>
OS\daemon
</h3></td><td><h4>
<tt>rbootd</tt>
</h4></td><td><h4>
<tt>mopd</tt>
</h4></td><td><h4>
<tt>ndbootd</tt>
</h4></td><td><h4>
<tt>rarpd</tt>
</h4></td><td><h4>
<tt>bootparamd</tt>
</h4></td><td><h4>
<tt>bootp</tt>
</h4></td><td><h4>
<tt>dhcp</tt>
</h4></td><td><h4>
<tt>tftp</tt>
</h4></td><td><h4>
<tt>nfs</tt>
</h4></td><td><h4>
<tt>gzip</tt>
</h4></td><td><h4>
<tt>gnutar</tt>
</h4></td></tr>

<tr><td>
<a href="../../../">NetBSD</a>
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td></tr>

<tr><td>
<a href="http://www.openbsd.org/">OpenBSD</a>
</td><td>
yes
</td><td>
yes
</td><td>
yes&nbsp;(c)
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td></tr>

<tr><td>
<a href="http://www.freebsd.org/">FreeBSD</a>
</td><td>
yes (c)
</td><td>
yes&nbsp;(c)
</td><td>
yes&nbsp;(c)
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes (c)
</td></tr>

<tr><td>
<a href="http://www.opensource.apple.com/">MacOS X/Darwin</a>
</td><td>
yes
</td><td>
no
</td><td>
no
</td><td>
yes&nbsp;(?)
</td><td>
yes
</td><td>
yes&nbsp;(2)
</td><td>
yes&nbsp;(c)
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes&nbsp;(3)
</td></tr>

<tr><td>
<a href="http://www.linux.org/">Linux</a>
</td><td>
yes (c)
</td><td>
yes&nbsp;(c)
</td><td>
no
</td><td>
yes&nbsp;(k)
</td><td>
yes (c)
</td><td>
yes
</td><td>
yes&nbsp;(c)
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes (c)
</td></tr>

<tr><td>
<a href="http://www.sun.com/">SunOS 4</a>
</td><td>
yes (c)
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
yes
</td><td>
yes&nbsp;(c)
</td><td>
yes&nbsp;(c)
</td><td>
yes
</td><td>
yes
</td><td>
yes&nbsp;(c)
</td><td>
yes (c)
</td></tr>

<tr><td>
<a href="http://www.sun.com/">Solaris 2</a>
</td><td>
yes (c)
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
yes (1)
</td><td>
yes (c)
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes (c)
</td><td>
yes (c)
</td></tr>

<tr><td>
<a href="http://www.sony.co.jp/Products/Computer/">
NEWS-OS 4.x</a>
</td><td>
yes (c)
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
no
</td><td>
yes
</td><td>
yes
</td><td>
yes (c)
</td><td>
yes (c)
</td></tr>

<tr><td>
<a href="http://www.apple.com/enterprise/">
NEXTSTEP 3.3</a>
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes (?)
</td><td>
yes (?)
</td><td>
yes (?)
</td><td>
yes (c)
</td><td>
yes
</td><td>
yes
</td><td>
yes (c)
</td><td>
yes (c)
</td></tr>

<tr><td>
<a href="http://www.hp.com/">HP-UX 7, 9</a>
</td><td>
yes (c)
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
yes&nbsp;(k)
</td><td>
yes (c)
</td><td>
yes (c)
</td></tr>

<tr><td>
<a href="http://www.hp.com/">HP-UX 10</a>
</td><td>
yes (c)
</td><td>
no
</td><td>
no
</td><td>
yes
</td><td>
no
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes
</td><td>
yes (c)
</td></tr>

<tr><td>
DomainOS
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
no
</td><td>
?
</td><td>
?
</td><td>
?
</td><td>
no
</td><td>
yes (c)
</td><td>
yes (c)
</td></tr>
</table>
<p>

(1) means that Solaris has bootparamd, but it doesn't interact well with
   the NetBSD bootloader, but there is a workaround<br>
(2) MacOS X and Darwin have a native <tt>bootpd</tt>, but it is unable to
   netboot NetBSD systems<br>
(3) MacOS X and Darwin have <tt>gnutar</tt> and old <tt>tar</tt> -- make sure
   you run <tt>gnutar</tt> to extract the files<br>
(c) means you have to compile the program from sources<br>
(k) means you have to compile a new kernel and reboot<br>
(?) means there is a native version of this daemon, but its functionality
    is unknown
</dd></dl>

<h2>Network Configuration</h2>
<dl><dt><dd>
There are three types of ethernet media you'll need to know about.  Each type 
has several names, so to make things clear:
<p>

<table border="1" cellspacing="1" cellpadding="5"><tr>
  <td><i>Names</i></td>
  <td><i>Description</i></td>
</tr><tr>
  <td>10Base2,<br><b>Thin&nbsp;LAN</b>,<br>Thin&nbsp;net,<br>Coax</td>
  <td>Daisy-chained connection of coaxial cables with BNC connectors.
      Each end of the chain must have a 50 Ohm terminator, and machines in
      the middle of the chain use a Tee to conect.  
</tr><tr>
   <td>10Base5,<br><b>Thick</b>,<br>AUI</td>
   <td>Daisy-chain/Star configuration (i.e. every workstation connects
       either to the backbone or to a "fan out" box which is connected
       to the backbone) using DB 15 connectors (D shaped connectors
       with 15 pins).  The actual topology of a Thick network can be rather
       complicated.<p>
       Most importantly, can purchase for about US$30 a transciever that
       will allow you to plug a Thick connector into other types of
       ethernet (including Thin, 10BaseT, FDDI, and several others).
</tr><tr>
   <td><b>10BaseT</b>,<br>UTP,<br>Twisted&nbsp;Pair</td>
   <td>Star configuration, using RJ45 connectors (like US phone jack, except
       with more pins).  You may also run across 10Base-T "T"s, such
       that workstations might be daisy-chained. 
</tr></table>
<p>

Now that that's settled, you'll need to make sure that your client is 
connected to the same <i>subnet</i> as the server.  In other words, it 
absolutely <b>must not</b> go through a router.  Connection through a hub
or switch will
cause no problems.  If you are unsure of this, contact your network 
administrator.  The exception to this is that the <tt>nfs</tt> server does not
need to be on the same subnet.
<p>

Some things to note:
<p>

<ul>
<li>Many 10BaseT hubs have Thin and Thick ethernet connectors on them.  
    If this is the case with a hub near your workstation, you can
    probably connect to the network here.
<p>

<li>If your client has Thick ethernet, you can purchase, for about US$30,
    a transciever that will connect you to a 10BaseT network.
<p>

<li>If your server has more than one type of ethernet on a card, it will
    only be able to use one of those ports at a time (e.g. a PCI ethernet
    card for Mac or Intel hardware often has 10Base-T and AUI, but only
    one can be used at a time).  See below.
</ul>
<p>

<big><b>Changing ethernet media on your server</b></big>
<p>

You may need to change the ethernet media on your server's ethernet
card, if your network connection is wrong (i.e. it's using the wrong
ethernet media type).  This is briefly how to do it.  More detail can
be found in the documentation that came with your ethernet card (or
with your computer if the ethernet is built-in).  If you are
uncomfortable with these procedures, ask your network administrator
for help.  Briefly, what's involved is:
<p>

<ul>
<li>Many new ethernet cards or built-in ethernet (for Mac or Intel
   hardware) will automatically use 10Base-T if there is a
   10Base-T cable plugged in.  Simply unplug the 10Base-T cable and reboot
   to see if it defaults to the other ethernet media type.
<p>

<li>If that fails, your ethernet card may have come with a floppy disk
   with a utility program that will change the media.  For Intel machines,
   you may need to boot off that floppy.  You can also probably download
   the utility program from the vendor's website.
<p>

<li>If that fails, you will need to open your computer up and find
   the ethernet card.  Be sure to use proper static-prevention
   measures, you could fry your computer.  If you aren't comforatable
   with this, ask a friend who is comfortable to help you.  There will
   probably be jumpers that you need to move around. Typically, either
   the jumper positions will be clearly labeled or will correspond to
   the port (i.e. if the 10Base-T is on the left, selecting the left
   jumper position will select 10Base-T).
</ul>
<p>

Alternatively, if your server has a second ethernet card, you can create your
own private network, consisting of the server and your client.  Information
on how to configure the server OS to give your client access to the
internet is beyond the scope of this HOW-TO.
</dd></dl>

<h2>Before starting</h2>
<dl><dt><dd>
Here are the naming conventions used in this HOW-TO, you will probably want
to use your own names and addresses when following the instructions:
<p>

<table>
<tr><td><tt>
le0
</tt></td><td>
device name of the ethernet interface (common on sun, hp, and dec hardware)
</td></tr>

<tr><td><tt>
192.168.1.10
</tt></td><td>
IP address (decimal) of the diskless client.
</td></tr>

<tr><td><tt>
client.test.net
</tt></td><td>
Internet canonical name of the diskless client.
</td></tr>
<tr><td>

<tr><td valign=top><tt>
C0A8010A
</tt></td><td>
IP address (hexadecimal) of the diskless client.<br>
Only used for SunOS, Solaris, and the <tt>sun-rbootd</tt> daemon.
</td></tr>

<tr><td><tt>
CCCCCCCCCCCC<br>
CC:CC:CC:CC:CC:CC
</tt></td><td>
Ethernet hardware address of the diskless client.
</td></tr>

<tr><td><tt>
192.168.1.5
</tt></td><td>
IP address (decimal) of the diskless server.
</td></tr>

<tr><td valign=top><tt>
rbootdserver.test.net
</tt></td><td>
Internet canonical name of the diskless <tt>rbootd</tt> server.<br>
(<i>hp300 only</i>)
</td></tr>

<tr><td valign=top><tt>
mopserver.test.net
</tt></td><td>
Internet canonical name of the diskless <tt>mop</tt> server.<br>
(<i>vax only</i>)
</td></tr>

<tr><td><tt>
SSSSSSSSSSSS<br>
SS:SS:SS:SS:SS:SS
</tt></td><td valign=top>
Ethernet hardware address of the bootloader server.<br>
</td></tr>

<tr><td><tt>
tftpserver.test.net
</tt></td><td>
Internet canonical name of the diskless <tt>tftp</tt> server.
</td></tr>

<tr><td><tt>
rarpserver.test.net
</tt></td><td>
Internet canonical name of the diskless <tt>rarp</tt> server.
</td></tr>

<tr><td><tt>
bootparamserver.test.net
</tt></td><td>
Internet canonical name of the diskless <tt>bootparams</tt> server.
</td></tr>

<tr><td><tt>
bootpserver.test.net
</tt></td><td>
Internet canonical name of the diskless <tt>bootp</tt> server.
</td></tr>

<tr><td><tt>
dhcpserver.test.net
</tt></td><td>
Internet canonical name of the diskless <tt>dhcp</tt> server.
</td></tr>

<tr><td><tt>
nfsserver.test.net
</tt></td><td>
Internet canonical name of the diskless <tt>nfs</tt> server.
</td></tr>

<tr><td><tt>
/export/client/root
</tt></td><td>
Path to client's filesystem, as specified on the <tt>nfsserver</tt>.
</td></tr>

<tr><td><tt>
dns.test.net
</tt></td><td>
Internet canonical name of the domain name server (DNS).
</td></tr>

<tr><td><tt>
router.test.net
</tt></td><td>
Internet canonical name of the router for the client's subnet.
</td></tr>

<tr><td><tt>
255.255.255.0
</tt></td><td>
Subnet mask used by the client (may be set with <tt>bootpd</tt> and
<tt>dhcpd</tt>).
</td></tr>

<tr><td><tt>
192.168.1.255
</tt></td><td>
Broadcast address used by the client (may be set with <tt>bootpd</tt> and
<tt>dhcpd</tt>).
</td></tr>
</table>
<p>

Here are few things worth noting:
<p>

<ul>
<li>You don't need to run all of the daemons on one server, they may each
   be handled by a different server.  There are various reasons you may want
   to do this (e.g. using HP-UX for <tt>rbootd</tt> and some other platform 
   for the rest).  This is why the names of the servers are distinguished 
   throughout this HOW-TO.  If you plan to run all of your daemons on one
   machine, then simply equate the names, e.g. for a hp300 diskless server:<br>
   <tt>rbootdserver = rarpserver = bootparamserver = nfsserver</tt>.
<p>

<li>If the attempt to boot the client fails at any stage, the wisest move is
   to reset the client.  I've seen some weird things happen on the second try.
   <p>For hp300 machines, this is accomplished by
   hitting Shift-Reset, pressing the
   reset button on a Series 400 workstation, or power-cycling a Series 300
   workstation.
<p>

<li>And lastly, a recommendation: Each daemon can be set up and
   tested one at a time.  This helps narrow down where a problem may
   be, as you can be sure that the previous step worked.  So, it is
   probably best if you set up the client-specific bootloader daemon,
   test to see that it worked, then move on to <tt>rarp</tt> (unless 
   <tt>rarp</tt> <i>is</i> your client-specific bootloader daemon).  Make
   sure that <tt>rarp</tt> and the client-specific bootloader daemon
   work, then set up <tt>bootparamd</tt>, and so on.  Once you're sure
   that everything works (i.e. the kernel starts loading), then you
   should go about setting up the daemons to start automatically and
   installing the necessary diskless filesystem.
</ul>
</dd></dl>

<h2>Download NetBSD</h2>
<dl><dt><dd>
OK, now make some room on your server -- it's time to download NetBSD.  It is
best to do this from an actual ftp program and not a browser, since you can 
download multiple items at once.  NetBSD 1.5.3 is the latest release,
as of 2002/08.
<p>

<ol>
<li><tt>#&nbsp;<b>mkdir&nbsp;-p&nbsp;/export/client/NetBSD-1.5.3/installation/misc</b></tt>
<p>

<li><tt>#&nbsp;<b>mkdir&nbsp;-p&nbsp;/export/client/NetBSD-1.5.3/binary/security</b></tt><br>
       Note, you may not perform this step if you don't meet the requirements
       for US Export Control
<p>

<li><tt>#&nbsp;<b>mkdir&nbsp;-p&nbsp;/export/client/NetBSD-1.5.3/binary/sets</b></tt>
<p>

<li><tt># <b>cd /export/client/NetBSD-1.5.3</b></tt>
<p>

<li><tt># <b>ftp ftp.netbsd.org</b></tt><br>
       Replace <tt>ftp.netbsd.org</tt> with the nearest 
       <a href="../../../mirrors/">ftp mirror</a>
<p>

<li><tt>ftp&gt; <b>bin</b></tt>
<p>

<li><tt>ftp&gt; <b>prompt</b></tt>
<p>

<li><tt>ftp&gt; <b>cd /pub/NetBSD/NetBSD-1.5.3/&lt;client-arch&gt;/</b></tt>
<p>

<li><tt>ftp&gt; <b>mget *</b></tt><br>
       This should download everything, including files in subdirectories.
       If the ftp program on your server doesn't download subdirectories,
       you will need to manually <tt>cd</tt> and <tt>lcd</tt> to the 
       directories and <tt>mget</tt> everything.
       <p>
       If your server doesn't have enough space for everything, fear not.
       All you <i>really</i> need to get a minimally functional NetBSD is 
       (starting from <tt>/pub/NetBSD/NetBSD-1.5.3/&lt;client-arch&gt;/)</tt>:
<pre>INSTALL.txt
binary/sets/kern.tgz
binary/sets/base.tgz
binary/sets/etc.tgz
installation/misc/SYS_UBOOT.gz <i>(for hp300)</i>
installation/misc/rbootd.tgz  <i>(for hp300)</i>
</pre>
<p>

<li><tt>ftp&gt; <b>exit</b></tt>
<p>

<li><b>Please</b> take the time to read the official 
      <tt><i>INSTALL</i></tt> notes, located in
      <tt>/export/client/NetBSD-1.5.3/INSTALL</tt>
</ol>
</dd></dl>

<h2><A name="platformspecific">Platform-specific Introduction</a></h2>
<dl><dt><dd>
Now, read the introduction with details on your client's platform:
<ul>
  <li><a href="intro.alpha.html">alpha</a>
  <li>arm32 (coming soon)
  <li>cobalt (see the <a href="../../../Ports/cobalt/faq.html">FAQ</a>)
  <li><a href="intro.hp300.html">hp300</a>
  <li><a href="intro.hp700.html">hp700</a>
  <li><a href="intro.i386.html">i386</a>
  <li>luna68k (see the 
     <a href="../../../Ports/luna68k/install.html">Installation notes</a>)
  <li><a href="intro.macppc.html">macppc</a>
  <li>mvme68k (coming soon)
  <li><a href="intro.next68k.html">next68k</a>
  <li>ofppc (coming soon)
  <li><a href="intro.pmax.html">pmax</a>
  <li>sgimips (see the <a href="../../../Ports/sgimips/faq.html">FAQ</a>)
  <li><a href="intro.sun.html">sparc</a>
  <li><a href="intro.sun2.html">sun2</a>
  <li><a href="intro.sun.html">sun3</a>
  <li>sparc64 (see the 
     <a href="../../../Ports/sparc64/faq.html#netbooting">FAQ</a>) 
  <li><a href="intro.vax.html">vax</a>
  <li>Alternatively, you may have a <a href="local.html">local</a> bootloader
    and run diskless otherwise.
</ul>
</dd></dl>

<hr>

<a href="./">Table of Contents</a>

<hr> 

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../../"><img
        src="../../../images/NetBSD-flag.gif" border="0"
        width="91" height="42" alt=""></a> 
  </td><td>
    <a href="../../../"><img
        src="../../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">Home Page</a>
  </td></tr></table>
</td><td>
  <table><tr><td> 
    <a href="../../../Documentation/"><img
        src="../../../images/NetBSD-flag.gif" border="0"
        width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../../Documentation/"><img
        src="../../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  <a href="../../../Misc/feedback.html">(Contact us)</a>
  $NetBSD: intro.html,v 1.48 2002/08/09 16:37:33 jschauma Exp $<br>
  <a href="../../../Misc/disclaimer.html">Copyright &copy;
    1998, 1999, 2000, 2001
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
