<html>
<head>
<!-- Copyright (c) 1998, 1999
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>NetBSD DHCP HOWTO</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1><a name="top">NetBSD DHCP HOWTO</a></h1>

<h2>Dan McMahill, <code>mcmahill@alum.mit.edu</code></h2>v1.0, June 6, 1998
<p><hr><em>このドキュメントは、動的ホスト・コンフィギュレーション・プロトコル (DHCP) のクライアントを、NetBSDでどのように設定するか説明しています。</em><hr></p>
<p>
<h2>1. <a name="toc1" href="#s1">紹介と目的</a></h2>
<ul>
<li><a href="#ss1.1">1.1 DHCPとは何か</a>
<li><a href="#ss1.2">1.2 DHCPはどのような人に有用か</a>
<li><a href="#ss1.3">1.3 より詳細な情報の所在</a>
<li><a href="#ss1.4">1.4 著作権と免責</a>
<li><a href="#ss1.5">1.5 追加と修正</a>
<li><a href="#ss1.6">1.6 協力者</a>
<li><a href="#ss1.7">1.7 改訂履歴</a>
</ul>

<p>
<h2>2. <a name="toc2" href="#s2">DHCPクライアントの設定</a></h2>
<ul>
<li><a href="#ss2.1">2.1 DHCPを有効にする</a>
<li><a href="#ss2.2">2.2 DHCPのコンフィギュレーション</a>
<li><a href="#ss2.3">2.3 dhclient-script を更新する</a>
</ul>

<p>
<h2>3. <a name="toc3" href="#s3">DHCPサーバーを設定する</a></h2>
<em>このセクションには手が付いていません。もし誰かやった人がいたら、
ぜひどうやったか教えてください。</em>
</p>

<p>
<a href="#top">先頭</a>へ戻る。
<hr>
<h1>1. <a name="s1">紹介と目的</a></h1>
<hr>
<p>このドキュメントの目的は、DHCPのクライアントとサーバーを NetBSDオペ
レーティングシステムにおいて設定する方法を説明することです。</p>
<p>
<h2>1.1 <a name="ss1.1">DHCPとは何か</a></h2>
   
<p>
DHCPはDynamic Host Configuration Protocolの略です。
それによって、ホストコンピューターの
ネットワーク設定を動的に行うことがで
きます。
基本的なアイディアは以下の通り:
<ul>
<li>DHCPクライアントが使用される場合、そのコンピューターには最初はIPアドレスが割当てられていない。
<li>クライアントはそのネットワーク上の任意のDHCPサーバーに対してブロードキャストメッセージを発行する。
<li>やりとりが行われ、DHCPサーバーはクライアントにIPアドレスを割当てる。
サーバーはまた、その他の重要なネットワーク設定パラメーター(例えば、ネームサーバーのアドレスなど)も通知する。
</ul>

</p>
<p>
<h2>1.2 <a name="ss1.2">DHCPはどのような人にとって有用か</a></h2>
</p>
<p>
多くのインターネット・サービス・プロバイダ(ISP)はDHCPを使う必用があります。
別の使い道は、一つ以上のネットワークに接続する可能性のあるラップトップコンピューターです。
例えば、ラップトップはオフィスと自宅の両方でネットワークに接続されることがあります。
この場合、異なる2つのネットワークに接続するために手動で設定を変更し直す必用がないので、
DHCPを使うのがぴったりと言えます。
</p>

<p><h2>1.3 <a name="ss1.3">より詳細な情報の所在</a></h2>
</p>
<p>
筆者は自分がDHCPのエキスパートであると、(あるいは、この件に関してエキスパートに似た何かであるとさえ)言うつもりはありません。
しかしながら、Webで詳細な情報を入手することが可能です。

定義文書は、
「<a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc1541.html"><b>RFC 1541</b></a>, 
Request for Comments document for the Dynamic Host Configuration Protocol (DHCP) 」です。
また、包括的な
「<a href="http://web.syr.edu/~jmwobus/comfaqs/dhcp.faq.html">DHCP FAQ</a>」もあります。
</p>

<p><h2>1.4 <a name="ss1.4">著作権と免責</a></h2>
</p>
<p>
このHOWTOに含まれる情報が正しいものであることをできる限り確かめてはいますが、このHOWTO中の情報の使用の結果生じたいかなる損失・損害についても、筆者は責任を負いません。</P>
</p>
<p>this HOWTO is Copyright (c), 1998 by Dan McMahill.</p>

<p><h2>1.5 <a name="ss1.5">追加と修正</a></h2>
</p>
<p>
追加、提案、修正は Dan McMahill
<a href="mailto:mcmahill@alum.mit.edu">&lt;mcmahill@alum.mit.edu&gt</a>
に送ってください。
修正をした場合は、HOWTO全体を送るのではなくて、HOWTO中の修正対象部分と
修正済みの文章をだけを送るようにしてください。
</p>

<p><h2>1.6 <a name="ss1.6">協力者</a></h2>
</p>
<p>下記の人々がDHCP HOWTOに協力しくれました:
<ul>
<li>何人かいるのですが、不幸なことに私は彼等の名前をなくしてしまいました。
もしあなたが協力者の一人なら、私に連絡してくださればここに名前を載せます。</li>
</ul>
</p>

<p><h2>1.7 <a name="ss1.7">改訂履歴</a></h2>
</p>
<p>
<ul>
<li>1998年6月6日 - HOWTO 初版 Dan McMahill著 (
<a href="mailto:mcmahill@alum.mit.edu">&lt;mcmahill@alum.mit.edu&gt</a>)</li>
</ul>
</p>

<p>
<a href="#top">先頭</a>へ戻る。
</p>

<hr>
<h1>2. <a name="s2">DHCP クライアントの設定</a></h1>
<hr>
<p>
この節では、NetBSDにおけるDHCPクライアントの設定方法について説明します。
このドキュメントは NetBSD-1.3向けに書かれています。
</p>

<p><h2>2.1 <a name="ss2.1">DHCPを有効にする</a></h2>
</p>
<p>
<code>/etc/netstart.local</code> を編集して、'<code>dhclient
<em>interface</em></code>'の行を追加します。ここで<code><em>interface</em></code>
はネットワークインターフェース、 
例えば NetBSD/mac68kでは<code>ae0</code>あるいは <code>sn0</code>です。
あなたがどのドライバーを持っているかは、ブートシーケンスか
<code>dmesg</code>の出力を見ることによってわかります。
これで、ブートシーケンス中にDHCPクライアントのソフトウェアが自動的に起動されます。
</p>

<h2>2.2 <a name="ss2.2">DHCPを設定する</a></h2>
<ul>
<li><code>/etc/dhclient.conf</code> ファイルを作成します。
このファイルを必用に応じてカスタマイズしてください。
つまり、ホスト名やイーサネットインターフェースを変更します。
典型的な <code>/etc/dhclient.conf</code> を以下に示します。

<pre>
Send host-name "myname.my.domain";                 &lt;=== ここに
                                                        ホスト名を書く
send dhcp-client-identifier "myident";             &lt;=== ここにホスト
                                                        識別子を書く
							(これは myname と同じ
							 であることが多い).
request subnet-mask, broadcast-address, routers,
    domain-name-servers;

timeout 30;
retry 60;
select-timeout 5;

script "/etc/dhclient-script";

lease {
  interface "sn0";                               &lt;=== ここにインターフェース
                                                      デバイスを書く
  option host-name "myname.my.domain";           &lt;=== ここに
                                                      ホスト名を書く
  option subnet-mask 255.255.255.0;
  option domain-name "my.domain";                &lt;=== ここに
                                                      ドメイン名を書く
  option domain-name-servers 127.0.0.1;
  renew 2 2000/1/12 00:00:01;
  rebind 2 2000/1/12 00:00:01;
  expire 2 2000/1/12 00:00:01;
}
</pre>

<p>
詳細は
<!-- 訳者コメント: 原文ではのマニュアルページへのリンクは生きていなかったので、変更しました。 -->
<code><a href="http://www.flame.org/cgi-bin/uncgi/hman?page=dhcp-options&amp;sect=5">
dhcp-options(5)</a></code> と <code><a
href="http://www.flame.org/cgi-bin/uncgi/hman?page=dhclient.conf&amp;sect=5">
dhclient.conf(5)</a></code> を参照してください。
</p>
</ul>

<h2>2.3 <a name="ss2.3">dhclient-scriptを更新する</a></h2>
<p>
ネットワークカードが二つ以上あるなら、
<code>/etc/dhclient-script</code> を編集して大きなログファイルができてしまうバグを回避する必用があります。
基本的な方針は、DHCPが走っていないネットワークカードについて呼ばれた時は、
dhclient-script を何もしないで終了させることです。
</p>

<p> 
例として、筆者のマシンには2枚のネットワークカードがあります。
<code>ae1</code> ネットワークカードにはDHCPを走らせ、
<code>ae0</code>には走らせていません。 
この例では、以下の数行を<code>/etc/dhclient-script</code> ファイルの先頭にある 
<code>#!/bin/sh</code> の直後に追加します。
</p>

<pre>
  # don't run DHCP on ae0 
  if [ $interface = "ae0" ]; then
    exit 0
  fi
</pre>

<p>
DHCPを設定したら、その設定を有効にするためにコンピューターをリブートしなければなりません。
</p>

<p>
<a href="#top">先頭</a>へ戻る。
</p>

<hr>
<h1>3. <a name="s3">DHCP サーバーを設定する</a></h1>
<hr>
<p>
この節では、多分、NetBSDにおいてDHCPサーバーを設定する方法を説明するでしょう。
筆者はまだ書いていないので、
誰かこの節を追加したい人がいたらぜひそうしてください。
とっかかりとしては、
<a href="http://www.flame.org/cgi-bin/uncgi/hman/dhcpd;8"> dhcpd(8)</a> マニュアルページが良いでしょう。
</p>

<p>
<a href="#top">先頭</a>へ戻る。
</p>

<hr>
<a href="index.html"><em>NetBSD ドキュメンテーション: ネットワーク</em>へ戻る。</a>

<hr>
<table width="100%"><tr>
  <td>
    <table><tr>
      <td>
	<a href="../../index.html">
	<img src="../../images/NetBSD-banner.gif" alt="NetBSD&nbsp;Home"></a>
      </td><td>
	<a href="../../index.html">ホームページ</a>
      </td>
    </tr></table>
  </td><td>
    <table><tr>
      <td>
	<a href="../index.html">
	<img src="../../images/NetBSD-banner.gif"
	alt="NetBSD&nbsp;Documentation"></a>
      </td><td>
	<a href="../index.html">NetBSDドキュメンテーション</a>
      </td>
    </tr></table>
  </td>
</tr></table>

<hr>
<address>
  www@JP.NetBSD.ORG<br>
  $NetBSD: dhcp.html,v 1.2 1999/02/14 19:01:06 abs Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1998, 1999
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
</address>

</body>
</html>
