<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html lang="ja">
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'gprs.list' AND RUN 'make' -->

<!-- Copyright (c) 1994-2004
        The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<link rev="made" href="mailto:www@jp.NetBSD.org">
<link rel="shortcut icon" href="../../../favicon.ico" origlink="/favicon.ico" type="image/x-icon">
<title>GPRS, CDPD HowTo</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<table><tr><td>
    <a href="../../Misc/disclaimer.html#bsd-daemon"><img
     align="middle" src="../../../images/BSD-daemon.jpg" origlink="../../images/BSD-daemon.jpg" border="0"
     width=146 height=129 alt="BSD daemon"></a>
  </td><td align=center>
    <h1>NetBSD ドキュメンテーション:</h1>
    <h1>GPRS、 CDPD を使った NetBSD ネットワーキング</h1>
</td></tr></table>
<p>

<ul>
<li>
<a href="#intro">はじめに</a></li>
<li>
<a href="#gprs">General Packet Radio Service (GPRS) カードを使う</a></li>
<li>
<a href="#sony-ericcson-t200">SonyEricsson t200 を使う</a></li>
<li>
<a href="#cdpd">Cellular Digital Packet Data (CDPD) カードを使う</a></li>
</ul>


<p><h3>
<a name="intro">はじめに</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

GPRS/CDPD では、
カードは純技術的にはモデムですが、普通の感覚ではモデムには見えないでしょう。
たとえば、カードは PSTN 電話番号をダイアルしたり、キャリアーを受け取ったり、
速度をネゴシエートしたり、シリアルデータを前後に渡したりしません。
<p>

カードはセルラーのパケットを使ってセルラーの基地局と喋ります。このパケットに
IP データグラムが含まれており、基地局はこのデータグラムをインターネットへ
送ります。クライアントは基地局に 'ppp' を喋りません。
クライアントはカードに対してだけ ppp で喋ります。カードは ppp
からパケットを抽出して CDPD または GPRS パケットに包み直し、
アンテナから基地局へ送出します。カードは、クライアントに対しては、
クライアントのオペレーティングシステムのドライバーの設定が容易になるように、
PPP インターフェースを提供しています。ご覧のとおり、単に設定すればいいだけで、
NetBSD ユーティリティーを作り直す必要はありません。
<p>

GPRS の場合、モデムは (私が思うに) 5 つのプロバイダー設定を持ちます。
それぞれの設定を、あなたがお使いのサービスプロバイダー用に設定します。
そのために、
"AT" コマンドを使って指定するパラメーターがあります。
<p>

CDPD でも AT コマンドを使って設定しますが、こちらは各プロバイダーに対して
ひとつの設定があるだけです。
<p>

'kermit' は、 (モデムをメーカーから受け取った後の) 最初の AT 設定コマンドを
モデムに送るために使うことができます。一旦モデムを設定してしまえば、
再度 'kermit' を使う必要はありません。配布に含まれているので 'tip'
を使うこともできますが、設定方法や使用方法を文書で説明するのは
こちらのほうが難しいでしょう。
モデム自体の設定については、この文書の守備範囲外ですので、
お使いのベンダーのドキュメンテーションを確認してください。
GPRS などで、プロバイダーが顧客向けにカードをあらかじめ設定したり、
カードに早見表を附属させることが可能です。おそらく、携帯電話と同様で、
プロバイダーからの購入時に設定してもらえるでしょう。
<p>

いずれにせよ、 PPP 開始用のコマンドは機種特有です。
<p>


</dd></dl>
<p><h3>
<a name="gprs">General Packet Radio Service (GPRS) カードを使う</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

NovatelWireless GPRS ワイヤレスデータカードを使うためには、まず
カードのメーカーとプロバイダーの設定に応じてカードを設定する必要があります。
お使いのプロバイダーに連絡を取ってください。
テスト済の GPRS カードとしては NovatelWireless Merlin G100 と
NovatelWireless Merlin G201 があります。
<p>

それが済んだら、いくつかファイルを編集する必要があります。以下のとおりです:
<p>

<dl>
<dt> <tt>/etc/ppp/options.gprs</tt>:
<dd>
<pre>
/dev/tty03
115200
defaultroute
ipcp-accept-local
ipcp-accept-remote
noauth
novj
connect 'chat -v -f chatscript.gprs'
user dummy
usepeerdns
mru 1500
mtu 1500
</pre>
</dd></dt>

<dt> <tt>/etc/ppp/chatscript.gprs</tt>:
<dd>
<pre>
ABORT BUSY ABORT 'NO CARRIER' ABORT ERROR '' AT OK 'ATDT*99#' CONNECT
</pre>
</dd></dt>

<dt> <tt>/etc/ppp/chap-secrets</tt>:
<dd>
<pre>
* * "dummy"
</pre>
</dd></dt>


ファイルの編集後、コマンドラインで以下のようにして始めます:
<p>

<pre>
pppd file /etc/ppp/options.gprs
</pre>

これで、このカード用のデフォルトのプロバイダーとして設定されます。
カードの別のコンフィグスロットに設定された別のプロバイダーに接続するには、
/etc/ppp/chatscript.gprs ファイル中の "ATDT" 文字列を、
NovatelWireless
のドキュメンテーションに従って書き換える必要があります。
<p>

/etc/ppp/options.gprs ファイル中の tty を適切に書き換えてください。
モデム・ com ポート・ IR ポートを内蔵した典型的なラップトップでは、
NovatelWireless モデムは tty03 になります。
<p>

また、 /etc/ppp/chap-secrets に、お使いのプロバイダーでの
あなたのユーザー名とパスワードが書いてあることを確認してください。
<p>

NetBSD での PPP ネットワーキングの使用について、詳細は
<a href="./">ネットワーキングドキュメンテーション</a>を参照してください。
<p>
</dl>

</dd></dl>
<p><h3>
<a name="sony-ericcson-t200">SonyEricsson t200 を使う</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

<small>以下の情報は、 Andrew Cagney の提供によるものです:</small>
<p>
SonyEricsson t200 GPRS 電話は、シリアルボーレートが 9600 に固定されています。
この機種は、 pppd が接続を切っても GPRS コネクションを切りません。
また、現在のところ、附属の USB 電話ケーブルは NetBSD では使えないようです。
</p>
<p>最後の問題は、 USB<->シリアルケーブルを使って
SonyEricsson に繋ぐ事で回避できます。
はじめの二つの問題は、以下の init, connect, disconnect スクリプトを
options または peers ファイルに含めることで回避/解決できます:
</p>
<pre>
115200
init "/etc/ppp/chat/t200.sh"
connect "chat -v -f /etc/ppp/chat/t200"
disconnect "chat -v -f /etc/ppp/chat/hup"
</pre>
</p>
さらに、 t200.sh に以下の内容を含めてください:
<pre>
#!/bin/sh
# Find out the intended baud rate
b=`stty -g | sed -e 's/.*ispeed=//' -e 's/:.*//'`
# Force the serial line to 9600 baud so that it can be re-configured
stty 9600
# Ask for the modem to list all baud rates, and the current one.  Then
# force it to the rate the line was originally set to.
if chat -v     TIMEOUT 5 ''     +++AT OK     AT+IPR=? OK     AT+IPR? OK     AT+IPR=${b} OK
then
    stty ${b}
    exit 0
else
    exit 1
fi
</pre>
t200 ファイルには以下の内容を含めます:
<pre>
ABORT BUSY
ABORT ERROR
ABORT 'NO CARRIER'
ABORT 'NO DIALTONE'
ABORT 'NO DIAL TONE'
TIMEOUT 10 ''
AT OK--AT--OK
# Ask the modem its baud rate - a sanity check
AT+IPR=? OK
AT+IPR? OK
# connect
ATDT*99# CONNECT
</pre>
そして最後に、以下の内容の hup ファイルが必要です:
<pre>
TIMEOUT 2
'' +++ATH OK
</pre>

</dd></dl>
<p><h3>
<a name="cdpd">Cellular Digital Packet Data (CDPD) カードを使う</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

NovatelWireless GPRS ワイヤレスデータカードを使うためには、まず
カードのメーカーとプロバイダーの設定に応じてカードを設定する必要があります。
お使いのプロバイダーに連絡を取ってください。
これまでにテスト済のカードは NovatelWireless Merlin CDPD だけです。
<p>

こちらも、いくつかファイルを編集する必要があります。以下のとおりです:

<dl>
<dt> <tt>/etc/ppp/options.cdpd</tt>:
<dd>
<pre>
/dev/tty03
115200
defaultroute
ipcp-accept-local
ipcp-accept-remote
noipdefault
novj
noauth
connect 'chat -v -f /etc/ppp/chatscript.cdpd'
mru 1500
mtu 1500
</pre>
</dd></dt>

<dt> <tt>/etc/ppp/chatscript.cdpd</tt>:
<dd>
<pre>
ABORT BUSY ABORT 'NO CARRIER' ABORT ERROR '' AT OK 'AT\\APPP' CONNECT
</pre>
</dd></dt>


ファイルの編集後、コマンドラインで以下のようにして始めます:
<p>

<pre>
pppd file /etc/ppp/options.cdpd
</pre>

/etc/ppp/options.cdpd ファイル中の tty を適切に書き換えてください。
モデム・ com ポート・ IR ポートを内蔵した典型的なラップトップでは、
NovatelWireless モデムは tty03 になります。
<p>


NetBSD での PPP ネットワーキングの使用について、詳細は
<a href="./">ネットワーキングドキュメンテーション</a>を参照してください。
<p>
</dl>



</dd></dl>
<hr>
 
<a href="./"><em>NetBSD ドキュメンテーション: ネットワーク</em>に戻る</a>
<hr>

<table width="100%"><tr><td>
<table border="0" summary="Footer navigation"><tr>
<td class="foothome"><span class="foothome"><a href="../../"><img src="../../../images/NetBSD-flag.png" origlink="../../images/NetBSD-flag.png" alt="" border="0" width="90" height="90"></a></span></td>
<td class="foothome">
<span class="foothome"><a href="../../">ホームページ</a></span><br>
</td>
</tr></table>
</td><td>
<table border="0" summary="Footer navigation"><tr>
<td class="foothome"><span class="foothome"><a href="../../Documentation/"><img src="../../../images/NetBSD-flag.png" origlink="../../images/NetBSD-flag.png" alt="" border="0" width="90" height="90"></a></span></td>
<td class="foothome">
<span class="foothome"><a href="../../Documentation/">Documentation top level</a></span><br>
</td>
</tr></table>

</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@jp.NetBSD.org">日本語:
       www@jp.NetBSD.org</a>)<br>
  $NetBSD: gprs.list,v 1.6 2002/08/18 16:38:10 jschauma Exp $<br>
  <!-- based on english translation: -->
  <!-- NetBSD: gprs.list,v 1.14 2005/09/28 16:09:52 jschauma Exp   -->
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2005
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a><br>
  <a href="../../../Misc/disclaimer.html">NetBSD<sup>&#174;</sup> は
  The NetBSD Foundation, Inc. の登録商標です。</a><br>
  </small>
</address>
 
</body>
</html>
