<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<!-- Copyright (c) 2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@jp.NetBSD.org">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <title>Updating a stable NetBSD release</title>
  </head>

<body bgcolor="#FFFFFF" text="#000000">

<HEADING>安定版 NetBSD リリースの更新

<LIST>

<ENTRY>update-src ソースを更新する

安定版 (<a
href="../Releases/formal-1.6/">NetBSD 1.6.1</a> など) の NetBSD リリースを、
製作環境として使っている場合、
そのリリース向けのセキュリティー上の修正を取り込むために、
時々ソースを更新のうえシステムまたはカーネルを再構築すべきです。
<p>
リリース版のソースの再現や更新は、適切な枝タグを指定して、 <a
href="current/#using-anoncvs-over-ssh">anoncvs オーバー ssh</a> を使っておこなうことができます。
たとえば、 NetBSD 1.6.1 リリースのソースをチェックアウトするためには、
以下のようにします:<br>
<pre><tt>
	$ cd /usr
	$ env CVS_RSH=ssh cvs -d anoncvs@anoncvs.NetBSD.org:/cvsroot co -r netbsd-1-6 -P src
</tt></pre>
<p>
既存のソースツリーを更新するには以下のようにします:
<pre><tt>
	$ cd /usr/src
	$ env CVS_RSH=ssh cvs update -dP
</tt></pre>

<ENTRY>kernel 新しいカーネルを構築する

新しいカーネルを構築する方法は、<a
href="kernel/#how_to_build_a_kernel">この文書</a>で説明している方法とほぼ同じですが、
<tt>build.sh</tt> スクリプトの書式が違うことにご注意ください。 <tt>build.sh</tt>
は、 NetBSD 1.6 と -current では大幅に変わっています; -current を使っているのでなければ、
カーネルの構築に <tt>build.sh</tt> は<em>使えません</em>。

<ENTRY>userland ユーザーランドを更新する

かならず <tt>build.sh -h</tt> の説明を見て、詳細は <em>UPDATING</em>
と <em>BUILDING</em> ファイルで確認するようにしてください─コマンドラインや
<tt>/etc/mk.conf</tt> で指定できるオプションが<em>たくさん</em>あるので、
これは重要なことです。結局は、単一のコマンドに要約されます: <tt><b>build.sh -d</b></tt>
<p>
これは、ユーザーランド<em>すべて</em>を更新することになるのに注意してください。

<ENTRY>parts ソースツリーの一部だけを更新する

セキュリティー勧告が発行され、再構築が必要となったライブラリーや
アプリケーションだけを構築したい場合、最善の選択は、勧告に書かれた
説明どおりにすることです。一例としては以下のようになります:
<p>
<pre><tt>
	$ cd src                                                        
	$ env CVS_RSH=ssh cvs update -d -P -r netbsd-1-6 gnu/dist/sendmail/sendmail
	$ cd gnu/usr.sbin/sendmail
	$ make USETOOLS=no cleandir dependall
	$ su
	# make USETOOLS=no install
</tt></pre>

<ENTRY>summary 簡潔なまとめ

<ul>
	<li>ソースの更新:<br>
	<pre><tt>
	$ cd /usr/src
	$ env CVS_RSH=ssh cvs update -dP
	</tt></pre>
	</li>
	<li>カーネルの再構築:<br>
	<pre><tt>
	$ cd /usr/src/sys/arch/&lt;ARCH&gt;/conf
	$ config &lt;KERNEL&gt;
	$ cd /usr/src/sys/arch/&lt;ARCH&gt;/compile/&lt;KERNEL&gt;
	$ make depend all
	$ su
	# mv /netbsd /netbsd.old
	# mv /usr/src/sys/arch/&lt;ARCH&gt;/compile/&lt;KERNEL&gt;/netbsd /
	</tt></pre>
	</li>
	<li>ユーザーランドの更新:<br>
	<pre><tt>
	$ cd /usr/src
	$ ./build.sh -h
	$ su
	# ./build.sh -d &lt;other options&gt;
	</tt></pre>
	</li>
</ul>

<ENTRY>current -current を追跡する

-current の追跡方法についての資料は、
<a href="current/">この文書</a>をご覧ください。

</LIST>

<DOCLINK>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@jp.NetBSD.org">日本語:
       www@jp.NetBSD.org</a>)<br>
  $NetBSD: updating.list,v 1.8 2004/06/21 00:52:23 minskim Exp $<br>
  <a href="../Misc/disclaimer.html">Copyright &copy; 1994-2003
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
