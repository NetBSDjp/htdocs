<!-- $NetBSD: chapter.xml,v 1.2 2003/05/24 04:24:40 grant Exp $ -->

<appendix id="ftp-layout"> <?dbhtml filename="ftp-layout.html"?>
<title>Layout of the FTP server's package archive</title>

<para>
Layout for precompiled binary packages on ftp.NetBSD.org:
</para>

<programlisting>
/pub/NetBSD/packages/
                README
                distfiles/
		pkgsrc -> /pub/NetBSD/NetBSD-current/pkgsrc
                1.6/
                        i386/
                                All/
                                archivers/
                                        foo -> ../All/foo
                                ...
                        m68k/
                                All/
                                archivers/
                                        foo -> ../All/foo
                                ...
                        amiga -> m68k
                        atari -> m68k
                        ...
</programlisting>

<para>
To create:
</para>

<programlisting>
 - cd /usr/pkgsrc ; make install ; make package
 - upload /usr/pkgsrc/packages to
   ftp://ftp.NetBSD.org/pub/NetBSD/packages/\
    `uname -r | sed 's@\.\([0-9]*\)[\._].*@\.\1@'`/`uname -p`
 - if necessary ln -s `uname -m` `uname -p`
</programlisting>

<para>
Disk space needed: unknown.
</para>

<para>
Packages for a release version of NetBSD should be uploaded to the
directory major.minor corresponding to the appropriate release.  Packages
for NetBSD with versions such as "1.5.1" should be uploaded to the "1.5"
directory, stripping the tiny number off the directory name.  For packages
that need to be tightly coupled with the OS Version, such as LKM's, you
may create a major.minor.tiny release directory, and place those packages
therein.  Such packages should be marked with the variable
"OSVERSION_SPECIFIC=yes" to mark them in some way for binary package 
builders.
</para>

</appendix>
