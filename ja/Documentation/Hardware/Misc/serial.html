<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'serial.list' AND RUN 'make' -->

<!-- Copyright (c) 1994-2003
        The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.org">
<link rel="shortcut icon" href="../../../../favicon.ico" origlink="/favicon.ico" type="image/x-icon">
<title>NetBSD Serial Port Primer</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD シリアルポート入門</h1>

<h2><a name="top">全般的な情報</a></h2>
<ul>
<li>
<a href="#connectors">コネクターの種類とピン配置</a></li>
<li>
<a href="#pinouts">さまざまなプラットフォーム用のシリアルポートピン配置</a></li>
<li>
<a href="#null">モデム信号を通す通常のケーブル</a></li>
</ul>


<h2>他の情報源</h2>

<ul>
<li><a href="http://teryx.bobdbob.com/~protius/pinouts/">
  Tommy's pinout collection</a>
<li>
<a href="http://www.stokely.com/unix.serial.port.resources/A-B-Ycablepinout.html">
  Sun Serial Port & Cable Pinouts</a>
</ul>

<!-- toto:
sgimips cables?
get someone to write the device name to /dev name lookup -->

<hr>
<h2>全般的な情報</h2><hr>
<p>このドキュメントは、お手持ちのハードウェア附属のドキュメンテーションを
補足するものです。すなわち、一部の NetBSD 対応プラットフォームの
シリアルポートへの接続に関する問題の概要を、いくつか説明します。
多くのプラットフォームでは、シリアルコンソールを使うことが必須あるいは
可能ですが、コネクター配線方法について混乱があるかもしれません。

<p>簡単にいうと、ほとんどのコンピューターは DTE (Data Terminal Equipment 
- データ端末装置) 、ほとんどのモデムやダム端末は DCE (Data Communication
Equipment - データ通信装置) です。 (PC を PPP サーバーや端末として使うと
いったように) DTE と DTE をつなぐためには、 "ヌルモデム"
ケーブルでつなぐことが必要です。このケーブルは、送出と受入のデータを入れ換え、
またハンドシェーク線を持っています。

<p>シリアルプロトコルの仕様上、さまざまなハンドシェークや、 "モデム"
線が存在します。これらにより、 DTE や DCE 装置は情報の流れを調節できます
(受信側がこれ以上データを受けられない場合、受けられるようになるまで待つよう
相手方に伝えるなど) 。より詳しく正確な説明については、
上記の参考文献を参照するようおすすめします。

<p>お使いのハードウェアでシリアルコンソールを使えるようにする方法は (対応して
いる場合) 、そのポートの FAQ か、ハードウェアリファレンスを参照してください。
多くのプラットフォームでは、キーボードとマウスを外すだけでよいです。
このほかでは、フレームバッファーを外す必要があったり、また、シリアルコンソール
を使うよう明示的に bootrom や PROM を設定する必要があるものもあります。
もっとも一般的な設定は 9600 bps、 8 ビット、パリティーなし、ストップビット 1
です。ハンドシェークの必要な条件はプラットフォームによって異なります。

<p>覚えておいていただきたいのは、お使いのシステムの bootROM、ファームウェア
などがシリアルコンソールをサポートしている場合、 NetBSD はそのことに気付く程度
には賢いということです。つまり、たいていは <tt>/etc/ttys</tt> で別途 <a href="http://man.NetBSD.org/man/ttys+5+NetBSD-current">ttys(5)</a>
を用意すべきでは<i>ありません</i>。
しかしながら、コンソールのエントリーに適切な端末型が書かれているようにするため、
ここを書き換える (たとえば、 '<tt>sun</tt>' を '<tt>vt100</tt>' に変更するなど)
必要はあるかもしれません。

<p>いくつかのプラットフォームでは、恒常的に続くゼロは、シリアル
<tt>BREAK</tt> と等価です。たとえば sparc システムにおいては、
これはシステムに bootrom プロンプトに落ちるよう促します。お使いのシステムで
シリアルケーブルを外すとシステムが応答しなくなる場合は、このことを
覚えておいてください。

<p><h3>
<a name="connectors">コネクターの種類とピン配置</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
<p>3 種類の主なコネクタータイプ─ DB25、 DB9、 MiniDIN8 ─があります。
ピンの付番は、つぎのようにするならわしです (メスのコネクターでは逆になります):

<p><h3>MiniDIN8 (オス)</h3>
<pre>   8 7 6
  5   4 3
    2 1</pre>

<p><h3>DB25 (オス)</h3>
<pre>  1                         13
 _______________________________
 \  . . . . . . . . . . . . .  /
  \  . . . . . . . . . . . .  /
   ---------------------------
   14                       25</pre>


<p><h3>DB9 (オス)</h3>
<pre>   1         5
 _______________
 \  . . . . .  /
  \  . . . .  /
   -----------
    6       9</pre>


<p><h3>RJ-11 (オス)</h3>
<pre> _!=!_
| | | |
-------
1 2 3 4</pre>

</dd></dl>
<p><h3>
<a name="pinouts">さまざまなプラットフォーム用のシリアルポートピン配置</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
残念ながら、すべてのベンダーがシリアル線のピン番号の標準に従っているわけでは
ありません。特に、 MiniDIN8 コネクターを使っているベンダーは、すべて
変えてしまっています。もし、ハンドシェーク線を使わないのであれば、
すべての MiniDIN8 ケーブルは、どのシステムでも機能するはずです (すなわち、
TxD、 RxD、 GND はすべて同じ位置にあります) 。一部のベンダーは、 (DTR、 DSR、
DCD シグナリングを考慮して) これらを違った形で結線するので、 Macintosh
"モデム" ケーブルには気を付けてください -- いかなる仮定もせずに、
マルチメーターを使って結線をチェックすべきです。
<p>
<table border=2>
<tr>
  <th align="left">signal<br>name</th>
  <th align="right">standard<br><font size="2">DB9</font></th>
  <th align="right">standard<br><font size="2">DB25</font></th>
  <th align="right"><a href="#mac">mac</a><br>
      <font size="2">MiniDIN8</font></th>
  <th align="right"><a href="#next68k">next68k</a><br>
      <font size="2">MiniDIN8</font></th>
  <th align="right"><a href="../../../Ports/sgimips/">sgi</a><br>
      <font size="2">MiniDIN8</font></th>
  <th align="right"><a href="#sparc">sparc</a><br>
      <font size="2">MiniDIN8</font></th>
  <th align="right"><a href="#hp300">hp300</a><br>
      <font size="2">DB9</font></th>
  <th align="right">dir</th>
  <th align="left">full name</th>
  <th align="left">comment</th></tr>
<tr>
  <td align="left">TxD</td>
  <td align="right">3</td>
  <td align="right">2</td>
  <td align="right">3</td>
  <td align="right">3</td>
  <td align="right">3</td>
  <td align="right">3</td>
  <td align="right">2</td>
  <td align="right">out</td>
  <td align="left">Transmit Data</td>
  <td align="left">data</td></tr>
<tr>
  <td align="left">RxD</td>
  <td align="right">2</td>
  <td align="right">3</td>
  <td align="right">5</td>
  <td align="right">5</td>
  <td align="right">5</td>
  <td align="right">5</td>
  <td align="right">3</td>
  <td align="right">in</td>
  <td align="left">Receive Data</td>
  <td align="left">data</td></tr>
<tr>
  <td align="left">RTS</td>
  <td align="right">7</td>
  <td align="right">4</td>
  <td align="right">-</td>
  <td align="right">6</td>
  <td align="right">6</td>
  <td align="right">6</td>
  <td align="right">4</td>
  <td align="right">out</td>
  <td align="left">Request To Send</td>
  <td align="left">handhsake</td></tr>
<tr>
  <td align="left">CTS</td>
  <td align="right">8</td>
  <td align="right">5</td>
  <td align="right">-</td>
  <td align="right">8</td>
  <td align="right">2</td>
  <td align="right">2</td>
  <td align="right">5</td>
  <td align="right">in</td>
  <td align="left">Clear To Send</td>
  <td align="left">handshake</td></tr>
<tr>
  <td align="left">DTR</td>
  <td align="right">4</td>
  <td align="right">20</td>
  <td align="right">-</td>
  <td align="right">1</td>
  <td align="right">1</td>
  <td align="right">1</td>
  <td align="right">1</td>
  <td align="right">out</td>
  <td align="left">Data Terminal Ready</td>
  <td align="left">status</td></tr>
<tr>
  <td align="left">DSR</td>
  <td align="right">6</td>
  <td align="right">6</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">6</td>
  <td align="right">in</td>
  <td align="left">Data Set Ready</td>
  <td align="left">status</td></tr>
<tr>
  <td align="left">RI</td>
  <td align="right">9</td>
  <td align="right">22</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">9</td>
  <td align="right">in</td>
  <td align="left">Ring Indicator</td>
  <td align="left">status</td></tr>
<tr>
  <td align="left">DCD</td>
  <td align="right">1</td>
  <td align="right">8</td>
  <td align="right">-</td>
  <td align="right">2</td>
  <td align="right">7</td>
  <td align="right">7</td>
  <td align="right">8</td>
  <td align="right">in</td>
  <td align="left">Data Carrier Detect</td>
  <td align="left">status</td></tr>
<tr>
  <td align="left">RTxC</td>
  <td align="right">-</td>
  <td align="right">17</td>
  <td align="right">-</td>
  <td align="right">7</td>
  <td align="right">-</td>
  <td align="right">8</td>
  <td align="right">-</td>
  <td align="right">in</td>
  <td align="left">Receive Clock</td>
<tr>
  <td align="left">HSKo</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">1</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">out</td>
  <td align="left">Output Handshake</td>
  <td align="left">mac-specific (usually RTS)</td></tr>
<tr>
  <td align="left">HSKi</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">2</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">in</td>
  <td align="left">Input Handshake</td>
  <td align="left">mac-specific (usually CTS)</td></tr>
<tr>
  <td align="left">TxD+</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">6</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">out</td>
  <td align="left">RS-422 Transmit Data (+)</td></tr>
<tr>
  <td align="left">RxD+</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">8</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">in</td>
  <td align="left">RS-422 Receive Data (+)</td></tr>
<tr>
  <td align="left">GPi</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">7</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">in</td>
  <td align="left">General Purpose Input may be used for RI or handshaking</td></tr>
<tr>
  <td align="left">GND</td>
  <td align="right">5</td>
  <td align="right">7</td>
  <td align="right">4</td>
  <td align="right">4</td>
  <td align="right">4,8</td>
  <td align="right">4</td>
  <td align="right">7</td>
  <td align="right">n/a</td>
  <td align="left">Signal Ground</td>
  <td align="left"></td></tr>
<tr>
  <td align="left">-</td>
  <td align="right">-</td>
  <td align="right">1</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">-</td>
  <td align="right">n/a</td>
  <td align="left">Protective Ground</td>
  <td align="left">cable shield (do not use for Signal Ground)</td></tr>
</table>

<p><a name="mac"><i>注意:</i> Macintosh</a> 
(<a href="../../../Ports/mac68k/">mac68k</a> および
<a href="../../../Ports/macppc/">macppc</a>) システムは、
送信および受信用に平衡型の対 (正と負の線) を持つ RS-422 プロトコルを使います。
平衡型の RS-422 線をシングルエンドの RS-232 線と繋ぐには、正の受信データ線
(RxD+) を ground 信号に繋ぎ、負の送信データ線 (TxD+) はどこにも繋がないようにします。
HSKo と HSKi の結線方法はアプリケーションに依存しますが、普通は HSKo は
RTS として、 HSKi は CTS として使われます。また、一部のケーブルメーカーでは
DCD、 DTR、 DSR シグナルを様々に MiniDIN8 線に割り当てています。
詳細については、
<a href="http://francis.courtois.free.fr/jc1/serial/main.html">Interfacing
a Mac Serial Port to RS-232 Lab Equipment</a> を参照してください。
初代の Mac 128k や 512k の機種の DB9 コネクターのピン配置は標準と異なりますので、
大昔の Apple のケーブルには注意してください。

<p><a name="sparc"><i>注意:</i></a> 通常の <a
href="../../../Ports/sparc/">sparc</a> システムはシリアルに DB25 コネクター
を使っていますが、一部の sparc システムは MiniDIN8 コネクターを使っています。
この MiniDIN8 ピン配置は上記リストに掲げたとおりです。また、 DB25 ベースの
システムの一部では、 2 個のシリアルポートをサポートするブレークアウトケーブル
(A/B) を持っています。このケーブルのピン配置については <a
href="../../../Ports/sparc/faq.html#serial-port-splitter">FAQ</a> を参照してください
(1 個めのシリアル線は標準的な DB25 の配置となっています─つまり、
アダプターは不要です) 。

<p><a name="next68k"><i>注意:</i></a> <a
href="../../../Ports/next68k/">next68k</a> システムはすべて、 2 個の MiniDIN8
シリアルポートを持っています。 NEXTSTEP システム管理者マニュアルには、 NeXT
システム向けのシリアルケーブルの例がいくつか載っています。
詳細は、<a
href="http://channelu.com/NeXT/NeXTStep/3.3/nsa/ApB_Cabling.htmld/index.html">
オンライン</a>バージョンか、
<a href="http://www.radical.com/TheHome/TheSolutions/RadicalSolution6.html">
Radical System Solutions: NeXT Serial / Modem Cables</a> を参照してください。

<p><a name="hp300"><i>注意:</i></a> <a
href="../../../Ports/hp300/">hp300</a> システムのうち 98562
システムインターフェースボードを使っているものはすべて、 DB9
ピン配置が標準と異なります。この配置は、上のリストに掲げたとおりです。
シリーズ 400 の機種はすべて、 3 個のシリアルポートをサポートする
ブレークアウトケーブルを持っています。この<a
href="../../../Ports/hp300/serial.splitter.html">ケーブル</a>のピン配置については <a
href="../../../Ports/hp300/faq.html#serialdefs">FAQ</a> を参照してください
(1 個めのシリアル線は標準的な DB25 の配置となっています─つまり、アダプターは不要です) 。
さらに、 948642A カードは <a href="../../../Ports/hp300/dcmpinouts.html">RJ-11
ジャック</a>を使う 4 個のシリアルポートをサポートしています。
これら以外のユーザーはすべて、標準的な DB9 か DB25 コネクターを使うことになります。

</dd></dl>
<p><h3>
<a name="null">モデム信号を通す通常のケーブル</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

<h3>ヌルモデム DB25 to DB25 ケーブル</h3>
<pre>DB25                   DB25
----                   ----
1 GND  --------------- 1 GND
2 TxD  --------------- 3 RxD
3 RxD  --------------- 2 TxD
4 RTS  --------------- 5 CTS
5 CTS  --------------- 4 RTS
7 GND  --------------- 7 GND
6 DSR  ---+
          +----------- 20 DTR
8 DCD  ---+
                 +---- 6 DSR
20 DTR ----------+
                 +---- 8 DCD</pre>

<h3>ヌルモデム DB25 to DB9</h3>
<pre>DB25        DB9
----        ---
1 GND  ---  1 GND
2 TxD  ---  2 RxD
3 RxD  ---  3 TxD
4 RTS  ---  8 CTS
5 CTS  ---  7 RTS
7 GND  ---  5 GND
6 DSR  ---  4 DTR
20 DTR ---  6 DSR</pre>

<h3>モデム MiniDIN8 to DB25 (Macintosh、非ヌルモデム)</h3>
RxD+ は ground に短絡され、 TxD+ と GPi は宙に浮いていることに注意。
<pre>MiniDIN8           DB25
--------          ----
1 HSKo ----------- 4 RTS
2 HSKi ----------- 5 CTS
3 TxD- ----------- 2 TxD
5 RxD- ----------- 3 RxD
4 GND  ---+
          +------- 7 GND
8 RxD+ ---+
6 TxD+ ---x
7 GPi  ---x</pre>

<h3>ヌルモデム MiniDIN8 to MiniDIN8 (Macintosh "プリンター" ケーブル)</h3>
<pre>MiniDIN8   MiniDIN8
--------   --------
1 HSKo --- 2 HSKi
2 HSKi --- 1 HSKo
3 TxD- --- 5 RxD-
4 GND  --- 4 GND
5 RxD- --- 3 TxD-
6 TxD+ --- 8 RxD+
7 GPi  --- 7 GPi
8 RxD+ --- 6 TxD+</pre>

</dd></dl>
<hr>

<a href="./"><em>NetBSD ハードウェアドキュメンテーション</em>に戻る</a>
<hr>

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../../"><img
	src="../../../../images/NetBSD-flag.gif" origlink="../../../images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../../"><img
	src="../../../../images/empty.gif" origlink="../../../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../../Documentation/"><img
	src="../../../../images/NetBSD-flag.gif" origlink="../../../images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../../Documentation/"><img
	src="../../../../images/empty.gif" origlink="../../../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@JP.NetBSD.org">日本語:
       www@JP.NetBSD.org</a>)<br>
  $NetBSD: serial.list,v 1.12 2003/12/04 21:27:22 jrf Exp $<br>
  <a href="../../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>

