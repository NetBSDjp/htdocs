<html>
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'index.list' AND RUN 'make' -->

<!-- Copyright (c) 1996, 1998
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>NetBSD Documentation: The X Window System</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<table><tr><td>
    <a href="../../Misc/daemon-copy.html"><img
     align="middle" src="/images/BSD-daemon.jpg" border="0"
     width=146 height=129 alt="BSD daemon"></a>
  </td><td align=center>
    <h1>NetBSD ドキュメンテーション:</h1>
    <h1>The X Window System</h1>
</td></tr></table>
<p>

<h2><a name="top">Running X</a></h2>
<ul>
<li>
<a href="#xf86_corrupts_on_rage_128">XF86_SVGA corrupts glyphs on Rage 128 if accelerated</a></li>
<li>
<a href="#slow_when_compiling">X is very slow when compiling under NetBSD 1.3.x</a></li>
<li>
<a href="#bypassing_xdm">How to bypass xdm</a></li>
<li>
<a href="#startx_not_found">When I type '<b><tt>startx</tt></b>' I get the message: <tt>startx: Command not found.</tt> What's wrong?</a></li>
<li>
<a href="#xinit_not_found">X が動かない - '<b>xinit: not found</b>'</a></li>
<li>
<a href="#startx_fails">startx が失敗する -'<b>X connection to: 0.0 broken</b>'</a></li>
<li>
<a href="#shared_libraries_and_x">X プログラムが '<b>lib<em>XXXX</em>.so.<em>NN</em>: No such file...</b>'と言って起動できない</a></li>
<li>
<a href="#xconsole">コンソール表示 ('su'などの) が X の表示をこわす</a></li>
<li>
<a href="#wheel-mouse">How to I get my mouse wheel to work?</a></li>
<li>
<a href="http://www.xfree86.org/FAQ/#SectionB">XFree86 FAQ</a></li>
<li>
<a href="#which_version">Which version of XFree86 am I running?</a></li>
</ul>
<h2>プログラムのコンパイル</h2>
<ul>
<li>
<a href="#compile_fails_xm">コンパイルに失敗する - 'unable to locate libXm'</a></li>
<li>
<a href="#compile_fails_xpm">コンパイルに失敗する - 'unable to locate xpm.h' または '-lXpm: no match'</a></li>
<li>
<a href="#compile_basic">Compile fails to link: Undefined symbol '_XOpenDisplay'</a></li>
</ul>


<hr>
<h2>Running X</h2><hr>
<p><h3>
<a name="xf86_corrupts_on_rage_128">XF86_SVGA corrupts glyphs on Rage 128 if accelerated</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
To fix this make sure you have xsrc of at least 2000-01-13 (otherwise you will
have to also apply the patch in PR
<a href="http://www.NetBSD.org/cgi-bin/query-pr-single.pl?number=9171">xsrc/9171</a>).
 Then use <blockquote>Option "xaa_no_color_exp"</blockquote>
in the Device section of your XF86Config.

</dd></dl>
<p><h3>
<a name="slow_when_compiling">X is very slow when compiling under NetBSD 1.3.x</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
A <a href="ftp://ftp.netbsd.org/pub/NetBSD/misc/patches/1.3schedpatch">patch</a>
for the NetBSD 1.3 series is available which will significantly improve the
interactive performance under X while compiling or performing other tasks.

</dd></dl>
<p><h3>
<a name="bypassing_xdm">How to bypass xdm</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
If <a href="http://www.tac.eu.org/cgi-bin/man-cgi?xdm+1">xdm(1)</a> is enabled but you are unable to login for some reason,
possibly because there is no root password, and you do not have virtual
consoles enabled (or they are not yet supported on your port), you can
either press ^C at the immediately after the boot messages indicate xdm
is starting, or:
<ul>
<li>Boot to single user mode<br>
    Usually this is accomplished by passing '-s' at the end of the boot command.
<li>Start the shell<br>
    Press <tt>ENTER</tt> when prompted for the shell.
<li>Check and mount the disks using <a href="http://www.tac.eu.org/cgi-bin/man-cgi?fsck+8">fsck(8)</a> and <a href="http://www.tac.eu.org/cgi-bin/man-cgi?mount+8">mount(8)</a><br>
    <tt>fsck -p ; mount -vat ffs</tt>
<li>Set term terminal type<br>
    <tt>TERM=<em>vt100</em> ; export TERM</tt><br>
    Note: you may need to use a different terminal type such as 'pc3' or 'sun'.
<li>Fix problem<br>
    Edit /etc/rc.conf to disable xdm, run '<tt>passwd</tt>' to set root's
    password, or take whatever other corrective action is needed
</ul>

</dd></dl>
<p><h3>
<a name="startx_not_found">When I type '<b><tt>startx</tt></b>' I get the message: <tt>startx: Command not found.</tt> What's wrong?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
You need to add the location of the X binaries to your shell's <tt>path</tt>
variable.  For <tt>csh</tt> and its derivatives, add <tt>/usr/X11R6/bin</tt>
to the line in your <tt>.cshrc</tt> file which sets the <tt>path</tt>
variable. For <tt>sh</tt> and its derivatives, you'll need to modify you
<tt>.profile</tt> instead. 


</dd></dl>
<p><h3>
<a name="xinit_not_found">X が動かない - '<b>xinit: not found</b>'</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
/usr/X11R6/bin を path に入れてください。
root で '<b><tt>set path = ( $path /usr/X11R6/bin )</tt></b>' を
<tt>/etc/csh.cshrc</tt> に追加し、新たなシェルを起動してください。

</dd></dl>
<p><h3>
<a name="startx_fails">startx が失敗する -'<b>X connection to: 0.0 broken</b>'</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
この場合、エラーメッセージを見るために、次のようにして起動してください:
<ul>
<li>使用しているシェルが <a href="http://www.tac.eu.org/cgi-bin/man-cgi?csh+1">csh(1)</a> または <a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/shells/tcsh/README.html">tcsh</a> の場合:
<pre>	startx &gt;& ~/x.log</pre>
<li>使用しているシェルが <a href="http://www.tac.eu.org/cgi-bin/man-cgi?sh+1">sh(1)</a>, <a href="http://www.tac.eu.org/cgi-bin/man-cgi?ksh+1">ksh(1)</a> 等の場合:
<pre>	startx &gt; ~/x.log 2&gt;&amp;1</pre>
</ul>
そして、~/x.log を見てください

</dd></dl>
<p><h3>
<a name="shared_libraries_and_x">X プログラムが '<b>lib<em>XXXX</em>.so.<em>NN</em>: No such file...</b>'と言って起動できない</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
root で <tt>/etc/ld.so.conf</tt> を編集し、この行を追加してください:
<pre>
    /usr/X11R6/lib
</pre>
同時にこの行も含んでいることも確認した方がいいでしょう:
<pre>
    /usr/pkg/lib
</pre>
<em>(追加プログラムを足すのに
<a href="../software/packages.html">NetBSD
パッケージ</a>を<b>使っています</B>よね?)</em><br>
その後 "<b><tt>ldconfig -v</tt></b>" を実行すると、出力の中から
この形式の行を見つけられるでしょう: 'Adding /usr/X11R6/lib/libXIE.so.6.0'.
<p>
<b>共有ライブラリーってなんですか?</b><br>
ディスクとメモリーを節約するために、ほとんどの NetBSD のポーティングでは
'共有ライブラリー' を用います。
これによって、複数のプログラム (xterm, fvwm2, etc) が利用する
各ライブラリー (たとえば libXmu.so.6.0) は、一度だけメモリーに読み込まれる
ことになります。
標準のシステム共有ライブラリーは /usr/lib にありますが、NetBSD は
追加のライブラリー (X のアプリケーション用など) のありかを知る必要が
あります。そのためには '<tt>/etc/ld.so.conf</tt>' に追加をします。

</dd></dl>
<p><h3>
<a name="xconsole">コンソール表示 ('su'などの) が X の表示をこわす</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
システムは何かが起こったこと ('su'など) を示すためコンソールに出力を
行います。
このコンソール出力を表示させるための、<a href="http://www.tac.eu.org/cgi-bin/man-cgi?xconsole+1">xconsole(1)</a> あるいは 'xterm -C' プ
ログラムを起動するようにしてください。
<p>
以下を有効にしてカーネルをコンパイルする必要があるかもしれません:
<pre>	options  UCONSOLE  # allow anyone to steal the virtual console</pre>
詳しくは
<a href="../kernel/#how_to_build_a_kernel">カーネルの作り方</a>
を参照してください。

</dd></dl>
<p><h3>
<a name="wheel-mouse">How to I get my mouse wheel to work?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
If you use a Microsoft IntelliMouse,
Logitech Wheel Mouse (cordless our not) or something similar that has a 
scroll wheel, and you want to use the wheel under NetBSD, first make
a kernel that includes the "pmsi" driver, and make sure "wsmouse" uses
it. Something like this should occur in your <a href="http://www.tac.eu.org/cgi-bin/man-cgi?dmesg+1">dmesg(1)</a> output:
<PRE>
pmsi0 at pckbc0 (aux slot)
wsmouse0 at pmsi0
</PRE>
Then, make sure to make the wheel to mouse buttons 4 and 5 in your
/etc/XF86Config's "Pointer" section:
<PRE>
Section "Pointer"
    Protocol    "wsmouse"
    Device      "/dev/wsmouse0"
    ZAxisMapping 4 5
</PRE>
That's enough to make xterms scroll. For other apps, you'll need to
edit your ~/.Xdefaults. See 
<A HREF="http://www.inria.fr/koala/colas/mouse-wheel-scroll/">Colas Nahaboo X mouse wheel scroll page</A>
for details on a lot of applications that can be made working.

</dd></dl>
<p><h3>
<a href="http://www.xfree86.org/FAQ/#SectionB">XFree86 FAQ</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

</dd></dl>
<p><h3>
<a name="which_version">Which version of XFree86 am I running?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
To quickly tell which version of the X server you are running, you
can use <a href="http://www.tac.eu.org/cgi-bin/man-cgi?xdpyinfo+1">xdpyinfo(1)</a>. E.g.:
<pre>
$ xdpyinfo | grep release
vendor release number:    335
</pre>
In the case of XFree86, this tells us that the server version is 3.3.5.

</dd></dl>
<hr>
<h2>プログラムのコンパイル</h2><hr>
<p><h3>
<a name="compile_fails_xm">コンパイルに失敗する - 'unable to locate libXm'</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
Xm は標準の X11 環境に入っていません。これは商用の GUI である
<a href="http://www.opengroup.org/desktop/motif/">Motif</a> の一部です。<p>
Motif のフリーな実装である
<a href="http://www.lesstif.org/">Lesstif</a> も利用できます。
これは <a
href="../software/packages.html">NetBSD パッケージ</a>の中に
x11/<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/x11/lesstif/README.html">lesstif</a> として含まれています。

</dd></dl>
<p><h3>
<a name="compile_fails_xpm">コンパイルに失敗する - 'unable to locate xpm.h' または '-lXpm: no match'</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
xpm.h は X の PixMap ライブラリーの一部で、カラーアイコンを作るために
多くのプログラムで使われています。
これは <a
href="../software/packages.html">NetBSD パッケージ</a>の中に
graphics/<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/graphics/xpm/README.html">xpm</a> として含まれています。

</dd></dl>
<p><h3>
<a name="compile_basic">Compile fails to link: Undefined symbol '_XOpenDisplay'</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
If it is a third party item of software, you should check if a version
is available via the <a href="../software/packages.html">NetBSD
packages collection</a>. If you are writing you own code you need to
ensure you link against the necessary X libraries. In this case, add
<code>-L/usr/X11R6 -lX11</code> to the end of your link line.

</dd></dl>
<hr>

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../"><img
	src="/images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../"><img
	src="/images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../Documentation/"><img
	src="/images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../Documentation/"><img
	src="/images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  (連絡先 - <a href="../../Misc/feedback.html">英語</a>,
       <a href="mailto:www@JP.NetBSD.ORG">日本語:
       www@JP.NetBSD.ORG</a>)<br>
  $NetBSD: index.html,v 1.4 1998/11/05 00:44:06 abs Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1996, 1998
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
</address>

</body>
</html>
