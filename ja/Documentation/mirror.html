<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'mirror.list' AND RUN 'make' -->

<!-- Copyright (c) 1994-2001
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<!--
  ==  created by Jun-ichiro itojun Hagino
  -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>NetBSD Mirror FAQ</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<table><tr><td>
    <a href="../Misc/daemon-copy.html"><img
     align="middle" src="/images/BSD-daemon.jpg" border="0"
     width=146 height=129 alt="BSD daemon"></a>
  </td><td align=center>
    <h1>NetBSD ドキュメンテーション:</h1>
    <h1>NetBSD ミラー FAQ</h1>
</td></tr></table>
<p>

<h2><a name="top">FTP ミラー FAQ</a></h2>
<ul>
<li>
<a href="#ftp-overview">NetBSD FTP ミラー立ち上げのあらまし</a></li>
<li>
<a href="#ftp-diskspace">FTP ミラーに必要なディスク容量はどれくらいか</a></li>
<li>
<a href="#ftp-retrieve">NetBSD FTP サイトのコピーを取得する</a></li>
<li>
<a href="#ftp-sync">NetBSD FTP サイトコンテンツの同期を取る</a></li>
<li>
<a href="#ftp-notes">NetBSD FTP ミラーに関する注意事項</a></li>
<li>
<a href="#ftp-outage">サービスの停止期間をどこに連絡する必要があるか</a></li>
<li>
<a href="#ftp-contactinfo">FTP ミラー用コンタクトインフォメーションのフォーマット</a></li>
<li>
<a href="#ftp-cname">ftp.country-code.netbsd.org の取得方法</a></li>
<li>
<a href="#ftp-teardown">FTP ミラーの提供ができなくなった場合</a></li>
</ul>
<h2>WWW ミラー FAQ</h2>
<ul>
<li>
<a href="#www-overview">NetBSD WWW ミラー立ち上げのあらまし</a></li>
<li>
<a href="#www-retrieve">NetBSD WWW サイトのコピーを取得する</a></li>
<li>
<a href="#www-sync">NetBSD WWW サイトコンテンツの同期をとる</a></li>
<li>
<a href="#www-fetch">htdocs/mirrors/fetch.html の目的</a></li>
<li>
<a href="#www-http-1.0">HTTP/1.0 クライアントが適切なページを見られるよう保証する</a></li>
<li>
<a href="#www-contactinfo">WWW ミラー用コンタクトインフォメーションのフォーマット</a></li>
<li>
<a href="#www-cname">www.country-code.netbsd.org の取得方法</a></li>
<li>
<a href="#www-teardown">WWW ミラーの提供ができなくなった場合</a></li>
</ul>


<hr>
<h2>FTP ミラー FAQ</h2><hr>
<p><h3>
<a name="ftp-overview">NetBSD FTP ミラー立ち上げのあらまし</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
NetBSD FTP ミラーの立ち上げの基本的な手順は、以下のとおりです:
<p>

<ol>
  <li>ディスクスペースを用意します。必要な容量については、
    「<a href="#ftp-diskspace">FTP ミラーに必要なディスク容量はどれくらいか
    </a>」の項目を見てください。
    <p>

  <li>NetBSD FTP サイトのコンテンツのコピーを持ってきます
    <p>

  <li>あなたのミラーのコンテンツを <tt>ftp.netbsd.org</tt>
    と同期を取るようにします。
    <p>

  <li>あなたのミラーに関する情報を <a href="mailto:mirrors@netbsd.org">&lt;mirrors@netbsd.org&gt;</a> へ送ります。
    これについての詳細は「<a href="#ftp-contactinfo">FTP ミラー用
    コンタクトインフォメーションのフォーマット</a>」を見てください。
</ol>

</dd></dl>
<p><h3>
<a name="ftp-diskspace">FTP ミラーに必要なディスク容量はどれくらいか</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
必要な総ディスク容量は、コンパイル済パッケージの追加、
バイナリースナップショットの消去、 NetBSD の新しい公式リリースなどによって
変動します。とはいっても、今のところ、完全な FTP ミラーは 30GB
を下回ることはなく、 40GB を上回ることはありません。 2001 年 5 月現在、
NetBSD FTP コンテンツ全体は 34GB です。

</dd></dl>
<p><h3>
<a name="ftp-retrieve">NetBSD FTP サイトのコピーを取得する</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
(To be written)

</dd></dl>
<p><h3>
<a name="ftp-sync">NetBSD FTP サイトコンテンツの同期を取る</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
(To be written)

</dd></dl>
<p><h3>
<a name="ftp-notes">NetBSD FTP ミラーに関する注意事項</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
NetBSD FTP ミラーなのですから、定期的にあなたの NetBSD FTP ツリーの
同期をとる必要があります。そうしないと、古いファイル、
現在は使用されていないファイルのせいで、ユーザーは困惑するかもしれません。
<p>

また、たとえばセキュリティー上の問題などにより、プロジェクトから
ファイルの削除 (または他の管理作業) を要求されることもあります。

</dd></dl>
<p><h3>
<a name="ftp-outage">サービスの停止期間をどこに連絡する必要があるか</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
あなたの FTP ミラーが、何らかの影響をおよぼすようなシステム停止をする場合は、
あなた用の CNAME (がある場合) を近隣の代替サイトに一時的に振り替えられるように
するため、できるだけ早く <a href="mailto:mirrors@netbsd.org">&lt;mirrors@netbsd.org&gt;</a> に連絡すべきです。
また、停止の注意を <a
href="../MailingLists/#netbsd-users">netbsd-users メーリングリスト</a>
にも送るべきかもしれません。
<p>

あなたのミラーの CNAME を振り替えた場合は、元に戻すことができるよう、
いつ復旧するかを私たちにお知らせください。

</dd></dl>
<p><h3>
<a name="ftp-contactinfo">FTP ミラー用コンタクトインフォメーションのフォーマット</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
コンタクトインフォメーションを <a href="mailto:mirrors@netbsd.org">&lt;mirrors@netbsd.org&gt;</a> に提出する必要があります。
この情報は、内部のミラーデータベースに追加され、このデータベースをもとに
ミラー関係の文書が作られます。
"<tt>contact*</tt>" の項目は公開されることはありません。 NetBSD FTP
ミラー用コンタクトインフォメーションは、以下のフォーマットで
送付してください:
<p>

<pre>mirror          *マシン名*
country         *ホストのある場所(国)*
location        *詳細な場所(例えば、Foo 大学)*
ftp             ftp://ftp.foo-univ.ac.jp/pub/NetBSD/
ftp-host        ftp.foo-univ.ac.jp
organisation    *組織名*
contactperson   *担当者の名前*
contactemail    *担当者の電子メールアドレス*
contactphone    *担当者の電話番号*
contactaddress  *担当者の郵政省メールアドレス*</pre>
<p>

たとえば以下のように書きます。
<p>

<pre>mirror          netbsd.foo.com
country         Japan
location        Department of Computer Science, Foo University
ftp             ftp://ftp.foo-univ.ac.jp/pub/NetBSD/
ftp-host        ftp.foo-univ.ac.jp
organisation    Foo University
contactperson   Foo Bar
contactemail    Bar@foo-univ.ac.jp
contactphone    +81 3 xxxx yyyy
contactaddress  9876 Foo City, Tokyo 1234567 Japan</pre>
<p>

あなたのミラーのコンタクトインフォメーションが変わったような場合は、
お気軽に <a href="mailto:mirrors@netbsd.org">&lt;mirrors@netbsd.org&gt;</a> までお知らせください。

</dd></dl>
<p><h3>
<a name="ftp-cname">ftp.country-code.netbsd.org の取得方法</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
あなたのミラーで ftp.country-code のような CNAME (例: ftp.jp)
を使いたい場合は、 <a href="mailto:mirrors@netbsd.org">&lt;mirrors@netbsd.org&gt;</a> までお尋ねください。
ただし、通常はサブドメインの委譲をおこなわないので、
「country-code.netbsd.org」のためのネームサーバーをたちあげる事はできません。

</dd></dl>
<p><h3>
<a name="ftp-teardown">FTP ミラーの提供ができなくなった場合</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
あなたのミラーをリストから削除し、当該 DNS 名を代替サイトに振り替えますので、
<a href="mailto:mirrors@NetBSD.org">&lt;mirrors@NetBSD.org&gt;</a> までお知らせください。

</dd></dl>
<hr>
<h2>WWW ミラー FAQ</h2><hr>
<p><h3>
<a name="www-overview">NetBSD WWW ミラー立ち上げのあらまし</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
以下は、NetBSD WWW ミラーの立ち上げにあたって推奨される手順の
概観です。
<p>

<ol>
  <li>この手順に沿ってミラーを立ち上げる場合、 cvs、 ssh、 wget が必要です。
    cvs と ssh は 1.5 以降のバージョンの NetBSD に附属しており、また、
    wget は <a href="software/packages.html">NetBSD パッケージコレクション</a>
    から利用可能です (net/<a href="ftp://ftp.netbsd.org/pub/NetBSD/packages/pkgsrc/net/wget/README.html">wget</a> 参照) 。もちろん、 apache
    のような web サーバーも必要です。
    <p>

  <li>NetBSD WWW サイトのコピーを持ってきます。 anoncvs
    を使った取得方法の説明は、「<a
    href="#www-retrieve">NetBSD WWW サイトのコピーを取得する</a>」
    を見てください。
    <p>

  <li>あなたのミラーのコンテンツを <tt>www.netbsd.org</tt>
    と同期を取るようにします。 cron ジョブを使った同期方法の例は「<a
    href="#www-sync">NetBSD WWW サイトコンテンツの同期をとる</a>」
    を見てください。
    <p>

  <li>あなたのミラーに関する情報を <a href="mailto:mirrors@netbsd.org">&lt;mirrors@netbsd.org&gt;</a> へ送ります。
    これについての詳細は「<a href="#www-contactinfo">WWW ミラー用
    コンタクトインフォメーションのフォーマット</a>」を見てください。
</ol>

</dd></dl>
<p><h3>
<a name="www-retrieve">NetBSD WWW サイトのコピーを取得する</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
<tt>www.netbsd.org</tt> のコピーを anoncvs を使って取得するには、
以下のようにします:
<p>

<pre># su - nbwww
# cd /path/to/htdocs

<b>注意:</b> ここで "/path/to/htdocs" は <tt>www.netbsd.org</tt>
のミラーを置こうとしているディレクトリーです。このディレクトリーは、
たとえば "nbwww" ユーザーの所有にすべきです。

# env CVS_RSH=ssh CVSROOT=anoncvs@anoncvs.netbsd.org:/cvsroot \<br>  cvs co -P htdocs</pre>

</dd></dl>
<p><h3>
<a name="www-sync">NetBSD WWW サイトコンテンツの同期をとる</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
同期をとるための一番よい方法は、 cron ジョブを設定して、たとえば nbwww
ユーザーで anoncvs と wget を使って定期的に web サイトを更新することです
(wget の使い方の詳細は下記のとおり) :
<p>

<pre># crontab -u nbwww -e

<b>注意:</b> 以下の例示において、 "MAILTO" はミラー関連のメールを
受け取るユーザーのものに書き換えてください。
また、 "/path/to/htdocs" は <tt>www.netbsd.org</tt> のミラーの
置き場所に書き換えます。

SHELL=/bin/sh
PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/pkg/bin
MAILTO=whoever@gets.the.mirror.mail
CVS_RSH=ssh
CVSROOT=anoncvs@anoncvs.netbsd.org:/cvsroot
0 1 * * * cd /path/to/htdocs && cvs update -dP && wget -nv -xnH -N -Fi mirrors/fetch.html && wget -nv -xnH -N -r -np http://www.netbsd.org/Gnats/</pre>

</dd></dl>
<p><h3>
<a name="www-fetch">htdocs/mirrors/fetch.html の目的</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
この fetch.html ファイルは、 <tt>www.netbsd.org</tt> 上にある、
<tt>www.netbsd.org</tt> <em>によって</em>生成される文書群に
リンクしています。これらのファイルは、 NetBSD CVS リポジトリーの
<tt>doc</tt> モジュールの内容をもとに毎日生成されています。
<p>
上記の cron tab の例に、
"<tt>wget -nv -xnH -NFi mirrors/fetch.html</tt>" というのがあります。
これは、毎日 wget を使って、あなたの web サイトコンテンツのコピー内の、
これら <tt>www.netbsd.org</tt> で生成されるファイルを更新するためのものです。

</dd></dl>
<p><h3>
<a name="www-http-1.0">HTTP/1.0 クライアントが適切なページを見られるよう保証する</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
NetBSD WWW ミラーサイトは、 <tt>www.netbsd.org</tt> ミラー用の
バーチャル web サーバーを専用の IP アドレス上で運用することが強く望まれます。
こうすることで、 HTTP/1.0 を使うクライアントでも正しく web サイトを
見られるからです。
<p>

そのように設定することができない場合、 HTTP/1.0 クライアントに対する
別の解決法は、 NetBSD ミラーをプライマリーのネームベースのバーチャルホスト
にすることです。

</dd></dl>
<p><h3>
<a name="www-contactinfo">WWW ミラー用コンタクトインフォメーションのフォーマット</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
コンタクトインフォメーションを <a href="mailto:mirrors@netbsd.org">&lt;mirrors@netbsd.org&gt;</a> に提出する必要があります。
この情報は、内部のミラーデータベースに追加され、このデータベースをもとに
ミラー関係の文書が作られます。
"<tt>contact*</tt>" の項目は公開されることはありません。 NetBSD WWW
ミラー用コンタクトインフォメーションは、以下のフォーマットで
送付してください:
<p>

<pre>mirror          *マシン名*
country         *ホストのある場所(国)*
location        *詳細な場所(例えば、Foo 大学)*
www             *WWW URL*
www-host        *external WWW name*
organisation    *組織名*
contactperson   *担当者の名前*
contactemail    *担当者の電子メールアドレス*
contactphone    *担当者の電話番号*
contactaddress  *担当者の郵政省メールアドレス*</pre>
<p>

たとえば以下のように書きます。
<p>

<pre>mirror          netbsd.foo-univ.ac.jp
country         Japan
location        Department of Computer Science, Foo University
www             http://netbsd.foo-univ.ac.jp/
www-host        netbsd.foo-univ.ac.jp
organisation    Foo University
contactperson   Foo Bar
contactemail    Bar@foo-univ.ac.jp
contactphone    +81 3 xxxx yyyy
contactaddress  9876 Foo City, Tokyo 1234567 Japan</pre>
<p>

あなたのミラーのコンタクトインフォメーションが変わったような場合は、
お気軽に <a href="mailto:mirrors@netbsd.org">&lt;mirrors@netbsd.org&gt;</a> までお知らせください。

</dd></dl>
<p><h3>
<a name="www-cname">www.country-code.netbsd.org の取得方法</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
あなたのミラーで www.country-code のような CNAME (例: www.jp)
を使いたい場合は、 <a href="mailto:mirrors@netbsd.org">&lt;mirrors@netbsd.org&gt;</a> までお尋ねください。
ただし、通常はサブドメインの委譲をおこなわないので、
「country-code.netbsd.org」のためのネームサーバーをたちあげる事はできません。

</dd></dl>
<p><h3>
<a name="www-teardown">WWW ミラーの提供ができなくなった場合</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
あなたのミラーをリストから削除し、当該 DNS 名を代替サイトに振り替えますので、
<a href="mailto:mirrors@NetBSD.org">&lt;mirrors@NetBSD.org&gt;</a> までお知らせください。

</dd></dl>
<hr>

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../"><img
	src="/images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../"><img
	src="/images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../Documentation/"><img
	src="/images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../Documentation/"><img
	src="/images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="../Misc/feedback.html">英語</a>,
       <a href="mailto:www@JP.NetBSD.ORG">日本語:
       www@JP.NetBSD.ORG</a>)<br>
  $NetBSD: mirror.html,v 1.6 2002/01/18 09:33:21 kano Exp $<br>
  <a href="../Misc/disclaimer.html">Copyright &copy; 1994-2001
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
