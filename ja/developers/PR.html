<html>
<head>
<!-- Copyright (c) 1998, 1999 The NetBSD Foundation, Inc.
     ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:hubertf@NetBSD.ORG">
<title>NetBSD Developer Documentation: Handling Problem Reports</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD Developer Documentation: Handling Problem Reports</h1>

New developers often ask how to handle bug reports sent in by people
via <TT>send-pr</TT>. This document is intended to give some
information on the topic.

<OL>
<LI> <A HREF="#1">Accessing the Problem Report Database</A>
<LI> <A HREF="#2">Handling and closing Problem Reports</A>
<LI> <A HREF="#3">Changing Problem Report states</A>
<LI> <A HREF="#4">Useful Aliases</A>
</OL>


<HR>

<h2><A NAME="1">1. Accessing the Problem Report Database</A></h2>

Log in to <TT>gnats.netbsd.org</TT> and make sure you have
<TT>/usr/local/bin</TT> in your $PATH.
<P>

For accessing a PR, you need
its number. You can get that via either the <A
HREF="../MailingLists/index.html#netbsd-bugs">netbsd-bugs</A> mailing
list, or by browsing the <A HREF="../Gnats/index.html">online database</A>.
The database is accessed and manipulated using the <TT>edit-pr</TT>
command, which takes a PR-number as an argument:

<PRE>
% edit-pr 6048
</PRE>

An editor (usually vi, but customisable via the EDITOR/VISUAL environment
variable) is started, displaying the full PR with all its fields.  Of
particular interest are:

<UL>
<LI> <TT>&gt;Number</TT>: The PR's number, as given to <TT>edit-pr</TT>
<LI> <TT>&gt;Synopsis</TT>: One-line summary of the problem
<LI> <TT>&gt;State</TT>: The current state of affairs, see below.
<LI> <TT>&gt;Description</TT>: Detailed description of the problem
</UL>

A more complete list can be found in the
<A HREF="../Misc/pr-fields.html">NetBSD Problem Report Fields</A>
document. 
<P>

Edit whatever field you think needs modifying - usually only the
<TT>&gt;State</TT>-field - then save and exit the editor. You will be
asked to enter a reason for the PR's state change, ending with ^D.
This reason is then sent (via e-mail) to everyone who has something
to do with the PR.
<P>


<h2><A NAME="2">2. Handling and closing Problem Reports</A></h2>

Closing problem reports is only the last step in the process of
handling them correctly.  Before PRs are closed, they should be
analyzed, they should be solved, the solution should be communicated
to the submitter of the PR, and the submitter should indicate that
the solution actually solved
their problem.  Only after all of those things have occurred
should the PR actually be closed.
Not coincidentally, there are
<A HREF="../Misc/pr-states.html">PR states</A> for each of those
portions of a PR's lifetime.  They should be used.
<P>

When you notice a PR, if you have any relevant information to add
you should do so.  The easiest way to do this is to reply to the
notification of the PR sent to the netbsd-bugs mailing list.  By
cc'ing that reply to gnats-bugs@netbsd.org, the PR will have a copy
of your reply appended.  See the
<A HREF="../Misc/send-pr.html">NetBSD Problem Reports</A> page
for <A HREF="../Misc/send-pr.html">more information about
adding information to an existing PR</A>.  Replies appended to
PRs via e-mail will only be sent to the
person noted in the PR (via the <TT>Responsible</TT> field)
as being responsible for handling the PR.  If you with the PR
submitter or other interested parties to receive a copy
of the PR, you must carbon-copy them on your reply.
<P>

After looking at the PR and adding any relevant information you
have, if you decide to take a shot at handling it you
should first set yourself as the responsible party by
using <TT>edit-pr</TT> to set the PR's <TT>Responsible</TT> field
to your NetBSD.ORG login name.  This will cause you to get e-mail
about the PR when it changes state or when users supply more
information,
and an occasional reminder that you're responsible for the PR.
At this time it might also be appropriate to change the PR to
the ``<TT>analyzed</TT>'' state to indicate that the problem has
been analyzed.
<P>

After you have solved the problem and verified that your solution
is adequate, you should commit your fix.  If the problem is
present in still-supported formal releases of NetBSD, it often makes
sense to request that the fix be pulled up to the release branches
for those releases (but make extra sure that the fix is correct before
submitting pull-up requests).
It's worth going to the extra effort to get bug fixes pulled up:
if somebody found the bug annoying enough that they submitted a PR about
it, other users will probably run into it as well.  In the long
run, users' and developers' time is saved by getting fixes pulled up.
Even if there are likely to be no more releases on a given
release branch, if the release branch is still considered
supported it's still worth the effort to get the pullups done to
help users who track the head of the release branch.
After all, what's the point of patch releases or stable release
branches without bug fixes?
<P>

When you have comitted the fix for the problem, you should send
e-mail to the submitter of the PR informing them that you think
you have solved the problem and asking for them to test your solution.
(This may involve sending them patches, or suggesting
that they update to the next patch release when it is available and
check to see if the problem has been solved.)  At this point
the PR should be placed into the ``<TT>feedback</TT>'' state until
the user confirms that the problem has been fixed or until
a large enough amount of time has passed that it seems unlikely
that the user will ever reply.  (As a guideline for the latter,
waiting until a few months after the next release which includes
the fix is shipped seems reasonable.)
<P>

When the PR's submitter has confirmed that the problem has been
solved to their satisfaction, the PR should be placed into the
``<TT>closed</TT>'' state.  (If their problem was not solved, the
PR should be taken out of the ``<TT>feedback</TT>'' state and placed
into a more appropriate state.)
<P>

At each step of the PR handling process, when requesting feedback
from the submitter make sure that feedback is appended to the PR
by using a proper e-mail subject line and making sure that the
messages are copied to gnats-bugs@netbsd.org.  Having a complete
record of information about the PR can be valuable both while
hunting down the bug and for future system maintenance.
<P>

If for some reason you find that you're unable to finish handling
the PR, reset the <TT>Responsible</TT> field to whoever had
responsibility before you took the PR over.  (That information
should be in the PR with the log message indicating that you've
taken over responsibility.)  Don't prevent others from making
progress on the PR because they think you're taking care of it.
As long as you're marked as the responsible person for a PR,
you'll receive an occasional reminder about it.  Use those reminders
to drive you to put review PRs and put them into their correct states
as time passes.
<P>

In summary, there's a lot more to handling Problem Reports
than just fixing the bugs and closing the PRs.  That's obviously
very important, but the rest of the steps, especially making sure
that the submitters' problems are actually fixed and that fixes get
wide distribution by being included in patch releases, can make
NetBSD a better system that's more responsive to users' problems.
<P>


<h2><A NAME="3">3. Problem Report states</A></h2>

Problem reports can exist in various states, with each PR's state
being given in the PR's <TT>State</TT> field.
Please see the <A HREF="../Misc/pr-states.html">documentation of the
PR states</A> for valid PR states and their meanings.
<P>

At times, such as when handling a PR, it is necessary to change a
PR's state.  This is done using <TT>edit-pr</TT> to set the PR's
<TT>State</TT> field to another state.  Be careful to use a
<A HREF="../Misc/pr-states.html">valid state name</A> and to avoid
typos, as there is no checking of the spelling of the state name
given and because applications (e.g. the
<A HREF="../Gnats/index.html">PR database's Web interface</A>) rely on correct
state names being used. 
<P>

When you use edit-pr to change a PR's state (or other PR fields), after
saving and leaving your editor you will be prompted for information
about the reason that you made the changes that you did.  Useful
information here is as important as it is in, for instance, a commit
log message, for similar reasons.
<P>


<h2><A NAME="3">3. Problem Report states</A></h2>

I've found the following csh-aliases to be useful, maybe
you will so, too:
<P>

<PRE>
alias query-pr  'ssh gnats.netbsd.org query-pr --full \!* | tee pr-\!*'
alias edit-pr   ssh -t gnats.netbsd.org edit-pr
</PRE>

<hr>
<table width="100%" cols="2" border=0 cellspacing=8 cellpadding=0>
<tr>
  <td width="50%">
    <table><tr>
      <td>
	<a href="../index.html">
	<img src="../images/NetBSD-banner.gif" alt=""></a>
      </td><td>
	<font face="helvetica, arial">
	<a href="../index.html">
	<img src="../images/empty.gif"
		alt="NetBSD " border=0>Home Page</a>
	</font>
      </td>
    </tr></table>
  </td>
  <td width="50%">
    <table><tr>
      <td>
	<a href="index.html">
	<img src="../images/NetBSD-banner.gif"
		alt=""></a>
      </td><td>
	<font face="helvetica, arial">
	<a href="index.html">
	<img src="../images/empty.gif"
		alt="NetBSD " border=0>Developer Documentation</a>
	</font>
      </td>
    </tr></table>
  </td>
</tr></table>

<hr>
<address>
  hubertf@NetBSD.ORG<br>
  $NetBSD: PR.html,v 1.12 1999/10/20 13:56:44 hubertf Exp $<br>
  <a href="../Misc/disclaimer.html">Copyright &copy; 1998, 1999
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
</address>
</body>
</html>
