<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Website XSL Stylesheet V2.6.0">
<link rel="home" href="../../." title="Welcome to The NetBSD Project: Of course it runs NetBSD.">
<link rel="up" href="../../ja/developers/." title="NetBSD 開発者ドキュメンテーション">
<link rel="previous" href="../../ja/developers/PR.html" title="問題報告の解決">
<link rel="next" href="../../ja/developers/releng/." title="NetBSD 開発者ドキュメンテーション: リリースエンジニアリング">
<link rel="first" href="../../ja/developers/cvs-repos/." title="CVS リポジトリー問題">
<link rel="last" href="../../ja/developers/translate.html" title="htdocs を翻訳する">
<link rel="stylesheet" href="../../global.css" type="text/css">
  

  <title>NetBSD 開発者ドキュメンテーション: 新ポートを追加する</title>
</head>
<body class="website"><div class="webpage">
<a name="ja-developers-new-port"></a><div id="top"><a href="#mainContent" class="doNotDisplay doNotPrint">本文へ飛ぶ。</a></div>
<div id="header">
<div class="topNavigation">
<span>» </span><a href="../../docs/guide/en/">
	  ガイド</a> |
	<a href="http://man.NetBSD.org/">マニュアルページ</a> |
	<a href="../../ja/mailinglists/">
	  メーリングリスト</a>と
	<a href="http://mail-index.NetBSD.org/">記事</a> |
	<a href="http://cvsweb.NetBSD.org/">CVS リポジトリー</a> |
	バグの<a href="http://www.NetBSD.org/cgi-bin/sendpr.cgi?gndb=netbsd">報告</a>
	と
	<a href="../../ja/support/query-pr.html">
	 照会</a> |
	<a href="../../ja/docs/software/packages.html">
	  ソフトウェアパッケージ
	</a>
</div>
<div class="centralHeader">
<a href="../../ja/"><img alt='NetBSD プロジェクト "Of course it runs NetBSD"' width="506" height="90" src="../../images/NetBSD-headerlogo.png"></a><div class="headerTools"><div id="headerSearch"><form method="get" action="http://www.google.com/custom">
<input class="whiteOnBlack" type="text" name="q" onfocus="if(this.value==this.defaultValue ) this.value='';" size="12" maxlength="255" value="Search"><input type="hidden" name="cof" value="L:http://www.NetBSD.org/images/NetBSD-smaller.png;LH:200;LW:200;AH:center;AWFID:4f6b0499f0f58d2c;"><input type="hidden" name="domains" value="NetBSD.org"><input type="hidden" name="sitesearch" value="www.NetBSD.org"><input type="submit" value="検索">
</form></div></div>
</div>
<div class="navBar">
<span class="doNotDisplay">
	  案内:
	</span><a href="../../ja/">
	  ホーム</a> | 
	<a href="../../ja/about/">
	  概要</a> | 
	<a href="../../ja/gallery/">
	  展示室</a> | 
	<a href="../../ja/releases/">
	  ダウンロード</a> | 
	<a href="../../ja/docs/">
	  ドキュメンテーション</a> | 
	<a href="../../ja/support/">
	  サポート</a> | 
	<a href="../../ja/community/">
	  コミュニティー</a> | 
	<a href="../../ja/ports/">
	  機種</a>
</div>
</div>
<div id="content"><div class="fullWidth"><div class="rowOfBoxes">
<h1>NetBSD 開発者ドキュメンテーション: 新ポートを追加する</h1>
<p>ここでは、
  NetBSDのツリーに新しいポートを追加する際に必要となることがらを、
  手短に列挙します。</p>
<p>新しいファイルは <code class="code">cvs import</code> ではなく
  <code class="code">cvs add</code> を使って追加するようにしてください。
  import はベンダー枝に対して使うものですが、
  このコードは NetBSD の一部として統合されるものだからです。
  また、import すると各ファイルに無用のタグが余計に付いてしまいます。</p>
<h3 class="title"><a name="starting-out">移植そのものを始める際の手順</a></h3>
<ul><li><a href="#atfirst">最初にすること</a></li></ul>
<h3 class="title"><a name="addressed-items">新ポート追加に際して必要なことがら</a></h3>
<ul>
<li><a href="#cvssetting">CVS の設定</a></li>
<li><a href="#htdocs">htdocs の変更</a></li>
<li><a href="#gnatsconfig">GNATS の設定</a></li>
<li><a href="#mail">メールの変更 (特権が必要)</a></li>
<li><a href="#ftpdirectory">新ポートのスナップショット用 FTP ディレクトリーの作成</a></li>
<li><a href="#other">その他の変更</a></li>
</ul>
<h3 class="title"><a name="important-tasks">ポートがソースツリーに入った後の重要な仕事</a></h3>
<ul><li><a href="#whatnow">まだやることがありますよ</a></li></ul>
<h3 class="title"><a name="other-documents">他の関連ドキュメント</a></h3>
<ul>
<li><a href="#related-uwe">Valeriy E. Ushakov の論文</a></li>
<li><a href="#related-fvdl">Frank van der Linden の論文</a></li>
</ul>
<hr>
<h3 class="title">移植そのものを始める際の手順</h3>
      <h4 class="title">
<a name="atfirst"></a>最初にすること (<a href="#starting-out">top</a>)
  </h4>

      <p>
	</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">できるだけたくさんの資料を集めます。その後もさらに資料を集めるよう努めます。
	    移植対象のプラットフォームのベンダーや、
	    そのボードで使われている主なチップのベンダーに接触します。多くの場合、
	    他の OS のソースは (たとえ Linux であっても)
	    有用な資料となり得ます。</li>
<li class="listitem">似かよったポートの sys ツリーをコピーします。</li>
<li class="listitem">別の NetBSD マシンで、クロスコンパイラーの用意をします
	    (同じ CPU のマシンが理想的な場合もありますが、通常は
	    i386 マシンで十分なはずです)。</li>
<li class="listitem">ブートローダーが取り扱えるバイナリーをなんとかして作れるようにします。
	    移植対象で動く OS がすでにある場合は、
	    そのやり方を利用するとよいかもしれません。</li>
<li class="listitem">コンソールへの出力 (場合により PROM ドライバーか、シリアルコンソールを使って)
	    ができるスタンドアローンのバイナリーの構築を試みます。
	    VM に関する作業は必要ありません。</li>
<li class="listitem">メモリーディスク上のルートを使うカーネルを構築します。</li>
<li class="listitem">ディスクやネットワークデバイスに対応させます。NetBSD のソースツリーに
	    MI のドライバーがすでに存在する拡張カードを使うところから始めると、
	    簡単になるかもしれません。</li>
</ul></div>
<p>
      </p>
    <hr>
<h3 class="title">新ポート追加に際して必要なことがら</h3>
      <h4 class="title">
<a name="cvssetting"></a>CVS の設定 (<a href="#addressed-items">top</a>)
  </h4>

      <p>cvs checkout-update-commit 用の環境を設定します。
	</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<a class="ulink" href="cvs-repos/cvs_intro.html" target="_top">NetBSD CVS HOWTO</a> を読んで、
	    CVS commit ができる環境を用意します。</li>
<li class="listitem"><code class="code">cvs checkout {htdocs,htutils,doc}</code></li>
</ul></div>
<p>
      </p>
    
      <h4 class="title">
<a name="htdocs"></a>htdocs の変更 (<a href="#addressed-items">top</a>)
  </h4>

      <p>www.NetBSD.org に新ポートに関する情報を書いて
	commit します。もちろん、最初に必要なことは、
	<code class="filename">htdocs/ports/${MACHINE}/</code> にポートのページを作ることです。
	このページを作って commit するまでは、それ以外の htdocs のファイルの変更を
	commit してはいけません。FAQ 形式の情報には DocBook/XML 書式を使うと便利です
	(<a class="ulink" href="htdocs.html" target="_top">htdocs のドキュメンテーション</a> をご覧ください)。
	
	</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="filename">htdocs/ports/${MACHINE}/</code> を作り、
	    <code class="filename">htdocs/index.html</code> と
	    <code class="filename">htdocs/ports/index.xml</code> に、リンクを追加します。
	    このチェックリストをコピーしておき、済んだ項目を消してゆくとよいでしょう。
	    ポートのページにロゴや画像を入れたい場合は、
	    その画像を htdocs ツリーに追加する前に、
	    (そうする必要があれば) 著作権保持者から許可を得てください。</li>
<li class="listitem">新ポートに関する詳細情報を
	    <code class="filename">htdocs/changes/index.xml</code> に書き加え、
	    <a href="http://netbsd.gw.com/cgi-bin/man-cgi?make+1+NetBSD-5.1+i386">make(1)</a> して HTML ファイルを作り直します。
	    詳細は <a class="ulink" href="htdocs.html#adding-news-items" target="_top">htdocs のドキュメンテーション</a> 
	    をご覧ください。</li>
<li class="listitem">以下の各ファイルのテーブルに、新ポートを追加します。
	    <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
		<code class="filename">htdocs/about/query-pr.xml</code>: 追加したら
                  <a href="http://netbsd.gw.com/cgi-bin/man-cgi?make+1+NetBSD-5.1+i386">make(1)</a> して HTML ファイルを作り直します。</li>
<li class="listitem">
		<code class="filename">htutils/cgi-src/gnats/netbsd.def</code>
</li>
<li class="listitem">
		<code class="filename">htutils/changes/changes2html</code>
</li>
<li class="listitem">
		<code class="filename">htutils/changes/code-changes2rss</code>
</li>
<li class="listitem">
		<code class="filename">htutils/changes/cvschanges2html</code>
</li>
</ul></div>
</li>
<li class="listitem">
	    <code class="filename">htdocs/developers/features/table</code> に新ポートを追加し、
	    HTML を作り直します。</li>
<li class="listitem">
	    <code class="filename">htdocs/people/port-maintainers.xml</code> にあなたを追加します。</li>
</ul></div>
<p>
      以上の各ファイルの変更は、同時に commit するようにしてください。
      何か質問があったら <code class="email">&lt;<a class="email" href="mailto:www@NetBSD.org">www@NetBSD.org</a>&gt;</code> までご連絡ください。
      また、以上をもとに更新された html ファイルが公開されてから、
      他の web サイトで新ポートの周知をしてください。</p>
    
      <h4 class="title">
<a name="gnatsconfig"></a>GNATS の設定 (<a href="#addressed-items">top</a>)
  </h4>
      
      <p>
	</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
	    <code class="filename">src/gnu/usr.bin/send-pr/categories</code> に新カテゴリーを追加します。</li>
<li class="listitem">GNATS サーバー上に新カテゴリーを作成するよう
	    <code class="email">&lt;<a class="email" href="mailto:admins@NetBSD.org">admins@NetBSD.org</a>&gt;</code> にメールで依頼します。</li>
</ul></div>
<p>
      </p>
    
      <h4 class="title">
<a name="mail"></a>メールの変更 (特権が必要) (<a href="#addressed-items">top</a>)
  </h4>

      <p>
	</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="code">port-${MACHINE}</code> メーリングリストを作成します。
	    <code class="email">&lt;<a class="email" href="mailto:admins@NetBSD.org">admins@NetBSD.org</a>&gt;</code> にメールで要請してください。</li>
<li class="listitem">新たに作成された <code class="code">port-${MACHINE}</code> メーリングリストを
	    <code class="filename">htdocs/mailinglists/index.xml</code> に追加します。
	    <a href="http://netbsd.gw.com/cgi-bin/man-cgi?make+1+NetBSD-5.1+i386">make(1)</a> して HTML を作り直します。</li>
<li class="listitem">ポートマスター用のエイリアス <code class="code">port-${MACHINE}-maintainer</code>
	    を作成します。</li>
<li class="listitem">ポートマスターを
	    port-masters メーリングリストの参加者に追加します。</li>
<li class="listitem">
<code class="code">port-${MACHINE}-maintainer</code> を bug-managers 
	    メーリングリストの参加者に追加します。たとえば port-hpcmips-maintainer を
	    bug-managers に追加します。</li>
<li class="listitem">このポートが他のポートと同じ <code class="code">MACHINE_ARCH</code> を共有している場合は、
	    <code class="code">port-${MACHINE}-maintainer</code> を
	    <code class="code">port-${MACHINE_ARCH}-maintainer</code> メーリングリストの参加者に追加します。
	    たとえば、 port-hpcmips-maintainer を
	    port-mips-maintainer に追加します。</li>
</ul></div>
<p>
      </p>
    
      <h4 class="title">
<a name="ftpdirectory"></a>新ポートのスナップショット用 FTP ディレクトリーの作成 (<a href="#addressed-items">top</a>)
  </h4>

      <p>
	</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">スナップショットの構築・リリースをおこなうため、
	    <code class="filename">distrib/</code> 以下にあるポートの仕掛けを更新します。
	    <code class="filename">src/distrib/${MACHINE}</code> は作ってありますか
	    ?</li>
<li class="listitem">スナップショットを作ります。<a class="ulink" href="releng/build-release.html" target="_top">NetBSD 開発者ドキュメンテーション: リリースエンジニアリング</a> をご覧ください。</li>
<li class="listitem">ソースの tarball を作ります。
	    <code class="filename">src/distrib/sets/makesrctars</code>
	    スクリプトを使うと便利です。</li>
<li class="listitem">
	    <code class="code">ftp.NetBSD.org:/pub/NetBSD/arch/${MACHINE}/snapshot/YYYYMMDD/</code>
	    ディレクトリーを作って、スナップショットをここに置きます。</li>
</ul></div>
<p>
      </p>
    
      <h4 class="title">
<a name="other"></a>その他の変更 (<a href="#addressed-items">top</a>)
  </h4>

      <p>
	</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
	    <code class="filename">src/doc/CHANGES</code> にエントリーを追加します。</li>
<li class="listitem">
	    <code class="filename">src/build.sh</code> にエントリーを追加します。</li>
<li class="listitem">
<code class="filename">src/tools/mkheaderlist.sh</code>
	    を実行して、
	    <code class="filename">src/tools/headerlist</code>
	    を再生成します。</li>
<li class="listitem">
	    <code class="filename">src/gnu/usr.bin/groff/tmac/mdoc.local</code> にエントリーを追加します。</li>
<li class="listitem">
	    <code class="filename">src/distrib/notes/common/main</code> にエントリーを追加します。</li>
<li class="listitem">
	    <code class="filename">src/share/man/man7/hier.7</code> にエントリーを追加します。</li>
<li class="listitem">
	    <code class="filename">src/sys/arch/README</code> にエントリーを追加します。</li>
<li class="listitem">
	    <code class="filename">src/sys/arch/Makefile</code> にエントリーを追加します。</li>
<li class="listitem">
	    <code class="filename">src/usr.bin/calendar/calendars/calendar.netbsd</code> にエントリーを追加します。</li>
<li class="listitem">新ポート用の <a href="http://netbsd.gw.com/cgi-bin/man-cgi?sup+1+NetBSD-5.1+i386">sup(1)</a> セット
	    (<code class="filename">src/sys/arch/${MACHINE}/</code> 用の
	    current および release コレクションと、
	    <code class="code">ftp.NetBSD.org:/pub/NetBSD/arch/${MACHINE}/</code> 用の
	    mirror コレクション) を作成します。
	    他の開発者たちに教わってください。</li>
<li class="listitem">新しい <code class="code">${MACHINE}</code> の tarball を作成できるよう、
	    tarball 構築スクリプトを更新します。
	    他の開発者たちに教わってください。</li>
<li class="listitem">
<code class="email">&lt;<a class="email" href="mailto:announce@NetBSD.org">announce@NetBSD.org</a>&gt;</code> へ電子メールを送り、
	    その告知のことを WWW のニュースのページに書きます。</li>
</ul></div>
<p>
      </p>
    <hr>
<h3 class="title">ポートがソースツリーに入った後の重要な仕事</h3>
      <h4 class="title">
<a name="whatnow"></a>まだやることがありますよ (<a href="#important-tasks">top</a>)
  </h4>

      <p>
	</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">ハードウェアへの対応を続けます。</li>
<li class="listitem">sysinst が動くようにします。</li>
<li class="listitem">公式リリースを制作します。</li>
<li class="listitem">
	    <code class="code">compat_&lt;original_os&gt;</code> を書きます。</li>
<li class="listitem">保守をおこないます。
	    NetBSD ソースツリーの進化にあわせて、
	    このポートの構築や実行ができるようにします。</li>
</ul></div>
<p>
      </p>
    <hr>
<h3 class="title">他の関連ドキュメント</h3>
      <h4 class="title">
<a name="related-uwe"></a>Valeriy E. Ushakov の論文 (<a href="#other-documents">top</a>)
  </h4>

      <p>Valeriy の、<a class="ulink" href="http://snark.ptc.spbu.ru/~uwe/netbsd/euro2002/krups.ps" target="_top">新ポートの移植の
      始め方</a>に関連する論文
	</p>
    
      <h4 class="title">
<a name="related-fvdl"></a>Frank van der Linden の論文 (<a href="#other-documents">top</a>)
  </h4>

      <p>BSDCon 2002 における
	Frank van der Linden の論文 <a class="ulink" href="http://www.usenix.org/publications/library/proceedings/bsdcon02/full_papers/linden/linden_html/" target="_top">Porting
	NetBSD to the AMD x86-64: a case study in OS portability</a> (AMD x86-64 への NetBSD の移植: OS の移植性に関する事例研究)
	</p>
    <hr>
<em><a href="./">NetBSD 開発者ドキュメンテーション</a></em> に戻る</div></div></div>
<div class="navfoot"></div>
<div id="footer"><center>
<span class="footfeed"><a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">
	  連絡</a> |
      </span><span class="footcopy"><a href="../../ja/about/disclaimer.html">
      免責事項</a> |

      <span class="copyright">Copyright © 1994-2011 The NetBSD Foundation, Inc. </span>ALL RIGHTS RESERVED.<br>NetBSD<sup>®</sup> は The NetBSD
	Foundation, Inc. の登録商標です。</span>
</center></div>
</div></body>
</html>
