<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<!-- Copyright (c) 1994-2003
        The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>NetBSD Documentation: Working with CVS branches</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<DEVHEADING>CVS ブランチにまつわる作業

<i>Chris Demetriou 曰く:</i>
<p>

そんなわけで、皆さんは CVS ブランチにまつわる作業をよくするでしょう。
以下に記すのは、私がブランチいじり (作成、更新)
をするときに普通に使うコマンドです。 Jason に頼まれて書いたものです。
<p>

以下、 ${b} はブランチ名、 ${m} はこのブランチの対象となる
モジュールとします。階層構造内の個々の構成要素を扱いたい方もいるようですが、
ここでは階層構造全体を扱うものとします。
私は、個々の構成要素を扱った経験はほとんどないのです。
<p>

<b>ブランチを作成するには:</b>
<p>

<ol>
  <li>分岐させようとしているソース一式に、以下のコマンドでタグを打ちます:
    <p>
    <pre>cvs rtag -r HEAD ${b}-base ${m}</pre>
    <p>

  <li>このソース一式を、以下のコマンドを使い、分岐させます:
    <p>
    <pre>cvs rtag -b -r ${b}-base ${b} ${m}</pre>
</ol>
<p>

<b>trunk での変更をブランチに反映させるには:</b>
<p>

<ol>
  <li>ブランチで作業中のソースツリーを更新します:
    <p>
    <pre>cvs update -P -r ${b}</pre>
    <p>
    (作業用のソースツリー内で行います)
    <p>

  <li>新たにベースとしようとする箇所にタグを打ちます:
    <p>
    <pre>cvs rtag -F -r HEAD ${b}-nbase ${m}</pre>
    <p>
    適切にマージを行うための時間がないなど、何か理由ができた場合は、
    これは仮のタグ打ちということにして後でマージをやりなおすこともできます。
    <p>

  <li>ブランチの旧ベースと新ベース間の変更をマージします:
    <p>
    <pre>cvs update -j ${b}-base -j ${b}-nbase</pre>
    <p>
    (作業用のソースツリー内で行います)
    <p>

  <li>変更点の衝突の調整などを行います。
    <p>

  <li>この変更を (ブランチに) チェックインします。
    <p>

  <li>新ベースリビジョンに対して base タグを打ち直します:
    <p>
    <pre>cvs rtag -F -r ${b}-nbase ${b}-base ${m}</pre>
    <p>

  <li>(打ち直した base と重複するようになった) 新ベースのタグを削除します:
    <p>
    <pre>cvs rtag -d ${b}-nbase ${m}</pre>
</ol>
<p>

<hr>
<a href="./"><em>CVS リポジトリー問題</em>に戻る</a>
<hr>

<DEVLINK>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.netbsd.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@JP.NetBSD.ORG">日本語:
       www@JP.NetBSD.ORG</a>)<br>
  $NetBSD: branch.list,v 1.2 2002/12/25 02:26:38 grant Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>

