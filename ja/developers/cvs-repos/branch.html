<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'branch.list' AND RUN 'make' -->

<!-- Copyright (c) 1994-2002
        The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>NetBSD Documentation: Working with CVS branches</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<table><tr><td>
    <a href="../../Misc/disclaimer.html#bsd-daemon"><img
     align="middle" src="../../../images/BSD-daemon.jpg" origlink="../../images/BSD-daemon.jpg" border="0"
     width=146 height=129 alt="BSD daemon"></a>
  </td><td align=center>
    <h1>NetBSD 開発者ドキュメント:</h1>
    <h1>CVS ブランチにまつわる作業</h1>
</td></tr></table>
<p>

<i>Chris Demetriou 曰く:</i>
<p>

そんなわけで、皆さんは CVS ブランチにまつわる作業をよくするでしょう。
以下に記すのは、私がブランチいじり (作成、更新)
をするときに普通に使うコマンドです。 Jason に頼まれて書いたものです。
<p>

以下、 ${b} はブランチ名、 ${m} はこのブランチの対象となる
モジュールとします。階層構造内の個々の構成要素を扱いたい方もいるようですが、
ここでは階層構造全体を扱うものとします。
私は、個々の構成要素を扱った経験はほとんどないのです。
<p>

<b>ブランチを作成するには:</b>
<p>

<ol>
  <li>分岐させようとしているソース一式に、以下のコマンドでタグを打ちます:
    <p>
    <pre>cvs rtag -r HEAD ${b}-base ${m}</pre>
    <p>

  <li>このソース一式を、以下のコマンドを使い、分岐させます:
    <p>
    <pre>cvs rtag -b -r ${b}-base ${b} ${m}</pre>
</ol>
<p>

<b>trunk での変更をブランチに反映させるには:</b>
<p>

<ol>
  <li>ブランチで作業中のソースツリーを更新します:
    <p>
    <pre>cvs update -P -r ${b}</pre>
    <p>
    (作業用のソースツリー内で行います)
    <p>

  <li>新たにベースとしようとする箇所にタグを打ちます:
    <p>
    <pre>cvs rtag -F -r HEAD ${b}-nbase ${m}</pre>
    <p>
    適切にマージを行うための時間がないなど、何か理由ができた場合は、
    これは仮のタグ打ちということにして後でマージをやりなおすこともできます。
    <p>

  <li>ブランチの旧ベースと新ベース間の変更をマージします:
    <p>
    <pre>cvs update -j ${b}-base -j ${b}-nbase</pre>
    <p>
    (作業用のソースツリー内で行います)
    <p>

  <li>変更点の衝突の調整などを行います。
    <p>

  <li>この変更を (ブランチに) チェックインします。
    <p>

  <li>新ベースリビジョンに対して base タグを打ち直します:
    <p>
    <pre>cvs rtag -F -r ${b}-nbase ${b}-base ${m}</pre>
    <p>

  <li>(打ち直した base と重複するようになった) 新ベースのタグを削除します:
    <p>
    <pre>cvs rtag -d ${b}-nbase ${m}</pre>
</ol>
<p>

<hr>
<a href="./"><em>CVS リポジトリー問題</em>に戻る</a>
<hr>

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../"><img
	src="../../../images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"  
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../"><img
	src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../developers/"><img
	src="../../../images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"  
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../developers/"><img
	src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"  
	width="1" height="1" alt="NetBSD ">開発者ドキュメント</a>      
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="../../Misc/feedback.html">英語</a>,
       <a href="mailto:www@JP.NetBSD.ORG">日本語:
       www@JP.NetBSD.ORG</a>)<br>
  $NetBSD: branch.list,v 1.2 2002/12/25 02:26:38 grant Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2002
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>

