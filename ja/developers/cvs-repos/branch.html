<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html lang="ja">
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'branch.list' AND RUN 'make' -->

<!-- Copyright (c) 1994-2003
        The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<link rev="made" href="mailto:www@jp.NetBSD.org">
<title>NetBSD Documentation: Working with CVS branches</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<table><tr><td>
    <a href="../../Misc/disclaimer.html#bsd-daemon"><img
     align="middle" src="../../../images/BSD-daemon.jpg" border="0"
     width=146 height=129 alt="BSD daemon"></a>
  </td><td align=center>
    <h1>NetBSD 開発者ドキュメンテーション:</h1>
    <h1>CVS ブランチにまつわる作業</h1>
</td></tr></table>
<p>

<i>Chris Demetriou 曰く:</i>
<p>

そんなわけで、皆さんは CVS ブランチにまつわる作業をよくするでしょう。
以下に記すのは、私がブランチいじり (作成、更新)
をするときに普通に使うコマンドです。 Jason に頼まれて書いたものです。
<p>

以下、 ${b} はブランチ名、 ${m} はこのブランチの対象となる
モジュールとします。階層構造内の個々の構成要素を扱いたい方もいるようですが、
ここでは階層構造全体を扱うものとします。
私は、個々の構成要素を扱った経験はほとんどないのです。
<p>

<b>ブランチを作成するには:</b>
<p>

<ol>
  <li>分岐させようとしているソース一式に、以下のコマンドでタグを打ちます:
    <p>
    <pre>cvs rtag -r HEAD ${b}-base ${m}</pre>
    <p>

  <li>このソース一式を、以下のコマンドを使い、分岐させます:
    <p>
    <pre>cvs rtag -b -r ${b}-base ${b} ${m}</pre>
</ol>
<p>

<b>trunk での変更をブランチに反映させるには:</b>
<p>

<ol>
  <li>ブランチで作業中のソースツリーを更新します:
    <p>
    <pre>cvs update -P -r ${b}</pre>
    <p>
    (作業用のソースツリー内で行います)
    <p>

  <li>新たにベースとしようとする箇所にタグを打ちます:
    <p>
    <pre>cvs rtag -F -r HEAD ${b}-nbase ${m}</pre>
    <p>
    適切にマージを行うための時間がないなど、何か理由ができた場合は、
    これは仮のタグ打ちということにして後でマージをやりなおすこともできます。
    <p>

  <li>ブランチの旧ベースと新ベース間の変更をマージします:
    <p>
    <pre>cvs update -j ${b}-base -j ${b}-nbase</pre>
    <p>
    (作業用のソースツリー内で行います)
    <p>

  <li>変更点の衝突の調整などを行います。
    <p>

  <li>この変更を (ブランチに) チェックインします。
    <p>

  <li>新ベースリビジョンに対して base タグを打ち直します:
    <p>
    <pre>cvs rtag -F -r ${b}-nbase ${b}-base ${m}</pre>
    <p>

  <li>(打ち直した base と重複するようになった) 新ベースのタグを削除します:
    <p>
    <pre>cvs rtag -d ${b}-nbase ${m}</pre>
</ol>
<p>

<hr>
<a href="./"><em>CVS リポジトリー問題</em>に戻る</a>
<hr>

<table width="100%"><tr><td>
<table border="0" summary="Footer navigation"><tr>
<td class="foothome"><span class="foothome"><a href="../../"><img src="../../../images/NetBSD-flag.png" alt="" border="0" width="90" height="90"></a></span></td>
<td class="foothome">
<span class="foothome"><a href="../../">ホームページ</a></span><br>
</td>
</tr></table>
</td><td>
<table border="0" summary="Footer navigation"><tr>
<td class="foothome"><span class="foothome"><a href="../../developers/"><img src="../../../images/NetBSD-flag.png" alt="" border="0" width="90" height="90"></a></span></td>
<td class="foothome">
<span class="foothome"><a href="../../developers/">開発者ドキュメンテーション</a></span><br>
</td>
</tr></table>

</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@jp.NetBSD.org">日本語:
       www@jp.NetBSD.org</a>)<br>
  $NetBSD: branch.list,v 1.6 2003/07/23 16:35:10 keihan Exp $<br>
  <!-- Based on english version: -->
  <!-- NetBSD: branch.list,v 1.6 2003/07/23 16:35:10 keihan Exp   -->
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>

