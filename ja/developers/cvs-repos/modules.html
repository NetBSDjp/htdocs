<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
<!-- Copyright (c) 1994-2001
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@NetBSD.ORG">
<title>Top-level modules in the CVS repository</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<table><tr><td>
<a href="../../Misc/disclaimer.html#bsd-daemon">
<img align="middle" src="../../images/BSD-daemon.jpg" border=0
width=146 height=129 alt="BSD daemon"></a>
</td><td align=center>
<h1>NetBSD Developer Documentation</h1>
<h1>CVS - Top-level modules</h1>
</td></tr></table>

<p>
The top-level directories in the NetBSD CVS repository related to the
NetBSD sources (i.e. the sources shipped to users) and their contents are:

<dl>
  <dt><b>basesrc</b>
  <dd>The "base" system sources, that is, the contents of the system
	source ("src") tree excluding those pieces in other top-level
	directories in the CVS repository (listed here).

  <dt><b>cryptosrc-us</b>
  <dd>The subtree of the system source tree which contains
	U.S.A.-restricted cryptography software.

  <dt><b>gnusrc</b>
  <dd>The "gnu" subtree of the system source tree.

  <dt><b>pkgsrc</b>
  <dd>The NetBSD packages collection.

  <dt><b>sharesrc</b>
  <dd>The "share" subtree of the system source tree.

  <dt><b>syssrc</b>
  <dd>The "sys," "usr.sbin/config," and "usr.sbin/dbsym" subtrees of the		system source tree.

  <dt><b>xsrc</b> (located on cvs.fi.netbsd.org)
  <dd>The NetBSD X Window System source tree.
</dl>

If desired, the top-level directories can be checked out directly
(i.e. they are equivalent to modules).
This is typically used when checking out "pkgsrc" and "xsrc," but may
be used with the other top-level directories as well.
The other top-level directories are normally checked out using modules
which rearrange the sources slightly to look like the normal system source
tree.  Those modules are:

<dl>
  <dt><b>src-nocrypto</b>
  <dd>Checks out the contents of the "basesrc," "gnusrc," "sharesrc," and
	"syssrc" top-level directories, into the subdirectory "src" of the
	current directory, arranged as expected for a NetBSD system source
	tree.

  <dt><b>src</b>
  <dd>An alias for "src-nocrypto."

  <dt><b>src-crypto-us</b>
  <dd>Checks out the same sources as the "src-nocrypto" module, plus adds
	the contents of the "cryptosrc-us" directory as the "crypto-us"
	subdirectory of "src."  <b>DO NOT USE THIS MODULE AT THIS TIME.</b>

  <dt><b>src-crypto-all</b>
  <dd>Checks out the same sources as the "src-nocrypto" module, plus adds
	all cryptographic sources as appropriately-named subdirectories of
	"src."  (Currently this module has the same effect as the
	"src-crypto-us" module.) <b>DO NOT USE THIS MODULE AT THIS TIME.</b>

  <dt><b>src-domestic</b>
  <dd>Checks out the same sources as the "src-nocrypto" module, plus adds
	the contents of the "cryptosrc-us" directory as the "domestic"
	subdirectory of "src."
</dl>

<h3>Implications of this repository layout</h3>

<ul>
  <li>Extra care must be taken when importing files.  Though files in the
    src* modules are seen when checked out as being situated under "src,"
    they aren't actually located there in the repository.  You must import
    code into the correct top-level directory (e.g. "basesrc" or "gnusrc").
    Imports which involve code going into multiple top-level directories
    must be broken into a separate import per top-level directory.

  <li>Not all normally-functional CVS operations will necessarily work
    as expected with the src* modules.  Instances found so far where this
    is a problem:

      <dl>
	<dt><tt>cvs co -P src</tt> run multiple times
	<dd>Running <tt>cvs co -P src</tt> (or similar commands with the other
	  src* modules) multiple times in the same directory (without removing
	  the checked out source tree) does not work properly.,
	  This sequence of commands is usually run to check out and then
	  later update a source tree.  Instead of using "cvs co -P ..."
	  multiple times, initially check out the tree with "cvs co -P ..."
	  and update the tree by using "cvs update -Pd" from within the tree.
	<dt>Use of the <tt>-d</tt> option with <tt>cvs co</tt>
	<dd>Running <tt>cvs co -d dir src</tt> (or similar commands with the
	  other src* modules) does not work.  You will get error
	  messages saying "existing repository ... does not match ...;
	  ignoring module _gnusrc-cmp" etc.  The workaround is to drop the
	  <tt>-d</tt> option and let cvs create the default directory.
      </dl>

    If you encounter other problems, please update this page!
</ul>
<p>

<hr> 

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../"><img
        src="../../images/NetBSD-flag.gif" border="0"  
        width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../"><img
        src="../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">Home Page</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../developers/"><img
        src="../../images/NetBSD-flag.gif" border="0"  
        width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../developers/"><img
        src="../../images/empty.gif" border="0"  
        width="1" height="1" alt="NetBSD ">Developer Documentation</a>      
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  <a href="../../Misc/feedback.html">(Contact us)</a>
  $NetBSD: modules.html,v 1.12 2002/05/21 22:08:59 jschauma Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2001
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
