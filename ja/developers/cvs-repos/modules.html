<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
<!-- Copyright (c) 1994-2001
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>Top-level modules in the CVS repository</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<table><tr><td>
<a href="../../Misc/disclaimer.html#bsd-daemon">
<img align="middle" src="../../../images/BSD-daemon.jpg" origlink="../../images/BSD-daemon.jpg" border=0
width=146 height=129 alt="BSD daemon"></a>
</td><td align=center>
<h1>NetBSD 開発者ドキュメント</h1>
<h1>CVS - トップレベルモジュール</h1>
</td></tr></table>

<p>
NetBSDソース (つまりユーザーに渡されるソース) に関するNetBSD
CVS リポジトリーがあるトップレベルのディレクトリーと内容は以下の通り:

<dl>
  <dt><b>basesrc</b>
  <dd>"base"システムソース。つまり、(ここで挙げられている) CVS リポジトリーの
  	他のディレクトリーにあるものを除く、システムソース ("src") ツリーの
  	コンテンツ。

  <dt><b>cryptosrc-us</b>
  <dd>アメリカ限定の暗号ソフトウェアを含むシステムソースツリーのサブツリー。

  <dt><b>gnusrc</b>
  <dd>システムソースツリーの"gnu" サブツリー。

  <dt><b>pkgsrc</b>
  <dd>NetBSDパッケージコレクション。

  <dt><b>sharesrc</b>
  <dd>システムソースツリーの"share" サブツリー。

  <dt><b>syssrc</b>
  <dd>システムソースツリーの"sys", "usr.sbin/config", "usr.sbin/dbsym" サブツリー。

  <dt><b>xsrc</b> (cvs.fi.netbsd.orgにある)
  <dd>NetBSD Xウィンドウシステムソースツリー。
</dl>

お望みであれば、トップレベルディレクトリーは直接チェックアウトできます
(すなわち、モジュールと同等です)。
これは特に"pkgsrc"や"xsrc"をチェックアウトするときに使われますが、
他のトップレベルディレクトリーにも同じように使われます。
他のトップレベルディレクトリーは、通常のシステムソースツリーであるように見せるため、
多少ソースの配置を変えたモジュールを使ってチェックアウトします。
これらのモジュールは以下の通り:

<dl>
  <dt><b>src-nocrypto</b>
  <dd>NetBSDシステムソースツリーを想定して並べるため、
	"basesrc," "gnusrc," "sharesrc," syssrc" といったトップディレクトリーの
	コンテンツをチェックアウトし、currentディレクトリーのサブディレクトリーである
	"src" へ入れます。

  <dt><b>src</b>
  <dd>"src-nocrypto" 用のエイリアス。

  <dt><b>src-crypto-us</b>
  <dd>"src-nocrypto" モジュールと同じソースをチェックアウトし、
	"src" の"crypto-us" サブディレクトリーとして"cryptosrc-us" ディレクトリーの
	コンテンツを付け加えます。<b>今回はこのモジュールを使わないでください。</b>

  <dt><b>src-crypto-all</b>
  <dd>"src-nocrypto" モジュールと同じソースをチェックアウトして、
	適当に名前が付けられた"src" のサブディレクトリーとして
	全ての暗号ソースを付け加えます (最近では"src-crypto-us"
	モジュールと同じ効果をもっています) 。
	<b>今回はこのモジュールを使わないでください。</b>

  <dt><b>src-domestic</b>
  <dd>"src-nocrypto" モジュールと同じソースをチェックし、
	"src" の"domestic" サブディレクトリーとして"cryptosrc-us" ディレクトリーの
	コンテンツを加えます。
</dl>

<h3>このリポジトリー配置の密接な関係</h3>

<ul>
  <li>ファイルをインポートするときには更なる注意を払わなければいけません。
	src* モジュールにあるファイルは"src" の下に置かれているとして
	チェックアウトされれば見ることもできますが、実際にはリポジトリー内には
	ありません。正しいトップレベルのディレクトリーへコードをインポートしなければ
	いけません (つまり"basesrc" か"gnusrc" です) 。
	複数のトップレベルディレクトリーへ置かれるコードを含むインポートは、
	トップレベルディレクトリーごとにインポートを分けなければいけません。

  <li>src* モジュールでは通常の機能であるCVSの操作が、必ずしも予想される
	ように機能するわけではありません。現段階で問題になっている例です:

      <dl>
	<dt><tt>cvs co -P src</tt> を複数回実行
	<dd><tt>cvs co -P src</tt> (や他のsrc* モジュールで行う同等のコマンド) を
	  同じディレクトリーで複数回実行すると、きちんと動作しなくなります。
	  この一連のコマンドはソースツリーをチェックアウトし、
	  その後でアップデートするために通常行います。
	  "cvs co -P ..." を何回も使う代わりに最初に"cvs co -P ..." を使ってツリーを
	  チェックアウトし、ツリーの中から"cvs update -Pd" を使ってツリーを
	  アップデートしてください。
	<dt><tt>cvs co</tt> で <tt>-d</tt> オプションを使用
	<dd><tt>cvs co -d dir src</tt> (や他の src* モジュールで行う同等のコマンド)
	  を実行すると、動作しなくなります。この場合、
	  "existing repository ... does not match ...;
	  ignoring module _gnusrc-cmp" といったエラーメッセージが出るでしょう。
	  回避策は、 <tt>-d</tt> オプションを使わずに、 cvs でデフォルトディレクトリーを作成することです。
      </dl>

    もし他の問題に遭遇したら、このページを更新してください。
</ul>
<p>

<hr> 

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../"><img
        src="../../../images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"  
        width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../"><img
        src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../developers/"><img
        src="../../../images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"  
        width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../developers/"><img
        src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"  
        width="1" height="1" alt="NetBSD ">開発者ドキュメント</a>      
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="../../Misc/feedback.html">英語</a>,
       <a href="mailto:www@JP.NetBSD.ORG">日本語:
       www@JP.NetBSD.ORG</a>)<br>
  $NetBSD: modules.html,v 1.12 2002/05/21 22:08:59 jschauma Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2001
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
