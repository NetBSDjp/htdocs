<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
<!-- Copyright (c) 1994-2003
        The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<link rev="made" href="mailto:www@JP.NetBSD.org">
<title>NetBSD CVS HOWTO</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1><a name="top">NetBSD CVS HOWTO</a></h1>

<p><hr><em>
このドキュメントではNetBSDでCVSを使う際の基本的な情報を提供します。
</em><hr>
<p>
<h2><a name="toc1">1.</a> <a href="#s1">導入と目的</a></h2>
<ul>
<li><a href="#ss1.1">1.1 CVSとは何か?</a>
<li><a href="#ss1.2">1.2 バージョン履歴</a>
</ul>

<p>
<h2><a name="toc2">2.</a> <a href="#s2">始めよう</a></h2>
<ul>
<li><a href="#ss2.1">2.1 CVSのインストール</a>
<li><a href="#ss2.2">2.2 CVS用の環境設定</a>
<li><a href="#ss2.3">2.3 CVSの作業用ディレクトリーを作る</a>
</ul>

<p>
<h2><a name="toc3">3.</a> <a href="#s3">CVSを使う</a></h2>
<ul>
<li><a href="#ss3.1">3.1 例</a>
<li><a href="#ss3.2">3.2 CVS モジュール</a>
<li><a href="#ss3.3">3.3 新しいパッケージのインポート</a>
</ul>

<p>
<h2><a name="toc4">4.</a> <a href="#s4">その他役に立つCVSの操作</a></h2>
<ul>
<li><a href="#ss4.1">4.1 CVS 出力</a>
</ul>

<p>
<h2><a name="toc5">5.</a> <a href="#s5">他の情報源</a></h2>
<ul>
<li><a href="#ss5.1">5.1 NetBSD 特有</a>
<li><a href="#ss5.2">5.2 CVS 特有</a>
</ul>

<p>
<a href="#top">トップ</a>へ戻る。
<p>

<hr>
<h1><a name="s1">1.</a> 導入と目的</h1>
<hr>

<h2><a name="ss1.1">1.1</a> CVSとは何か?</h2>
   
<p>
CVSとはConcurrent Versions System (協調バージョンシステム) の略です。
CVSは同一ファイルで作業する複数の開発者によるソースの変更を追跡しつづける
ように設計されている"ソースコントロール" あるいは"リビジョンコントロール"
ツールです。開発者が選択したように同期をとりつづけることが
できます。特に、CVSは<a href="../../index.html">NetBSDプロジェクト</a>では
ソースツリーを維持するツールとして使われています。
<p>
重要なのは、CVSの"協調" 機能のおかげで複数の人々が同時に作業できる
ことに注目することです。RCSとは違いファイルのロックはありません。


<h2><a name="ss1.2">1.2</a> バージョン履歴</h2>

<p>
<ul>
<li>2003年 8月29日 - developers.html 再生成方法の変更等に伴う更新。
<li>2002年12月24日 - CVS モジュール再編に伴う更新
<li>2001年10月20日 - パッケージのインポートの参照先を修正
<li>2001年 3月24日 - supporting_cast.html 再生成に関する説明を追加。
<li>1999年 9月20日 - weblintを通るようにHTMLを修正、誤植を修正。
<li>1999年 8月30日 - 更に情報を付け加え、誤植を修正。
<li>1999年 8月26日 - Hubert Feyrer<a href="mailto:hubertf@NetBSD.org">
&lt;hubertf@NetBSD.org&gt</a>による手助けを受け、
Dan MacMahill<a href="mailto:dmcmahill@NetBSD.org">&lt;dmcmahill@NetBSD.org&gt</a>
が書いたオリジナルのHOWTOを追加。
</li>
</ul>

<p>
<a href="#top">トップ</a>へ戻る。
<p>

<hr>
<h1><a name="s2">2.</a> 始めよう</h1>
<hr>
<p>
この章ではシステム上にCVSをインストールする基本的なステップを解説します。

<h2><a name="ss2.1">2.1</a> CVSのインストール</h2>
<p>
ローカルマシンにCVSをインストールする必要があります。
全ての作業を行うマシンであって、CVSのサーバーではありません。
マシンにCVSがすでにインストールされていなければ、
<a href="../../Documentation/software/packages.html">パッケージコレクション</a>
から <a
href="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/devel/cvs/README.html">CVS</a>
をインストールして下さい。

<h2><a name="ss2.2">2.2</a> CVS用の環境設定</h2>
<p>
CVSを使う予定であるローカルマシンで、シェルに<code>csh</code> か
<code>tcsh</code>を使っていれば、<code>.cshrc</code>ファイルに
以下の行を付け加えて下さい。
<p>
<pre>
    setenv CVSEDITOR vi
    setenv CVSROOT yourusername@cvs.NetBSD.org:/cvsroot
    setenv CVS_RSH ssh
</pre>
<p>
もし<code>sh</code> か <code>bash</code>をお使いでしたら、
<code>.profile</code>ファイルに以下の行を付け加えて下さい。
<p>
<pre>
    CVSEDITOR=vi
    CVSROOT=yourusername@cvs.NetBSD.org:/cvsroot
    CVS_RSH=ssh
    export CVSEDITOR
    export CVSROOT
    export CVS_RSH
</pre>

<h2><a name="ss2.3">2.3</a> CVSの作業用ディレクトリーを作る</h2>
<p>
私は自分のマシン上に<code>/usr/cvs</code> にCVS関連のものを
全て置いていますが、これは人の好みによります。
このドキュメントの残りではマシンに<code>/usr/cvs</code> ディレクトリーを
作ったものとします。もう一度繰り返しますが、これはローカルマシンであって、
CVSサーバーではありません。

<p>
<a href="#top">トップ</a>へ戻る。
<p>

<hr>
<h1><a name="s3">3.</a> CVSを使う</h1>
<hr>
<p>
この章ではCVSを使う基本的なステップを説明します。

<h2><a name="ss3.1">3.1</a> 例</h2>
<p>この章では空の<code>/usr/cvs</code> ディレクトリーから始め、
<code>htdocs/People/</code> モジュールを追加し、変更を加えてコミットする方法を示します。
基本的なステップは以下の通り:
<p>
<pre>
    cd /usr/cvs
    cvs checkout htdocs/People
    cd htdocs/People
    vi developers.xml
    make
    cvs ci developers.xml developers.html
</pre>
<p>
これらのステップを以下により詳しく説明します。
<p>
<pre>
    cvs checkout htdocs/People
</pre>
<p>
このコマンドで、CVSが<code>"htdocs/People"</code>
というディレクトリーをローカルマシンにチェックアウトします。
これは <code>htdocs/People</code> 以下にある各ファイルの最新バージョンが
CVSサーバーからローカルマシンへコピーされることを意味します。
加えて、<code>CVS</code> ディレクトリーが<code>/usr/cvs</code>,
<code>/usr/cvs/htdocs</code>, <code>/usr/cvs/htdocs/People</code>
の中に作られます。重要なので覚えておいて欲しいのは、CVSのチェックアウトは
RCSにあるチェックアウトとは違い、ファイルをロックしません。
つまり、他の開発者がチェックアウトされたファイルにもアクセスできるのです。
<p>
一度ディレクトリーをローカルマシンにチェックアウトしたら、
このディレクトリー用に再び<code>cvs co</code>、つまり<code>cvs checkout</code>
をする必要はありません。もし以前チェックアウトしたディレクトリーを最新のバージョンへ
アップデートしたければ、例えば単純に
<code>cvs update htdocs/People</code>
とすればよいです。
<p>
ディレクトリーをチェックアウト (以前に目的のモジュールをチェックアウト
していれば、アップデート) したら、次はファイルを編集します。
編集が全て完了したら、以下のようにします:
<p>
<pre>
    make
</pre>
<p>
こうすると、 <code>developers.xml</code> ファイルをもとに <code>developers.html</code> ファイルが作り直されます。それから以下のようにします:
<p>
<pre>
    cvs ci developers.xml developers.html
</pre>
<p>
このコマンドは新しいバージョンを反映するため、
CVSサーバーに変更部分をアップロードし、各ファイルのRCSヘッダーをアップデートします。
変更をチェックイン (コミット) したら、変更に関して短く書き記すように促されるでしょう。
<p>
ただし、ソースツリー内での新しい項目の追加とファイル再生成は、
普通はそれぞれ別に commit します。


<h2><a name="ss3.2">3.2</a> CVS モジュール</h2>
<p>
CVSでは、モジュールとは一つのファイルや複数のファイルがあるディレクトリーを
指すこともありますし、ディレクトリーツリーの全体を指すこともあります。
<a href="modules.html"> NetBSDのトップレベルCVSモジュール</a>
のリストでは、NetBSDツリーのトップレベルCVSモジュールを列挙しています。
特に注目すべき他のトップレベルモジュールは以下の通りです:

<dl>
  <dt><b>htdocs</b></dt>
  <dd>NetBSD のWWW ページ。</dd>

  <dt><b>othersrc</b></dt>
  <dd>NetBSD に関連があるが NetBSD そのものではないコード。</dd>
</dl>

<p>
トップレベルモジュールはそれぞれ、トップレベルを全てチェックアウト
(し、アップデート) することも、低いレベルのモジュールをチェックアウト
(し、アップデート) することも可能です。
例えば、<code>htdocs</code> モジュール全体をチェックアウトするには、
こうします:
<p>
<pre>
    cd /usr/cvs
    cvs checkout htdocs
</pre>
<p>
<code>htdocs/People</code> サブディレクトリーを入手するだけならこうします
<p>
<pre>
    cd /usr/cvs
    cvs checkout htdocs/People
</pre>
<p>
これらの例のように、一度モジュールをチェックアウトする必要があることを
忘れないでください。例えば、すでに<code>htdocs</code> モジュールを
チェックアウトして、最新のものにしたい場合は、こうします:
<p>
<pre>
    cd /usr/cvs
    cvs update htdocs
</pre>

<h2><a name="ss3.3">3.3</a> 新しいパッケージのインポート</h2>
<p>
この章では<a href="../../../developers/pkgsrc/#import" origlink="../pkgsrc/#import">新しいパッケージのインポート
</a> の説明をいくつか補足します。
<p>
新しく作ったパッケージを追加する例をとりあげましょう。
<p>
この例ではCVSの材料が<code>/usr/cvs</code> にあり、<code>pkgsrc</code>が
そのサブディレクトリーにあると仮定します。
新しいパッケージを<code>foo/bar</code> として、
<code>/usr/cvs/pkgsrc/foo/bar.work</code> ディレクトリーの中にあるとします。
このパッケージをソースツリーへインポートする段階は以下の通りになります:
<pre>
    cd /usr/cvs/pkgsrc/foo/bar.work
    
    # 通常のテスト、つまりpkglintなどをします。
    # files/patch-sum ファイルを生成するために、'make makepatchsum' するのを
    # 忘れないでください。

    grep TNF /usr/pkgsrc/pkgsrc.txt

    # このコマンドで"cvs import" を行うにあたり文法的に正しいかがわかります。
    # (/usr/pkgsrc は/usr/cvs/pkgsrc へのシンボリックリンクです) 。

    cvs import pkgsrc/foo/bar TNF pkgsrc-base 

    # "bar.work" ではなく、"bar" であることに注意して下さい。

    cd ../../..
    cvs checkout pkgsrc/foo/bar 

    # 全てが正常に行われたか確認するため、新しくインポートされたパッケージを
    # チェックアウトします。

    cd pkgsrc/foo
    cvs update Makefile
    vi Makefile 
    
    # pkgsrc/foo/Makefile にbarを追加します。

    cvs ci -m 'add & enable bar' Makefile

    # pkgsrc/foo/Makefile へ変更をチェックインします。

    cd /usr/cvs/pkgsrc/doc
    cvs update CHANGES 

    # これにより、最新のCHANGESを確実に取得します。

    vi CHANGES 

    # foo/bar パッケージへの変更を書いたメモを作ります。

    cvs ci -m 'foo-17.42' CHANGES

    # CHANGES をチェックインします。</pre>

<p>
<a href="#top">トップ</a>へ戻る。
<p>


<hr>
<h1><a name="s4">4.</a> その他役に立つCVSの操作</h1>
<hr>

<h2><a name="ss4.1">4.1</a> CVS 出力</h2>
<p>
さまざまなCVSのタスクを実行すると、関係するファイルのリストをみることが
あるでしょう。ファイル名は一文字のコードで表されます。
コードの概要は以下の通りです:
<p>

<ul>
<li><b>U</b>pdated (更新)</li>
<li><b>P</b>atched (パッチ)</li>
<li><b>C</b>onflict (コンフリクト)</li>
<li><b>M</b>odified (ローカルで) (変更済み)</li>
<li><b>A</b>dded (追加済み)</li>
<li><b>R</b>emoved (削除済み)</li>
<li><b>?</b> (CVSの管理外)</li>
</ul>

<p>
<a href="#top">トップ</a>へ戻る。
<p>

<hr>
<h1><a name="s5">5.</a> 他の情報源</h1>
<hr>

<h2><a name="ss5.1">5.1</a> NetBSD 特有</h2>
<p>
<ul>
<li>pkgsrc <a href="../../Documentation/software/packages.html">ホーム
ページ</a>。</li>
<li><a href="../" origlink="/developers/">役に立つ NetBSD の開発者情報</a>。</li>
<li>完全な 
<a href="../../Documentation/pkgsrc/">pkgsrc ドキュメント</a>。</li>
</ul>
<p>

<h2><a name="ss5.2">5.2</a> CVS 特有</h2>

<ul>
<li><a href="http://www.gnu.org/manual/cvs-1.9/html_mono/cvs.html">
CVS のマニュアル</a>
<li><a href="../../../developers/cvs-repos/cvs-faq.txt" origlink="cvs-faq.txt">CVS のFAQ</a>
<li><a href="http://www.cyclic.com/index.html">Cyclic Software</a> という
CVSをメンテナンスしている会社
</ul>

<p>
<a href="#top">トップ</a>へ戻る。
<p>

<hr> 

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../"><img
        src="../../../images/NetBSD-flag.png" origlink="../../images/NetBSD-flag.png" border="0"  
        width="90" height="90" alt=""></a>
  </td><td>
    <a href="../../"><img
        src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../developers/"><img
        src="../../../images/NetBSD-flag.png" origlink="../../images/NetBSD-flag.png" border="0"  
        width="90" height="90" alt=""></a>
  </td><td>
    <a href="../../developers/"><img
        src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"  
        width="1" height="1" alt="NetBSD ">開発者ドキュメント</a>      
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@JP.NetBSD.org">日本語:
       www@JP.NetBSD.org</a>)<br>
  $NetBSD: cvs_intro.html,v 1.22 2004/10/30 22:34:19 jschauma Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
