<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html lang="ja"> <head>
<!-- Copyright (c) 1998-2003 The NetBSD Foundation, Inc.
     ALL RIGHTS RESERVED. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<link rev="made" href="mailto:www@jp.NetBSD.org">
<title>CVS引き上げを実際に行う方法</title>
</head>

<body bgcolor="#FFFFFF" text="#000000">

<h1>CVS引き上げを実際に行う方法</h1>

このページでは引き上げが実際に行われる方法を、例を挙げて説明します。
現在のリリースサイクル (1.4) では、開発者はリリースサイクルの初期段階に
リリースエンジニアの確認を受け、その後に自分で引き上げを行うようになっています。<p>

<code>foo.c</code> 1.19から1.21への変更を引き上げる場合を例にしてみましょう。<p>

(注意: "1.21へ引き上げる" という考え方は意味がありません --
常に二つのバージョン間でdiffをあてることになります。
どちらか一方が基本になるタグであるかもしれませんが、とにかくdiffを引き上げるので、
変更が起こった二つのバージョンをいつも知っている必要があります。)<p>

まず初めに、完全な<code>foo.c</code>から始めることを確認します。

<blockquote>
	cvs update -rnetbsd-1-4 foo.c
</blockquote>

(このコマンドの効果については、最後にある注意を参照してください。)

そして、引き上げたい変更を加えるため、foo.cにパッチを当てる必要があります。
これには二つ方法があります。
パッチファイルを作成してあてるか、それを避けるためにcvsコマンドのupdateにある
<code>-j</code> フラグを使う事ができます。<p>

まじない:

<blockquote>
	cvs diff -c -r1.19 -r1.21 foo.c &gt;/tmp/patch
</blockquote>

で、以下のコマンドであてることができるパッチファイルを作成できます。

<blockquote>
	patch &lt;/tmp/patch
</blockquote>

コマンド

<blockquote>
	cvs update -j1.19 -j1.21 foo.c
</blockquote>

は、基本的に上にかいてある二つの段階と同等で、
同じようにファイルにパッチをあてます。<p>

さあ、あなたが望んだ結果になっているか確認するため、
ファイルを手動で調べてみましょう。
<code>foo.c</code>が穂先と一致しているか調べたいならば
(多分1.21が穂先で、1.19が枝の先か似たようなものでしょう) 、
こうします

<blockquote>
	cvs diff -r1.21 foo.c
</blockquote>

そして、たったひとつのdiffがRCSのIdであるはずです。
もし<code>foo.c</code>が穂先と一致していないと思われるならば、
手動で大丈夫であることを調べるか、望んだ通りになることを確かめるため
cvsの創造的なセットを使用するかしなければいけません。<p>

とにかく、一度diffがあてられたら、こうします:

<blockquote>
	cvs commit foo.c
</blockquote>

コメントメッセージには正確にどのバージョンを引き上げたのかについての情報を
含め<b>なければ</b>なりません。
これは、もし誰か他の人が同じファイルに対して後々引き上げをしなければならないとき
(あるいはあなたが引き上げなければいけないが、見失ってしまったとき) 、
引き上げできるようにします。
のちのちというのは今から一年ぐらい先のことなので、
特定の引き上げの詳細について覚えていると考えないでください。<p>

コメントメッセージは引き上げがなぜ行われたのか説明する詳細なメッセージも
付ける<b>べき</b>です。<p>

よって、完全な最小限の引き上げメッセージの例は、
"1.21から1.23への引き上げ完了" になります。
これは、BTW、同じディレクトリーに引き上げを行わ<em>ず</em>、
どのバージョンを引き上げたのかを書いていないので、
"幹と同調" のようなメッセージでコミットしたことを示します。<p>

<hr>

コマンド
<blockquote>
	cvs update -rnetbsd-1-4 foo.c
</blockquote>

は<code>foo.c</code>を"netbsd-1-4" へ貼り付け
(<code>CVS/Entries</code>に何が起こっているか見てください) 、
その後のCVSコマンドはこの"接着剤" を以下のコマンドで取らないかぎり、
このリリースに適応されることに注意してください。

<blockquote>
	cvs update -A foo.c
</blockquote>

<hr>
<table width="100%" cols="2" border=0 cellspacing=8 cellpadding=0>
<tr>
  <td width="50%">
    <table><tr>
      <td>
	<a href="../../index.html">
	<img src="/images/NetBSD-banner.gif" origlink="../../images/NetBSD-banner.gif" alt=""></a>
      </td><td>
	<a href="../../index.html">
	<img src="/images/empty.gif" origlink="../../images/empty.gif"
		alt="NetBSD " border=0>ホームページ</a>
      </td>
    </tr></table>
  </td>
  <td width="50%">
    <table><tr>
      <td>
	<a href="index.html">
	<img src="/images/NetBSD-banner.gif" origlink="../../images/NetBSD-banner.gif"
		alt=""></a>
      </td><td>
	<a href="index.html">
	<img src="/images/empty.gif" origlink="../../images/empty.gif"
		alt="NetBSD " border=0>リリース工学ドキュメント</a>
      </td>
    </tr></table>
  </td>
</tr></table>

<hr>
<address>  www@jp.NetBSD.org<br>
  $NetBSD: howto-pullup.html,v 1.3 1999/07/07 02:36:43 abs Exp $<br>
  <!-- based on english translation: -->
  <!-- NetBSD: howto-pullup.html,v 1.3 1999/07/07 02:36:43 abs Exp   -->
  <a href="/Misc/disclaimer.html" origlink="../../Misc/disclaimer.html">Copyright &copy; 1998-2003
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
</address>
<!-- hhmts start -->
Last modified: Wed Apr  7 19:07:30 MEST 1999
<!-- hhmts end -->
</body> </html>
