<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<!-- Copyright (c) 1998, 1999 The NetBSD Foundation, Inc.
     ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@NetBSD.ORG">
<title>How to actually perform a CVS pullup</title>
</head>

<body bgcolor="#FFFFFF" text="#000000">

<h1>How to actually perform a CVS pullup</h1>

This page gives an example of how a pullup is actually done.  In the
current release cycle (1.4) developers are expected to do pullups
themselves after confirmation from release engineering during the
initial phase of the release cycle.<p>

Let us say you are pulling up the changes between <code>foo.c</code>
1.19 and 1.21.<p>

(Nota bene: the idea of "pulling up to 1.21" is meaningless -- you are
always applying diffs between two versions. One of them might be the
base tag, but in any case, since you are pulling up diffs, you always
need to know the two versions between which the changes occurred.)<p>

First, and foremost, make sure you are starting with a clean
<code>foo.c</code>

<blockquote>
	cvs update -rnetbsd-1-4 foo.c
</blockquote>

(See note at the end about the effect of this command.)

Then, you need to patch up foo.c to add the changes you want to pull
up. There are two ways of doing this. You can create a patch file and
apply it, or you can use cvs update's <code>-j</code> flag to avoid
needing that.<p>

The incantation:

<blockquote>
	cvs diff -c -r1.19 -r1.21 foo.c &gt;/tmp/patch
</blockquote>

will produce a patch file which you can then apply by doing 

<blockquote>
	patch &lt;/tmp/patch
</blockquote>

The command

<blockquote>
	cvs update -j1.19 -j1.21 foo.c
</blockquote>

is essentially equivalent to the two steps listed above, and will
similarly patch your file.<p>

Now manually examine the file to make sure What You Wanted Done Is
Done. If you are trying to make <code>foo.c</code> identical to the
head (presumably 1.21 is the head and 1.19 was the branch point or
some such), you can do a

<blockquote>
	cvs diff -r1.21 foo.c
</blockquote>

and the only diff should be the RCS Id. If <code>foo.c</code> isn't
supposed to be identical to the head, you are going to have to make
sure things are okay manually or use creative sets of cvs diffs to
assure that what you wanted done was done.<p>

In any case, once done, do a:

<blockquote>
	cvs commit foo.c
</blockquote>

The commit message <b>must</b> contain information about precisely
what versions you pulled up in the commit message.  This is so that if
somebody else has to do a pullup on the same file later (or if you
might have to, and you might lose track) they will be able to.  Later
could be a year from now, so don't assume that you'll remember the
details of a particular pullup.<p>

The commit message <b>should</b> also give a detailed message
explaining why the pullup was done.<p>

So an example of an absolute minimum pullup message is "pulled up
1.21-1.23".  This means, BTW, that you must <em>not</em> do a bunch of
pullups in the same directory and then commit them with a message like
"sync with trunk," because that won't say what versions you pulled
up.<p>

<hr>

Note that the command

<blockquote>
	cvs update -rnetbsd-1-4 foo.c
</blockquote>

will glue <code>foo.c</code> to "netbsd-1-4" (see what happens to
<code>CVS/Entries</code>), and subsequent CVS commands will thus apply
to this release until you unstick this "glue" with

<blockquote>
	cvs update -A foo.c
</blockquote>

<hr>
<table width="100%" cols="2" border=0 cellspacing=8 cellpadding=0>
<tr>
  <td width="50%">
    <table><tr>
      <td>
	<a href="../../index.html">
	<img src="../../images/NetBSD-banner.gif" alt=""></a>
      </td><td>
	<font face="helvetica, arial">
	<a href="../../index.html">
	<img src="../../images/empty.gif"
		alt="NetBSD " border=0>Home Page</a>
	</font>
      </td>
    </tr></table>
  </td>
  <td width="50%">
    <table><tr>
      <td>
	<a href="index.html">
	<img src="../../images/NetBSD-banner.gif"
		alt=""></a>
      </td><td>
	<font face="helvetica, arial">
	<a href="index.html">
	<img src="../../images/empty.gif"
		alt="NetBSD " border=0>Release Engineering Documentation</a>
	</font>
      </td>
    </tr></table>
  </td>
</tr></table>

<hr>
<address>  www@NetBSD.ORG<br>
  $NetBSD: howto-pullup.html,v 1.3 1999/07/07 02:36:43 abs Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1998, 1999
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
</address>
<!-- hhmts start -->
Last modified: Wed Apr  7 19:07:30 MEST 1999
<!-- hhmts end -->
</body> </html>
