<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html lang="ja">
<head>
<!-- Copyright (c) 1994-2003
        The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<link rev="made" href="mailto:www@jp.NetBSD.org">
<title>NetBSD開発者ドキュメンテーション: リリースエンジニアリングの手順</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h2>NetBSD開発者ドキュメンテーション: リリースエンジニアリング: リリース工学の手順
</h2>

<h3><a name="make_release">4.4 NetBSDリリースを作成する方法</a></h3>

<h4>4.4.1 概要</h4>

<p>
NetBSDのリリース手順はメインの枝の開発が引き伸ばされる事なく、
頻繁に質の高いリリースを作り出す事が出来るよう、8週間の段階を踏みます。
目標は年間2つのNetBSDリリースを出すことです。

<p>
以下の記述では、<var>バージョン</var>は文脈によって違った表記のされ方をします。
たとえば、NetBSD 1.2のリリースについて書いているとすると、
<var>バージョン</var>は、CVSコマンドで使われる時には"1-2"となり、
公にアナウンスされたバージョンについて書かれていたり、
src/sys/conf/newvers.shの中で定義されていれば"1.2"となり、
src/sys/sys/param.hの<b>NetBSD<var>バージョン</var></b>定数の定義について書かれていれば、
"1_2"となります。

<p>
リリース用の基本的な経過は以下の通りです:
<dl>
<dt> <a href="#rel_week0">第0週: リリースサイクルの始まり</a>
<dd>
	リリーススケジュールがNetBSD開発者やミラーのメンテナー全員に注意として送られます。

<dt> <a href="#rel_week1">第1週: スナップショットの正当性チェック</a>
<dd>
	ポートメンテナーはリリースを作成するマシンが機能しているか確認するため、
	フルリリースを構築しようとするはずです。

<dt> <a href="#rel_week2">第2週: リリースの枝の作成と機能の凍結</a>
<dd>
	リリースの枝が作成され、開発者はリリースエンジニアの許可なしに
	新しい機能をリリースの枝に付け加えられなくなります。

<dt> <a href="#rel_week3">第3週: 最初のベータリリース</a>
<dd>
	バイナリースナップショットが<b>NetBSD <var>バージョン</var>_ALPHA</b>として
	リリースされます。

<dt> <a href="#rel_week4">第4週: 致命的でないバグの修正を凍結</a>
<dd>
	開発者は致命的なバグの修正以外はどんな変更もリリースエンジニアの許可なしに
	リリースの枝に反映させることは出来ません。
	週の半ばにリリースの枝が<b>netbsd-<var>バージョン</var>-BETA</b>とつけられます。

<dt> <a href="#rel_week5">第5週: 二つ目のベータリリース</a>
<dd>
	バイナリースナップショットが<b>NetBSD <var>バージョン</var>_BETA</b>として
	リリースされます。

<dt> <a href="#rel_week6">第6週: コードの凍結</a>
<dd>
	開発者はリリースエンジニアの許可なしにリリースの枝に<em>いかなる</em>変更も
	加えられません。

<dt> <a href="#rel_week7">第7週: 最終ソースへのタグ付け</a>
<dd>
	リリースの枝が<b>netbsd-<var>バージョン</var>-FINAL</b>とタグ付けされ、
	ポートメンテナーは最終リリースのバイナリーを作り始めます。

<dt> <a href="#rel_week8">第8週: リリース</a>
<dd>
	リリースが世界にアナウンスされます。

</dl>

<p>
このドキュメントでまだされていないこと:
	<ul>
	<li> いろいろな詳細を書くこと。  (XXXの検索。)
	<li> 一般的な背景; "リリースエンジニア"の存在と責任に言及すること、
		開発は本体で通常通り進むという注意を付け足すことなど。
	<li> リリースの枝の管理についてより多くの詳細:
		変更を引き上げるための手順、変更の承認を得るための手順など。
	<li> リリース後のパッチ。
		(リリース後のパッチということを考慮すれば、src/sys/sys/param.hの中にある
		さまざまな"NetBSD"の定義に再び手を加えることが重要かもしれません。)
	</ul>

<h4><a name="rel_week0">4.4.2 第0週: リリースサイクルの始まり</a></h4>

	<ul>
	<li> リリースサイクル中のいろいろなイベントのために、日程を設定するはずです。
	<li> アップデートされたリリースサイクルのカレンダーがNetBSD開発者
		(<i>developers@NetBSD.org</i>) とミラーメンテナー (<i>XXX DETAILS</i>) へ
		注意として送られるはずです。
	</ul>

<h4><a name="rel_week1">4.4.3 第1週: スナップショットの正当性チェック</a></h4>

	<ul>
	<li> ポートメンテナーはリリースを作成するマシンが機能しているか確認するため、
		フルリリースを構築しようとするはずです。
	</ul>

<h4><a name="rel_week2">4.4.4 第2週: リリースの枝の作成と機能の凍結</a></h4>

	<ul>
	<li> src/gnu/usr.bin/groff/tmac 以下の
		<b>doc-operating-system</b> を、
		リリースしようとしているバージョンにアップデートします。
		適切な <b>doc-operating-system-NetBSD-X.Y</b>
		行がまだない場合は、追加します (疑問があれば
		<i>wiz@NetBSD.org</i> まで連絡してください)。
	<li> 以下のようなコマンドで、リリースの枝の基本になるタグがつけられます:
		<pre>cvs rtag -a netbsd-<var>バージョン</var>-base src</pre>

	<li> 以下のようなコマンドで、リリースの枝が作られます:
		<pre>cvs rtag -a -b -rnetbsd-<var>バージョン</var>-base netbsd-<var>バージョン</var> src</pre>

	<li> メインの枝では、以下のことをします:
		<ul>
		<li> 最終リリースが予想される直後の日付になるように、
			src/sys/sys/param.hの中の<b>NetBSD</b>定数をアップデートします。
		<li> 適当なメジャーとマイナーのバージョン番号を使用するように
			<b>NetBSD<var>バージョン</var></b>をアップデートし、
			(リリース後にNetBSD-currentを示すように) "2"と定義します。
		<li> (リリース後にNetBSD-currentを示すように) "A"という接尾詞で
			適当なリリースを示すため、src/sys/conf/newvers.shにある
			<b>osr</b>をアップデートします。
		<li> send-prをアップデートします。 (XXX HOW?)
		</ul>

	<li> リリースの枝では、以下のことをします:
		<ul>
		<li> "アルファ" 配布が予想される日付になるように
		src/sys/sys/param.hにある<b>NetBSD</b>定数をアップデートします。
		<li>  適当なメジャーとマイナーのバージョン番号を使用するように、
			<b>NetBSD<var>バージョン</var></b>をアップデートし、
			(リリース後にNetBSD-currentを示すように) "1"と定義します。
		<li> "_ALPHA"という接尾詞で適当なリリースを示すように
			src/sys/conf/newvers.shにある<b>osr</b>をアップデートします。
		<li> send-prをアップデートします。 (XXX HOW?)
		</ul>

	<li> リリースの枝を配布するように、<i>ftp.NetBSD.org</i>と<i>sup.NetBSD.org</i>上の
		FTP/SUPサービスを変更します。

	<li> リリース作業が進行中であることを世界にアナウンスします。
		FTPとSUPサービスで、リリース作業中、リリースの枝を配布していることを記します。

	<li> リリースの枝が作成されたことを開発者に知らせます。
		枝へアクセスする手順や、リリースエンジニアの許可なく枝に新しい機能を加える
		べきではないという注意を含みます。

	<li> リリース web ページをアップデートし、
		スケジュールの予定日と実績を記します。

	<li> 新しいリリース用のSUPコレクションを作成します。 (XXX DETAILS?)

	<li> ミラーメンテナーがベータ配布物が現れるまでにSUPを始められるよう、
		新しいSUPコレクションについて知らせます。
	</ul> 

<h4><a name="rel_week3">4.4.5 第3週: 最初のベータリリース</a></h4>

	<ul>
	<li> ポートメンテナーは<b>NetBSD <var>バージョン</var>_ALPHA</b>とラベルがつけられた
		バイナリーのスナップショットを作成し、配布するはずです。
	<li> <i>netbsd-announce@NetBSD.org</i>メーリングリストや
		<i>comp.unix.bsd.netbsd.announce</i>ニュースグループを通して
		世界にアルファリリースをアナウンスします。 (???)
	</ul>

<h4><a name="rel_week4">4.4.6 第4週: 致命的でないバグの修正を凍結</a></h4>

	週の始め:

	<ul>
	<li> 致命的なバグの修正以外にはリリースエンジニアの許可なく、いかなる変更も
		リリースの枝にチェックインすべきではないことを開発者に知らせます。
	</ul>

	週の半ば:
	<ul>
	<li> "ベータ"リリースに対して適当な値を使用する他に、
		<a href="#rel_week2">第2週</a>で詳しく書かれている通り、
		src/sys/sys/param.hの<b>NetBSD</b>とsrc/sys/conf/newvers.shの<b>osr</b>、
		send-prをアップデートします。
	<li> 以下のようなコマンドでソースに"beta"タグを付けます:
	    <pre>cvs rtag -a -rnetbsd-<var>バージョン</var> netbsd-<var>バージョン</var>-BETA src</pre>
	<li> ポートメンテナーにベータリリースを作り始めるよう指示します。
	</ul>
	
<h4><a name="rel_week5">4.4.7 第5週: 二つ目のベータリリース</a></h4>

	<ul>
	<li> <b>NetBSD <var>バージョン</var>_BETA</b>としてベータバイナリーをリリースします。
	<li> <i>netbsd-announce@NetBSD.org</i>メーリングリストや
		<i>comp.unix.bsd.netbsd.announce</i>ニュースグループを通して
		世界にベータリリースをアナウンスします。
	</ul>

<h4><a name="rel_week6">4.4.8 第6週: コードの凍結</a></h4>

	週の始め:

	<ul>
	<li> リリースエンジニアの許可なく、いかなる変更もリリースの枝に
	チェックインすべきでないことを開発者に知らせます。
	</ul>

	週の半ば:

	<ul>
	<li> "最終" リリースに対して適当な値を使用する他に、
		<a href="#rel_week2">第2週</a>で詳しく書かれている通り、
		src/sys/sys/param.hの<b>NetBSD</b>とsrc/sys/conf/newvers.shの<b>osr</b>、
		send-prをアップデートします。
	</ul>

<h4><a name="rel_week7">4.4.9 第7週: 最終のソースへタグ付け</a></h4>

	週の半ば:

	<ul>
	<li> 以下のようなコマンドでソースに"final"タグを付けます:
	    <pre>cvs rtag -a -rnetbsd-<var>バージョン</var> netbsd-<var>バージョン</var>-RELEASE src</pre>
	<li> ポートメンテナーに最終リリースを作成しはじめるよう指示します。
	</ul>

<h4><a name="rel_week8">4.4.10 第8週: リリース</a></h4>

	<ul>
	<li> <b>NetBSD <var>バージョン</var></b>として最終バイナリーがリリースされます。
	<li> サイトをアップデートできるよう、SUPやFTPミラーのメンテナーに知らせます。
	<li> bsd-family-tree をアップデートします。
	</ul>

	二日後:

	<ul>
	<li> <i>netbsd-announce@NetBSD.org</i>メーリングリストや
		<i>comp.unix.bsd.netbsd.announce</i>ニュースグループを通して
		世界にリリースをアナウンスします。
	</ul>
<p>

<hr> 

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../"><img
        src="../../../images/NetBSD-flag.png" origlink="../../images/NetBSD-flag.png" border="0"  
        width="90" height="90" alt=""></a>
  </td><td>
    <a href="../../"><img
        src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../developers/"><img
        src="../../../images/NetBSD-flag.png" origlink="../../images/NetBSD-flag.png" border="0"  
        width="90" height="90" alt=""></a>
  </td><td>
    <a href="../../developers/"><img
        src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"  
        width="1" height="1" alt="NetBSD ">開発者ドキュメンテーション</a>      
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@jp.NetBSD.org">日本語:
       www@jp.NetBSD.org</a>)<br>
  $NetBSD: release-process.html,v 1.14 2004/10/30 22:34:20 jschauma Exp $<br>
  <!-- Based on english version: -->
  <!-- NetBSD: release-process.html,v 1.14 2004/10/30 22:34:20 jschauma Exp   -->
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
