<html>
<head>
<!-- Copyright (c) 1996, 1997, 1998, 1999, 2000
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>htdocsを編集する</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<table>
<tr><td width=150><img src="../images/NetBSD-banner.gif" alt="NetBSD"></td>
<td valign=bottom><h2>htdocsを編集する</h2></td></tr>
</table>

<p>
このドキュメントは (NetBSDウェブサーバー用のCVSレポジトリーである) htdocsを編集したいと考えている人が参照できるように作られています。
</p>

<LIST>

<SECTION>htdocsに関する一般事項

<ENTRY>who-can-edit だれがhtdocsを編集できるのか
    NetBSD CVSツリーに書き込み権限を持つ人であれば、
    だれでもチェックアウトや変更ができます。
    事実、そうして欲しいのです。
    特に開発者が機能やドライバーを追加する時には、
    該当するハードウェアやポートのホームページを更新すべきです。
    cvs.netbsd.orgにはnetbsd.orgのログイン名を利用してログインし、
    htdocsをチェックアウトしてください。

<ENTRY>what-is-required htdocsを編集するには何が必要か
    <ul>
    <li><a href="cvs-repos/cvs_intro.html">CVSの導入</a>を読んでください。
    <li><PKGSRC>security/ssh, <PKGSRC>devel/cvs, できれば
	<PKGSRC>lang/perl5 (.list ファイルなどのファイルのため) を
	インストールしてください。
    <li>CVSROOTを指定通りに設定し、'<tt><b>cvs get htdocs</b></tt>してください
	(ツリーの一部をチェックアウトすることも可能ですが、
	ツリー全体をチェックアウトするにはこちらの方が簡単です)。
    <li>目的のファイルを編集して、.htmlファイルを作り直す場合は
	<tt><b>make</b></tt>とタイプして、更新する.htmlファイルに
	<PKGSRC>www/weblint
	を実行し、最後に
	<tt><b>cvs commit</b></tt>してください。
    </ul>

<ENTRY>validate-html HTMLを有効にする
    変更した後には、
    <PKGSRC>www/weblint
    や、それよりも良いのは
    <a href="http://validator.w3.org/">http://validator.w3.org/</a>
    のようなHTMLチェッカーで一通りチェックすべきです。
    index.htmlへのリンクをはるURLは、最後のindex.htmlを
    省くべきです。
    weblintをお使いでしたら、<tt>~/.weblintrc</tt>に以下の記述を
    追加するとよいでしょう。
    <pre>	extension Netscape</pre>

<ENTRY>dotlist-files .listファイルとは何者で、どうやって使うのか？
    <tt>.list</tt>ファイルには標準的なHTMLのほかに、簡単に同じ形の文書を
    生成できる特別なタグが書かれています。
    <tt><a href="../list2html.pl">list2html.pl</a></tt>で目的の
    .htmlファイルを生成します。
    <p>
    各ディレクトリーにMakefileがあるはずです。これを使って.listファイルから
    .html ファイルへの変換処理を行います。
    また、Makefileを含むサブディレクトリーにも再帰的に実行します。
    <p>
    改行までの一行で解釈されます (特別なタグには便利です) 。
    <p>
    CVSにアクセスできないけれども、<tt>.list</tt>ファイルを変更して
    サブミットしたいときは、通常以下のような手順を踏むのが一番です:
    <ol>
	<li><tt><a href="../list2html.pl">list2html.pl</a></tt>をダウンロードします。
	<li><a href="http://www.netbsd.org/">www.netbsd.org</a>から
	    適当な<tt>.list</tt>ファイルをダウンロードします。
	    一致する.htmlファイルの場所に行き、URL中の.htmlを.listに
	    置き換えるとダウンロードできます。
	    注意すべき点は、FAQでないほとんどのドキュメントには.listファイルが
	    ないということです。確信が持てない場合は、
	    ソースの先頭を見ると、.list ファイルなどのファイルから自動的に
	    .html ファイルを生成していることを示す一文が見つかるはずです。
	<li><em>ファイル</em>.list を<em>ファイル</em>.list.orig にコピーします。
	<li><em>ファイル</em>.listを編集します。
	<li>'./list2html.pl <em>ファイル</em>.list <em>ファイル</em>.html
	を実行します。
	<li>HTMLを<a href="#validate-html">チェック</a>します。
	    (必要に応じてこの4〜6を繰り返して下さい) 。
	<li>diff(1)を使って差分をサブミットします。<br>
	    <tt>'<b>diff -u <em>ファイル</em>.list.orig
	    <em>ファイル</em>.list</b>'</tt>
    </ol>
    <p>
    コミットする前にmakeを実行すべきです。また
    <PKGSRC>lang/perl5
    がインストールされている必要があります。

<p>
<table>
<tr><th colspan=2>必須のタグ</th></tr>
<TROW>&lt;LIST&gt;:             生成するリストの項目を書き込みます。
<TROW>&lt;SECTION&gt;テキスト:      DATEやENTRYの前に置き、新しい章を導入します。
<TROW>&lt;/LIST&gt;:            この特殊な項目の終わりを示すタグ。
<tr><th colspan=2>オプションのタグ</th></tr>
<TROW>&lt;DATE&gt;タグ 日付 テキスト: 項目を変えます。タイトルに展開され、一覧に追加されます。
<TROW>&lt;ENTRY&gt;タグ テキスト: テキストは項目のタイトルに展開され、一覧に追加されます。
<TROW>&lt;ENTRYLINK&gt;url テキスト: リンクが一覧に追加され、メインのテキストからは削除されます。
<TROW>&lt;HEADING&gt;テキスト: ドキュメントの先頭にある標準的なヘッダ。
<TROW>&lt;TROW&gt;テキスト: テキスト:   二つのテキストフィールドがあるテーブルの列。 - <b>注意: &lt;TROW&gt; は&lt;/table&gt;がある行まで自動的に続きます。</b>
<TROW>&lt;HOMELINK&gt;: ドキュメントの最後にある、ホームページへのリンクがはられている標準的な旗。
<TROW>&lt;DOCLINK&gt;: ドキュメントの最後にある、ホームページとドキュメントの先頭へのリンクがはられている標準的な旗。
<TROW>&lt;DEVLINK&gt;: ドキュメントの最後にある、ホームページと開発者ドキュメントの先頭へのリンクがはられている標準的な旗。
</table>
<p>
追加のパターンマッチング:<br>
<table>
<tr><th align=left>man ページ</th>
    <td>([a-zA-Z_][-\w.+]*[\w+])\((\d)\)</td><td>例: ls(1)</td></tr>
<tr><th align=left>email アドレス</th>
    <td>&lt;([-\w.]+@[-\w.]+)&gt;</td><td>例: <abs@netbsd.org></td></tr>
<tr><th align=left>packagesrc リファレンス</th>
    <td>&lt;PKGSRC&gt;((\w+/|)([^\s&lt;&gt;]+\w))</td>
    <td>例: <PKGSRC>editors/vilearn</td></tr>
<tr><th align=left>-current ソースファイルやディレクトリ</th>
    <td>&lt;CURRENTSRC&gt;(パス)</td>
    <td>例: <CURRENTSRC>Makefile</td></tr>
<tr><th align=left>文字通りURL</th>
    <td>&lt;URL&gt;(url)</td>
    <td>例: <URL>http://www.netbsd.org/</td></tr>
</table>

<ENTRY>flaglinks 旗がempty.gifへリンクをはるのには、何か理由があるのか？
    各ページの最後にあるNetBSDの'旗' リンクには以下のものがあります:
    <ul>
    <li>altタグがないnetbsd-bannerを含むhref
    <li>"NetBSD" と書いたaltタグと"ホームページ" という単語を付けたempty.gifを
        含むhref
    </ul>
    このような効果があります:
    <ul>
    <li>lynxでは、たとえばNetBSDリンクとホームページリンクと二つに
        分けるのではなく、"NetBSD ホームページ" リンクという具合に
        一つのリンクにします。
    <li>netscapeでは、追加のテキストをセンタリングし、"見栄えよく" 配置します。
        これがないと、少なくともnetscapeでは、縦方向にはセンタリングされず、
        下に表示され、画像が隣り合せになります (あるいは、スペースをいれれば、
        私にはおかしく見える醜い下線つきの空白が入ります) 。
    </ul>
    ひどいやり方ではありますが、きちんと表示してくれます。

<SECTION>特定のエリアへ追加する

<ENTRY>adding-gallery-entries 'NetBSDを稼働させているサイト' のギャラリーを追加する
<a href="../gallery/addsite.html">htdocs/gallery/addsite.html</a>ページから
<tt>NETBSD GALLERY ADDITION</tt> emailを入手するならば、こうします:
<ol>
<li>perlがインストールされているか確認します
<li><tt><em>ファイル</em></tt>にメッセージを保存します
<li><tt>cd htdocs/gallery</tt>します
<li><tt>./addsite.pl &lt <em>ファイル</em></tt>を実行して、
OKならば'<tt>y</tt>'と答えます
<li><tt>cvs commit</tt>します
</ol>
手で<tt>htdocs/gallery/sites.data</tt>を編集し、
<tt>make</tt>を実行する方法もあります。

<ENTRY>adding-news-items ニュースの項目を追加する
ほとんどのニュース項目は<a href="../Changes/">htdocs/Changes/</a>にあります
(<a href="#dotlist-files">.list ファイル</a>に関する記述をごらんください) 。
重要な変更にはメインの<a href="../">htdocs/</a>からリンクがはられ、
特定のポートに影響する変更はhtdocs/Port/*/にあるニュースの章から
リンクがはられます。
<p>
重要なコードのニュース項目は
<CURRENTSRC>doc/CHANGES
ファイルに記述されるはずです。

<p>
<h4>htdocsに変更を加える前に:</h4>
<ol>
<li><a href="#dotlist-files">.list ファイル</a>用にperlが
インストールされていることを確認します。
<li>CVSレポジトリーから<tt>htdocs</tt>をチェックアウトします。
</ol>

<p>
<h4>変更項目を付け加えるには:</h4>
<ol>
<li>htdocs/Changes/index.listを編集し、&lt;DATE&gt;で始まる最初の行を
    探します。
<li>以下の形式で新しい行を追加します<br>
    <tt>&lt;DATE&gt;<em>タグ</em> <em>日付</em> - <em>タイトル</em></tt><br>
    それぞれの項目は以下のように書きます
    <ul>
    <li><em>タグ</em> - 小文字/数字/ハイフンを識別します。例: 'new-xx-driver'
    <li><em>日付</em> - DAY MONTH YEARの形式です。例: '23 Jan 1999'
    <li><em>タイトル</em> - エントリータイトル用の自由形式のテキストです - 
        行末をエスケープするのに\を使えます。
    </ul>
<li>項目の本体を追加します。マニュアルページ (例: ls(1)) とemailアドレス
    (例: <user@domani>) は自動的に展開されます。
    自由にHTMLタグを使えますが、必須ではありません。
<li>'<tt>make</tt>' を実行します。
</ol>

<p>
<h4>メインページからのリンクを追加するには:</h4>
<ol>
<li><a href="../">htdocs/</a>を編集して、以下の書式の項目を含んだ
    'Breaking news' ブロックを見つけます
<pre>    &lt;li&gt;&lt;i&gt;&lt;a href="Changes/#<em>タグ</em>"&gt;
	<em>タイトル</em>&lt;/a&gt;&lt;/i&gt;&lt;/li&gt;</pre>
<li>ブロックの先頭まであと2行というところに移動して、新しい項目にあう
    <em>タグ</em>と<em>タイトル</em>を付け足します (<em>タイトル</em>は省略できます) 。
</ol>

<p>
<h4>portの特定ページからリンクをはるには:</h4>
<ol>
<li>htdocs/Ports/<em>arch</em>を編集して、'&lt!-- news'ブロックを
    探します。
<li>新しい項目を以下の形式でリストの後ろに追加します:
<pre>&lt;p&gt; &lt;dt&gt;&lt;b&gt;<em>日付</em>:&lt;/b&gt; <em>タイトル</em>
    &lt;dd&gt;<em>テキストの本文</em></pre>
    それぞれの項目は以下のように書きます
    <ul>
    <li><em>日付</em> - 通常通りMONTH DAY YEAR
    <li><em>タイトル</em> - 自由形式の (短い) テキストタイトル
    <li><em>テキストの本文</em> - 項目用の自由形式のテキスト。
        複数行あけたり、HTMLタグやリンクを使ったりすることもできます。
    </ul>
</ol>

<p>
<h4>最後に:</h4>
<ol>
<li>変更したファイルの<a href="#validate-html">HTMLをチェック</a>します。
<li>ファイルをチェックインします - <tt>.list</tt>ファイルを更新して一致する
    <tt>.html</tt>にし忘れないでください。
</ol>

</LIST>

<a href=""><em>開発者メインページ</em>へ</a>
<hr> 

<DEVLINK>

<hr>
<address>
  <a href="../Misc/feedback.html">(連絡先)</a>
  $NetBSD: htdocs.list,v 1.22 2000/02/22 11:12:36 abs Exp $<br>
  <a href="../Misc/disclaimer.html">Copyright &copy;
    1996, 1997, 1998, 1999, 2000
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
</address>

</body>
</html>
