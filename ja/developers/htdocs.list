<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<!-- Copyright (c) 1994-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>htdocsを編集する</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<DEVHEADING>htdocs を編集する

このドキュメントは (NetBSDウェブサーバー用のCVSリポジトリーである) htdocs
を編集したいと考えている人が参照できるように作られています。

<LIST>

<h2>関連ドキュメンテーション</h2>

<ul>
  <li><a href="announce.html">ニュース記事の手引き</a>
  <li><a href="translate.html">htdocs の翻訳</a>
</ul>

<SECTION>htdocsに関する一般事項

<ENTRY>who-can-edit だれがhtdocsを編集できるのか
    NetBSD CVSツリーに書き込み権限を持つ人であれば、
    だれでもチェックアウトや変更ができます。
    事実、そうして欲しいのです。
    特に開発者が機能やドライバーを追加する時には、
    該当するハードウェアやポートのホームページを更新すべきです。
    cvs.netbsd.orgにはnetbsd.orgのログイン名を利用してログインし、
    htdocsをチェックアウトしてください。

<ENTRY>what-is-required htdocsを編集するには何が必要か
    <ul>
    <li><a href="cvs-repos/cvs_intro.html">CVSの導入</a>を読んでください。
    <li><PKGSRC>security/ssh, <PKGSRC>devel/cvs, できれば
	<PKGSRC>lang/perl5 (.list ファイルなどのファイルのため) を
	インストールしてください。
    <li>CVSROOTを指定通りに設定し、'<tt><b>cvs get htdocs</b></tt>してください
	(ツリーの一部をチェックアウトすることも可能ですが、
	ツリー全体をチェックアウトするにはこちらの方が簡単です)。
    <li>目的のファイルを編集して、.htmlファイルを作り直す場合は
	<tt><b>make</b></tt>とタイプして、更新する.htmlファイルに
	<PKGSRC>www/weblint
	を実行し、最後に
	<tt><b>cvs commit</b></tt>してください。
    </ul>

<ENTRY>validate-html HTMLを有効にする
    変更した後には、
    <PKGSRC>www/weblint
    や、それよりも良いのは
    <a href="http://validator.w3.org/">http://validator.w3.org/</a>
    のようなHTMLチェッカーで一通りチェックすべきです。
    index.htmlへのリンクをはるURLは、最後のindex.htmlを
    省くべきです。
    weblintをお使いでしたら、<tt>~/.weblintrc</tt>に以下の記述を
    追加するとよいでしょう。
    <pre>	extension Netscape</pre>

<ENTRY>dotlist-files .listファイルとは何者で、どうやって使うのか？
    <tt>.list</tt>ファイルには標準的なHTMLのほかに、簡単に同じ形の文書を
    生成できる特別なタグが書かれています。
    <tt><a href="../list2html.pl">list2html.pl</a></tt>で目的の
    .htmlファイルを生成します。
    <p>
    各ディレクトリーにMakefileがあるはずです。これを使って.listファイルから
    .html ファイルへの変換処理を行います。
    また、Makefileを含むサブディレクトリーにも再帰的に実行します。
    <p>
    改行までの一行で解釈されます (特別なタグには便利です) 。
    <p>
    CVSにアクセスできないけれども、変更してサブミットしたいときは、
    anonymous CVS ( <a href="cvs-repos/cvs_intro.html">NetBSD CVS
    HOWTO</a>参照) を使って htdocs をチェックアウトすることができます。
    最良の方法は以下のようなものです:
    <ol>
	<li><em>htdocs</em> モジュールをチェックアウトします<br>
	    <tt>'<b>cvs checkout htdocs</b>'</tt>
	<li>必要なファイルを編集します。 FAQ 形式のドキュメントのほとんどは、
	     <tt>.list</tt> ファイルを元に生成されていますので、編集前に
	     確認してください。
	<li>.list 等のファイルを編集した場合は 'make' を実行します。
	<li>HTML の妥当性を<a href="#validate-html">検証します</a>
	    (必要に応じてこの2〜4を繰り返して下さい) 。
	<li><b>cvs diff</b> して、その差分を <www@netbsd.org> に送ってください。例えば、<br>
	    <tt>'<b>cvs diff -u <em>htdocs/path/to/file.list</em></b>'</tt>
    </ol>
    <p>
    コミットする前に <b>make</b> を実行すべきです。また
    <PKGSRC>lang/perl5 がインストールされている必要があります。

<p>

<center>

<table border=0 cellpadding=1 cellspacing=0><tr><td bgcolor="#d8d8d8">

<table border=0 cellpadding=4 cellspacing=0 width="550"><tr>

<td colspan=2 align=right bgcolor="#f5f5f5"><big><b>必須の
タグ&nbsp;</b></big></td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;LIST&gt;:</b></td>
<td>生成するリストの項目を書き込みます。</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;SECTION&gt;テキスト:</b></td>
<td>DATEやENTRYの前に置き、新しい章を導入します</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;/LIST&gt;:</b></td>
<td>この特殊な項目の終わりを示すタグ<br>&nbsp;<br></td>
</tr><tr>

<td colspan=2 align=right bgcolor="#f5f5f5"><big><b>オプションの
タグ&nbsp;</b></big></td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;DATE&gt;タグ&nbsp;日付&nbsp;テキスト:</b></td>
<td>項目を変えます。タイトルに展開され、一覧に追加されます</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;ENTRY&gt;タグ テキスト:</b></td>
<td>テキストは項目のタイトルに展開され、一覧に追加されます</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;LISTLINK&gt;url テキスト:</b></td>
<td>リンクが目次に追加され、メインのテキストからは削除されます</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;ENTRYLINK&gt;url テキスト:</b></td>
<td>リンクが一覧とメインのテキストに追加されます</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;HEADING&gt;テキスト:</b></td>
<td>ドキュメントの先頭にある標準的なヘッダー</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;DEVHEADING&gt;テキスト:</b></td>
<td>開発者ドキュメントの先頭にある標準的なヘッダー</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;TROW&gt;テキスト: テキスト:</b></td>
<td>二つのテキストフィールドがあるテーブルの列 - <b>注意:
&lt;TROW&gt; は&lt;/table&gt; がある行まで自動的に続きます</b></td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;HOMELINK&gt;:</b></td>
<td>ドキュメントの最後にある、ホームページへのリンクがはられている標準的な旗</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;DOCLINK&gt;:</b></td>
<td>ドキュメントの最後にある、ホームページとドキュメントの先頭へのリンクがはられている
標準的な旗</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;DEVLINK&gt;:</b></td>
<td>ドキュメントの最後にある、ホームページと開発者ドキュメントの先頭へのリンクがはられている
標準的な旗</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;PORTLINK&gt;:</b></td>
<td>ドキュメントの最後にある、ホームページと対応アーキテクチャーの先頭へのリンクがはられている
標準的な旗</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>&lt;GALLINK&gt;:</b></td>
<td>ドキュメントの最後にある、ホームページと展示室ページへのリンクがはられている標準的な旗<br>
&nbsp;<br></td>
</tr><tr>

<td colspan=2 align=right bgcolor="#f5f5f5"><big><b>追加の
パターンマッチング;</b></big></td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>man ページ:</b></td>
<td>([a-zA-Z_][-\w.+]*[\w+])\((\d)(|\.(\w+))(|\+(\W+))\)<br>例: ls(1)<p>
<i>注意: 特定のアーキテクチャーやコレクションを指定することもできます</i><br>
例: (8.pmax), (8+1.4.3), (8.pmax+1.4.3)<p>
<i>デフォルトのコレクションは NetBSD-current です。指定可能なコレクションは、
"1.3.3"、 "1.4.3"、 "1.5"、 "1.5.1"、 "current" です。</i></td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>email アドレス:</b></td>
<td>&lt;([-\w.]+@[-\w.]+)&gt;<br>例: <abs@netbsd.org></td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>pkgsrc リファレンス:</b></td>
<td>&lt;PKGSRC&gt;((\w+/|)([^\s&lt;&gt;]+\w))<br>
例: <PKGSRC>editors/vilearn</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>-current ソース:</b></td>
<td>&lt;CURRENTSRC&gt;(パス)<br>例: <CURRENTSRC>Makefile<p>
<em>注意: ファイルまたはディレクトリーに対して有効です</em></td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>文字通り URL:</b></td>
<td>&lt;URL&gt;(url)<br>例: <URL>http://www.netbsd.org/</td>
</tr><tr bgcolor="#ffffff">

<td align=right valign=top><b>RFC:</b></td>
<td>&lt;RFC&gt;([^\s<>]+\w)<br>例: <RFC>RFC2795</td>

</tr></table>

</td></tr></table>

</center>

<ENTRY>moving-files ファイル名を変更またはファイルを移動する

htdocs 以下でファイルの移動や名称変更をする場合は、以下の手順をとることを
推奨します:

<ul>
 <li>ファイルを元の場所から移動後の場所にコピーします</li>
 <li>元のファイルの html を書き換えます:
   <ul>
     <li>ヘッダー内に
         <code>&lt;META HTTP-EQUIV=Refresh CONTENT="5; URL=new-location"&gt;</code>
         というタグを含めます</li>
     <li>ヘッダーとフッター以外の内容をすべて消します</li>
     <li>ページが移動した旨の記述を加え、新しい場所へハイパーリンク
         させておきます</li>
   </ul>
  <li>新しいファイルを cvs add します</li>
  <li>移動の時期や理由を cvs で参照できるようにするために、
      新しいファイルと変更後の古いファイルを、同時に cvs commit します</li>
</ul>

<ENTRY>flaglinks 旗がempty.gifへリンクをはるのには、何か理由があるのか？
    各ページの最後にあるNetBSDの'旗' リンクには以下のものがあります:
    <ul>
    <li>altタグがないnetbsd-bannerを含むhref
    <li>"NetBSD" と書いたaltタグと"ホームページ" という単語を付けたempty.gifを
        含むhref
    </ul>
    このような効果があります:
    <ul>
    <li>lynxでは、たとえばNetBSDリンクとホームページリンクと二つに
        分けるのではなく、"NetBSD ホームページ" リンクという具合に
        一つのリンクにします。
    <li>netscapeでは、追加のテキストをセンタリングし、"見栄えよく" 配置します。
        これがないと、少なくともnetscapeでは、縦方向にはセンタリングされず、
        下に表示され、画像が隣り合せになります (あるいは、スペースをいれれば、
        私にはおかしく見える醜い下線つきの空白が入ります) 。
    </ul>
    ひどいやり方ではありますが、きちんと表示してくれます。

<ENTRY>webserver ページが web サーバーに反映される方法や時間はどうなっているか?
    NetBSD の web ページは CVS の "htdocs" リポジトリーに蓄積されます。
    セキュリティー上の理由から、この htdocs リポジトリーは、毎時間ごとに
    www.netbsd.org に (rsync を使って) コピーされ、
    そのコピーからローカルにチェックアウトされています。
    チェックアウトされたツリーは "<tt>/NetBSD-www</tt>" にあります。
    このリポジトリーの更新とチェックアウトは、毎時 40 分ごろに行われます。
    htdocs をコミットすると、
    それが公開されるまでに最大一時間かかることになります。
    <p>

    ただし、 Gnats データベース (<URL>http://www.netbsd.org/Gnats/) 、
    Changes/changes*.html や Changes/pkg-changes*.html にある pkgsrc
    とソースの変更点、 Changes/rss-*.xml にある RSS ファイルなど、
    一部のファイルについては htdocs には含まれず、 web サーバー上の
    cron ジョブディレクトリーで各種スクリプトを使って生成されています。
    これらのスクリプトへアクセスするには、 "htutils/changes/*"
    をチェックアウトします。
    <p>

<SECTION>特定のエリアへ追加する

<ENTRY>adding-gallery-entries 'NetBSDを稼働させているサイト' のギャラリーを追加する
<a href="../../gallery/addsite.html" origlink="../gallery/addsite.html">htdocs/gallery/addsite.html</a>ページから
<tt>NETBSD GALLERY ADDITION</tt> emailを入手するならば、こうします:
<ol>
<li>perlがインストールされているか確認します
<li>コピー/ペースト用のバッファーにメッセージを保存します
<li><tt>cd htdocs/gallery</tt>します
<li><tt>./addsite.pl</tt> を実行して、バッファーの内容をペーストしてから ^D でペーストを終え、それが正しく扱われていれば '<tt>y</tt>'と答えます
<li><tt>cvs commit</tt>します
</ol>
手で<tt>htdocs/gallery/sites.data</tt>を編集し、
<tt>make</tt>を実行する方法もあります。

<ENTRY>adding-news-items ニュースの項目を追加する
ほとんどのニュース項目は<a href="../Changes/">htdocs/Changes/index.list</a>にあります
(<a href="#dotlist-files">.list ファイル</a>に関する記述をごらんください) 。
特定のポートに影響する変更はhtdocs/Port/*/にあるニュースの章からも
リンクをはってください。
<p>
重要なコードのニュース項目は
<CURRENTSRC>doc/CHANGES
ファイルに記述されるはずです。

<p>
<h4>htdocsに変更を加える前に:</h4>
<ol>
<li><a href="#dotlist-files">.list ファイル</a>用にperlが
インストールされていることを確認します。
<li>CVSリポジトリーから<tt>htdocs</tt>をチェックアウトします。
</ol>

<p>
<h4>変更項目を付け加えるには:</h4>
<ol>
<li>htdocs/Changes/index.listを編集し、&lt;DATE&gt;で始まる最初の行を
    探します。
<li>以下の形式で新しい行を追加します<br>
    <tt>&lt;DATE&gt;<em>タグ</em> <em>日付</em> - <em>タイトル</em></tt><br>
    それぞれの項目は以下のように書きます
    <ul>
    <li><em>タグ</em> - 小文字/数字/ハイフンを識別します。例: 'new-xx-driver'
    <li><em>日付</em> - DAY MONTH YEARの形式です。例: '23 Jan 1999'
    <li><em>タイトル</em> - エントリータイトル用の自由形式のテキストです - 
        行末をエスケープするのに\を使えます。
    </ul>
<li>項目の本体を追加します。マニュアルページ (例: ls(1)) とemailアドレス
    (例: <user@domain>) は自動的に展開されます。
    自由にHTMLタグを使えますが、必須ではありません。
<li>'<tt>make</tt>' を実行します。
</ol>

<p>
<h4>メインページからのリンクを追加するには:</h4>
htdocs/Changes で <tt>make</tt> を実行すると、
<a href="../">htdocs/index.html</a> と翻訳されている各言語の index
ページが自動的に更新されます。それ以上なにかする必要はありません。
<p>
こうするかわりに、 htdocs 最上層のディレクトリーで <tt>make index</tt>
を実行するという方法も使えます。
<p>
<h4>特定のポートのページからリンクをはるには:</h4>
<ol>
<li>htdocs/Ports/<em>arch</em>/index.html を編集して、 '&lt;!-- news --&gt;'
    ブロックを探します。
<li>新しい項目を以下の形式でリストの後ろに追加します:
<pre>&lt;dt&gt;&lt;b&gt;<em>日付</em>:&lt;/b&gt; <em>タイトル</em>
    &lt;dd&gt;<em>記事の本文</em>
    &lt;p&gt;</pre>
    それぞれの項目は以下のように書きます
    <ul>
    <li><em>日付</em> - 通常通り YEAR.MONTH.DATE
    <li><em>タイトル</em> - 自由形式の (短い) テキストタイトル
    <li><em>記事の本文</em> - 項目用の自由形式のテキスト。
        複数行あけたり、HTMLタグやリンクを使ったりすることもできます。
    </ul>
</ol>

<p>
<h4>最後に:</h4>
<ol>
<li>変更したファイルの<a href="#validate-html">HTMLをチェック</a>します。
<li>ファイルをチェックインします - <tt>.list</tt> ファイルを更新して一致する
    <tt>.html</tt> にし忘れないでください。 htdocs 最上層のディレクトリーで
	'make commit' コマンドを実行すると、メインの index ページ、
	Changes/index.* と翻訳されている各言語の index ページが、
	デフォルトメッセージ "NEWS; regen" でコミットされます。
	何かメッセージを追加したければ 'MSG="Added News regarding FooBar" make
	commit' のようにします。</li>
</ol>

<ENTRY>adding-events イベントを追加する

メインの index ページには "Upcoming Events" (これからのイベント) というリンクもあります。
このリンクは <a href="#adding-news-items">News entries</a> 同様に自動的に更新されます:

<ul>
	<li>cd .../htdocs/gallery</li>
	<li>$EDITOR events.list</li>
	<li>make events</li>
</ul>

このイベントのリンクは翻訳された各言語の index ページにもありますので、
翻訳ページもすべて生成してコミットする必要があります。これは、
htdocs ディレクトリーで 'make index' コマンドを使って行なうことができます。

<ul>
	<li>cd .../htdocs</li>
	<li>make index</li>
	<li>MSG="Added Event Foo" make commit</li>
</ul>

<ENTRY>adding-mailinglists メーリングリストのページへの追加や編集をする
<a href="../MailingLists">メーリングリスト</a>
ページに載っていないメーリングリストがある場合の手順:
<ol>
<li>htdocs/MailingLists/index.m4 ファイルを編集します。
<li>htdocs/MailingLists にある makefile を実行します。これで index.html が作られます。
<li>html ファイルがうまく作られているか確認します。
<li>index.m4 と index.html ファイルをコミットします。
</ol>

<ENTRY>consultants 雇用コンサルタント

「雇用コンサルタント」ページ (<a
href="../../gallery/consultants.html" origlink="../gallery/consultants.html">gallery/consultants.html</a>) に項目を追加する場合は、
あらかじめ、相手方の web サイトに私たちのホームページに戻るためのリンクを用意することや、
そのサイトで NetBSD に触れることを、関係者に頼んでおいてください。
もちろん、相手方の URL が生きていてアクセス可能であることも確認する必要があります。

</LIST>

<DEVLINK>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.netbsd.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@JP.NetBSD.ORG">日本語:
       www@JP.NetBSD.ORG</a>)<br>
  $NetBSD: htdocs.list,v 1.12 2003/03/08 19:45:43 grant Exp $<br>
  <a href="../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
