<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<!-- Copyright (c) 1994-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@NetBSD.ORG">
<title>NetBSD/sun3 Frequently Asked Questions</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD/sun3 Frequently Asked Questions</h1>

<LIST>

<h2>Other sources of information</h2>

<ul>
<li><a href="http://www.sunhelp.com/">SunHELP</a> - much sun related information
<li><a href="http://www.mso.anu.edu.au/~kim/faq/hardfaq.html">Sun
    Hardware Reference FAQ</a> - overview of Sun hardware over the years
<li><a href="http://www.squirrel.com/squirrel/sun-nvram-hostid.faq.html">Sun
    NVRAM/Hostid FAQ</a> - if your machine PROM's battery has gone dead
<li><a href="http://www.pimpworks.org/sun/cdrom.html">Sun CD-ROM FAQ</a> - 
    lists which CD-ROM drives can boot a Sun
<p>

<li><a href="ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-1.5.2/sun3/INSTALL.html">
    NetBSD 1.5.2 install notes</a> - supported hardware and how to install.
<li><a href="../../MailingLists/#port-sun3"> port-sun3 mail list</a>
    - if you have any additional questions please subscribe.
<li><a href="../../Documentation/network/netboot">Diskless
    NetBSD HOW-TO</a>.
<li>The <a href="http://www.sun3arc.org/">Sun3 Archive</a>
    has lots of information about Sun3 hardware, PROM images, etc.
<li><a href="http://www.obsolyte.com/sun3/">Techrat's Sun 3/160
    pages</a> contains information on Techrat's 3/160, hardware
    information, lots of pictures of old Sun hardware, and links to
    various FAQs and things.
<p>

<li><a href="../../Documentation/">General NetBSD Documentation</a>
    - for questions not specific to NetBSD/sun3.
</ul>

<SECTION>General Questions

<ENTRY>le0-not-multicast-capable No multicast or IPv6 - \
	"<tt>le0: not multicast capable</tt>"
The LANCE revsision C chips used in some sun3s (not the sun3x) have
a bug which sometimes results in garbage inserted where the first
bits should be, with the correct bits shifted later.  So instead
of the destination MAC address at the beginning, you get something
random looking.
<p>

The work-around is to examine the beginning of the packet and
throw away anything that's not for us (my MAC or broadcast).
Unfortunately this prevents the use of multicast.
<p>

The LANCE Rev. C chip was probably only used in the 3/50, so on
other sun3 machines you should be able to <a
href="../../Documentation/kernel/#how_to_build_a_kernel">build
a kernel</a> without the line:  <pre>options LANCE_REVC_BUG</pre>

<ENTRY>3-80-esp-endless-reset Running diskless 3/80 with ESP driver - \
	<tt>"esp: SCSI bus reset."</tt>
This message is a symptom of a bug in the esp driver on diskless systems.
The ESP (Emulex SCSI Processor) driver in NetBSD/sun3x has a bug that causes
it to enter an endless loop when it probes an empty SCSI bus.
To work around this problem, use a kernel which does not have the esp device
driver, or plug in at least one powered SCSI device into the bus.
(Sorry, we don't have a pre-compiled esp-less kernel for you yet!)

<ENTRY>sunos_compat SunOS 4.1 Compatibility
NetBSD/Sun3 features extensive binary compatibility with
SunOS 4.1.x programs.  Static SunOS executables will run without any
extra setup.
<p>

To run dynamic executables, you'll need to provide the
dynamic libraries that came with your SunOS installation.
SunOS programs that will <i>not</i> work include those that use the
SunOS kvm library, certain (low-level) disk manipulation utilities,
and programs making explicit use of Sun's STREAMS subsystem.
Check the compat_sunos(8) manual page for more details.

<ENTRY>boot-devices Booting SCSI devices at different targets
All sun3 and sun3x monitors support booting from SCSI devices.  
Most users will be familiar with booting from the monitor device
<tt>sd(0,0,0)</tt>, which they know means booting the SCSI disk
at target zero.  However, determining the monitor device name for 
booting an arbitrary SCSI device can be confusing.
<p>

A monitor boot device takes the form
<i>dev</i><tt>(</tt><i>cntrl</i><tt>,</tt><i>unit</i><tt>,</tt><i>part</i><tt>)</tt>.
<i>dev</i> is two letters, and <i>cntrl</i>, <i>unit</i>, and 
<i>part</i> are hexadecimal numbers.
<p>

For SCSI disks and CD-ROMs, <i>dev</i> is <tt>sd</tt>.  For SCSI tapes,
<i>dev</i> is <tt>st</tt>.
<p>

For all SCSI devices, <i>cntrl</i> is the number of the SCSI controller
the device is attached to.  For a machine with a single SCSI controller,
<i>cntrl</i> is <tt>0</tt>.
<p>

For all SCSI devices, <i>unit</i> identifies the SCSI target and logical unit
number of the device.  Exactly how the SCSI target and logical unit number
are combined into the single number <i>unit</i> depends on your machine
type and ROM revision, and whether or not the device is a disk, CD-ROM, or
tape.  Use the tables below to figure out how <i>unit</i> works on your machine.
<p>

For SCSI disks and CD-ROMs, <i>part</i> selects the partition to boot on
that disk or CD-ROM.  The first partition is <tt>0</tt>, the second 
partition is <tt>1</tt>, etc.  Normally, <i>part</i> is <tt>0</tt>, since
the first partition on a disk is usually the bootable one.  Common 
exceptions are booting a miniroot that has been written to the swap 
partition, in which case <i>part</i> is <tt>1</tt>, or booting 
a CD-ROM that contains different bootable partitions for different 
architectures, in which case you have to know which partition boots your 
architecture.
<p>

For SCSI tapes, <i>part</i> selects the tape segment (also called "tape file")
to boot.  The first tape segment is <tt>0</tt>, the second tape segment
is <tt>1</tt>, etc.  You will need to know which tape segment is bootable
for your architecture in order to give the right <i>part</i>.
<p>

Finally, these are the tables that demonstrate how <i>unit</i> works
on various machines.  They list <tt>sd</tt> monitor devices for disks
and CD-ROMs, and <tt>st</tt> monitor devices for tapes, all at different
SCSI targets.  These tables assume that you want the first SCSI 
controller <tt>0</tt>, and the first partition or first tape segment 
<tt>0</tt>.  Also, because many Sun 3 models use the same CPU board,  
to keep these tables simple Sun's CPU board code names are used wherever
possible.
<p>

<table border="1" cellpadding="2" cellspacing="1">
<tr><td>Model</td><td>CPU</td><td>Model</td><td>CPU</td></tr>
<tr>
<td>3/75</td><td><i>Carrera</i></td>
<td>3/140</td><td><i>Carrera</i></td>
</tr><tr>
<td>3/150</td><td><i>Carrera</i></td>
<td>3/160</td><td><i>Carrera</i></td>
</tr><tr>
<td>3/180</td><td><i>Carrera</i></td>
<td>&nbsp;</td><td>&nbsp;</td>
</tr>
</table>
<p>

<table border="1" cellpadding="2" cellspacing="1">
<tr>
  <td rowspan="2">CPU/rev ROM</td>
  <td colspan="8" align="center">Monitor device to boot the disk or CD-ROM at target</td>
</tr>
<tr>
  <td align="center">0</td>
  <td align="center">1</td>
  <td align="center">2</td>
  <td align="center">3</td>
  <td align="center">4</td>
  <td align="center">5</td>
  <td align="center">6</td>
  <td align="center">7</td>
</tr>
<tr>
  <td>3/60 rev 1.9<br>
      <i>Carrera</i> rev 2.7</td>
  <td><tt>sd(0,0,0)</tt></td>
  <td><tt>sd(0,4,0)</tt></td>
  <td><tt>sd(0,8,0)</tt></td>
  <td><tt>sd(0,C,0)</tt></td>
  <td><tt>sd(0,10,0)</tt></td>
  <td><tt>sd(0,14,0)</tt></td>
  <td><tt>sd(0,18,0)</tt></td>
  <td>N/A</td>
</tr>
<tr>
  <td>3/80 rev 2.9.2</td>
  <td><tt>sd(0,0,0)</tt></td>
  <td><tt>sd(0,8,0)</tt></td>
  <td><tt>sd(0,10,0)</tt></td>
  <td><tt>sd(0,18,0)</tt></td>
  <td><tt>sd(0,20,0)</tt></td>
  <td><tt>sd(0,28,0)</tt></td>
  <td><tt>sd(0,30,0)</tt></td>
  <td>N/A</td>
</tr>
</table>
<p>

<table border="1" cellpadding="2" cellspacing="1">
<tr>
  <td rowspan="2">CPU/rev ROM</td>
  <td colspan="8" align="center">Monitor device to boot the tape at target</td>
</tr>
<tr>
  <td align="center">0</td>
  <td align="center">1</td>
  <td align="center">2</td>
  <td align="center">3</td>
  <td align="center">4</td>
  <td align="center">5</td>
  <td align="center">6</td>
  <td align="center">7</td>
</tr>
<tr>
  <td>3/60 rev 1.9</td>
  <td>???</td>
  <td><tt>st(0,8,0)</tt></td>
  <td><tt>st(0,10,0)</tt></td>
  <td><tt>st(0,18,0)</tt></td>
  <td><tt>st(0,0,0)</tt></td>
  <td><tt>st(0,28,0)</tt></td>
  <td><tt>st(0,30,0)</tt></td>
  <td>N/A</td>
</tr>
<tr>
  <td>3/80 rev 2.9.2</td>
  <td>???</td>
  <td><tt>st(0,8,0)</tt></td>
  <td><tt>st(0,10,0)</tt></td>
  <td><tt>st(0,18,0)</tt></td>
  <td><tt>st(0,0,0)</tt></td>
  <td><tt>st(0,28,0)</tt></td>
  <td><tt>st(0,30,0)</tt></td>
  <td>N/A</td>
</tr>
</table>
<p>

The above tables also assume that you want SCSI logical unit number zero.
The SCSI specification allows one SCSI target to contain different logical
units (also called LUNs).  Virtually no SCSI devices make use of this
feature, and have only a single LUN, zero.  However, if you know you have
a disk at a LUN other than zero (early Sun SCSI disk setups do), you can
add the LUN number to the <i>unit</i> value, noting that <i>unit</i> is
a hexadecimal number.

<ENTRY>sun3x-history History of NetBSD/sun3x
The sun3x port of NetBSD was initiated by two independent groups of
developers.  The first group, headed by Gordon Ross and Jeremy Cooper,
began work in March of 1996 with the (then) current sun3 port and the
intent to create a new pmap system that was not based on the hp300 m68k
code.  Their work is the officially supported version of NetBSD/sun3x.
<p>

The second group, headed by Tsubai Masanari, also began with the sun3
distribution but instead choose to use the traditional hp300 m68k pmap.
This approach allowed them to get a fully running system in a matter
of weeks.  They were the first to successfully integrate the SPARC
Enhanced SCSI Processor driver into the kernel, proving that the Sun3x
was indeed half SPARC, half Sun3.
<p>

Although the currently supported NetBSD/sun3x is based on Gordon and
Jeremy's work, they are indebted to the second group for their innovation.
<p>

Between NetBSD 1.3 and 1.4 NetBSD/sun3x was merged into NetBSD/sun3.
They build separate kernels, but share the same userland, and kernel
build tree.

</LIST>

<a href="./">Up to <em>NetBSD/sun3 Port Page</em></a>
<hr>

<DOCLINK>

<hr>
<address>
  <small>
  <a href="http://www.netbsd.org/cgi-bin/feedback.cgi">(Contact us)</a>
  $NetBSD: faq.list,v 1.29 2003/03/08 19:42:12 grant Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
