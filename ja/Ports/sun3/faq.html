<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'faq.list' AND RUN 'make' -->

<!-- Copyright (c) 1994-2001
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>NetBSD/sun3 Frequently Asked Questions</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD/sun3 よくある質問</h1>

<h2><a name="top">全般的な質問</a></h2>
<ul>
<li>
<a href="#le0-not-multicast-capable">マルチキャストや IPv6 が使えない - 	"<tt>le0: not multicast capable</tt>"</a></li>
<li>
<a href="#3-80-esp-endless-reset">ESP ドライバーを使った 3/80 をディスクレスで動かす - 	<tt>"esp: SCSI bus reset."</tt></a></li>
<li>
<a href="#sunos_compat">SunOS 4.1 互換機能</a></li>
<li>
<a href="#boot-devices">異なるターゲットの SCSI デバイスからブートする</a></li>
<li>
<a href="#sun3x-history">NetBSD/sun3x の歴史</a></li>
</ul>


<h2>他の情報源</h2>

<ul>
<li><a href="http://www.sunhelp.com/">SunHELP</a> - sun 関連の膨大な情報
<li><a href="http://www.mso.anu.edu.au/~kim/faq/hardfaq.html">Sun
    Hardware Reference FAQ</a> - 数年にわたる Sun のハードウェアの概観
<li><a href="http://www.squirrel.com/squirrel/sun-nvram-hostid.faq.html">Sun
    NVRAM/Hostid FAQ</a> - あなたのマシンの PROM のバッテリーがきれた時に
<li><a href="http://www.pimpworks.org/sun/cdrom.html">Sun CD-ROM FAQ</a> - 
    Sun をブート可能な CD-ROM ドライブの一覧
<p>

<li><a href="ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-1.5.2/sun3/INSTALL.html">
    NetBSD 1.5.2 インストールノート</a> - 対応ハードウェアとインストール方法。
<li><a href="../../MailingLists/#port-sun3"> port-sun3 メーリングリスト</a>
    - もし、何か質問があれば、ぜひ講読してください。
<li><a href="../../Documentation/network/netboot">Diskless
    NetBSD HOW-TO</a>.
<li><a href="http://www.sun3arc.org/">Sun3 Archive</a>
    には、 Sun3 ハードウェア、 PROM イメージその他の多くの情報があります。
<li><a href="http://www.obsolyte.com/sun3/">Techrat's Sun 3/160
    pages</a> には、Techrat 3/160 の情報、ハードウェア情報、沢山の古い Sun
    ハードウェアの写真、様々な FAQ などへのリンクがあります。
<p>

<li><a href="../../Documentation/">一般的な NetBSD ドキュメンテーション</a>
    - NetBSD/sun3 固有でない質問。
</ul>

<hr>
<h2>全般的な質問</h2><hr>
<p><h3>
<a name="le0-not-multicast-capable">マルチキャストや IPv6 が使えない - 	"<tt>le0: not multicast capable</tt>"</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
一部の sun3s (sun3x は含まず) で使われている LANCE revsision C
チップにはバグがあり、最初のビットにゴミを入れ、
本来のビットを後ろにずらしてしまうことがあります。このため、
MAC アドレスが本来の行き先のものではなく、
デタラメに見えることがあります。
<p>

次善策として、パケットの冒頭を検証して、自分宛 (自分の MAC
またはブロードキャスト) 以外のものは捨てるという手があります。
困ったことに、こうするとマルチキャストが使えなくなります。
<p>

おそらく、 LANCE Rev. C チップは 3/50 だけで使われていますので、
他の sun3 マシンでは、次の行を外して<a
href="../../Documentation/kernel/#how_to_build_a_kernel">カーネルを
構築</a>することができるはずです: <pre>options LANCE_REVC_BUG</pre>

</dd></dl>
<p><h3>
<a name="3-80-esp-endless-reset">ESP ドライバーを使った 3/80 をディスクレスで動かす - 	<tt>"esp: SCSI bus reset."</tt></a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
このメッセージは、ディスクレスシステムでの esp ドライバーのバグの症状です。
NetBSD/sun3x の ESP (Emulex SCSI Processor) ドライバーにはバグがあり、
空の SCSI バスをプルーブすると無限ループに陥ります。
この問題を回避するためには、 esp デバイスドライバーを含まないカーネルを使うか、
または何か動いている SCSI デバイスをバスに挿します。
(すみません。コンパイル済みの esp なしカーネルは、まだ用意していません !)

</dd></dl>
<p><h3>
<a name="sunos_compat">SunOS 4.1 互換機能</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
NetBSD/Sun3 には、 SunOS 4.1.x のプログラムの実行バイナリーとの
互換機能があります。スタティックな実行バイナリーは特別な設定なしに
動作します。
<p>

ダイナミックな実行バイナリーの実行には、
SunOS からダイナミックライブラリーを持ってくる必要があります。
動作<i>しない</i> SunOS プログラムとしては、SunOS kvm ライブラリーを
使うものや、ある種の (低レベルの) ディスク操作ユーティリティーや、
Sun STREAMS サブシステムを明示的に使うプログラムなどがあります。
より詳しくは、 <a href="http://man.netbsd.org/man/compat_sunos+8.sun3+NetBSD-current">compat_sunos(8)</a> マニュアルページを確認してください。

</dd></dl>
<p><h3>
<a name="boot-devices">異なるターゲットの SCSI デバイスからブートする</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
すべての sun3 と sun3x のモニターは、 SCSI デバイスからのブートに
対応しています。ほとんどのユーザーにとっては、モニターデバイス
<tt>sd(0,0,0)</tt> 、つまり SCSI デバイスのターゲットゼロからブートするのが普通でしょう。
それ以外の SCSI デバイスのターゲットからブートするように
モニターデバイス名を指定するのは、わかりにくいことかもしれません。
<p>

モニターブートデバイスは
<i>dev</i><tt>(</tt><i>cntrl</i><tt>,</tt><i>unit</i><tt>,</tt><i>part</i><tt>)</tt>
のような形式で指定するようになっています。
<i>dev</i> は 2 文字、 <i>cntrl</i> ・ <i>unit</i> ・ <i>part</i> は 16 進数です。
<p>

SCSI ディスクと CD-ROM では <i>dev</i> は <tt>sd</tt> 、 SCSI テープでは
<i>dev</i> は <tt>st</tt> です。
<p>

どの SCSI デバイスでも、  <i>cntrl</i> は、そのデバイスがアタッチされている
SCSI コントローラーの番号です。 SCSI コントローラーが 1 個だけのマシンでは
<i>cntrl</i> は <tt>0</tt> になります。
<p>

どの SCSI デバイスでも、 <i>unit</i> は SCSI ターゲットとデバイスの論理ユニット番号を表します。
より厳密にいえば、 SCSI ターゲットと論理ユニット番号をもとに <i>unit</i>
という一つの数にしたもので、この数の決め方は、マシンの機種、 ROM リビジョン、
デバイスがディスクか CD-ROM かテープのどれか、によって決まります。
お使いのマシンで <i>unit</i> がどうなるかは、下記の表で調べてください。
<p>

SCSI ディスクと CD-ROM では、 <i>part</i> はそのディスクや CD-ROM のどの
パーティションかを示します。 1 個目のパーティションは <tt>0</tt> 、
2 個目は <tt>1</tt> 、…、です。
普通は、最初のパーティションがブート可能になっているので、
<i>part</i> は <tt>0</tt> になります。これの例外としてありがちなのは、
swap パーティションに書かれた miniroot からブートする場合です。
この場合は <i>part</i> は <tt>1</tt> になります。別の例外としては、
CD-ROM に他のアーキテクチャーのブート用のパーティションが入っている場合で、
この場合はどのパーティションからブートするのかを調べておく必要があります。
<p>

SCSI テープでは、 <i>part</i> はブートに使うテープのセグメント ("テープファイル"
とも呼びます) を示します。最初のテープセグメントは <tt>0</tt> 、
2 個目のテープセグメントは <tt>1</tt> 、…、です。適切な <i>part</i>
を指定するために、どのテープセグメントがブート可能なのか調べておく必要があります。
<p>

最後に、様々なマシンで <i>unit</i> が実際にどうなるかの一覧表を載せておきます。
ディスクと CD-ROM の <tt>sd</tt> とテープ用の <tt>st</tt>
モニターデバイスを、全 SCSI ターゲット毎に掲げました。
この表では、 SCSI コントローラーは 1 個目の <tt>0</tt> とし、
最初のパーティションまたはテープセグメントの <tt>0</tt>
を使うものとしています。
<p>

<table border="1" cellpadding="2" cellspacing="1">
<tr>
  <td rowspan="2">Machine/rev ROM</td>
  <td colspan="8" align="center">ディスクおよび CD-ROM からブートする場合のモニターデバイス (ターゲット別)</td>
</tr>
<tr>
  <td align="center">0</td>
  <td align="center">1</td>
  <td align="center">2</td>
  <td align="center">3</td>
  <td align="center">4</td>
  <td align="center">5</td>
  <td align="center">6</td>
  <td align="center">7</td>
</tr>
<tr>
  <td>3/60 rev 1.9</td>
  <td><tt>sd(0,0,0)</tt></td>
  <td><tt>sd(0,4,0)</tt></td>
  <td><tt>sd(0,8,0)</tt></td>
  <td><tt>sd(0,C,0)</tt></td>
  <td><tt>sd(0,10,0)</tt></td>
  <td><tt>sd(0,14,0)</tt></td>
  <td><tt>sd(0,18,0)</tt></td>
  <td>N/A</td>
</tr>
<tr>
  <td>3/80 rev 2.9.2</td>
  <td><tt>sd(0,0,0)</tt></td>
  <td><tt>sd(0,8,0)</tt></td>
  <td><tt>sd(0,10,0)</tt></td>
  <td><tt>sd(0,18,0)</tt></td>
  <td><tt>sd(0,20,0)</tt></td>
  <td><tt>sd(0,28,0)</tt></td>
  <td><tt>sd(0,30,0)</tt></td>
  <td>N/A</td>
</tr>
</table>
<p>

<table border="1" cellpadding="2" cellspacing="1">
<tr>
  <td rowspan="2">Machine/rev ROM</td>
  <td colspan="8" align="center">テープからブートする場合のモニターデバイス (ターゲット別)</td>
</tr>
<tr>
  <td align="center">0</td>
  <td align="center">1</td>
  <td align="center">2</td>
  <td align="center">3</td>
  <td align="center">4</td>
  <td align="center">5</td>
  <td align="center">6</td>
  <td align="center">7</td>
</tr>
<tr>
  <td>3/60 rev 1.9</td>
  <td>???</td>
  <td><tt>st(0,8,0)</tt></td>
  <td><tt>st(0,10,0)</tt></td>
  <td><tt>st(0,18,0)</tt></td>
  <td><tt>st(0,0,0)</tt></td>
  <td><tt>st(0,28,0)</tt></td>
  <td><tt>st(0,30,0)</tt></td>
  <td>N/A</td>
</tr>
<tr>
  <td>3/80 rev 2.9.2</td>
  <td>???</td>
  <td><tt>st(0,8,0)</tt></td>
  <td><tt>st(0,10,0)</tt></td>
  <td><tt>st(0,18,0)</tt></td>
  <td><tt>st(0,0,0)</tt></td>
  <td><tt>st(0,28,0)</tt></td>
  <td><tt>st(0,30,0)</tt></td>
  <td>N/A</td>
</tr>
</table>
<p>

この表では、 SCSI 論理ユニット番号はゼロとしてあります。
SCSI の仕様上は、ひとつの SCSI ターゲットが複数の論理ユニット
(LUN とも呼ばれる) を持つことができます。ですが、事実上、どの
SCSI デバイスもこの機能を使ってはおらず、
LUN 番号ゼロのものを持っているだけです。なお、ゼロ以外の LUN のディスク
(初期の Sun SCSI ディスクはそうなっています) の場合は、
<i>unit</i> に LUN 番号を足せばよいです。なお、 <i>unit</i> は 16 進数です。

</dd></dl>
<p><h3>
<a name="sun3x-history">NetBSD/sun3x の歴史</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
NetBSD の sun3x ポートは、二つの独立した開発者グループによって始まりました。
第一のグループは Gordon Ross と Jeremy Cooper らによるもので、
1996 年 3 月に current (当時) の sun3 ポートをもとに作業を始め、 hp300 m68k
コードに基づかない新しい pmap システムの作成に集中しました。
彼らの成果は、公式にサポートされた NetBSD/sun3x のバージョンとなりました。
<p>

第二のグループは椿井政成らによるもので、こちらも sun3 をもとにしていましたが、
こちらは伝統的な hp300 m68k pmap を採用しました。
この手法により、彼らは数週間で完全に動作するシステムを作ることができました。
彼らは、 SPARC 拡張 SCSI プロセッサードライバーをカーネルに統合することに
初めて成功し、 Sun3x が確かに SPARC と Sun3 の中間的存在であることを
証明しました。
<p>

現在のサポートされている NetBSD/sun3x は Gordon と Jeremy らの作業をもとに
していますが、彼らの前進は第二のグループの恩恵によるものです。
<p>

NetBSD 1.3 から 1.4 の間に、 NetBSD/sun3x は NetBSD/sun3 にマージされました。
これらは別々にカーネルを構築しますが、ユーザーランドとカーネルビルドツリーは
同じものを共有しています。

</dd></dl>
<hr>

<a href="./">Up to <em>NetBSD/sun3 Port Page</em></a>
<hr>

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../"><img
	src="../../../images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../"><img
	src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../Documentation/"><img
	src="../../../images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../Documentation/"><img
	src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="../../Misc/feedback.html">英語</a>,
       <a href="mailto:www@JP.NetBSD.ORG">日本語:
       www@JP.NetBSD.ORG</a>)<br>
  $NetBSD: faq.list,v 1.26 2002/10/30 23:46:57 fredette Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2001
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
