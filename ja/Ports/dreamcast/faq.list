<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<!-- Copyright (c) 1996-2003
        The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@NetBSD.org">
<title>NetBSD/dreamcast Frequently Asked Questions</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD/dreamcast Frequently Asked Questions</h1>

<p>
This FAQ will always be a work in progress, since the more that is done with
this port, the more questions there will be. If your question remains
unanswered then please consider submitting it to the NetBSD/dreamcast
mailing list and/or contact Alex Kirk (alex-at-schnarff-dot-com) to get it
included in this FAQ.
</p>

<LIST>

<SECTION>1. Background

<ENTRY>port_origins 1.1 Where did the Dreamcast port come from?
It was spun off from the <a href="../evbsh3/">NetBSD/evbsh3</a> port by Marcus
Comstedt after Saitoh Masanobu managed to boot the evbsh3 code on a Dreamcast
console.

<ENTRY>why_dreamcast 1.2 Why run NetBSD on Dreamcast?
There have been many answers to this question, but I believe it has been best
summed up in some posts to the mailing list:
<a href="http://mail-index.NetBSD.org/port-dreamcast/2002/01/27/0004.html">Drew Vogel</a>
<a href="http://mail-index.NetBSD.org/port-dreamcast/2002/01/26/0004.html">Andy R</a>
<a href="http://mail-index.NetBSD.org/port-dreamcast/2002/01/27/0011.html">Miles Nordin</a>

<SECTION>2. Hardware

<ENTRY>cd-r_bootable 2.1 Can all Dreamcast consoles boot from CD-R?
The "Sakura Wars Limited Edition" is known to be incapable of booting from
CD-R.  There may be others also. It has often been stated that consoles made
before October 2000 will not work, but there is little definite proof of this.

<ENTRY>cd-rw_bootable 2.2 Can any Dreamcast consoles boot from CD-RW?
There have been unsubstantiated rumours that a very small subset of Dreamcast
consoles are capable of booting from CD-RW without modification.  Many others
are capable of this with internal modification to the console.

<ENTRY>what_is_bba 2.3 What is the Broadband Adapter?
Often abbreviated as `BBA', the Broadband Adapter is 10/100Mbit Ethernet
module that replaces the console's modem.  It is driven by a Realtek 8139 chip
that runs from a PCI bus in the Broadband Adapter.  The PCI bus is then
translated into the console's native G2 Bus.

<ENTRY>where_is_bba 2.4 Where can I get a Broadband Adapter?
That depends on how urgently you want one. If you're willing to wait, CSI,
the company that manufactures them, is taking pre-orders at <a 
href="http://www.ncsx.org/2002/ncs082602/ncs0826.htm">this site</a>; if they
get 1,000 pre-orders, they'll make another batch and ship them. At $49 versus
the $100+ they can cost elsewhere, it's a great deal; the only problem is that
you will have to wait, and might not get one at all.
<p>
For the more impatient, <a href="http://www.ebay.com/">eBay</a> is a likely 
place; sometimes <a href="http://www.lik-sang.com/">Lik-Sang</a> or <a
href="http://www.lan-kwei.com/">Lan-Kwei</a> have some.  You could also
investigate the availability of the Dreamcast R7 console which is reported to
have come with a Broadband Adapter pre-installed.  They are generally very
difficult to find now that Sega has ended Dreamcast production.  As such,
highly inflated prices are often seen, with many Broadband Adapters selling for
greater than the cost of the console they are to be employed in.

<ENTRY>what_is_la 2.5 What is the LAN Adapter?
The LAN Adapter (HIT-0300) is essentially a Broadband Adapter with support for
10Mbit rather than 10/100Mbit Ethernet.  It uses the MB86967 chip instead of
the Broadband Adapter's Realtek 8139.

<ENTRY>where_is_la 2.6 Where can I get a LAN Adapter?
Some people have found the LAN Adapter more available than the actual Broadband
Adapter but definitive sources of purchase are unavailable.  It was produced
exclusively for the Japanese market but has been known to be exported
unofficially to other countries by third-parties.

<ENTRY>endian 2.7 Is the Hitachi SuperH SH-4 little or big endian?
The Hitachi SuperH SH-4 CPU can be driven either little or big endian,
the Dreamcast port uses it in a little endian fashion.

<ENTRY>serial_buy 2.8 Where can I buy a serial cable for the Dreamcast?
A listing of possible vendors can be found at the <a 
href="http://dev.dcemulation.com/started-step2.htm#main">Dreamcast
Emulation Developer</a> site.

<ENTRY>attach_hdd 2.9 Can I attach a hard drive to the Dreamcast itself?
Yes, check out <a href="http://homepages.compuserve.de/bITmASTER32/dc/dc-ide.html">
http://homepages.compuserve.de/bITmASTER32/dc/dc-ide.html</a> and <a 
href="http://home.b00.itscom.net/ikehara/dc/index.html">
http://home.b00.itscom.net/ikehara/dc/index.html.</a> <br>
Note that this requires soldering and other such things that could <br>
<b>completely fry</b> your Dreamcast, so proceed with caution.

<SECTION>3. Bootable CDs

<ENTRY>where_images 3.1 Where can I find a bootable NetBSD/dreamcast CD image?
For a read-only filesystem, use this (very old) DiscJuggler 
<a href="http://www.kirknet.net">image</a>. For a read/write filesystem, use Josh 
Tolbert's <a href="http://members.wri.com/josht/dreamcast/dreamcast-kernel.tar.gz">
kernel</a> (<a href="http://www.schnarff.com/netbsd/dreamcast-kernel.tar.gz">mirror</a>).
This will involve netbooting your system, and will give you a read/write filesystem.

<ENTRY>where_dj 3.2 Where can I find DiscJuggler?
DiscJuggler is freely available (albeit in a crippled form, but still
functional enough to burn the aforementioned images) from <a
href="http://www.padus.com/downloads/demo.php">http://www.padus.com/downloads/demo.php</a>.

<ENTRY>how_bootable_image 3.3 That's great...now how do I make the actual CD?
Follow the instructions on the <a href="howto.html">HOWTO</a>.

<ENTRY>quit_burning 3.4 What if I don't want to burn a CD for each new kernel?
You'll want to follow the setup at <a 
href="http://members.wri.com/josht/dreamcast/ipslave.html">Josh Tolbert's
Kernel Autoloader Guide</a>.

<SECTION>4. Dreamcast-Side Configuration

<ENTRY>how_set_ip 4.1 How do I set the IP address of the Dreamcast?
Certain Dreamcast games can set the IP address, which is then stored by the
console until changed.  Similarly the Broadband Passport browser software has
this capability.  However, the Dreamcast can be told its IP address once NetBSD
has been booted and doesn't need the information prior to this, as such, the
simplest solution is to edit the arp table from your NetBSD system like so:

<p>
<tt># arp -s <i>dreamcast</i> <i>ethernet</i></tt>
</p>

Where `<i>dreamcast</i>' is the desired IP address, say <tt>192.168.0.128</tt>,
and `<i>ethernet</i>' is the hardware address of the Broadband Adapter, say
<tt>00:00:de:ad:be:ef</tt> the command would be:

<p>
<tt># arp -s 192.168.0.128 00:00:de:ad:be:ef</tt>
</p>

The hardware address of the Broadband Adapter can be found written on the
device itself or transcribed from the IP upload slave program.

<ENTRY>where_browser 4.2 Can I get a GD-ROM of the Dreamcast Browser to set the IP address?
Try <a href="http://newbrowser.sega.com/">http://newbrowser.sega.com/</a>.
The chances of coercing this system into delivering anywhere outside the USA
appear slim.

<SECTION>5. Obtaining/Creating Filesets

<ENTRY>where_world 5.1 Where can I find a functional set of pre-built world files?
Your best bet as of this writing is Josh Tolbert's <a 
href="http://members.wri.com/josht/dreamcast/dreamcast-world.tar.gz">build</a>.
There is also some interesting stuff at <a href="ftp://releng.NetBSD.org">
ftp://releng.NetBSD.org</a>.

<ENTRY>where_snapshots 5.2 Where do I find NetBSD/dreamcast snapshots?
You can find NetBSD/dreamcast snapshots at <a
href="ftp://ftp.NetBSD.org/pub/NetBSD/arch/dreamcast/snapshot/">ftp://ftp.NetBSD.org/pub/NetBSD/arch/dreamcast/snapshot/</a>.<br>
<a href="ftp://releng.NetBSD.org">ftp://releng.NetBSD.org</a> claims to have
daily snapshots, but they sometimes miss days. :-)
As the Dreamcast port is binary compatible to other sh-based ports, you can
also use snapshots from these projects, such as the NetBSD/hpcsh port, located
at <a
href="ftp://ftp.NetBSD.org/pub/NetBSD/arch/hpcsh/snapshot/">ftp://ftp.NetBSD.org/pub/NetBSD/arch/hpcsh/snapshot/</a>.  
This doesn't only apply to snapshots of the base system, but also
of precompiled binary packages.

<ENTRY>how_compile 5.3 How do I compile NetBSD/dreamcast under *NIX/*BSD?
See the instructions in <a 
href="http://www.NetBSD.org/Ports/sh3/faq.html#crossbuild">the SH3 FAQ.</a>
Also, you may want to look at /usr/src/BUILDING for some good information on
the build process in general, including cross-compiling.
<p>
Keep in mind that, currently, pthreads for SH3 is in need of some assembly
language code to make it functional. If you attempt a build with this 
compiled in, it <em>will</em> fail. You can still build the system without it --
Izumi Tsutsui <a
href=http://mail-index.NetBSD.org/port-dreamcast/2003/02/04/0004.html>
suggests</a> <tt>setenv BUILD_regress no</tt> as a "simple (and ugly)
workaround".


<ENTRY>how_compile_win 5.4 How do I compile NetBSD/dreamcast under Windows?
To build NetBSD/dreamcast under Windows will take a functional Cygwin
installation, a working sh4 cross-compiler, the NetBSD code and a great deal of
patience.  More detail will hopefully be made available in the not too distant
future.

<ENTRY>how_compile_kern 5.5 How do I compile a new kernel?
If your Dreamcast is working, follow the instructions in the <a 
href="http://www.mclink.it/personal/MG2508/nbsdeng/chap-kernel.html">NetBSD FAQ.</a>
If not, you'll need to cross-compile.

<ENTRY>cant_login 5.6 I used Josh Tolbert's world files, and I can't login.
Make sure you untarred the files as root and used the -p flag to preserve 
permissions. If that doesn't work, "chmod 777 /etc /var" should do the trick
long enough for you to get in and then set things straight.

<ENTRY>packages 5.7 Are there binary packages available for NetBSD/dreamcast?
Short answer: no.<p>

Long answer: There are currently no official binary packages available
on ftp.NetBSD.org in /pub/NetBSD/packages. Unofficial binaries are
available though: Alex Kirk has built
several
hundred unofficial packages, which he has
<a href=http://www.schnarff.com/netbsd/pkg-list.pl>listed</a> on his web
site. Some of the links work, others do not; all of them are
going to a machine with only 128K of upstream bandwidth, so don't be surprised
if they're slow to download. Also, Jan Schaumann has <a
href=http://guinness.cs.stevens-tech.edu/~jschauma/netbsd/dreamcast/>a
higher-bandwidth location</a> for most of the packages, and he also makes 
<a href=http://mail-index.NetBSD.org/port-dreamcast/2003/02/05/0004.html>a
good point about security</a> for the paranoid. Please note that 
The NetBSD Foundation can and will not take any responsibility for binary
packages offered from unofficial sites!


<SECTION>6. Swap, NFS/DHCP, Misc. Config

<ENTRY>swap_not_there 6.1 I put my swapfile in /etc/fstab but I don't see it with df. What gives?
As swap is not a true filesystem per se, df won't show it. You'll need to run
"swapctl -l" to see your swap space. Note that by default, this figure is given
in 512-byte blocks when run as a regular user, and 1024-byte blocks as root.

<ENTRY>swap_stable 6.2 How stable is running swap over NFS?
There is a fair amount of debate on this subject. The current quasi-consensus is
that this it is basically stable, but that the low quality of the BBA can cause
issues. Many people have recommended setting the BBA to 10 Mbs only as a 
workaround to any problems; this can be done by adding the "10baseT" directive
to your ifconfig line in /etc/rc.conf on the Dreamcast.

<ENTRY>swap_size 6.3 How big should my swapfile be?
This is, of course, a matter of personal choice, and depends on what you'll be
doing with the system. If you'll be using it for any but the most mundane of
tasks -- including if you want to build more than a tiny package out of 
/usr/pkgsrc -- you should probably have at least 32MB worth. Many have reported
that 64MB is an optimal size. Keep in mind that the larger your swapfile, the 
more physical memory is required to manage it.

<ENTRY>serial_console 6.4 How do I switch my console to serial port?
Remove the "pvr" driver from your kernel configuration, rebuild your kernel, and
you'll automatically fall back to serial console.

<ENTRY>mouse_driver 6.5 Is there a mouse driver available?
Yes, it's "mms". You'll need the following lines in your kernel config:
<pre>mms*    at maple? port ? subunit ?
wsmouse*    at mms? mux0</pre>

<ENTRY>nfs_errors 6.6 I'm getting weird NFS error codes. What do these mean?
Look in /usr/src/sys/sys/errno.h for one-line explanations.

<SECTION>7. Miscellaneous

<ENTRY>how_send_files 7.1 How do I send files to the Dreamcast if it's not mounted over NFS?
The simplest solution for those running NetBSD or similar is to use the portal
filesystem as follows:

<p>
<tt># mkdir /p</tt><br>
<tt># mount_portal /usr/share/examples/mount_portal/tcp.1.conf /p</tt>
</p>

Now that the portal filesystem is mounted <tt>cat</tt> can be employed to send
a file to the console:

<p>
<tt># cat <i>filename</i> &gt; /p/tcp/<i>dreamcast</i>/<i>port</i></tt><br>
</p>

Where `<i>filename</i>' is the file to send, `<i>dreamcast</i>' is the IP
address of the console and `<i>port</i>' is the port number to send the file
to.  An example of sending a kernel called `<tt>bsd</tt>' to a Dreamcast with
an IP address of <tt>192.168.0.128</tt> which is running the IP upload slave
(which listens on port <tt>4711</tt>) would be:

<p>
<tt># cat bsd &gt; /p/tcp/192.168.0.128/4711</tt>
</p>

<ENTRY>what_ip_slave 7.2 What is the IP upload slave?
The IP upload slave is a Dreamcast program written by Marcus Comstedt that
allows the transport of files through the Dreamcast console's Broadband
Adapter, which will then be executed by the console.  It can be found at <a
href="http://mc.pp.se/dc/ipslave.html">http://mc.pp.se/dc/ipslave.html</a>.
Instructions on getting it to run can be found at <a
href="http://members.wri.com/josht/dreamcast/ipslave.html">Josh Tolbert's
Kernel Autoloader Guide.</a>

<ENTRY>resources 7.3 What other Dreamcast resources exist out there?
Try these sites:
<p>
<a href="http://mc.pp.se/dc/links.html">Marcus Comstedt's Dreamcast Page</a> (probably the most definitive site out there, with many good additional links)<br>
<a href="http://www.boob.co.uk/">Boob! Dremcast Research</a><br>
<a href="http://dev.dcemulation.com/">Dreamcast Emulation Developer</a><br>
<a href="http://homepages.compuserve.de/bITmASTER32/dc-index.html">bITmASTER's dCdeV</a><br>
<a href="http://www.puresimplicity.net/~hemi/dreamcast/">Josh Tolbert's instructions</a><br>
<a href="http://dcbakuplinks.de.vu/">DCBakuplinks</a> - information
about Dreamcast hardware, emulators, software and more</br>
<p>

Keep in mind that these pages are not necessarily NetBSD-specific.

<ENTRY>slow_compiles 7.4 Why has my compile job been running for hours with low CPU utilization?
If you're trying to compile something big, particularly out of /usr/pkgsrc,
and you notice that the job is taking an excruciatingly long time and is
low on CPU utilization but high on memory use, you've run into one of the
big gotchas of the platform: swap over NFS is really, really slow.<br><br>
What's happening here is that your compile job has drastically exceeded
the 32MB of memory your system has, and it's doing a large amount of
swapping
across the network. This is a painfully slow process no matter how
quick your network is; your best bet is to try killing any unnecessary
processes running on your Dreamcast to free up memory. Don't be surprised,
though, if your job has run for over 5 hours with no signs of stopping...
and don't bother to kill it, either, since it's still OK, and you'll have
just wasted all that compile time.
<p>
According to a <a href=http://mail-index.NetBSD.org/tech-kern/2002/11/27/0005.html>post by Simon Burge</a> on the tech-kern list, it is possible to do
something about this by tweaking virtual memory settings. While it is in
your best interests to read his entire post and decide for yourself what
your settings should be, the gist is that you'll want to run
<tt>sysctl -w vm.anonmax=95</tt>. According to the sysctl(3) page, this
changes "The percentage of physical memory which will be reclaimed from
other types of memory usage to store anonymous application data."
</LIST>

<a href="./">Up to <em>NetBSD/dreamcast Port Page</em></a>
<hr>

<DOCLINK>

<hr>
<address>
  <small>
  <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">(Contact us)</a>
  $NetBSD: faq.list,v 1.26 2003/09/23 01:09:20 dent Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 2000-2003
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
