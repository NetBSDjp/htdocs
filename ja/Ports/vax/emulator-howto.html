<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<!--
  Copyright (c) 2002
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.
-->
<link rev="made" href="howto_files/file_1">
<title>NetBSD SIMH HOW-TO</title>
</head>

<body bgcolor="#ffffff" text="#000000">

<h1>NetBSD SIMH HOW-TO</h1>

<p>
  This guide is intended to help you install NetBSD on the SIMH VAX
  emulator.
</p>

<ol>
  <li>
    Get the emulator source code from the <a
    href="http://simh.trailing-edge.com/">SIMH home page</a>.
    Currently, the main emulator is in a file called
    <code>simhv29.zip</code>, and the VAX add-on is called
    <code>vaxpre.zip</code>.  Later versions of SIMH will include the
    VAX emulator.
  </li>
  <li>
    Create a directory to hold the emulator, and unpack both zip files
    there.
  </li>
  <li>
    Build the emulator by typing
<pre>
        make BIN/vax
</pre>
    If that doesn't work, read the documentation included with SIMH.
  </li>
  <li>
    Get a NetBSD/vax CD ISO image, for example <a
    href="ftp://ftp.netbsd.org/pub/NetBSD/iso/1.5.2/vaxcd.iso">NetBSD
    1.5.2</a>.
  </li>
  <li>
    Start the emulator program (<code>BIN/vax</code>).
  </li>
  <li>
    At the emulator prompt, type
<pre>
        load -r /path/to/simh/VAX/ka655.bin
        set rq0 ra92
        at rq0 netbsd.dsk
        set rq1 cdrom
        at rq1 /path/to/vaxcd.iso
        boot cpu
</pre>
    This will configure the emulated VAX with an RA92 disk, and the CD
    image masquerading as an RD54 disk.  See the SIMH documentation
    for other options.
  </li>
  <li>
    At the VMB prompt, type
<pre>
        boot dua1:
</pre>
    to boot off the CD.
  </li>
  <li>
    Proceed with a normal NetBSD install.  You may not want to install
    the X11 stuff, since SIMH doesn't emulate a frame buffer.  Also,
    there is a problem where the installation program doesn't find the
    <code>.tgz</code> files on the CD.  If this happens, suspend the
    installation with <code>Control-Z</code>, and type
<pre>
        mount -t cd9660 /dev/ra1a /mnt2
</pre>
    Then resume with <code>fg</code> and tell the installation program
    to ignore the error.
  </li>
  <li>
    After a considerable amount of time, the installation finishes, and
    you may shut down or reboot.
  </li>
  <li>
    You can now type <code>q</code> at the emulator prompt to exit
    the emulator.
  </li>
  <li>
    Enter these lines
<pre>
        load -r /path/to/simh/VAX/ka655.bin
        set rq0 ra92
        at rq0 netbsd.dsk
        boot cpu
</pre>
    into a file, say <code>netbsd-boot</code>.
  </li>
  <li>
    Restart the emulator like so:
<pre>
        BIN/vax netbsd-boot
</pre>
  </li>
  <li>
    At the VMB prompt, type
<pre>
        boot dua0:
</pre>
    to boot off the disk.
  </li>
  <li>
    Welcome to NetBSD!
  </li>
</ol>

<p>
  If you are interested in helping this document cover other NetBSD
  ports, or have any other comments or suggestions, please contact
  Lars Brinkhoff <a
  href="mailto:lars.spam@nocrew.org">&lt;lars.spam@nocrew.org&gt;</a>,
  or the <a href="../../Misc/feedback.html">NetBSD WWW group</a>.
</p>

<h2>Acknowledgements</h2>

<p>
  The initial version of this HOW-TO was written by <a
  href="http://lars.nocrew.org/">Lars Brinkhoff</a>.  Some of the
  information in this page was derived from an email sent by
  <a href="mailto:mirian@cosmic.com">Mirian Crzig Lennox</a> .
</p>

<hr>

<table width="100%"><tbody><tr><td>
  <table><tbody><tr><td>
    <a href="../../"><img src="../../images/NetBSD-flag.gif" border="0
    " width="91" height="42" alt=""></a> 
  </td><td>
    <a href="../../"><img src="../../images/empty.gif" border="0"
    width="1" height="1" alt="NetBSD ">Home Page</a>
  </td></tr></tbody></table>
</td><td>
  <table><tbody><tr><td> 
    <a href="../../Documentation/"><img
	src="../../images/NetBSD-flag.gif" border="0"
	width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../Documentation/"><img
	src="../../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></tbody></table>
</td></tr></tbody></table>

<hr>

<address>
  <small>
    <a href="../../Misc/feedback.html">(Contact us)</a>
    $NetBSD: emulator-howto.html,v 1.3 2002/02/21 21:52:09 ragge Exp $<br>
    <a href="../../Misc/disclaimer.html">Copyright ?
    2002
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>

