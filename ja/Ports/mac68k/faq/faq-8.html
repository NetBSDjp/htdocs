<HTML>
<HEAD>
<TITLE>NetBSD/mac68k F.A.Q.とその回答: 通信とネットワーク</TITLE>
</HEAD>
<BODY>
<A HREF="faq-7.html">Previous</A>
<A HREF="faq-9.html">Next</A>
<A HREF="faq.html#toc8">Table of Contents</A>
<HR>
<H2><A NAME="comm"></A> <A NAME="s8">8. 通信とネットワーク</A></H2>

<P>HOWTOができるのを待っているのでこのセクションはちょっと閑散としていますが…。</P>

<H2><A NAME="F.G"></A> <A NAME="ss8.1">8.1 NetBSDでのネットワークの設定はどうすれば良いですか？</A></H2>

<P>この点については、いくつかの情報源があります。もし既にMacOSでネットワークを使用しているなら、MacTCPやOpenTransportの設定をNetBSDの設定に取り入れるための、次のHOWTOページを見てみると良いでしょう:
<A HREF="http://www.macbsd.com/macbsd/howto/">http://www.macbsd.com/macbsd/howto/</A>
</P>
<P>もしNetBSDネットワーキングについての、とても詳しい解説が欲しい場合は、次のURLでBeginner's Guide to TCP/IP Networking and Networking FAQ for NetBSD/amigaを見てみると良いでしょう:
<A HREF="http://rfhs8012.fh-regensburg.de/~feyrer/NetBSD/NWF/nwf_toc.html">http://rfhs8012.fh-regensburg.de/~feyrer/NetBSD/NWF/nwf_toc.html</A></P>
<P>この情報を寄せてくれたHenry B. Hotz (h.b.hotz@jpl.nasa.gov)に感謝します。</P>


<H2><A NAME="F.A"></A> <A NAME="ss8.2">8.2 <CODE>cu</CODE>を使ってSLIP接続しようとしていますが、毎回エラーメッセージとともに接続が切られてしまいます</A></H2>

<P>最近のカーネルで<CODE>cu</CODE>を動かす際に問題があるようです。<CODE>bsddip</CODE>を使ってPPPやSLIP接続を行うことをお薦めします。</P>
<P><CODE>Bsddip</CODE>プログラムは下のURLから入手できます:
<BLOCKQUOTE><CODE>
<A HREF="ftp://ftp.netbsd.org/pub/NetBSD/packages/src/GPLed-sources/bsddip-1.02.tar.gz">ftp://ftp.netbsd.org/pub/NetBSD/packages/src/GPLed-sources/bsddip-1.02.tar.gz</A></CODE></BLOCKQUOTE>

私自身は<CODE>bsddip</CODE>をcurrentカーネルで動かすのに梃摺ったのですが、私だけのことかも知れません。</P>
<P>PPP接続のための設定方法については、
<A HREF="#F.B">PPPの項</A>を参照してください。</P>


<H2><A NAME="F.B"></A> <A NAME="ss8.3">8.3 PPP接続を行うにはどうすれば良いですか？</A></H2>

<P>ひとつの方法は<CODE>chat</CODE>(1)と<CODE>pppd</CODE>(8)のマニュアルページを読んで１から自分で設定することですが、最も簡単なのはBill Studenmund (wrstuden@loki.stanford.edu)がまとめたPPPキットを元にすることです:
<BLOCKQUOTE><CODE>
<A HREF="ftp://ftp.macbsd.com/private/wrstuden/ppp.setup.tgz">ftp://ftp.macbsd.com/private/wrstuden/ppp.setup.tgz</A></CODE></BLOCKQUOTE>
</P>
<P>このキットはサブディレクトリ<CODE>/private</CODE>の下にありますから、<CODE>cd</CODE>コマンドでディレクトリを変えるときは、直接<CODE>/private/wrstuden</CODE>に移動する必要があります[訳註:ですから、Fetch等GUIなftpクライアントを使う場合は、接続する前に初期ディレクトリとして<CODE>/private/wrstuden</CODE>を指定してください]。そうしないと<CODE>/private</CODE>ディレクトリのパーミッションの関係でうまくいかないでしょう。</P>
<P>このキットには、設定法と使用法の説明がついています。解凍するときは<CODE>/etc</CODE>ディレクトリにファイルを展開してください。そうしなかった場合は、内容をそこへ移動してから使ってください。モデムの初期化文字列はモデムに合わせて変える必要があるとBillは忠告しています。</P>
<P>Paul Goyette (paul@pgoyette.bdt.com)は、
<A HREF="#F.C">デマンドダイヤル</A>機能を持つ新しいPPPキットを作りました。詳しくは次の項を参照してください。</P>


<H2><A NAME="F.C"></A> <A NAME="ss8.4">8.4 NetBSDはデマンドダイヤルPPPできますか？</A></H2>

<P>1.2のリリースからNetBSDの<CODE>pppd</CODE>はデマンドダイヤル機能に対応しています。この機能を設定するには、<CODE>pppd</CODE>(8)のマニュアルページを読んでこのオプションについて勉強するか、またはPaul Goyette (paul@pgoyette.bdt.com)による新しくダイヤル=オン=デマンドに対応したPPPキットを使うこともできます:
<BLOCKQUOTE><CODE>
<A HREF="ftp://ftp.macbsd.com/private/pgoyette/pppd/ppp-dod.tgz">ftp://ftp.macbsd.com/private/pgoyette/pppd/ppp-dod.tgz</A></CODE></BLOCKQUOTE>
</P>
<P>このキットはサブディレクトリ<CODE>/private</CODE>の下にありますから、<CODE>cd</CODE>コマンドでディレクトリを変えるときは、直接<CODE>/private/pgoyette</CODE>に移動する必要があります[訳註:ですから、Fetch等GUIなftpクライアントを使う場合は、接続する前に初期ディレクトリとして<CODE>/private/pgoyette</CODE>を指定してください]。そうしないと<CODE>/private</CODE>ディレクトリのパーミッションの関係でうまくいかないでしょう。</P>
<P>このキットは、必要なすべてのファイルとPPP接続を行うためのHOWTOを含んでいます。</P>
<P>注意して欲しいのは、デマンドダイヤルを行うには、ISPはあなたのコンピュータに静的IPアドレスを与える必要があることです。[訳註:これは現在(たぶん1.3で)改良されていまして、相手(ルーター)のIPアドレスがわかっていれば十分です。ですから、同じ電話番号でも接続するたびにピアのアドレスが変わるようなISPでは使いにくいでしょう]</P>


<H2><A NAME="F.D"></A> <A NAME="ss8.5">8.5 <CODE>chat</CODE>か<CODE>pppd</CODE>でPAPを使用するにはどうすればいいですか？</A></H2>

<P>Bill Studenmund (wrstuden@loki.stanford.edu)からの回答:
<BLOCKQUOTE>
<CODE>chat</CODE>はPAPとは全く無関係です。<CODE>pppd</CODE>はPAPを使えますが、特別なスクリプトは必要ありません。
</BLOCKQUOTE>

<BLOCKQUOTE>
PAPを動かすには<CODE>pppd</CODE>(8)のマニュアルページを参照してください。
</BLOCKQUOTE>

<BLOCKQUOTE>
基本的なアイディアは、<CODE>/etc/ppp/pap-secrets</CODE>というファイルを作ることで、それには認証のための情報が入っています。各行には、サーバーとクライアントフィールド(誰が誰を認証するか)、そして秘密鍵が格納されます。
</BLOCKQUOTE>

<BLOCKQUOTE>
PAPを使うことで何か変える必要がある部分があるとすれば、<CODE>chat</CODE>スクリプトが、PAP認証の始まる直前に終了する必要があることです(PAP認証は<CODE>chat</CODE>ではなく<CODE>pppd</CODE>が行うので)。そして、オプションでPAPを禁止しないようにします。デフォルトでは(接続相手から)要求があれば<CODE>pppd</CODE>は認証を許可しますから、接続先がPAP認証を要求すればそれに応えます。
</BLOCKQUOTE>

<BLOCKQUOTE>
<CODE>ppp.setup</CODE>スクリプトの変更点についての提案です。私はPAPを使用していないので、もし私が変なことをいった時にはメーリングリストの皆さんが修正してくれるのを期待します。:-)
</BLOCKQUOTE>

<BLOCKQUOTE>
1) <CODE>chat</CODE>スクリプトの"CONNECT"以下の部分をすべて削除します。一旦CONNECTという文字列が返されればそこで<CODE>chat</CODE>の仕事は終りです。行の終りには""を残します。
</BLOCKQUOTE>

<BLOCKQUOTE>
したがって、ログインIDやパスワード情報は<CODE>chat</CODE>スクリプトからなくなります。<CODE>/etc/ppp/ppp-login</CODE>はそのままで構いません。<CODE>chat</CODE>スクリプトを変えたからといって邪魔になることはないからです。
</BLOCKQUOTE>

<BLOCKQUOTE>
2) <CODE>/etc/ppp/pap-secrets</CODE>ファイルを作り、その中に:
</BLOCKQUOTE>

<BLOCKQUOTE><CODE>
<PRE>
* * &lt;あなたのパスワード&gt;
</PRE>
</CODE></BLOCKQUOTE>

<BLOCKQUOTE>
のようにパスワードを書きます。
</BLOCKQUOTE>

<BLOCKQUOTE>
3) <CODE>/etc/ppp/options</CODE>に１行加えます:
</BLOCKQUOTE>

<BLOCKQUOTE><CODE>
<PRE>
user &lt;あなたのユーザー名&gt;
</PRE>
</CODE></BLOCKQUOTE>

<BLOCKQUOTE>
これですべてうまくいくはずです。
</BLOCKQUOTE>
</P>


<H2><A NAME="F.E"></A> <A NAME="ss8.6">8.6 静的IPアドレスをくれないようなISPでも動作するようなPPP設定はありますか？</A></H2>

<P>Bill Studenmund (wrstuden@loki.stanford.edu)による回答:</P>
<P>
<BLOCKQUOTE>
もし既に動作するPPPセットアップがあるなら、それをほとんどそのまま動的IPアドレスでも使えます。唯一変えなければいけないのは、<CODE>pppd</CODE>へのオプションでIPアドレスを指定しないようにすることで、その場合接続先がIPアドレスを教えてくれます。IPアドレス交渉を行わないようなオプションを指定する、とかつまらない間違いがなければ大丈夫です。
</BLOCKQUOTE>

<BLOCKQUOTE>
PPPは動的アドレスでうまく動きます。あ、ダイヤルアップ接続用には<CODE>pppd</CODE>の<CODE>"defaultroute"</CODE>オプションを指定するのを忘れないようにしてください。接続した時にデフォルトルートが設定され、切断するとデフォルトルートはなくなります。次に接続したときにはまた自動的に正しいデフォルトルートが設定されます。
</BLOCKQUOTE>

<BLOCKQUOTE>
要点を繰り返せば、PPPの<CODE>chat</CODE>スクリプトは、<CODE>pppd</CODE>が引き継げるところまで接続が進んだ時点で終了します。もしログイン名とパスワードを送るログイン認証を使っている場合はそれも<CODE>chat</CODE>が行います。PAPやCHAPの場合には認証が始まる前に<CODE>chat</CODE>は終了し、認証は<CODE>pppd</CODE>に任せます。
</BLOCKQUOTE>
</P>
<P>Billの
<A HREF="ftp://ftp.macbsd.com/private/wrstuden/ppp.setup.tgz">PPPキット</A>は動的アドレスでもちゃんと動作するはずです。ただ、デマンドダイヤルでは静的IPアドレスが必要なので注意してください。[訳註: 1.3以降では、PPPリンクのリモートアドレスが静的にわかっていれば十分です。ローカルアドレスが毎回変わる(＝動的IPアドレス割り当て)でも問題ありません]</P>


<H2><A NAME="F.F"></A> <A NAME="ss8.7">8.7 PPPに関するマニュアルページ以外のドキュメントはありますか？</A></H2>

<P>あります。オライリーの『Linux Network Administrator's Guide』にはPPPの設定に関する章があり、ウェブで閲覧可能です:
<BLOCKQUOTE><CODE>
<A HREF="http://www.ora.com/catalog/linag/excerpt/ch08-01.htm">http://www.ora.com/catalog/linag/excerpt/ch08-01.htm</A></CODE></BLOCKQUOTE>

NetBSD向けに書かれたものではありませんが、多くの部分が適用可能でPAP/CHAP認証に関するセクションは特に役に立ちます。</P>
<P>マーク・アンドレイス(mark@ratbert.aisol.net)のページにもPPPをどのように設定したか書かれており、これも見るといいかも知れません:
<BLOCKQUOTE><CODE>
<A HREF="http://www2.giganet.net/~mark/NetBSD/ppp.html">http://www2.giganet.net/~mark/NetBSD/ppp.html</A></CODE></BLOCKQUOTE>
</P>


<H2><A NAME="F.H"></A> <A NAME="ss8.8">8.8 NetBSD 1.3にアップグレードしたらネットワークインターフェースが自動で初期化されなくなりました</A></H2>

<P>これはネットワークインターフェース初期化ファイルのフォーマットとファイル名規約が変更されたからです。以前の<CODE>hostname.xxN</CODE>に代わって、<CODE>ifconfig.xxN</CODE>というファイル名が使用されるようになりました。ここで<CODE>xx</CODE>は、ネットワークハードウェアによって<CODE>ae</CODE>、<CODE>sn</CODE>または<CODE>mc</CODE>のうちどれかで、<CODE>N</CODE>はインターフェース番号です(複数のネットワークインターフェースがあるのでなければ通常は0です)。新ファイルの内容は単純に、手動で<CODE>ifconfig</CODE>コマンドを実行する場合の引き数です。次のURLのネットワークHOWTOを参照してください:</P>
<P>
<A HREF="http://www.macbsd.com/macbsd/howto/networking/">http://www.macbsd.com/macbsd/howto/networking/</A>
</P>


<H2><A NAME="F.I"></A> <A NAME="ss8.9">8.9 カーネルがNetatalk [訳註: AppleTalk]をサポートしているのは知っていますが、ユーザーランドユーティリティはどこで入手できますか？</A></H2>

<P>NetatalkのユーザーランドユーティリティはNetBSDにはまだ統合されていません(1.4リリースでは統合されると思われますが)。NetBSD用にパッチが当たったnetatalkユーザーランドユーティリティは以下のURLから入手できます:</P>
<P>
<A HREF="ftp://ftp.macbsd.com/pub/NetBSD/contrib/netatalk/">ftp://ftp.macbsd.com/pub/NetBSD/contrib/netatalk/</A>
および
<A HREF="ftp://ftp.netbsd.org/pub/NetBSD/misc/netatalk/">ftp://ftp.netbsd.org/pub/NetBSD/misc/netatalk/</A></P>
<P>次のnetatalkのリリースではNetBSDに特有なパッチ等も含むでしょう。</P>


<H2><A NAME="F.J"></A> <A NAME="ss8.10">8.10 AppleTalkがサポートされたということは、シリアルポートを使うLocalTalkもサポートされているのでしょうか？</A></H2>

<P>いいえ、LocalTalk対応はまだです。しかしBill Studenmund (wrstuden@loki.stanford.edu)が時間のあるときに作業をしています。</P>


<HR>
<A HREF="faq-7.html">Previous</A>
<A HREF="faq-9.html">Next</A>
<A HREF="faq.html#toc8">Table of Contents</A>
</BODY>
</HTML>
