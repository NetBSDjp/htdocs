<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'info-4.list' AND RUN 'make' -->

<!-- Copyright (c) 1994-2003
        The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.org">
<title>NetBSD/mac68k OS Information - 既知の問題と解決策</title>
</head>
<body bgcolor="#ffffff" text="#000000">

<table border=0 cellpadding=0 cellspacing=0 width="100%">
  <tr><td align=left>
    <a href="info-3.html">前のページ</a> |
    <a href="info-5.html">次のページ</a>
  </td><td align=right>
    <a href="./">目次</a>
  </td></tr>
</table>

<hr>

<h1>4. 既知の問題と解決策</h1>

<ul>
<li>
<a href="#ss4.1">4.1 SCSI に関連する問題</a></li>
<li>
<a href="#ss4.2">4.2 インストール中 <code>Error on SCSIRead(), #5</code> というエラーで Installer が死んでしまう</a></li>
<li>
<a href="#ss4.3">4.3 Ethernet やビデオカードを認識するところでブートがハングする問題</a></li>
<li>
<a href="#ss4.4">4.4 Mkfs 1.4 がドライブの最後のパーティションを認識する際の問題</a></li>
</ul>


<hr>
<p>

このセクションはバグ情報ではありません。work-around (ad hoc な回避策)
が存在するシステムの制限についてなどです。

<p><h3>
<a name="ss4.1">4.1 SCSI に関連する問題</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

たくさんのユーザーが、NetBSD でのファイルシステムの破壊を報告していま
す。症状は、原因不明のハングや多数のファイルが実行バイナリファイルから
デバイスファイルへ変更されてしまうことなどです。この問題は他の製品より
も Quantum 製ドライブでよく起きるようです。これは '030 CPU を搭載した 
Mac で ncrscsi ドライバーを使用中にのみ起こります。
<p>

厳密にはこれは ncrscsi ドライバーのバグですが、回避策があります。それは 
sbc SCSI ドライバーを使用したカーネルへ切り替えることです。そのようなカー
ネルのいくつかは次の URL から入手できます:
<a href="ftp://ftp.NetBSD.org/pub/NetBSD/arch/mac68k/new/">ftp://ftp.NetBSD.org/pub/NetBSD/arch/mac68k/new/</a>

</dd></dl>
<p><h3>
<a name="ss4.2">4.2 インストール中 <code>Error on SCSIRead(), #5</code> というエラーで Installer が死んでしまう</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

Installer の最新バージョン(執筆時点で 1.1g)でも、未だ大容量ドライブの
パーティション(1G 超)の取り扱いに問題があります。この問題は Quantum
Fireball ドライブで最も頻繁に起きるようですが(このドライブに限った話で
はないと考えますが)、鍵はドライブの最初の 1G を超えた部分にパーティショ
ン(とくに大きいもの)があること、さらに配付セットのうち大きいものをその
ようなパーティションへ書き込んでいることのようです(小さなセット、例え
ば etc では問題は起きないが base では問題が起きるようです)。似たような
バグが以前修正されましたが、この問題とは若干異るようです。
<p>

回避策はいくつかあります。まず、Installer に割り当てるメモリー量をできる
だけ増やすこと。次は NetBSD パーティションを、ディスクの初めの方へ移動
すること(なるべく近くへ)。もしこれでもダメな場合は、まずできるところま
で Installer を使って配付セットをインストールし、その後 Installer の 
Mini-Shell で配付ファイルを NetBSD パーティションへコピーします。最後
に、NetBSD をブートして配付セットを NetBSD 上でインストールします。<p>

この問題は
<a href="../faq/">FAQ</a> で詳しく解説されています。

</dd></dl>
<p><h3>
<a name="ss4.3">4.3 Ethernet やビデオカードを認識するところでブートがハングする問題</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

この問題は通常 Ethernet とビデオカードの衝突が原因です。ひとつ考えられ
る解決は、カードのスロットを入れ換えてみることですが、もしそれでダメな
場合、なくても済む方のカードを抜いてブートしてみてハングしなくなるかど
うか試してください。
<p>

もしブートがハングするのがビデオカードだけのせいだった場合、カーネルが
正しくビデオカードの割り込みをクリアしていないことが考えられます。これ
を修正するのに必要な情報を見つけ出すための HOWTO があります:
<p>

<a href="http://www.macbsd.com/macbsd/howto/video.html">http://www.macbsd.com/macbsd/howto/video.html</a>
<p>

正しい情報によって、カードを取り外すことなくブートするようにカーネルを
変更することができます。

</dd></dl>
<p><h3>
<a name="ss4.4">4.4 Mkfs 1.4 がドライブの最後のパーティションを認識する際の問題</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

この問題の症状は、NetBSD 用に変換したいパーティションを作ったにもかか
わらず、Mkfs 1.4 がそのパーティションを認識しない、というものです。
<p>

この問題は、パーティションマップの「ひとつ違い」(off-by-one)エラーによっ
て生じます。このエラーは、いくつかのハードディスクフォーマットソフトウェ
ア(最新版 Apple HD SC セットアップも含む)がパーティションマップを作成
するときに、パーティションエントリー数として実際のパーティションの数より
も一個少い数をディスクに書き込むのが原因です。これにより Mkfs 1.4 が最
後のパーティションエントリーを無視します(これは正しい動作です。というの
はこのドライブは正しくフォーマットされた可能性もあるからです)。
<p>

解決するには Mkfs を 1.45 以上にアップグレードします。もし Mkfs 1.45 
以降が見つからない場合、ふたつの選択肢があります。まず、パーティション
マップを正しく作成するフォーマットソフトウェアを使うか、またはパーティ
ションマップの最後に、NetBSD で使わないパーティションを作成します。も
し MacOS パーティションをとっておくつもりなら、そのパーティションを最
後のパーティションにするのがとてもいい考えです。そうではなくディスクス
ペースを無駄にしたくない場合はサイズ 1KB のスクラッチ(scratch)パーティ
ションを最後に作る方がよいでしょう。

</dd></dl>
<hr>

<table border=0 cellpadding=0 cellspacing=0 width="100%">
  <tr><td align=left>
    <a href="info-3.html">前のページ</a> |
    <a href="info-5.html">次のページ</a>
  </td><td align=right>
    <a href="./">目次</a>
  </td></tr>
</table>

<hr>

<table width="100%"><tr><td>
<table border="0" summary="Footer navigation"><tr>
<td class="foothome"><span class="foothome"><a href="../../../"><img src="../../../../images/NetBSD-flag.png" origlink="../../../images/NetBSD-flag.png" alt="" border="0" width="90" height="90"></a></span></td>
<td class="foothome">
<span class="foothome"><a href="../../../">ホームページ</a></span><br>
</td>
</tr></table>
</td><td>
<table border="0" summary="Footer navigation"><tr>
<td class="foothome"><span class="foothome"><a href="../../../Documentation/"><img src="../../../../images/NetBSD-flag.png" origlink="../../../images/NetBSD-flag.png" alt="" border="0" width="90" height="90"></a></span></td>
<td class="foothome">
<span class="foothome"><a href="../../../Documentation/">Documentation top level</a></span><br>
</td>
</tr></table>

</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@JP.NetBSD.org">日本語:
       www@JP.NetBSD.org</a>)<br>
  $NetBSD: info-4.html,v 1.10 2004/12/21 22:50:58 kano Exp $<br>
  <a href="../../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
