<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
<!-- Copyright (c) 1998-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<link rev="made" href="mailto:www@JP.NetBSD.org">
<title>NetBSD/macppc Partitioning HOW-TO</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD/macppc パーティショニング HOW-TO</h1>

<hr>
<p>

この文書は、 4 個の部分に分かれています:
<ol>
<li><a href="#intro">はじめに (パーティションについて理解する)</a>
<li>ディスクのパーティショニング
<ul>
<li><a href="#drive-setup">Drive Setup を使ったパーティショニング</a> (MacOS 9)
<li><a href="#disk-utility">Disk Utility を使ったパーティショニング</a> (MacOS X)
<li><a href="#pdisk"><tt>pdisk</tt> と <tt>newfs</tt>
 を使ったパーティショニング</a> (MacOS 9, MacOS X, Darwin, NetBSD,  Linux)
</ul>
<li><a href="#msdos">共有 MS-DOS ファイルシステムの作成</a>
<li><a href="#nomenclature">パーティション命名規則</a>
</ol>

<p><i>注意: Linux の <tt>pdisk</tt> コマンドは、 NetBSD/macppc 用のフラグを
適切に設定しません。ディスクが Linux の <tt>pdisk</tt> を使って
パーティション分割済みの場合は、 NetBSD の <tt><a
href="#pdisk">pdisk</a></tt> を使い、パーティションを消してから
NetBSD のルートおよびスワップパーティションを作り直す必要があります。</i>

<h2><a name="intro">はじめに (パーティションについて理解する)</a></h2>
この文書では、 NetBSD/macppc と MacOS を使うためにディスクを分割する
方法を詳しく説明します。お使いのマシンのあるディスクから
あるオペレーティングシステムをブートできるかどうかは、そのマシンの
<a href="faq.html#ofw-version">Open Firmware</a> のバージョンに依ります。
全体としての目標は、 Open Firmware が理解することのでき (さらに、
そこからブートでき) 、かつ、 NetBSD カーネルが理解することができて
ルートパーティションとして使うことができるような Apple Partition Map を作成することです。

<p>4 個のディスク分割用のツールがあります: Apple の Drive Setup (MacOS
9)、 Apple の Disk Utility (MacOS X)、 NetBSD の
<a href="http://man.NetBSD.org/man/pdisk+8.macppc+NetBSD-current">
<tt>pdisk(8)</tt></a> (全 OS)、そして、 NetBSD の
<a href="http://man.NetBSD.org/man/disklabel+8.macppc+NetBSD-current">
<tt>disklabel(8)</tt></a> (NetBSD/macppc のみ) です。最初の 2 個のツール
(Drive Setup と Disk Utility) は Apple が MacOS と共に配布しており、
ブート可能な MacOS インストール CD に含まれています。これらを使って、
ディスクのパーティション分割、ファイルシステム作成、 MacOS ブートローダー
(MacOS 用語ではディスクドライバー) のインストールをすることができます。

<p><tt>pdisk</tt> プログラムはコマンドラインプログラムで、ほとんどの
unix-like システム (特に、 PowerPC ベースの Macintosh や互換機で動くシステム)
上でコンパイルおよび実行することができます。このプログラムでできることは、
ディスクのパーティション分割だけです─ブートローダーのインストールや
ファイルシステムの作成をすることはできません。

<p>NetBSD の <tt>disklabel</tt> は、 NetBSD 方式の
<a href="http://man.NetBSD.org/man/disklabel+5.macppc+NetBSD-current">
<tt>disklabel(5)</tt></a> を作成します。上述の 3 種のツールとは異なり、
これでできることは、疑似的な Apple Partition Map の作成だけです (それゆえ、
この <tt>disklabel</tt> を使って MacOS がブート可能なディスクを作ることはできません)。
ですが、これで十分です。 Open Firmware の一部のバージョンでは、
ブートローダーをインストールするのに <tt>disklabel</tt> を使う必要があります。
なお、 <tt>disklabel</tt> は NetBSD インストーラーのパーティションツールとしても使われています。

<p>以下の表で、 "yes" はそのディスクがブート可能であることを、 "mount only" は OS
がディスク上のパーティションのマウントは可能だがそこからのブートはできないことを、
"no" は OS がパーティションのマウントもディスクからのブートもできないことを意味します。

<p><table border=1 cellpadding=5>
<tr><td align=center colspan="5"><b>Open Firmware 1.0.5 または 2.0.x</b></td></tr>

<tr><td><b>OS</b></td>
<td><b>Drive Setup</b></td>
<td><b>Disk Utility</b></td>
<td><tt><b>pdisk</b></tt></td>
<td><tt><b>disklabel</b></tt></td></tr>

<tr><td><b>NetBSD</b></td>
<td>mount only</td>
<td>mount only</td>
<td>mount only</td>
<td>yes</td></tr>

<tr><td><b>MacOS 9</b></td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td></tr>

<tr><td><b>MacOS X および Darwin</b></td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td></tr>

<tr><td><b>Linux</b></td>
<td>yes</td>
<td>yes?</td>
<td>yes</td>
<td>no</td></tr>
</table>

<p><table border=1 cellpadding=5>
<tr><td align=center colspan="5"><b>Open Firmware 2.4 または 3</b></td></tr>

<tr><td><b>OS</b></td>
<td><b>Drive Setup</b></td>
<td><b>Disk Utility</b></td>
<td><tt><b>pdisk</b></tt></td>
<td><tt><b>disklabel</b></tt></td></tr>

<tr><td><b>NetBSD</b></td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td></tr>

<tr><td><b>MacOS 9</b></td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td></tr>

<tr><td><b>MacOS X および Darwin</b></td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td></tr>

<tr><td><b>Linux</b></td>
<td>yes</td>
<td>yes?</td>
<td>yes</td>
<td>no</td></tr>
</table>

<p>Apple パーティションマップは、パーティション情報を、番号の付けられたリスト
(通常はディスク上の場所の順序) の形で保持しています。最初のブートローダーが納まる
パーティション "ゼロ" は Open Firmware 1.0.5 または 2.0.x の機種向けのものです。
パーティションマップ自体はパーティション番号 1 です。 MacOS 9 の入ったディスクでは、
通常、パーティション 2 から 8 まではドライバー用に予約されています。
ユーザーが定義したパーティション (HFS、 HFS+、 UFS、 NetBSD などなど) は、
パーティション 9 (MacOS 9 のディスク) または 2 (MacOS 9 のないディスク) からになります。

<p>マシンを NetBSD/macppc でブートさせるためのコマンドを決める際に、
Open Firmware は Apple パーティションマップの番号を使うことを留意しておいてください。
<a href="#pdisk"><tt>pdisk</tt></a> を使うと、 Apple パーティションマップを、
(どの方法で作られたパーティションマップであっても) プリントアウトできます。

<p>若干混乱を招いていますが、 NetBSD/macppc は、文字 'a' から 'h' という
独自のパーティション命名規則を使っています。ルートパーティションは、
(Apple パーティションマップの位置とは関係なく) パーティション 'a' になります。
スワップパーティションはパーティション 'b' です。パーティション 'c' は、
ディスク全体を表します。 '/usr' パーティションは (もしあれば) パーティション 'g' です。
それ以外のパーティションは、残りの文字が充てられます。

<p>もっと筋道だった説明は、後述の
<a href="#nomenclature">パーティション命名規則</a>の節を見てください。

<p>あなたが取り扱う可能性のあるファイルシステムは、実に多岐にわたります。
簡単に説明しますと、 HFS は 80 年代から使われてきた Apple 旧来のファイルシステムです。
HFS+ (「拡張」ファイルシステムともいう) は HFS の拡張版で、より大きな容量の
ファイル (やファイルシステム) を使うことができ、 unix 的なファイル所有者や
パーミッションを持つことができます。 HFS+ は、 MacOS &gt;  8.1 (MacOS X を含む)
での推奨ファイルシステム型です。 UFS は、古き良き BSD FFS の、 NeXT 由来の
Apple 版です。 MS-DOS (FAT ともいう) は、 MS-DOS/Windows プラットフォームで
標準化されているファイルシステムです。 BSD FFS は、 80 年代からほとんどの
BSD unix-like OS (NetBSD も含む) で使われてきた標準的なファイルシステムです。
ext2fs は linux で最も一般的なファイルシステムです。

<p>他の OS と共有するパーティションを用意するかどうか、
検討したい方もいるでしょう。もっとも互換性の高いフォーマットは MS-DOS FAT
ですが、機能が足りません (パーミッションや、よい修復ツールなどです)。
残念ながら NetBSD は Macintosh HFS および HFS+ システムをネイティブでは
まだサポートしていません。 NetBSD-current では Apple の UFS を完全にサポートしています。
以下に早見表を掲げます:

<p><table border=1 cellpadding=5>
<tr><td>フォーマット</td>
 <td>MacOS 8.1-9.x</td>
 <td>MacOS X および Darwin</td>
 <td>NetBSD</td>
 <td>Linux</td></tr>
<tr><td>Apple HFS</td>
 <td>yes</td>
 <td>yes</td>
 <td>
<a href="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/sysutils/hfsutils/README.html">hfstools</a>
 </td>
 <td>yes&nbsp;(1)</td></tr>
<tr><td>Apple HFS+</td>
 <td>yes</td>
 <td>yes</td>
 <td>no</td>
 <td>read-only&nbsp;(2)</td></tr>
<tr><td>Apple UFS</td>
 <td>no</td>
 <td>yes</td>
 <td>-current</td>
 <td>read-only</td></tr>
<tr><td>MS-DOS FAT</td>
 <td>File Exchange</td>
 <td>yes</td>
 <td>yes</td>
 <td>yes</td></tr>
<tr><td>BSD FFS</td>
 <td>no</td>
 <td>no</td>
 <td>yes</td>
 <td>read-only</td></tr>
<tr><td>Linux ext2fs</td>
 <td>no</td>
 <td>yes&nbsp;(3)</td>
 <td>yes</td>
 <td>yes</td></tr>
</table>

<p>1 - 安定している
<a href="http://www.mars.org/home/rob/proj/hfs/">hfsutils</a>、 または
実験的なカーネルサポートを使用します。
<br>2 - 実験的な
<a href="http://ftp.penguinppc.org/projects/hfsplus/">hfsplus</a> utils、
または実験的な
<a href="http://sourceforge.net/projects/linux-hfsplus">linux-hfsplus</a>
カーネルモジュールを使用します。
<br>3 - 非常に実験的な
<a href="http://sourceforge.net/projects/ext2fsx/">Ext2 Filesystem</a>
カーネル拡張を使用します。

<p>MacOS 9 と共有可能なパーティションを作りたければ、 HFS
パーティションを作り、あとで MS-DOS フォーマットへ変換するのがよいです。
ディスクを分割してから<a href="#msdos">共有 MS-DOS ファイルシステムの作成</a>
を見てください。

<p>Classic MacOS のことは気にしないのであれば、おそらく UFS
が最良の選択肢です。 MacOS X か Darwin で UFS パーティションを作り、
-current NetBSD を使うようにするだけです。 UFS は次の NetBSD
メジャーリリースではサポートされる予定です (つまり 1.6.x 枝ではサポートされません)。

<p>パーティショニングは、ドライブの内容を消去しますので、
分割しようとするディスクをすべてバックアップしてください。
あなたが使おうとしているツールの説明に従ってください。

<ul>
<li><a href="#drive-setup">Drive Setup を使ったパーティショニング</a> (MacOS 9)
<li><a href="#disk-utility">Disk Utility を使ったパーティショニング</a> (MacOS X)
<li><a href="#pdisk"><tt>pdisk</tt> と <tt>newfs</tt></a>
 を使ったパーティショニング (MacOS 9, MacOS X, Darwin, NetBSD,  Linux)
<li><tt>disklabel(8)</tt> は、 <a 
 href="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-1.6.1/macppc/INSTALL.html">
 NetBSD 1.6.1 インストールノート</a>のやり方に従うと、 <tt>sysinst</tt>
 インストーラーが作成します。
</ul>

<h2><a name="drive-setup">Drive Setup を使ったパーティショニング</a> (MacOS 9)</h2>
<ol>
<li>Drive Setup はバージョン 1.8.1 以降が必要です。このバージョンは
MacOS 9.0 に附属のバージョンです。バージョンがわからない場合は、
(訳註: Finder で) Drive Setup を選び、 <tt>File</tt> メニューから
<tt>Get Info</tt> します。
<p>
<img src="../../../images/ports/macppc/drive-setup.gif" origlink="../../images/ports/macppc/drive-setup.gif"
 width="354" height="401" alt="drive setup">
<p>
古いバージョンの MacOS をお使いの場合、
<a href="http://docs.info.apple.com/article.html?artnum=60791">MacOS 
9.0.4</a> (12.2 MB)、
<a href="http://docs.info.apple.com/article.html?artnum=75103">MacOS 9.1</a>
 (71 MB)、
<a href="http://docs.info.apple.com/article.html?artnum=120030">MacOS
9.2.1</a> (82 MB)、または
<a href="http://docs.info.apple.com/article.html?artnum=75186">MacOS 
9.2.2</a> (21.3 MB) アップデートをダウンロードできます。
これらには、使えるバージョンの Drive Setup が含まれています。
これらは大きな MacOS アップデートであり、 500 KB の Drive Setup
アプリケーションの入手のために、メガバイト級のディスクイメージを
ダウンロードする必要があることに注意してください。
Apple は、最近のバージョンの Drive Setup を単体では提供していません。
<p>
また、
<a href="http://www.opensource.apple.com/projects/darwin/1.4/release.html">Darwin 
インストーラー</a>にも、使えるバージョンの Drive Setup が含まれます。
オペレーティングシステム一式を含んでいるため、 Darwin も巨大 (120.7 MB)
です。
<p>
ディスクイメージを開き、 Drive Setup をハードドライブ、 RAM ディスク、
Zip ディスク、フロッピーディスク等にコピーします (Drive Setup
はディスクイメージからは実行できません) 。

<p><li>Drive Setup を最初に走らせると、次のような画面が出ます。
ここで、再分割しようとするドライブを選びます。
<p>
<img src="../../../images/ports/macppc/drive-selection.gif" origlink="../../images/ports/macppc/drive-selection.gif"
 width="328" height="257" alt="select a drive">
<p>
再分割するドライブを選び、 <tt>Initialize...</tt> ボタンをクリックします。
すると別のダイアログが出ます。 <tt>Custom Setup...</tt>
ボタンをクリックします。
<p>
<img src="../../../images/ports/macppc/initialize.gif" origlink="../../images/ports/macppc/initialize.gif"
 width="330" height="244" alt="initialize">

<p><li>使う予定のパーティションの数を選びます。おそらく、少なくとも
5 パーティションは必要でしょう。インストールノートの提示を参照してください。
<p>
<img src="../../../images/ports/macppc/custom-setup.gif" origlink="../../images/ports/macppc/custom-setup.gif"
 width="480" height="355" alt="custom setup">
<p>
パーティション数を変えると、 <tt>Volumes</tt> の情報はすべて消えるので、
まず最初に <tt>Partitioning Scheme</tt> を選んでください。

<p><li>各 <tt>Volumes</tt> ごとに、 <tt>Volume Info</tt> にある <tt>Type:</tt>
と <tt>Size:</tt> を、インストールノートに提示されているように設定します。
<p>
<img src="../../../images/ports/macppc/custom-type.gif" origlink="../../images/ports/macppc/custom-type.gif"
 width="480" height="428" alt="custom type">
<p>
<tt>Volumes</tt> の移動には <tt>TAB</tt> キーが使えます。

<p><li>設定が済むと、次のようになるはずです (MacOS パーティション名は、
後ほど Finder から設定します):
<p>
<img src="../../../images/ports/macppc/suggested-layout.gif" origlink="../../images/ports/macppc/suggested-layout.gif"
 width="480" height="355" alt="suggested layout">

<p><li><tt>OK</tt> ボタンをクリックします。すると、
変更について確認を求めてきます。
<p>
<i>ここまでくると、やり直せません ! ここで、確認に同意すると、
ドライブの内容はすべて消去されます</i>

<p><li>パーティショニングと HFS(+) パーティションの作成が済むと、
最初の画面に戻ります。
<p>
<img src="../../../images/ports/macppc/drivesetup-done.gif" origlink="../../images/ports/macppc/drivesetup-done.gif"
 width="328" height="257" alt="after partitioning">
<p>
注意: <tt>A/UX</tt> パーティションは MacOS からはアクセスできません。

<p><li>Drive Setup での作業は完了し、 Drive Setup を終了できます。
これで、 Finder から、 HFS(+) パーティションの名前を変更できます。
Open Firmware 1.0.5 または 2.0.x の機種では、これで完了です─
インストールノートに従い、作業を続けてください。

<p>Open Firmware 2.4 または 3 の機種では、ディスクを NetBSD ブート可能に
するために、もう一段階必要です。

<p><tt>ofwboot.xcf</tt> (ブートローダー) と、 <tt>netbsd.GENERIC_MD.gz</tt>
または <tt>netbsd.ram.gz</tt> (インストーラー) を、 HFS(+) パーティションの
ひとつにコピーする必要があります。これらのファイルは
<tt>バイナリー</tt>モードでダウンロードしてあることを確認しておいてください。
</ol>

<h2><a name="disk-utility">Disk Utility を使ったパーティショニング</a> (MacOS X)</h2>
<p>MacOS X の Disk Utility プログラムは NetBSD パーティションを直接作ることは
できませんが、最終的に NetBSD パーティションを作る方法はあります。
Disk Utility の利点は、 MacOS X インストール CD から利用可能なことです。
Disk Utility が作成可能なのは、 "Mac OS Extended" (HFS+)、 "Mac OS Standard"
(HFS)、 "UNIX File System" (UFS) および "Free Space" パーティションのみです。

<p>NetBSD/macppc -current カーネルは UFS パーティションを使うことができ、
ルートパーティションであっても使うことができます。現状、通常の NetBSD
A/UX-形式で利用可能なパーティションが存在しない場合に、 NetBSD/macppc
は UFS パーティションがルートであるとの仮定をするようにはなっていません。
NetBSD に、どのパーティション (たとえば "e") が UFS であるとみなすかを
教えてやる必要や、<a href="faq.html#dash-a">ルートデバイス</a>が UFS
であることを指定したカーネルを作る必要があるかもしれません。

<p>これでは足りないという場合、 Disk Utility で MacOS HFS+ を作り、
NetBSD 用に free space を残しておくという使い方ができます。
あとは <a href="#pdisk"><tt>pdisk</tt></a> を使って NetBSD
パーティションを作る必要があります。

<p><ol>
<p><li>Disk Utility を起動します。インストール CD から使う場合は "Install" メニューにあります。
MacOS X から使う場合は /Applications/Utilities/Disk Utility を開きます。

<p><li>ここで認証が必要かもしれません。ウィンドウ左下で "Click the lock to make
changes." といわれた場合は、錠前をクリックしてパスワードを入力します
(管理者用のアカウントを使っていますよね?)。

<p><li>左側のパネルで、ディスクを選びます。 "Partition" タブを
クリックします。 "Volume Scheme" (つまり、必要なパーティション数)
を選びます。

<p><li>パーティションの名前、フォーマットとサイズを設定します。ヒント:
推奨より小さいパーティションを作るには、サイズ欄に数字を入れ、それを
パーティションサイズにするため enter キーを押します。 "Mac OS Extended"
HFS+ パーティションの最小サイズは 4 MB です。例えば、筆者の 2 パーティションの
ディスク (<tt>ofwboot.xcf</tt> 用の小さい HFS パーティションと NetBSD 用の大きな
UFS パーティション) では、このようになります:
<p>
<img src="../../../images/ports/macppc/diskutil-hfs.gif" origlink="../../images/ports/macppc/diskutil-hfs.gif" width="705" height="519"
 alt="small HFS partition">
<p>
<img src="../../../images/ports/macppc/diskutil-ufs.gif" origlink="../../images/ports/macppc/diskutil-ufs.gif" width="705" height="519"
 alt="large NetBSD UFS partition">

<p><li>MacOS 9 のディスクドライバーをどこにインストールするか選択します。
今後  MacOS 9 かそれより前から、このディスクのパーティションのどれかへ
アクセスするつもりがある場合、これが唯一の機会です。ここでボタンをクリック
しなかった場合、 MacOS 9 からは HFS パーティションにすらアクセスできなくなります。

<p><li>OK をクリックして先へ進みます。

<p><li>これで Disk Utility 抜けて結構です。作業は終わりました。これで、
Finder から HFS(+) や UFS パーティションの名前を変えられます。 Open Firmware
1.0.5 または 2.0.x の機種の場合、これで完了です─ INSTALL ノートに従って
作業を続けてください。
<p>
Open Firmware 2.4 または 3 の機種で、このディスクを NetBSD のブートに
使えるようにする場合は、さらに以下の手順を踏む必要があります。
<p>
<tt>ofwboot.xcf</tt> (NetBSD 用のブートローダー) を、ドライブの HFS(+)
パーティションのひとつにコピーする必要があります。 <tt>netbsd.GENERIC_MD.gz</tt>
を UFS パーティションにコピーします (これは HFS(+)
パーティションに置いておくこともできますが)。これらのファイルは
<tt>バイナリー</tt>モードでダウンロードしてあることを確認しておいてください。

<p>UFS をルートパーティションに使うために -current カーネルが必要であること、
NetBSD がこのパーティションをパーティション "a" であると認識しない可能性があることに注意してください。
</ol>

<h2><a name="pdisk"><tt>pdisk</tt></a> と <tt>newfs</tt> を使ったパーティショニング
(MacOS 9, MacOS X, Darwin, NetBSD, Linux)</h2>
コマンドラインの <tt>pdisk</tt> ユーティリティーは、ディスク上の Apple
パーティションマップの閲覧と修正に使われます。 NetBSD、 MacOS X、 Darwin
はいずれも、 <tt>pdisk</tt> でパーティション分割されたディスクをマウント可能です。
MacOS 9 およびそれ以前は、これをマウントするには特別なドライバーのインストールが
必要です (<a href="#drive-setup">Drive Setup</a> と <a href="#disk-utility">Disk
Utility</a> 参照)。 <tt>pdisk</tt> は、 Open Firmware 2.4 または 3 の機種で
NetBSD、 MacOS X、 Darwin のブート可能なパーティションマップを作成可能です。

<p>さらに、 <tt>pdisk</tt> は別のユーティリティーで作ったパーティションマップの修正や、
単にディスクのパーティションマップのリストを見るためにも使えることがおわかりでしょう。
ディスクのパーティションマップのリストを見たいだけの場合は、
1 から 4 までの手順に従ってください。

<p>始める前に、パーティショニングに関していくらか警告しておきます:
<ul>
<p><li>(MacOS ユーティリティーで作ったパーティションマップを単に修正するのではなく)
 パーティションマップを <tt>pdisk</tt> で一から作った場合、このディスク上の
 パーティションは MacOS 9 およびそれ以前からはアクセスできなくなります。
<p><li>MacOS X、 Darwin や Linux のネイティブな <tt>pdisk</tt> では、
 NetBSD A/UX-形式のパーティションを作ることはできません。
<p><li>MacOS 9 の <tt>pdisk</tt> は、やや旧式のものであり、
 以下の説明とは若干異なる動作をすることがありますが、それでも使用可能です。
<p><li>MacOS X および Darwin では、使用中のドライブに <tt>pdisk</tt>
 パーティションマップを書き込むことができません。つまり、ブートドライブの
 分割し直しはできないということです。別のディスクからブートして作業してください
 (または、 <a href="http://charlessoft.com/">BootCD</a> 等のツールでブート可能な CD を作ってください)。
</ul>

<p><tt>pdisk</tt> によってリストされるパーティション番号は、 Open Firmware
が使っているものと同じものです。 Open Firmware 2.4 または 3 の機種で
ディスクをブート可能にしようとする場合は、 <tt>Apple_HFS</tt>
パーティションに <tt>ofwboot.xcf</tt> を置くことと、 <tt>Apple_UNIX_SVR2</tt>
または <tt>Apple_UFS</tt> パーティションを NetBSD
ルートパーティションにすることを忘れないでください。

<p><ol>
<p><li><tt>pdisk</tt> を入手する。<br>
<ul>
<p><li>NetBSD -current では、 <tt>/sbin/pdisk</tt><br>

<p><li>NetBSD 1.6.x では、 <a 
href="ftp://ftp.NetBSD.org/pub/NetBSD/arch/macppc/netbsd-pdisk/netbsd-pdisk.macppc-1-6">
ftp://ftp.NetBSD.org/pub/NetBSD/arch/macppc/netbsd-pdisk/netbsd-pdisk.macppc-1-6
 </a><br>
 <tt># <b>chmod 755 netbsd-pdisk.macppc-1-6</b></tt>

<p><li>MacOS X 10.2.5 (MacOS X 10.1.5 でも動作することがわかっています) では、 <a
href="ftp://ftp.NetBSD.org/pub/NetBSD/arch/macppc/netbsd-pdisk/netbsd-pdisk.macos-10-2">
ftp://ftp.NetBSD.org/pub/NetBSD/arch/macppc/netbsd-pdisk/netbsd-pdisk.macos-10-2</a>
 <br>
 <tt># <b>chmod 755 netbsd-pdisk.macos-10-2</b></tt>

<p><li>MacOS 9 では、 <a
 href="ftp://ftp.NetBSD.org/pub/NetBSD/arch/macppc/macos-utils/pdisk.sea.hqx">
 ftp://ftp.NetBSD.org/pub/NetBSD/arch/macppc/macos-utils/pdisk.sea.hqx</a><br>
 アーカイブを伸長し、<tt>pdisk ppc</tt> を実行する

<p><li>それ以外 (MacOS X、 Darwin、 Linux) では、 <a
href="ftp://ftp.NetBSD.org/pub/NetBSD/arch/macppc/netbsd-pdisk/netbsd-pdisk.src.20030424.tgz">
ftp://ftp.NetBSD.org/pub/NetBSD/arch/macppc/netbsd-pdisk/netbsd-pdisk.src.20030424.tgz</a>
 <br>
<tt># <b>tar xzf netbsd-pdisk.src.20030424.tgz</b><br>
# <b>make</b></tt>
</ul>

<p><li>閲覧またはパーティション再分割しようとしているディスクのデバイス名前を
調べます。パーティション再分割する場合は、そのディスクのマウントされている
パーティションはすべてアウマウントします。

<ul>
<p><li>NetBSD:<br>
 <tt># <b>dmesg | grep \[sw\]d\[0-9\]</b></tt><br>
 <tt># <b>umount /mountpoint</b></tt>
<p><li>MacOS 9:<br>
 ディスクのアイコンをゴミ箱に捨てます。<br>
 <tt>pdisk ppc</tt> を開き、 <tt><b>L</b></tt> をタイプしてディスク、その偽名、
 パーティションを列挙させます
<p><li>MacOS X および Darwin:<br>
 <tt># <b>/usr/sbin/diskutil list</b></tt><br>
 <tt># <b>/usr/sbin/disktool -u disk2</b></tt>
<p><li>Linux:<br>
 <tt># <b>dmesg | grep \[hs\]d\[a-g\]</b></tt><br>
 <tt># <b>umount /mountpoint</b></tt>
</ul>

<p><li><tt>pdisk /dev/<i>disk-device</i></tt> を実行します。ここで
<i>disk-device</i> は以下のようになります:
<ul>
<p><li>NetBSD では <tt>/dev/sd2c</tt> ("<tt>c</tt>" パーティションを使用)
<p><li>MacOS X および Darwin では <tt>/dev/disk2</tt> (パーティション名は指定しない)
<p><li>Linux では <tt>/dev/hdc</tt> (パーティション名は指定しない)
</ul>

<pre>  # <b>./pdisk /dev/disk2</b>
  Edit /dev/disk2 -
  Command (? for help): <b>?</b>
  Notes:
    Base and length fields are blocks, which vary in size between media.
    The base field can be &lt;nth&gt;p; i.e. use the base of the nth partition.
    The length field can be a length followed by k, m, g or t to indicate
    kilo, mega, giga, or tera bytes; also the length can be &lt;nth&gt;p; i.e. use
    the length of the nth partition.
    The name of a partition is descriptive text.
  
  Commands are:
    C    (create with type also specified)
    c    create new partition (standard unix root)
    d    delete a partition
    h    help
    i    initialize partition map
    n    (re)name a partition
    P    (print ordered by base address)
    p    print the partition table
    q    quit editing
    r    reorder partition entry in map
    s    change size of partition map
    t    change a partition's type
    w    write the partition table</pre>
	
<p><li>作業対象のディスクが正しいか、再確認します。 Apple
パーティションマップがすでにあれば、大丈夫なはずです。

<pre>  Command (? for help): <b>P</b>

  Partition map (with 512 byte blocks) on '/dev/disk0'
   #:                type name             length   base    ( size )
   1: Apple_partition_map Apple                63 @ 1      
   2:      Apple_Driver43*Macintosh            56 @ 64     
   3:      Apple_Driver43*Macintosh            56 @ 120    
   4:    Apple_Driver_ATA*Macintosh            56 @ 176    
   5:    Apple_Driver_ATA*Macintosh            56 @ 232    
   6:      Apple_FWDriver Macintosh           512 @ 288    
   7:  Apple_Driver_IOKit Macintosh           512 @ 800    
   8:       Apple_Patches Patch Partition     512 @ 1312   
   9:          Apple_Free                     192 @ 1824   
  10:           Apple_UFS shared          1700000 @ 2016    (830.1M)
  11:           Apple_HFS macos            408788 @ 1702016 (199.6M)
  12:          Apple_Free                       8 @ 2110804

  Device block size=512, Number of Blocks=2110812 (1.0G)
  DeviceType=0x0, DeviceId=0x0
  Drivers-
  1:  23 @ 64, type=0x1
  2:  36 @ 120, type=0xffff
  3:  21 @ 176, type=0x701
  4:  34 @ 232, type=0xf8ff</pre>

もし Apple パーティションマップ (APM) がなければ、エラーが出ますし、
新しいパーティションを作る前に APM の初期化が必要です。

<pre>  Command (? for help): <b>P</b>
  No partition map exists
  Command (? for help): <b>i</b>
  read failed
  Command (? for help): <b>P</b>

  Partition map (with 512 byte blocks) on '/dev/rdisk2'
   #:                type name    length   base    ( size )
   1: Apple_partition_map Apple       63 @ 1      
   2:          Apple_Free Extra  2110749 @ 64      (1.0G)

  Device block size=512, Number of Blocks=2110812 (1.0G)
  DeviceType=0x0, DeviceId=0x0</pre>

<p><li>未使用パーティションを削除し、新しいパーティションを作ります。
<tt>Apple_Free</tt> パーティションは、自動的に未使用領域に計上されますので、
削除する必要はありません。

<p><tt>P</tt> コマンドでパーティションの一覧を表示し、
正しくパーティションを削除したか確認します。
<pre>  Command (? for help): <b>d</b>
  Partition number: <b>9</b></pre>

作成される有用なパーティション型には、以下のようなものがあります:
<p><table border=1 cellpadding=5>
<tr><td><tt>Apple_HFS</tt></td>
<td>HFS および HFS+ パーティション (<a href="#msdos">共有
 MS-DOS</a> パーティションもこれ)</td></tr>
<tr><td><tt>Apple_UFS</tt></td>
<td>UFS パーティション</td></tr>
<tr><td><tt>Apple_UNIX_SVR2</tt></td>
<td>NetBSD および Linux 用の A/UX-形式パーティション</td></tr>
</table>

<pre>  Command (? for help): <b>C</b>
  First block: <b>2p</b>
  Length in blocks: <b>100m</b>
  Name of partition: <b>Zathras</b>
  Type of partition: <b>Apple_HFS</b>
  Command (? for help): <b>C</b>
  First block: <b>3p</b>
  Length in blocks: <b>800m</b>
  Name of partition: <b>netbsd</b>
  Type of partition: <b>Apple_UNIX_SVR2</b>
  Available partition slices for Apple_UNIX_SVR2:
    a   root partition
    b   swap partition
    c   do not set any bzb bits
    g   user partition
  Other lettered values will create user partitions
  Select a slice for default bzb values: <b>a</b>
  Command (? for help): <b>C</b>
  First block: <b>4p</b>
  Length in blocks: <b>4p</b>
  Name of partition: <b>swap</b>
  Type of partition: <b>Apple_UNIX_SVR2</b>
  Available partition slices for Apple_UNIX_SVR2:
    a   root partition
    b   swap partition
    c   do not set any bzb bits
    g   user partition
  Other lettered values will create user partitions
  Select a slice for default bzb values: <b>b</b>
  Command (? for help): <b>P</b>

  Partition map (with 512 byte blocks) on '/dev/rdisk0'
   #:                type name     length   base    ( size )
   1: Apple_partition_map Apple        63 @ 1      
   2:           Apple_HFS Zathras  204800 @ 64      (100.0M)
   3:     Apple_UNIX_SVR2 netbsd  1638400 @ 204864  (900.0M) S0 RUFS k0  /
   4:     Apple_UNIX_SVR2 swap     267548 @ 1843264 (130.6M) S1  SFS k0  (swap)

  Device block size=512, Number of Blocks=2110812 (1.0G)
  DeviceType=0x0, DeviceId=0x0</pre>

<p><li>新しいパーティションを書き出し、 pdisk を終了します。

<pre>  Command (? for help): <b>w</b>
  Writing the map destroys what was there before. Is that okay? [n/y]: <b>y</b>
  Command (? for help): <b>q</b></pre>

<p><li>新しいファイルシステムを作ります。
<p><ul>
<p><li>NetBSD は、ルートおよびユーザーパーティションとして固有のファイルシステム
(FFS) しか作ることができません。 UFS、 HFS、 HFS+ や、フロッピーサイズ以外の MS-DOS
ファイルシステムを直接作ることはできません。 HFS ファイルシステムの作成には <a
href="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/sysutils/hfsutils/README.html">
hfstools</a> を使うことができます。<br>
<tt># <b>newfs /dev/sd2a</b></tt><br>
<tt># <b>hformat /dev/sd2e</b></tt>

<p><li>MacOS 9 は、リブートすると HFS と HFS+ ファイルシステムの作成を要求してきます。
リブート後、 OS は新しいパーティションマップを認知し、このパーティションに
ファイルシステムがないことを警告して、ファイルシステムを作るよう求めてきます。
共有 MS-DOS パーティションのフォーマット方法は、
<a href="#msdos">共有 MS-DOS ファイルシステムの作成</a> を見てください。

<p><li>MacOS X および Darwin は、 UFS、 HFS+ および HFS パーティションを作ることができます。
NetBSD FFS やフロッピーサイズ以外の MS-DOS ファイルシステムをコマンドラインユーティリティーを使って
作ることはできません。 MacOS 8.0 やそれ以前を使うことを考えない限り、
(拡張ではない通常の) HFS パーティションは必要ないはずです。<br>
<tt># <b>newfs_hfs /dev/disk2s2</b></tt> (for HFS+)<br>
<tt># <b>newfs /dev/disk2s5</b></tt> (for UFS)

<p><li>Linux は、ルート用の Linux 固有のファイルシステム (ext2fs)、スワップ、
ユーザーパーティションおよび MS-DOS ファイルシステムを作ることしかできません。
UFS、 HFS および HFS+ を直接作ることはできません。 HFS ファイルシステムは、 <a
href="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/sysutils/hfsutils/README.html">
hfstools</a> を使って作ることができます。<br>
<tt># <b>mkfs -t ext2 /dev/hdc2</b></tt><br>
<tt># <b>mkdosfs /dev/hdc3</b></tt><br>
<tt># <b>hformat /dev/hdc5</b></tt>
</ul>

<p><li>新しいファイルシステムをマウントします。
<p><ul>
<p><li>NetBSD (FFS でも UFS でも同じコマンドを使います):<br>
<tt># <b>mount /dev/sd2a /mnt</b></tt><br>
<tt># <b>hmount /dev/sd2e</b></tt> (virtual mount)

<p><li>MacOS X および Darwin:<br>
<pre>  # <b>/sbin/autodiskmount -v</b>
  ** /dev/rdisk2s2
  FILESYSTEM CLEAN; SKIPPING CHECKS
  ** /dev/rdisk2s5
  QUICKCHECK ONLY; FILESYSTEM CLEAN
  Mounted ufs /dev/disk0s5 on /Volumes/untitled
  DiskDev    Type   FileSys  Fixed Write Volume Name      Mounted On      
  disk2s2    ???    hfs      yes   yes   untitled         /Volumes/untitled
  disk2s5    ???    ufs      yes   yes   untitled         /Volumes/untitled 1
  disk0s10   ???    hfs      yes   yes   OSX              /</pre>

<p><li>Linux:<br>
<tt># <b>mount -t ufs -o ufstype=44bsd,ro /dev/hdc1 /mnt/netbsd</b></tt> 
 (BSD FFS)<br>
<tt># <b>mount -t ufs -o ufstype=openstep,ro /dev/hdc2 /mnt/macosx</b></tt>
 (OSX UFS)<br>
<tt># <b>hmount /dev/hdc3</b></tt> (hfsutils の仮想的な mount)<br>
<tt># <b>mount -t hfs /dev/hdc3 /mnt/macos</b></tt> 
 (実験的なカーネル内 HFS)<br>
<tt># <b>hpmount /dev/hdc4</b></tt> (hfsplus utils の仮想的な mount)<br>
<tt># <b>mount -t hfsplus -o ro /dev/hdc4 /mnt/macosx</b></tt> 
 (実験的なカーネル内 HFS+)<br>
<tt># <b>mount -t ext2 /dev/hdc5 /mnt/linux</b></tt> (linux ext2fs)
</ul>

<p><li>Open Firmware 1.0.5 または 2.0.x の機種では、
<tt>netbsd.GENERIC_MD.gz</tt> (インストーラー) を FFS または UFS
パーティションにコピーしておくとよいでしょう。このファイルのダウンロードは
<tt>バイナリー</tt>モードでダウンロードしてあることを確認しておいてください。
ブートするためにはさらに <tt>ofwboot.xcf</tt> を別のところからロードする必要があります。

<p>Open Firmware 2.4 または 3 の機種で、このディスクから NetBSD
がブート可能なようにするためには、 <tt>ofwboot.xcf</tt> (ブートローダー)
をHFS(+) パーティションのひとつにコピーする必要があります。 NetBSD から行なうには
<tt>hcopy</tt> コマンドを使います。 <tt>netbsd.GENERIC_MD.gz</tt> (インストーラー)
を FFS または UFS パーティションにコピーします (これは HFS(+)
パーティションに置いておくこともできますが)。これらのファイルは
<tt>バイナリー</tt>モードでダウンロードしてあることを確認しておいてください。

<p>UFS をルートパーティションに使うために -current カーネルが必要であること、
NetBSD がこのパーティションをパーティション "a" であると認識しない可能性があることに注意してください。

</ol>

<h2><a name="msdos">共有 MS-DOS ファイルシステムの作成</a></h2>
<p>すべての OS で利用可能な、 MS-DOS フォーマットのパーティションを作ることができます。
古い MacOS ではこれを自動的にマウントしますし、 
unix-like OS (NetBSD、 Linux、 Darwin、 MacOS X) では
<tt>mount_msdos</tt> コマンドを使ってマウントできます。
以下に、最も素直な方法の手順を概説します。

<p><ol>
<li>ハードドライブのパーティションを切り、 MS-DOS 用に HFS
パーティション (type <tt>Apple_HFS</tt>) を確保しておきます。

<p><li>次に、 MacOS 8.1-9.x をブートし、
<a href="http://hyperarchive.lcs.mit.edu/cgi-bin/NewSearch?key=disk+charmer&amp;search=&amp;sp=sp">
Disk Charmer</a> または
<a href="http://www.versiontracker.com/moreinfo.fcgi?id=1253">DiskCharmer</a>
を入手し、 MS-DOS ファイルシステムを作るよう設定します。
設定画面は次のようになるはずです:
<p>
<img src="../../../images/ports/macppc/diskcharmer.gif" origlink="../../images/ports/macppc/diskcharmer.gif" width="405" height="251"
alt="screenshot of DiskCharmer">

<p><li>パーティションを DiskCharmer のウィンドウ上にドラッグします。すると、
最初に作った HFS パーティションを消去し、そこに MS-DOS ファイルシステムを
作る前に、プロンプトが出ます。

<p><li>これで、古い MacOS をブートしたら、このパーティションが PC Exchange
または File Exchange (これの呼び名は MacOS のバージョンによります)
によって自動的にマウントされるようになりました。

<p>MacOS X、 Linux や NetBSD をブートしたときは、次のコマンドを実行します:
<pre>mkdir -p /msdos.filesystem;/sbin/mount_msdos -m 777 /dev/disk0s11 /msdos.filesystem</pre>

ここで <tt>/msdos.filesystem</tt> はあなたが決めたマウントポイント、
<tt>/dev/disk0s11</tt> はそのパーティションのデバイス名です。あるいは、
NetBSD や Linux では、 <tt>/etc/fstab</tt> に項目を追加して、
このファイルシステムがいつもマウントされるようにもできます。

<p><li>MacOS X や Darwin で MS-DOS ファイルシステムを自動的にマウントする
ためには、 System Startup ファイル群を作成する必要があります。
<a href="http://www.darwinfo.org/howto/SystemStarter_HOWTO.shtml">SystemStarter
HOWTO</a> が、スタートアップファイル群の作成方法を学ぶうえでのよい参考資料と
なるでしょう。 <tt>autodiskmount</tt> を使った方法もおそらくあるのでしょうが、
ここで説明する方法でうまくいきます。唯一の欠点は、 MS-DOS ファイルシステムが
Classic 環境では扱えないことです。
以下に例を示します:
<p>
<ol>
<li><tt># <b>mkdir -p /Library/StartupItems/MountMSDOS</b></tt>
<p><li>以下の内容を持つファイル
   <tt>/Library/StartupItems/MountMSDOS/StartupParameters.plist</tt>
   を作成します:
<pre>{
  Description     = "Mount MSDOS partitions";
  Provides        = ("Manual MSDOS partitions");
  Requires        = ("Disks");
  OrderPreference = "None";
  Messages =
  {
    start = "Mounting MSDOS partitions";
    stop  = "Unmounting MSDOS partitions";
  };
}</pre>
<p><li>以下の内容を持つファイル
   <tt>/Library/StartupItems/MountMSDOS/MountMSDOS</tt>
   を作成します:
<pre>#!/bin/sh

. /etc/rc.common

##
# Manually mount HFS partition with MS-DOS filesystem
##

ConsoleMessage "Mount MS-DOS partitions"

##
# Mount your filesystems manually.
##
mount_msdos /dev/disk0s11 /Volumes/Thingies</pre>
<p><li>
  <tt># <b>chown -R root /Library/StartupItems/MountMSDOS</b></tt><br>
  <tt># <b>chmod a+rx /Library/StartupItems/MountMSDOS/MountMSDOS</b></tt>
</ol>
</ol>


<h2><a name="nomenclature">パーティション命名規則</a></h2>
<p>NetBSD/macppc を使うときに、あなたが関わるであろうパーティション特定方式は
三種類あります。各方式は、ディスク上のパーティション位置は変わらないにもかかわらず、
異なるやり方でパーティションの順序を変えます。
方式によっては、一部のパーティションを隠します。

<p><ol>
<p><li><b>ディスク上の実際の順序 (0 から最大のパーティション番号まで):</b><br>

これは、 Open Firmware や、 MacOS X と Darwin の <tt>/dev/diskXsY</tt>
デバイスファイルが使っている方式です。パーティションの順序は、
Drive Setup や pdisk や NetBSD のパーティショニングツールにおける順序
そのままです。この方式によるパーティション一覧は、各 OS で <a
href="partitioning.html#pdisk">pdisk</a> を使ってプリントアウトできます。

<p><table border=1 cellpadding=5>
 <tr><td>0</td>
 <td>最初の段階のブートローダーのために予約された、特別な "パーティション"</td></tr>
 <tr><td>1</td>
 <td>Apple パーティションマップ。</td></tr>
 <tr><td>2 から ~8</td>
 <td>MacOS のツールでフォーマットされたドライブでは、 MacOS 9 ドライバー
  のために予約されている。そうでない場合は、ユーザーが作ったパーティション。</td></tr>
 <tr><td>~9 から ~15</td>
 <td>ユーザーが作ったパーティション、配置はディスクの物理的な位置の順。
  </td></tr>
 </table>

<p><li><b>MacOS で見えるパーティション (Finder 上のパーティション名による):</b><br>
Drive Setup でパーティションの群を作ったかもしれませんが、
この MacOS で見えるパーティションだけが Finder で表示されます。

<p>MacOS 9 以前で見えるパーティションは、 HFS、 HFS+ または MS-DOS フォーマット
でフォーマットされたものだけです。 MacOS X 以降で見えるパーティションは、
HFS、 HFS+、 UFS および MS-DOS (NetBSD の 4.2BSD FFS では <i>ありません</i>)
でフォーマットされたものだけです。

<p><li><b>NetBSD で見えるパーティション (<tt>disklabel</tt> で見られるとおりの
 a から h までの文字):</b><br>
NetBSD は、自分が処理しやすいような形にパーティションを並べ替えます。
<tt>disklabel(8)</tt> で得られる <tt>fstype</tt> は、
Apple パーティションマップのフラグによっており、パーティション上の実際の
ファイルシステム (NetBSD FFS、 Apple HFS や MS-DOS) によってはいません。
特に、 MS-DOS フォーマットのパーティションは、それが<a href="#msdos">
共有 MS-DOS ファイルシステムの作成</a>の方法で作られた場合、
<tt>HFS</tt> パーティションに見えます。

<p><table border=1 cellpadding=5>
 <tr><td>a</td>
 <td>"A/UX Root" パーティション、ディスク上の順序とは無関係</td></tr>
 <tr><td>b</td>
 <td>"A/UX Swap" パーティション、ディスク上の順序とは無関係</td></tr>
 <tr><td>c</td>
 <td>ディスク全体 (最初のセクターから最後のセクターまで)</td></tr>
 <tr><td>d-f</td>
 <td>最初のほうにある A/UX 以外のパーティション (普通はユーザー HFS(+) パーティション)</td></tr>
 <tr><td>g</td>
 <td>(作ってあれば) "A/UX User" パーティション、ディスク上の順序とは無関係</td></tr>
 <tr><td>h</td>
 <td>さらにある A/UX 以外のパーティション (普通はユーザー HFS(+) パーティション)</td></tr>
</table>
</ol>

<p>そして、たとえば以下は PowerBook (FireWire) に Drive Setup
で作成したものです:
<p><table border=1 cellpadding=5>
<tr><td><b>MacOS</b></td><td><b>OF/OSX</b></td><td><b>NetBSD</b></td> 
  <td><b>Comment</b></td><td><b>Apple Partition Map type</b></td>
  <td><b>disklabel fstype</b></td></tr>

<tr><td><br></td>        <td>0</td>  <td><br></td>    
  <td>bootloader</td>               <td><br></td>
  <td><br></td></tr>

<tr><td><br></td>        <td>1</td>  <td><br></td>    
  <td>Partition map</td>             <td>Apple_partition_map Apple</td>
  <td>unknown</td></tr>

<tr><td><br></td>        <td>2</td>  <td><br></td>    
  <td>MacOS driver</td>             <td>Apple_Driver43*Macintosh</td>
  <td>unknown</td></tr>

<tr><td><br></td>        <td>3</td>  <td><br></td>    
  <td>MacOS driver</td>             <td>Apple_Driver43*Macintosh</td>
  <td>unknown</td></tr>

<tr><td><br></td>        <td>4</td>  <td><br></td>    
  <td>MacOS driver</td>             <td>Apple_Driver_ATA*Macintosh</td>
  <td>unknown</td></tr>

<tr><td><br></td>        <td>5</td>  <td><br></td>    
  <td>MacOS driver</td>             <td>Apple_Driver_ATA*Macintosh</td>
  <td>unknown</td></tr>

<tr><td><br></td>        <td>6</td>  <td><br></td>    
  <td>MacOS driver</td>             <td>Apple_FWDriver Macintosh</td>
  <td>unknown</td></tr>

<tr><td><br></td>        <td>7</td>  <td><br></td>    
  <td>MacOS driver</td>             <td>Apple_Driver_IOKit Macintosh</td>
  <td>unknown</td></tr>

<tr><td><br></td>        <td>8</td>  <td><br></td>    
  <td>MacOS driver</td>             <td>Apple_Patches Patch Partition</td>
  <td>unknown</td></tr>

<tr><td>Untitled</td>   <td>9</td>  <td>d</td>    
  <td>MacOS 9 boot partition</td>   <td>Apple_HFS untitled</td>
  <td>HFS</td></tr>

<tr><td>Untitled 2</td> <td>10</td> <td>e</td>    
  <td>MacOS X boot partition</td>   <td>Apple_HFS untitled 2</td>
  <td>HFS</td></tr>

<tr><td>Untitled 3</td> <td>11</td> <td>f</td>    
  <td>MS-DOS <a href="#msdos">shared partition</a></td>  
                                    <td>Apple_HFS untitled 3</td>
  <td>HFS</td></tr>

<tr><td><br></td>        <td>12</td> <td>a</td>      
  <td>NetBSD boot partition</td>    <td>Apple_UNIX_SVR2 A/UX Root</td>
  <td>4.2BSD</td></tr>

<tr><td><br></td>        <td>13</td> <td>b</td>      
  <td>NetBSD swap</td>              <td>Apple_UNIX_SVR2 Swap</td>
  <td>swap</td></tr>

<tr><td><br></td>        <td>14</td> <td>g</td>      
  <td>unused disk space</td>        <td>Apple_Free Extra</td>
  <td>unknown</td></tr>

<tr><td><br></td>        <td><br></td> <td>c</td>      
  <td>NetBSD whole disk</td>         <td><br></td>
  <td>unused</td></tr>
</table>

<p>インストール後、 HFS パーティションのひとつである "Untitled" (
Open Firmware のパーティションは 9、 NetBSD のパーティションは d) に
<tt>ofwboot.xcf</tt> が、 A/UX パーティションのひとつ (Open Firmware
のパーティションは 12、 NetBSD のパーティションは a) には NetBSD
カーネルがあり、ブートのためのコマンドは次のようになります:
<pre>boot hd:9,ofwboot.xcf hd:12</pre>

<hr>

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../"><img
        src="../../../images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"
        width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../"><img
        src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../Ports/"><img
        src="../../../images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"
        width="91" height="42" alt=""></a>
  </td><td> 
    <a href="../../Ports/"><img
        src="../../../images/empty.gif" origlink="../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">対応アーキテクチャー</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  www@JP.NetBSD.org<br>
  $NetBSD: partitioning.html,v 1.15 2003/09/28 06:46:35 dent Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1998-2003
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
