<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html lang="ja">
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'x11.list' AND RUN 'make' -->

<!-- Copyright (c) 1998-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<link rev="made" href="mailto:www@jp.NetBSD.org">
<title>NetBSD/macppc X11 FAQ</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD/macppc X11 FAQ</h1>

このページでは、 NetBSD/macppc システム上の X Window System に関する
様々なことがらを説明します。

<h2><a name="top">全般的な質問</a></h2>
<ul>
<li>
<a href="#which-x">どの X Window System パッケージを使えばよいですか?</a></li>
<li>
<a href="#delete">delete キーが消去でなくチルダ (<tt>~</tt>) になるのはなぜ?</a></li>
<li>
<a href="#root-console"><tt>Cannot open kbd/mouse : no such file or directory</tt></a></li>
<li>
<a href="#mouse-buttons">X で 1 ボタンマウスを使って 3 ボタンマウスをエミュレートする方法は ?</a></li>
</ul>
<h2>XFree86 の質問</h2>
<ul>
<li>
<a href="#xfree-support">XFree86 が使える機種は?</a></li>
<li>
<a href="#xfconfig">XF86Config ファイルの作り方は ?</a></li>
<li>
<a href="#insecure"><tt>Fatal server error: ppcPciInit: /dev/kmem</tt></a></li>
<li>
<a href="#xkb">keymap に失敗します。</a></li>
</ul>
<h2>Xmacppc の質問</h2>
<ul>
<li>
<a href="#xmacppc-support">どの機種で Xmacppc が動きますか ?</a></li>
<li>
<a href="#changing-resolution">解像度や色数を変える方法は ?</a></li>
</ul>


<h2>関連する下記の情報も参照してください:</h2>
<ul>
<li>NetBSD ドキュメンテーション: <a href="../../Documentation/x/">X Window System</a>
<li><a href="http://www.xfree86.org">The Xfree86 Project Home Page</a>
</ul>

<hr>
<h2>全般的な質問</h2><hr>
<p><h3>
<a name="which-x">どの X Window System パッケージを使えばよいですか?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
Xmacppc ですか? それとも XFree86 ですか? NetBSD/macppc の xserver.tgz
に含まれ配布されている完全な X Window System サーバーは、二つあります。
<p>
<a href="#xmacppc-support">Xmacppc</a> パッケージは、 Open Firmware によって
セットアップされた raw デバイスを使います。これは機能が非常に限られますが、
NetBSD でサポートしている macppc の機種のほとんどすべてで動きます。
画面解像度の変更や 8 bpp を超える色数の使用はできません。
これは、いかなる種類のアクセラレーションも持っていません。
<p>
<a href="#xfree-support">XFree86</a> パッケージは、
ビデオカードのチップセットに関して自身のもつ知識を使いますが、
(ATI や NVIDIA 製のビデオカードを使っている最近の機種とは対照的に)
Apple 開発のビデオチップセットを持つ古い macppc の機種には
ドライバーがありません。このため、 XFree86 は NetBSD/macppc
対応機種の一部しかサポートしていませんが、より高機能の X サーバーです
-- 解像度切り替えや 8 bpp を超える色数を扱えるほか、
いくらかのアクセラレーションもあります。
<p>
異なる X サーバーを選ぶためには、 <tt>/usr/X11R6/bin/X</tt>
のリンク先をお好みのサーバーに向けてください。
<pre># <b>cd /usr/X11R6/bin</b>
# <b>ls -l X*</b>
lrwxr-xr-x  1 root  wheel       22 Nov 12 13:50 X@ -&gt; /usr/X11R6/bin/XFree86
-rws--x--x  1 root  wheel  1918906 Nov 12 13:48 XFree86*
-rws--x--x  1 root  wheel  1506734 Nov 12 13:48 Xmacppc*
-r-xr-xr-x  1 root  wheel    27494 Jun  9  2001 Xmark*
-r-xr-xr-x  1 root  wheel  3518011 Nov 12 13:48 Xnest*
-r-xr-xr-x  1 root  wheel  1914704 Nov 12 13:48 Xprt*
-r-xr-xr-x  1 root  wheel  3832078 Nov 12 13:48 Xvfb*
# <b>rm X</b>
# <b>ln -s Xmacppc X</b></pre>

</dd></dl>
<p><h3>
<a name="delete">delete キーが消去でなくチルダ (<tt>~</tt>) になるのはなぜ?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
実は、 delete キーは delete エスケープシーケンス (他のすべての VT100
エミュレーターが使っている) ではなく、本来の VT100 の delete
キーを出しています。
<p>
これを変えるには、下記のコマンドを
X サーバーを起動するたびに実行する必要があります:
<pre># <b>xmodmap -e "keycode 59 = BackSpace"</b></pre>
もちろん、このコマンドを <tt>xdm/Xsetup_0</tt> ファイルや各ユーザーの
<tt>.xinitrc</tt> ファイルに書いておいてもかまいません。

<p>
単に xterm をこのようにしたいだけなら、次の 1 行をデフォルト設定として
どこかに書いておきます:
<pre>XTerm*VT100*deleteIsDEL: true</pre>

<p>
これのもっとも一般的な場所は
<tt>/usr/X11R6/lib/X11/app-defaults/XTerm</tt> ですが、ここに書くと、
あなたやユーザーが、本来の VT100 delete キーとなっていないリモート
X サーバーで xterm を実行した場合に問題を起こします。
最も無難には、 X をコンソールから使うユーザー全員のホームディレクトリーの
<tt>.Xdefaults</tt> ファイルに書いておくことができます。

</dd></dl>
<p><h3>
<a name="root-console"><tt>Cannot open kbd/mouse : no such file or directory</tt></a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
これは、 root 以外のユーザーが <tt>startx</tt> や <tt>xinit</tt>
を実行しようとしたときに起こります。 NetBSD のデフォルトでは、
コンソールデバイスは root だけのものになっています。
xdm などを使ってはどうでしょうか。
xdm は、ユーザーがうまくログインするとパーミッションを変更します。
<p>
このほか、 <a href="http://man.NetBSD.org/man/ttyaction+5.macppc+NetBSD-current">ttyaction(5)</a> を使って、ユーザーのログイン時にパーミッションを
変えることもできます。たとえば、下記の内容をもつ <tt>/etc/ttyaction</tt>
を作ります。
<pre>console * /usr/sbin/chown ${USER} /dev/wskbd0 /dev/wsmouse0
ttyE0   * /usr/sbin/chown ${USER} /dev/wskbd0 /dev/wsmouse0</pre>


</dd></dl>
<p><h3>
<a name="mouse-buttons">X で 1 ボタンマウスを使って 3 ボタンマウスをエミュレートする方法は ?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>

今のところ、キーボードのキーをマウスのキーとして設定することができるだけです。
安価な 3 ボタンマウスを探してみてください。ほとんどの
ADB と USB マウスはサポートされています。
<p>
キーボードのキーをマウスのキーとして割り当てるには、
<a href="http://man.NetBSD.org/man/xmodmap+1.macppc+NetBSD-current">xmodmap(1)</a> を使います。
各ユーザーごとのホームディレクトリーに <tt>.xmodmaprc</tt> ファイルを作り、
<tt>.xinitrc</tt> で `<tt>xmodmap .xmodmaprc</tt>' を実行するようにします。
<tt>.xmodmaprc</tt> の内容は、どのキーをキーボードでのマウスボタンの有効/
無効化に使うか、また、どのキーをマウスをどのボタンに割り当てるか、によって
変わります。たとえば、 Apple Extended Keyboard II で、筆者は次のように
しています:
<pre>keycode  79 = Pointer_EnableKeys
keycode 113 = Pointer_Button1
keycode 115 = Pointer_Button2
keycode 121 = Pointer_Button3</pre>
ここで、 keycode 79 は `<tt>Num Lock</tt>' キー (マウスキーを有効/
無効化する) 、 113、 115、 121 は F13、 F14、 F15 キーです。
<p>
PowerBook (FireWire) では、筆者は F8 (108) を有効化に、 F10 (117)、 F11
(111)、 F12 (119) をマウスキーとして使っています。
<p>
キーとキーコードの対応を調べるには、
<a href="http://man.NetBSD.org/man/xev+1.macppc+NetBSD-current">xev(1)</a>
コマンドを使います。このほか、同様にして <a
href="#delete">delete キー</a> を <tt>.xmodmaprc</tt> に
入れたいと思うかもしれません。


</dd></dl>
<hr>
<h2>XFree86 の質問</h2><hr>
<p><h3>
<a name="xfree-support">XFree86 が使える機種は?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
サポートされているのは Open Firmware の初期化に対応しているビデオカード
だけです。言いかえれば、最近の機種 (つまり Open Firmware 3) または
サポートされているビデオカード (ATI Rage 128 など) だけということです。
<p>
XFree86 を使うには XF86Config ファイルを作る必要があります。

</dd></dl>
<p><h3>
<a name="xfconfig">XF86Config ファイルの作り方は ?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
<tt>xf86config</tt> を使ってみてください。あるいは、
<a href="mailto:port-macppc@NetBSD.org">port-macppc@NetBSD.org</a>
へ投稿してサンプルを求めてください。

</dd></dl>
<p><h3>
<a name="insecure"><tt>Fatal server error: ppcPciInit: /dev/kmem</tt></a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
残念ながら、今のところ XFree86 X サーバーは、通常は root
プログラムだけがアクセス可能とすべき <tt>/dev/kmem</tt>
への直接のアクセスを必要とします。下記のようにすることで、
(小さなものとはいえ) セキュリティーホールを作ることになります。
<p>
`<tt>options INSECURE</tt>' を指定して <a
href="../../Documentation/kernel/index.html#how_to_build_a_kernel">
新たにカーネルをコンパイル</a>する必要があります。これは NetBSD
で配布されているデフォルトの GENERIC カーネルでは有効になっていないからです。

</dd></dl>
<p><h3>
<a name="xkb">keymap に失敗します。</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
XFree86 がキーボードマッピング情報を保持するために、
(root で) 下記のディレクトリーを作る必要があるかもしれません。
<pre>mkdir -p /var/db/xkb;chmod 755 /var/db/xkb</pre>

</dd></dl>
<hr>
<h2>Xmacppc の質問</h2><hr>
<p><h3>
<a name="xmacppc-support">どの機種で Xmacppc が動きますか ?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
コンソールでのブートが可能な全機種と、サポートされたビデオカードを持つ
(そのビデオカードが適切な Open Firmware 初期化コードを持つ) 機種です。
シリアルコンソールを使う必要のある機種では、どの X サーバーも動きません。
<p>
ほとんどすべての NetBSD/macppc 機種をサポートしますが、制限としては
色数が 8bpp に制限されることと、画面解像度を変更する方法がないこと、
グラフィックアクセラレーションがまったくないことです。

</dd></dl>
<p><h3>
<a name="changing-resolution">解像度や色数を変える方法は ?</a>
<font size="-1">(<a href="#top">top</a>)</font>
</h3><dl><dt><dd>
NetBSD 上では変更できません。 Open Firmware 上で変更しなければなりません。
また、 NetBSD/macppc は 8 bpp を超える色数には対応していません。
<p>
古い機種 (7300 - 8600) は Open Firmware で解像度を変更できません。
これらの機種では (<a href="SystemDisk-tutorial/of105patch.html">パッチ</a>適用後) 640x480 、 67 Hz に固定されます。
パッチを当てない場合は周波数が決まりません
(たいてい 60 Hz か 120 Hz ですが、そうとも限らないのでなんとも) 。
<p>
<!-- Open Firmware &gt;= 2.0 の新しい機種では、 (Open
Firmware プロンプトで) 次のようにタイプすると:
(pre)0 &gt; (b)dev screen(/b)
0 &gt; (b)show-modes(/b)
0 &gt; (b)mode#(/b)
1 &gt; (b).(/b)(/pre)
(p)
その機種で有効な解像度がリストされます。
もし、 MacOS 上で解像度をこのいずれかに設定すれば、
Open Firmware はその設定を保持するはずです。 -->

最近の機種では、 MacOS で必要な解像度を設定する必要があります。
Open Firmware はその設定を保持します。
<p>
Chris Tribo によれば、彼の XClaimVR 64 カードは MacOS のモニターの設定を
無視して、いつも同じ解像度を使うとのことです。


<!-- ======================================== -->
</dd></dl>
<hr>

<a href="./">Up to <em>NetBSD/macppc Port Page</em></a>
<hr>

<table width="100%"><tr><td>
<table border="0" summary="Footer navigation"><tr>
<td class="foothome"><span class="foothome"><a href="../../"><img src="../../../images/NetBSD-flag.png" origlink="../../images/NetBSD-flag.png" alt="" border="0" width="90" height="90"></a></span></td>
<td class="foothome">
<span class="foothome"><a href="../../">ホームページ</a></span><br>
</td>
</tr></table>
</td><td>
<table border="0" summary="Footer navigation"><tr>
<td class="foothome"><span class="foothome"><a href="../../Documentation/"><img src="../../../images/NetBSD-flag.png" origlink="../../images/NetBSD-flag.png" alt="" border="0" width="90" height="90"></a></span></td>
<td class="foothome">
<span class="foothome"><a href="../../Documentation/">Documentation top level</a></span><br>
</td>
</tr></table>

</td></tr></table>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@jp.NetBSD.org">日本語:
       www@jp.NetBSD.org</a>)<br>
  $NetBSD: x11.list,v 1.14 2004/11/15 00:14:39 mbw Exp $<br>
  <!-- based on english translation: -->
  <!-- NetBSD: x11.list,v 1.14 2004/11/15 00:14:39 mbw Exp   -->
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1998-2003
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
