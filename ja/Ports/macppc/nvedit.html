<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
<!-- Copyright (c) 1998, 1999, 2000
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<meta http-equiv=content-type content="text/html; charset=iso-2022-jp">
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>NetBSD/macppc nvedit HOW-TO</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD/macppc nvedit HOW-TO</h1>

<hr>
<p>

このページでは、
Open Firmware の nvram の内容を編集するためのコマンドを簡単に説明します。
<p>

Open Firmware の仕様として、 すべての OF の実装にはエディターが
組み込まれています。
このページでは、その使い方を説明します。
いくつかのコマンドが emacs とよく似ていると思う方もいるでしょう。
ここでは、 <tt>C-x</tt> という表現を、
control キーと <tt>x</tt> キーを同時に押す意味に使います。
<p>

<table>
<tr><td><tt>nvedit</tt></td>
<td>現在の nvramrc の内容の編集を開始します。</td></tr>

<tr><td><tt>C-l</tt></td>
<td>ディスプレーを再描画します。</td></tr>

<tr><td><tt>C-k</tt></td>
<td>カーソル位置から行末までを消去します。</td></tr>

<tr><td><tt>C-n</tt></td>
<td>次の行に進みます。</td></tr>

<tr><td><tt>C-p</tt></td>
<td>前の行に戻ります。</td></tr>

<tr><td><tt>C-f</tt></td>
<td>一文字進みます。</td></tr>

<tr><td><tt>C-b</tt></td>
<td>一文字戻ります。</td></tr>

<tr><td><tt>C-c</tt></td>
<td>エディターを終了し、編集した内容を nvram のバッファーに保持します。<br>
<i>註: これは変更を nvramrc に保存<b>しません</b>。</i></td></tr>

<tr><td><tt>nvstore</tt></td>
<td>編集された nvram のバッファーを nvramrc に保存します。</td></tr>

<tr><td><tt>nvquit</tt></td>
<td>編集された nvram のバッファーの内容を破棄します。</td></tr>

<tr><td><tt>nvrun</tt></td>
<td>編集された nvram のバッファーの内容を実行します。</td></tr>

<tr><td><tt>nvalias</tt></td>
<td>デバイスの別名を nvramrc に追加します。</td></tr>

<tr><td><tt>nvrun</tt></td>
<td>デバイスの別名を nvramrc から削除します。</td></tr>
</table>
<p>

<b>汎用 nvramrc スクリプト</b>
<p>

ブートする前に (ハードドライブが動くまで) 待つようにするためには、
<a href="SystemDisk-tutorial/of105patch2.txt">下記のパッチ</a> を nvramrc に追加します:

<pre>: wBoot
begin
 boot-device ['] $boot catch drop
 ." -Waiting for boot-device" cr
 d# 500 ms
key? until
;</pre>

それから <tt>nvstore</tt> を実行します。
さらに、ブートコマンドの変更を指示しなければなりません。
OF プロンプトで次のようにタイプします:<br>

<tt>0 &gt; <b>setenv boot-command wBoot</b></tt>
<p>

あるいは、 OF 2 以降の機種では、
次のようにしてブートコマンドを変更することもできます:<br>

<tt>0 &gt; <b>boot-command begin ['] boot catch 1000 ms cr again</b></tt>
<p>

<hr>
<a href="">Up to <em>NetBSD/macppc Port Page</em></a>
<hr>

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../"><img
        src="/images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"
        width="91" height="42" alt=""></a>
  </td><td>
    <a href="../../"><img
        src="/images/empty.gif" origlink="../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">ホームページ</a>
  </td></tr></table>
</td><td>
  <table><tr><td>
    <a href="../../Ports/"><img
        src="/images/NetBSD-flag.gif" origlink="../../images/NetBSD-flag.gif" border="0"
        width="91" height="42" alt=""></a>
  </td><td> 
    <a href="../../Ports/"><img
        src="/images/empty.gif" origlink="../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">対応機種</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  www@JP.NetBSD.ORG<br>
  $NetBSD: nvedit.html,v 1.2 2000/08/27 06:12:33 mbw Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy;
    1998, 1999, 2000
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
