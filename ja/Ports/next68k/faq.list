<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<!-- Copyright (c) 1994-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@NetBSD.org">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<title>NetBSD/next68k: Frequently Asked Questions</title>
</head>
<body bgcolor="#ffffff" text="#000000" link="#2020cc" vlink="#700080">

<h1>NetBSD/next68k Frequently Asked Questions</h1>

Here are some frequently asked questions (and frequently given
answers!) about NetBSD/next68k.

<LIST>

<h2>Other sources of information</h2>

<ul>
    <li><a href="http://www.peanuts.org/peanuts/GeneralData/Documents/faq/NeXTFAQ-html/NeXTFAQ.txt">The
        peanuts.org NEXTSTEP/OpenStep FAQ</a> (see section 5 on black hardware)
    <li><a href="http://www.lrz-muenchen.de/~heller/NeXT/NeXT.html">NeXT
        Hardware FAQs</a>
    <li><a href="../../Documentation/wscons/">The wscons
	FAQ</a>, about NetBSD's platform-independent workstation
	console driver.
    <li><a href="../../Documentation/network/netboot/">Diskless
	NetBSD HOW-TO</a>
    <li><a href="../../Documentation/Hardware/Misc/serial.html">NetBSD Serial 
       Port Primer</a>
</ul>

<SECTION>Booting

<ENTRY>rom-monitor How do I get to the ROM Monitor or the debugger?
You can get to the ROM monitor, or break into the debugger (once the
NetBSD kernel is running) at any time, by hitting both <b>COMMAND</b> and
the backquote (<tt>`</tt>) key above the <tt>7</tt> on the numeric keypad. 

<ENTRY>reset How do I reset the system without pulling the plug?
This is a hard reset -- it does not sync the filesystems first.  Press
the <i>left</i> <b>COMMAND</b>-<b>ALTERNATE</b>-<b><tt>*</tt></b> keys (where 
the <tt>*</tt> key is to the right of the <tt>/</tt> on the numeric keypad).

<ENTRY>netboot-how How do I netboot?
This is now covered in the INSTALL notes.
There is also a section of the <a
href="../../Documentation/network/netboot/">Diskless NetBSD HOW-TO</a> devoted
to <a
href="../../Documentation/network/netboot/intro.next68k.html">Netbooting
NetBSD/next68k</a>.  

<ENTRY>boot-disk1 How do I boot from a second hard drive or CD-ROM?
The ROM Monitor <tt>bsd()</tt> command defaults to booting from the 
lowest SCSI ID drive which is usually the internal hard drive at ID 0.  
To boot from the next SCSI hard drive, you would use <tt>bsd(1,0,0)</tt> 
which will boot from the next highest SCSI ID drive -- <i>not necessarily 
SCSI ID 1</i>.
<table border=1 cellpadding=5>
<tr><th>SCSI ID</th><th>boot command</th></tr>
<tr><td>0</td><td><tt>bsd()</tt></td></tr>
<tr><td>2</td><td><tt>bsd(1,0,0)</tt></td></tr>
<tr><td>6</td><td><tt>bsd(2,0,0)</tt></td></tr>
</table>

<p>
Only turbo NeXT systems can boot directly from a CD-ROM.  Non-turbo 
models need to load the bootloader from a floppy, SCSI hard drive, or 
over the network.

<ENTRY>monitor-commands What can I do in the ROM Monitor?
From the ROM Monitor prompt, type <tt><b>?</b></tt> to get a listing of 
the possible commands and <tt><b>p</b></tt> to configure the system.
Additionally, pressing the <tt>Power</tt> key will let you power the system 
down.
<p>
To boot from a SCSI disk, type <tt><b>bsd()</b></tt>.  To boot from the 
ethernet, type <tt><b>ben()netbsd</b></tt>.
<p>
<pre>
                        NeXT ROM Monitor 2.5 (v66)

CPU MC68040 25 MHz, memory 100 nS
Backplane slot #0
Ethernet address:  0:0:f:0:fb:90
Memory size 40 MB
NeXT&gt;<b>?</b>
NeXT ROM monitor commands:
        p  inspect/modify configuration parameters
        a [n]  open address register
        m  print memory configuration
        d [n]  open data register
        r [regname]  open processor register
        s [systemreg]  open system register
        e [lwb] [alist] [format]  examine memory location addr
        ec  print recorded system error codes
        ej [drive #]  eject optical disk (default = 0)
        eo  (same as above)
        ef [drive #]  eject floppy disk (default = 0)
        c  continue execution at last pc location
        b [device[(ctrl,unit,part)] [filename] [flags]]  boot from device
        S [fcode] open function code (address space)
        R [radix]  set input radix
Notes:
        [lwb] select long/word/byte length (default = long).
        [alist] is starting address or list of addresses to cyclically examine
        Examine command, eith no arguments, uses last [alist]
Copyright (c) 1988-1990 NeXT Inc

NeXT&gt;<b>p</b>
boot command: sd()? <b>en()netbsd</b>
DRAM tests:  yes? <b>yes</b>
perform power-on system test:  yes? <b>yes</b>
        sound out tests:  yes? <b>yes</b>
        SCSI tests:  yes? <b>yes</b>
        loop until keypress:  no?  <b>no</b>
        verbose test mode:  no?  <b>yes</b>
boot extended diagnostics:  no?  <b>no</b>
serial port A is alternate console:  no?  <b>yes</b>
allow any ROM command even if password protected:  no?  <b>no</b>
allow boot from any device even if password protected:  no?  <b>no</b>
allow optical drive #0 eject even if password protected:  yes?  <b>yes</b>
enable parity cehcking if parity memory is present:  no?  <b>no</b>

</pre>
<SECTION>Hardware

<ENTRY>connections How do the keyboard, mouse, and monitor connect to the NeXT hardware?
For monochrome systems (NeXT Computer, NeXTcube, NeXTstation, NeXTcube 
Turbo, and NeXTstation Turbo) without a NeXTdimension board, a 19 pin 
cable connects the system to the mono MegaPixel Display.  The cable 
carries power for the monitor, video for the monitor, sound in and out, 
and the keyboard/mouse connector.  The keyboard plugs into the monitor, 
and the mouse plugs into the keyboard.

<p>
For color systems (NeXTstation Color and NeXTstation Color Turbo) a funky
"Y-Cable" connects the system to a soundbox and to a monitor.  The monitor
end of the cable is a 13W3 connector.  You can use any multisync monitor
(with the appropriate adapter) or a fixed frequency monitor supporting the
approprate refresh rate.  NeXTstation Color supports 68 Hz refresh at
1280x1024.  NeXTstation Color Turbo supports 72 Hz refresh. The soundbox
provides the additional functionality of the mono MegaPixel Display (sound
in and out and keyboard/mouse connector).  The keyboard plugs into the 
soundbox, and the mouse plugs into the keyboard.

<p>
For cube systems with a NeXTdimension board, the refresh rate is 68 Hz.
If the cube is using a mono MegaPixel Display in addition to the 
NeXTdimension driven display, a simple 13W3 cable is used to connect the 
monitor to the NeXTdimension.  If the cube is not using a mono MegaPixel 
Display, you must use a "Y-cable" and a soundbox connected to the 
NeXTdimension board.


<ENTRY>adb Differentiating ADB and non-ADB keyboards and mice
Currently, only non-ADB keyboards and mice are supported.
<p>
Non-ADB keyboards use a mini-DIN connector with 5 pins.  Non-ADB keyboards
have a black power key between the brightness and volume keys.  Non-ADB
mice use a mini-DIN 8 connector.  Non-ADB mice are rectangular.  All NeXT
hardware supports these peripherals with the original mono MegaPixel
Display (N4000 or N4000A) or a non-ADB soundbox (serial number prefix 
ABN).  The ADB monitor and soundbox cables will work with non-ADB 
monitors and soundboxes.  Non-ADB monitor cables (part numbers 150 or 1532)
and soundbox cables (part number 2286) only work with non-ADB monitors 
and soundboxes.
<p>
ADB cables have mini-DIN 4 connectors. ADB NeXT keyboards have a flat
green power button.  ADB NeXT mice are rounded.  Apple Macintosh ADB
keyboards and mice should also work.  ADB peripherals are only supported
on NeXT hardware with ROM version v.74 (most turbo systems and some later 
non-turbo systems).  You also need a newer mono MegaPixel Display 
(N4000B) or ADB soundbox (serial number prefix ADD).  Additionally, you need
an ADB monitor cable (part numbers 4534 or 4535) or an ADB soundbox cable
(part number 4536).
<p>
Black Hole, Inc. has a 
<a href="http://blackholeinc.com/images/set1/nextadbnonadb.gif">graphic</a> 
depicting the differences.  ChannelU also has a
<a href="http://www.channelu.com/Turbo/NeXT/mousekeysound.html">webpage</a>
with pictures of these devices.

<ENTRY>no-monitor How do I run my NeXT headless?
From <a
href="http://www.peanuts.org/faq-serve/cache/189.html">The Peanut's Archive
FAQ</a>.  Also, see this 
<a href="http://mail-index.NetBSD.org/port-next68k/1998/06/30/0000.html">post</a>
describing how to build a better switch.

<p>
The procedure is to just touch pins 6 and GND on the DB-19 NeXT monitor
out with a 470 Ohm resistor (450 is the actual resistance, but 470 ohms
is more commonly found in resistors).  The touching with the resistor
will be momentary, you shouldn't try to set up a resistor so that it's
always touching.
<p>

Pin 6 is the power sense, and pins 13-19 (and the DB shell) are the
GND.  Just say "pin 19", it may be easier.
There's a pinout diagram of the DB-19 in the NeXT Users Reference
Manual, as well as <a href="#monitor-pinout">below</a>.
<p>

If you have an old Cube (serial number below AAK0016370),
the power supply needs to have more power
drawn from it than an 030 (and 040?) board uses to stay on.
So: On the DB-19, attach a Power Resistor (20 Ohm, at least 20 Watt)
between pins 12 and GND. (Pin 12 is -12V, pin 13 works well for GND).
Then just "momentarily touch" the 470 ohm resistor as described above,
and you're set. The 20 Ohm resistor draws enough to keep the power supply
happy - just don't touch it (*HOT!* ;-) 
<p>

To power off, type "halt -p" as root on the machine
(either through a terminal connected to port A, or over the
ethernet connection). 
<p>

Also, you need to use the NeXT keyboard to set up the <a 
href="#rom-monitor">ROM 
Monitor</a>. The important ones are: 
<p>

<ul>
    <li>Wait until keypress? N
    <li>Sound out tests? N
    <li>Port A as alternate Console? Y (if you have one, it's nice)
    <li>Verbose mode? N (I think this may need to be N to work, don't remember).
</ul>

<ENTRY>serial-console How do I build a serial console cable?

See the <a href="../../Documentation/Hardware/Misc/serial.html">NetBSD Serial 
Port Primer</a> for more information.

<ENTRY>monitor-pinout What is the pinout of the monitor cable?
The NeXT monitor cable is a very strange DB19 connector.  I haven't
been able to find any of these excpet for special order shops. The
cable, as seen from the back of the machine:

<pre>
        10                  1
      _________________________
      \  o o o o o o o o o o  /
       \  o o o o o o o o o  /
        ---------------------
        19                11 
</pre>

<ol>
	<li> +12V
	<li> -12V
	<li> MON CLK
	<li> MON DATA OUT
	<li> MON DATA IN
	<li> MON PWR SWITCH
	<li> NC
	<li> VSYNC
	<li> HSYNC
	<li> VIDEO
	<li> +12V
	<li> -12V
	<li> GND
	<li> GND
	<li> GND
	<li> GND
	<li> GND
	<li> GND
	<li> GND
</ol>

</LIST>

<a href="./">Up to <em>NetBSD/next68k Port Page</em></a>
<hr>

<DOCLINK>

<hr>
<address>
<small>
  <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">(Contact us)</a>
  $NetBSD: faq.list,v 1.26 2003/10/30 08:31:34 keihan Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
