<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<!-- Copyright (c) 1994-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@NetBSD.org">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<title>NetBSD/next68k: Frequently Asked Questions</title>
</head>
<body bgcolor="#ffffff" text="#000000" link="#2020cc" vlink="#700080">

<h1>NetBSD/next68k Frequently Asked Questions</h1>

Here are some frequently asked questions (and frequently given
answers!) about NetBSD/next68k.

<LIST>

<h2>Other sources of information</h2>

<ul>
    <li><a href="../../Documentation/wscons/">The wscons
	FAQ</a>, about NetBSD's platform-independent workstation
	console driver.
    <li><a href="../../Documentation/network/netboot/">Diskless
	NetBSD HOW-TO</a>
    <li><a href="../../Documentation/Hardware/Misc/serial.html">NetBSD Serial 
       Port Primer</a>
</ul>

<SECTION>Booting

<ENTRY>rom-monitor How do I get to the firmware, or the ROM Monitor?
You can get to the ROM monitor, or break into the debugger at any
time, by hitting both <b>COMMAND</b> and the backquote (<tt>`</tt>) key
above the <tt>7</tt> on the numeric keypad.

<ENTRY>reset How do I reset the system without pulling the plug?
This is a hard reset -- it does not sync the filesystems first.  Press
the <i>left</i> <b>COMMAND</b>-<b>ALTERNATE</b>-<b><tt>*</tt></b> keys (where 
the <tt>*</tt> key is to the right of the <tt>/</tt> on the numeric keypad).

<ENTRY>netboot-how How do I netboot?
This is now covered in the INSTALL notes.
There is also a section of the <a
href="../../Documentation/network/netboot/">Diskless NetBSD HOW-TO</a> devoted
to <a
href="../../Documentation/network/netboot/intro.next68k.html">Netbooting
NetBSD/next68k</a>.  

<ENTRY>monitor-commands What can I do in the ROM Monitor?
From the ROM Monitor prompt, type <tt><b>?</b></tt> to get a listing of 
the possible commands and <tt><b>p</b></tt> to configure the system.
Additionally, pressing the <tt>Power</tt> key will let you power the system 
down.
<p>
To boot from a SCSI disk, type <tt><b>bsd()</b></tt>.  To boot from the 
ethernet, type <tt><b>ben()netbsd</b></tt>.
<p>
<pre>
                        NeXT ROM Monitor 2.5 (v66)

CPU MC68040 25 MHz, memory 100 nS
Backplane slot #0
Ethernet address:  0:0:f:0:fb:90
Memory size 40 MB
NeXT&gt;<b>?</b>
NeXT ROM monitor commands:
        p  inspect/modify configuration parameters
        a [n]  open address register
        m  print memory configuration
        d [n]  open data register
        r [regname]  open processor register
        s [systemreg]  open system register
        e [lwb] [alist] [format]  examine memory location addr
        ec  print recorded system error codes
        ej [drive #]  eject optical disk (default = 0)
        eo  (same as above)
        ef [drive #]  eject floppy disk (default = 0)
        c  continue execution at last pc location
        b [device[(ctrl,unit,part)] [filename] [flags]]  boot from device
        S [fcode] open function code (address space)
        R [radix]  set input radix
Notes:
        [lwb] select long/word/byte length (default = long).
        [alist] is starting address or list of addresses to cyclically examine
        Examine command, eith no arguments, uses last [alist]
Copyright (c) 1988-1990 NeXT Inc

NeXT&gt;<b>p</b>
boot command: sd()? <b>en()netbsd</b>
DRAM tests:  yes? <b>yes</b>
perform power-on system test:  yes? <b>yes</b>
        sound out tests:  yes? <b>yes</b>
        SCSI tests:  yes? <b>yes</b>
        loop until keypress:  no?  <b>no</b>
        verbose test mode:  no?  <b>yes</b>
boot extended diagnostics:  no?  <b>no</b>
serial port A is alternate console:  no?  <b>yes</b>
allow any ROM command even if password protected:  no?  <b>no</b>
allow boot from any device even if password protected:  no?  <b>no</b>
allow optical drive #0 eject even if password protected:  yes?  <b>yes</b>
enable parity cehcking if parity memory is present:  no?  <b>no</b>

</pre>
<SECTION>Hardware

<ENTRY>no-monitor How do I run my NeXT headless?
The procedure is to just touch pins 6 and GND on the DB-19 NeXT monitor
out with a 470 Ohm resistor (450 is the actual resistance, but 470 ohms
is more commonly found in resistors).  The touching with the resistor
will be momentary, you shouldn't try to set up a resistor so that it's
always touching.
<p>

Pin 6 is the power sense, and pins 13-19 (and the DB shell) are the
GND.  Just say "pin 19", it may be easier.
There's a pinout diagram of the DB-19 in the NeXT Users Reference
Manual, as well as <a href="#monitor-pinout">below</a>.
<p>

If you have an old Cube, the power supply needs to have more power
drawn from it than an 030 (and 040?) board uses to stay on.
So: On the DB-19, attach a Power Resistor (20 Ohm, at least 20 Watt)
between pins 12 and GND. (Pin 12 is -12V, pin 13 works well for GND).
Then just "momentarily touch" the 470 ohm resistor as described above,
and you're set. The 20 Ohm resistor draws enough to keep the power supply
happy - just don't touch it (*HOT!* ;-) 
<p>

To power off, type "halt -p" as root on the machine
(either through a terminal connected to port A, or over the
ethernet connection). 
<p>

Also, you have to have the <a href="#rom-monitor">ROM Monitor</a>
settings done correctly. The important ones are: 
<p>

<ul>
    <li>Wait until keypress? N
    <li>Sound out tests? N
    <li>Port A as alternate Console? Y (if you have one, it's nice)
    <li>Verbose mode? N (I think this may need to be N to work, don't remember).
</ul>
<p>

The above was taken from <a
href="http://www.peanuts.org/faq-serve/cache/189.html">The Peanut's Archive
FAQ</a>.

<ENTRY>serial-console How do I build a serial console cable?

See the <a href="../../Documentation/Hardware/Misc/serial.html">NetBSD Serial 
Port Primer</a> for more information.

<ENTRY>monitor-pinout What is the pinout of the monitor cable?
The NeXT monitor cable is a very strange DB19 connector.  I haven't
been able to find any of these excpet for special order shops. The
cable, as seen from the back of the machine:

<pre>
        10                  1
      _________________________
      \  o o o o o o o o o o  /
       \  o o o o o o o o o  /
        ---------------------
        19                11 
</pre>

<ol>
	<li> +12V
	<li> -12V
	<li> MON CLK
	<li> MON DATA OUT
	<li> MON DATA IN
	<li> MON PWR SWITCH
	<li> NC
	<li> VSYNC
	<li> HSYNC
	<li> VIDEO
	<li> +12V
	<li> -12V
	<li> GND
	<li> GND
	<li> GND
	<li> GND
	<li> GND
	<li> GND
	<li> GND
</ol>

</LIST>

<a href="./">Up to <em>NetBSD/next68k Port Page</em></a>
<hr>

<DOCLINK>

<hr>
<address>
<small>
  <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">(Contact us)</a>
  $NetBSD: faq.list,v 1.24 2003/07/23 16:32:38 keihan Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
