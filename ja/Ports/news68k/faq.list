<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<!-- Copyright (c) 2002-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.org">
<title>NetBSD/news68k Frequently Asked Questions</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD/news68k よくある質問</h1>

<h2>他の情報源</h2>
<ul>
<li><a href="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-1.6/news68k/INSTALL.html">
    NetBSD/news68k 1.6 インストールノート</a> - 対応ハードウェアと
    インストール方法。
<li><a href="../../MailingLists/#port-news68k">port-news68k メーリングリスト</a>
    (<a href="http://mail-index.NetBSD.org/port-news68k/">アーカイブ</a>)
    - さらなる疑問があれば、講読してください。
<li><a href="../newsmips/history.html">NEWS マシンの歴史</a>
    - NetBSD/newsmips と NetBSD/news68k が動作するマシンの簡単な歴史。
<li><a href="../../Documentation/elf.html">The NetBSD ELF FAQ</a>
    - 1.5 リリース以降、 NetBSD/news68k ポートは a.out から ELF に
      移行しました。
<li><a href="../../Documentation/Hardware/Misc/serial.html">NetBSD
シリアルポート入門</a>
<p>
<li><a href="../../Documentation/">NetBSD 全般のドキュメンテーション</a>
    - NetBSD/news68k に依存しない疑問向け。
</ul>

<LIST>

<SECTION>全般的な質問

<ENTRY>serial_console シリアルコンソースのセットアップ方法は?
まず最初に、 DIP スイッチ 1-3 を、シリアルコンソールとして PROM モニターを
使うように切り替えます。
(詳細は、 <a href="#dip_sw">DIP スイッチの説明</a>を参照)
<p>

NEWS マシンでは、 CH0 ポートを、 9600bps、 8 ビットキャラクター、
パリティーなし、ストップビット 1 で、シリアルコンソールとして使います。
<p>
news1400/1500/1600/1700 のシリアルポートは通常の 25P D-sub コネクターを
使っているため、ヌルモデムケーブルが必要です。
<p>

news1200 はメスの 9P D-sub コネクターを使っています。
これは PC と同じピン配置ですが、 PC のものはオスの 9P コネクターです。
<p>
詳細については、 <a href="../../Documentation/Hardware/Misc/serial.html">NetBSD
シリアルポート入門</a>を参照してください。

<ENTRY>dead_nvram NEWS のコンソールに何も表示されません!
NEWS マシンは、 SPARCstation マシンと同じく MK48T02 NVRAM
チップを使っています。 NVRAM バッテリーが死んでいる場合、
正しくブートしません。
<p>

ここですべきことは、新しい NVRAM であっても死んだバッテリー付のものであっても、
下記の手順で POWER/RESET ボタンを押して、 PROM モニターに NVRAM を
強制的に初期化させることです:
<p>

<ul>
 <li>POWER ボタンを押し続けます
 <li>POWER ボタンを押したままで、 RESET ボタンを押します
 <li>先に RESET ボタンを放します
 <li>次に POWER ボタンを放します
</ul>
<p>

SPARCstation とは違い、イーサネット MAC アドレスなどの
データの修復をする必要はありません。
MAC アドレスは NEWS の ROM 上に保持されているので、
設定する必要があるのは時計の日時だけです。
<p>

死んだ NVRAM を交換する場合には、
<a href="http://www.squirrel.com/squirrel/sun-nvram-hostid.faq.html">
Sun NVRAM/hostid の関する FAQ ページ</a>にチップについての有用な
情報があります。また、
<a href="http://www.squirrel.com/squirrel/sun-nvram-hostid.faq.html#attach">
NVRAM のバッテリーを新しいものに付け替え</a>たいと思うかもしれませんが、
NEWS の機種によっては NVRAM はソケットを使わずにメインボードに直付けされているかもしれません。 <code>:-(</code>
<p>

<ENTRY>dip_sw DIP スイッチはどのように設定すればよいか?
news68k マシンには、 8 組の DIP スイッチ群があります:
<p>

<dl>
<dt>Switch 1,2,3: コンソール設定</dt>
<dd>
<table>
<tr>
 <td><code>OFF,OFF,OFF</code></td>
 <td>ANSI 端末 (すなわち、シリアルコンソール)</td>
</tr>
<tr>
 <td><code>OFF,OFF,ON </code></td>
 <td>NWB-512 モノクロームビットマップコンソール</td>
</tr>
<tr>
 <td><code>ON ,OFF,OFF</code></td>
 <td>NWB-225A カラービットマップコンソール</td>
</tr>
<tr>
 <td><code>ON ,ON ,ON </code></td>
 <td>自動選択機能をサポートする新しいフレームバッファー
     (NWS-251、 NWB-514 など)</td>
</tr>
</table>
<p>

<dt>Switch 4: ブートデバイス</dt>
<dd>
<table>
<tr>
 <td><code>OFF</code></td>
 <td>SCSI ディスクからブート: <code>hd()</code></td>
</tr>
<tr>
 <td><code>ON</code></td>
 <td>フロッピーディスクからブート: <code>fh()</code></td>
</tr>
</table>
</dd>
<p>

<dt>Switch 5: autoboot</dt>
<dd>
<table>
<tr>
 <td><code>OFF</code></td>
 <td>PROM モニター</td>
</tr>
<tr>
 <td><code>ON</code>
 <td>auto boot</td>
</tr>
</table>
</dd>
<p>

<dt>Switch 6: diagnostic (?)</dt>
<dd>
<table>
<tr>
 <td><code>OFF</code></td>
 <td>Diag off (デフォルト)</td>
</tr>
<tr>
 <td><code>ON</code>
 <td>Diag on</td>
</tr>
</table>
</dd>
<p>
<dt>Switch 7,8: 未使用</dt>
<dd>デフォルトで off</dd>

</dl>
<p>

<ENTRY>power_off 電源ケーブルを抜く以外で、マシンの電源を落とす方法は?
(POWER ボタンは使わず) RESET ボタンを押すだけです。
または、 PROM プロンプトで <code>"off"</code> コマンドを使います。
<p>

<ENTRY>bootfd NetBSD/news68k インストールフロッピーでブートしません
news1500 マシンによってはインストールフロッピーが読み取りエラーで
ブートできないとの報告があります。
この原因は、 PROM モニターかブートローダーのバグ、
あるいはメディア自体のエラーの可能性があります。次善策ですが、
ドライブを清掃し、ディスクを何枚か用意して何度もブートしてみてください。

<ENTRY>level_3_int パワーサイクルでブートすると、カーネルが <code>"level 3 interrupt:"</code> を永久に出力し続けます
いくつかの古いバージョンの PROM モニターは、シリアルコンソールが指定されていると、
拡張スロットのフレームバッファーを正しく初期化しません。
このため、フレームバッファーが不正な割り込みを引き起こします。
<p>

回避策は、マシンを一度ビットマップコンソールの設定でリセット (上述のように
POWER+RESET を使う) してから、再度シリアルコンソールでリセットすることです。

<ENTRY>coexist_news_os NetBSD と NEWS-OS を同じディスクにインストールできますか?
十分検証されてはいませんが、とにかくおすすめしません。
<p>

NetBSD/news68k は NEWS-OS ディスクラベルの認識と NEWS-OS ディスクのマウントが
可能ですが、 NetBSD が NEWS-OS ディスクラベルを書き換えてしまうと、
NEWS-OS はこれを認識できなくなります。
両 OS は別のディスクにインストールすることをおすすめします。
<p>

<SECTION>PROM モニターの質問

<ENTRY>prom_command PROM プロンプトでは、どんなコマンドが使えますか?
<code>"help"</code> コマンドで、すべてのコマンドを表示できます。
筆者の NWS-1750 では、以下のようになりました:
<pre>
NEWS&gt; help
bf [.{b|w|l}] &lt;bgn&gt; {&lt;end&gt;|:&lt;cnt&gt;} &lt;data&gt;               : Block Fill
bm &lt;bgn&gt; {&lt;end&gt;|:&lt;cnt&gt;} &lt;dest&gt;                          : Block Move
bo [&lt;dev&gt;]                                              : BOot
bp [&lt;addr&gt; [:&lt;cnt&gt;]] ...                                : BreakPoint set
cp &lt;src_dev&gt; &lt;bgn&gt;:&lt;cnt&gt; &lt;dst_dev&gt; &lt;dest&gt;               : CoPy
format {fd|fh}                                          : FORMAT floppy
go [&lt;addr&gt; [&lt;bkpt&gt; [:&lt;cnt&gt;]]]                           : GO to user program
help                                                    : display this
md [.{b|w|l}] [&lt;bgn&gt; [{&lt;end&gt;|:&lt;cnt&gt;}]]                  : Memory Display
ms [.{b|w|l}] [&lt;addr&gt; [&lt;data&gt;]]                         : Memory Set
mu                                                      : Memory Usage
nobp [&lt;addr&gt;] ...                                       : NO BreakPoint
off                                                     : turn power OFF
rc                                                      : Re-assign Console
rd [{dreg|areg|preg|creg|mreg}] ...                     : Register Display
rr                                                      : Register Reset
rs [&lt;reg&gt; [&lt;data&gt;]]                                     : Register Set
set [&lt;var&gt;[=&lt;value&gt;]]                                   : SET variable
st [:&lt;cnt&gt;]                                             : Stack back Trace
tr [:&lt;cnt&gt;] [branch] [{dreg|areg|preg|creg|mreg}]       : instruction TRace
vers                                                    : VERSion number
NEWS&gt;
</pre>
この表示は、他のマシンではまた異なるかもしれませんが、
ほとんどこれと同じはずです。
<p>

ブートコマンドでは、下記のようなオプションを指定できます:
<table border=0 cellpadding=0>
<tr>
 <td><code>bo</code></td>
 <td>デフォルトのデバイスからブートする (usually <code>sd0</code>)</td>
</tr>
<tr>
 <td><code>bo /1</code></td>
 <td><code>RB_ASKNAME</code> でブートする
 (すなわち、 mountroot 前にルートデバイスを尋ねる)</td>
</tr>
<tr>
 <td><code>bo /2</code></td>
 <td><code>RB_SINGLE</code> でブートする
 (すなわち、シングルユーザーモードに入る)</td>
</tr>
<tr>
 <td><code>bo fh()</code></td>
 <td>1.44M フロッピーからブートする</td>
</tr>
<tr>
 <td><code>bo hd</code><code>(1)</code></td>
 <td>ID 1 の SCSI ディスクからブートする</td>
</tr>
<tr>
 <td><code>bo /2 hd()/netbsd.0 </code></td>
 <td><code>sd0</code> 上の <code>"netbsd.0"</code> をシングルユーザーでブートする</td>
</tr>
</table>

<ENTRY>netboot NetBSD/news68k はネットワーク経由でブートできますか?
いいえ、まだできません。
<p>

news68k マシンの PROM モニターは、ディスクレスブートに "remote disk (rd)"
プロトコルを使いますが、これは NEWS-OS でしかサポートされておらず、
また、これについてのドキュメントもありません。
<p>

おそらく NEWS-OS の <code>rd_rpc.h</code> や <code>rd_srq.h</code>
が参考になるでしょうが、今のところ (まだ) 誰も作業をしてはいません。
<p>

<SECTION>ハードウェアの質問

<ENTRY>spec 私の NEWS のスペックは?
<a href="http://katsu.watanabe.name/doc/sonynews/model.html">
SONY NEWS 仕様一覧のページ</a>
があります。
このページは日本語で書かれていますが、それでも十分役立つでしょう。
<p>

<ENTRY>memory 私の NEWS で使える SIMM の種類は?
news1600/1700 マシンでは、 9 個のチップ付の 30pin 1M SIMM が
16M バイトへのアップグレードに使えます。
3 個のチップ付の SIMM やパリティーなしの SIMM は使えません。
16M から 32M へのアップグレードには、オプションメモリーボードが必要です。
<p>

news1400/1500 マシンでは、 8 または 9 個のチップ付の 30pin 1M SIMM が使えます。
(つまり、これらのマシンはパリティービットを使いません)
2 または 3 個のチップ付の SIMM は使えません。
<p>

<ENTRY>news1800 NWS-18x0 モデルのサポートの可能性はありますか?
残念ながら、 news1800 マシンをサポートするためには多くの問題があります。
news1800 モデルはデュアル 68030 CPU です。一方はメインプロセッサー、他方は
"I/O プロセッサー" です。すべてのデバイス (tty、イーサネット、 SCSI など)
は、この IOP に繋がっていますが、これの扱い方に関する情報はほとんどありません。
NEWS-OS では IOP 用に "MRX" という特別なモジュールを用意しており、
これはブート時にルートディレクトリーから PROM によってロードされます。
<p>

NEWS デバイスの情報を Sony に問い合わせた人たちがおり、
一度は NEWS-OS のソースの公開が計画されました。
しかし、ソースに多くのライセンス問題があり、公開は難しくなっています。
また、 Sony の NEWS 開発部門はすでに解散しているため、
これらの問題を公式に解決することが誰もできないのです。
<p>

<ENTRY>news800 では、 NWS-8xx や NWS-7xx モデルはどうですか?
問題のひとつは、 news800 モデルが上記の項目で説明したような
I/O プロセッサーを使っていることです。
別の問題として、 news800 は Motorola m68851 MMU ではなく Sony 独自の MMU
を使っています。 news700 も、 news800 のように独自の MMU を使っています。
これらについては、情報がほとんどありません。
<p>

</LIST>

<a href="./">Up to <em>NetBSD/news68k Port Page</em></a>
<hr>

<DOCLINK>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@JP.NetBSD.org">日本語:
       www@JP.NetBSD.org</a>)<br>
  $NetBSD: faq.list,v 1.8 2003/07/23 16:32:35 keihan Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 2001-2003
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
