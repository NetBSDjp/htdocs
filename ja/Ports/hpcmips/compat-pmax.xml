<?xml version="1.0"?>
<!DOCTYPE webpage
 PUBLIC "-//NetBSD//DTD Website-based NetBSD Extension//EN"
        "http://www.NetBSD.org/XML/htdocs/lang/share/xml/website-netbsd.dtd">

<webpage id="Ports-hpcmips-compat-pmax">
<config param="desc" value="NetBSD/hpcmips Binary Compatibility"/>
<config param="cvstag" value="$NetBSD: compat-pmax.xml,v 1.4 2007/04/20 17:02:26 kano Exp $"/>
<config param="rcsdate" value="$Date: 2007/04/20 17:02:26 $"/>
<head>

<!-- Copyright (c) 2000-2007
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->

<title>NetBSD/hpcmips Binary Compatibility</title>
</head>


<sect1 role="toc">

<sect2>
<sect3 id="about">
<title>About this page</title>
<para>
This page contains information about NetBSD/hpcmips binary compatibility.  At
the package level, NetBSD/pmax, NetBSD/hpcmips, NetBSD/cobalt, 
NetBSD/playstation2, and NetBSD/arc
are all compatible.  NetBSD/hpcmips userland binaries are compiled with
"-mhard-float" flag.
</para>
</sect3>
</sect2>

<sect2>
<title>Compatibility with other NetBSD ports</title>

<sect3 id="cobalt">
<title>NetBSD/cobalt binary compatibility</title>
<para>
<ulink url="../cobalt/">NetBSD/cobalt</ulink> is almost compatible with arc and
pmax and hpcmips and playstation2.
</para>
</sect3>

<sect3 id="playstation2">
<title>NetBSD/playstation2 binary compatibility</title>
<para>
<ulink url="../playstation2/">NetBSD/playstation2</ulink> is almost compatible 
with arc and pmax and hpcmips.
</para>
</sect3>

<sect3 id="arc">
<title>NetBSD/arc binary compatibility</title>
<para>
<ulink url="../arc/">NetBSD/arc</ulink> is almost compatible with pmax and hpcmips;
the only exception is disklabel (MAXPARTITIONS==16).
NetBSD/hpcmips's disklabel command is also incompatible with pmax,
because it handles fdisk (MBR) partition table.
</para>
</sect3>

<sect3 id="pmax">
<title>NetBSD/pmax binary compatibility</title>
<para>
<ulink url="../pmax/">NetBSD/pmax</ulink> userland
binaries and packages are also little endian, but use hardware floating
point (which can be emulated) and incompatible function call rules
(which prevents pmax and hpcmips binaries from using the same shared
libraries). 
</para>

<variablelist>
  <varlistentry>
    <term>Hardfloat 'mipsel' userland:</term>
    <listitem>
      <para>
        Allows sharing of userland and packages with NetBSD/pmax.
        This saves maintenance and distribution space, but at the
        cost of slower floating point performance.
      </para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term>Softfloat 'mipselsf' userland and packages:</term>
    <listitem>
      <para>
        This gives the best performance, but cannot run dynamic
	NetBSD/pmax binaries.
      </para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term>Softfloat 'mipselsf' userland, extra 'mipsel' libraries:</term>
    <listitem>
      <para>
        Two copies of each shared library are produced, one softfloat,
	one hardfloat, and ld.so modified to use correct type.
	This would allow both types of binaries to run, but would be
	a maintenance nightmare.
      </para>
    </listitem>
  </varlistentry>  
</variablelist>
</sect3>
</sect2>

<sect2>
<title>Compatibility with ULTRIX</title>

<sect3 id="ultrix">
  <title>ULTRIX binary compatibility</title>
    <para>
      NetBSD/hpcmips can exec ULTRIX static-linked binary image.
      To do so, follow these steps:
    </para>

<orderedlist>
  <listitem>
    <para>
      Add kernel configuration option and reconfig your kernel.
    </para>

<screen>
options COMPAT_ULTRIX
options EXEC_ECOFF
</screen>
  </listitem>
  
  <listitem>
    <para>
    Copy
    <filename>/usr/share/examples/emul/ultrix/etc/svc.conf</filename>
    to <filename>/etc/svc.conf</filename> or 
    <filename>/emul/ultrix/etc/svc.conf</filename>.
    </para>
  </listitem>
  <listitem>
    <para>
      Add hostname to <filename>/etc/hosts</filename>.
    </para>
  </listitem>
</orderedlist>

<para>
NetBSD/hpcmips can execute ULTRIX static-linked binary, such as <ulink
url="http://distributed.net/download/clients.html">distributed.net
clients</ulink>.
</para>
</sect3>
</sect2>

<sect2>
<title>Compatibility with Linux MIPS ports</title>

<sect3 id="linux">
<title>Compatibility with Linux </title>
<para>
NetBSD/hpcmips has a "COMPAT_LINUX" kernel option, but it is not tested at
all.  Any more testers and developers in this are would be welcome.
</para>
</sect3>

</sect2>
</sect1>

<parentsec url="./" text="NetBSD/hpcmips Port Page"/>
</webpage>
