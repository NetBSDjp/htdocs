<html>
<head>

<!-- DO NOT EDIT THIS FILE. EDIT 'howto-develop.list' AND RUN 'make' -->

<!-- Copyright (c) 2000
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@NetBSD.ORG">
<title>How to contribute to NetBSD</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1 align=center>
  <big>
    <font face="helvetica, arial">Developing</font>
    <font color="#FF0000" face="helvetica, arial">NetBSD/hpcmips</font>
  </big>
</h1>

<p>
This page contains information that current and potential developers of
NetBSD/hpcmips might find useful.

<h2><a name="top">Building NetBSD/hpcmips bits</a></h2>
<font face="helvetica, arial, sans-serif"><ul>
<li><a href="#prep-bins">Preparing your system to build a kernel and binaries</a></li>
<li><a href="#build-bins">Building a kernel and binaries</a></li>
<li><a href="#prep-booter">Preparing to build Windows CE programs</a></li>
<li><a href="#build-booter">Building the Windows CE Boot Program (pbsdboot.exe)</a></li>
<li><a href="#build-references">Further references for the Microsoft tools</a></li>
</ul></font>
<h2>NetBSD/hpcmips kernel hacking</h2>
<font face="helvetica, arial, sans-serif"><ul>
<li><a href="#add-platform">Adding support for a new system</a></li>
</ul></font>


<hr>
<h2>Building NetBSD/hpcmips bits</h2><hr>
<p><dl><dt>
<font face="helvetica, arial, sans-serif"><h3><a name="prep-bins">Preparing your system to build a kernel and binaries</a>
<font size="-1">(<a href="#top">top</a>)</font></h3></font>
</dt><dd>

<dl>
    <dt>Cross Compiler
    <dd>To make Cross Compiler,use -Dhpcmips option flag.
    <dd>It makes -msoft-float & not use GOFAST lib.
    <dd><a href="ftp://www.cec.co.jp/usr/sakamoto/NetBSD/experiment/cross-netbsd.tgz">cross-netbsd.tgz</a>...  A NetBSD hosted cross environment in pkgsrc format.
    <dd><a href="ftp://ftp.netbsd.org/pub/NetBSD/arch/hpcmips/cross/i386-hpcmips/mipsel-netbsd.tgz">mipsel-netbsd.tgz</a> i386 cross compile environment.(experimental)
 </dl>

</dd></dl></p>
<p><dl><dt>
<font face="helvetica, arial, sans-serif"><h3><a name="build-bins">Building a kernel and binaries</a>
<font size="-1">(<a href="#top">top</a>)</font></h3></font>
</dt><dd>

</dd></dl></p>
<p><dl><dt>
<font face="helvetica, arial, sans-serif"><h3><a name="prep-booter">Preparing to build Windows CE programs</a>
<font size="-1">(<a href="#top">top</a>)</font></h3></font>
</dt><dd>

<p>
To build the NetBSD/hpcmips Windows CE "standalone" programs, you will
need to use a properly configured Windows NT 4.0 system.  This section
will tell you what you tools you need and how you should configure your
system to build the standalone programs.  You should read the whole
section before you proceed, but beware, some of the names of the
products mentioned here are a bit confusing.

<p>
Building the NetBSD/hpcmips standalone programs <em>requires</em> Japanese
language character encoding ("code page") support in Windows NT.
If your installation of Windows NT does not already support
Japanese language character encoding, you will need to install
the Japanese Language Pack.  (Windows NT installations in the United
States will typically not include this support, even if you've installed
Japanese language support for recent versions of Internet Explorer.)
To install the Japanese Language Pack:

  <ol>
    <li>Put your Windows NT 4.0 CD-ROM into your PC's CD-ROM drive.
    <li>With the Windows NT Explorer, enter the "<tt>langpack</tt>" directory
      in the root of the CD-ROM.
    <li>Right-click on the file named "<tt>Japanese</tt>"
      ("<tt>Japanese.inf</tt>" if you have Explorer set to display known
      file extensions), and select the "<tt>Install</tt>" menu option to
      install the language pack.
    <li>When the system has finished installing the language pack, reboot
      your system.
  </ol>

<p>
Microsoft Visual C++ and the Windows CE Toolkit for Visual C++ are
<em>required</em> to build the NetBSD/hpcmips standalone programs.
Versions 5.0 and 6.0 of Visual C++ are known to build the standalone
programs correctly.  (You might be able to substitute the Windows CE
Platform Builder or the Windows CE Embedded Toolkit in place of the
Windows CE Toolkit if you don't have the latter, but this documentation
assumes that if you have the expensive tools you know how to use them.)
To prepare these tools:

  <ol>
    <li>Install Microsoft Visual C++ 5.0 or 6.0.
    <li>Install the Windows CE Toolkit for Visual C++ corresponding
      to your version of Visual C++ (e.g., the Windows CE Toolkit for
      Visual C++ 6.0, if you're using Visual C++ 6.0.  (If you are
      doing a custom installation, you do not have to install the
      cross-compilation tools for platforms other than "<tt>WCE MIPS</tt>."
      You should install both the Palm-size PC and Handheld PC components
      of the Toolkit.)
  </ol>
<p>
Finally, in order to build a boot loader with support for
directly reading kernels from BSD FFS disk partitions, you will need
the Windows CE raw disk I/O control header, <tt>diskio.h</tt>, to be
present in the "<tt>sys/arch/hpcmips/stand/include</tt>" directory of
your source tree.  (This header
is not required if you're content to build a version of the boot loader
which only supports reading kernels from FAT file systems.)  <tt>diskio.h</tt>
is part of the Windows CE Platform Builder (formerly known as the
"Embedded Toolkit"), and can be found in one of the following locations
depending on Platform Builder/Embedded Toolkit version:

  <!-- gross hack to make indentation nice in NS -->
  <dl>
    <dl>
      <dt>Windows CE Embedded Toolkit for Visual C++ 5.0:
      <dd>Unknown.  If you know, <a href="www@netbsd.org">send us mail</a>.

      <dt>Windows CE Platform Builder 2.11:
      <dd>On Disc 1, at the path "<tt>\public\common\oak\inc\diskio.h</tt>."

      <dt>Windows CE Platform Builder 2.12:
      <dd>Unknown.  If you know, <a href="www@netbsd.org">send us mail</a>.
    </dl>
  </dl>

</dd></dl></p>
<p><dl><dt>
<font face="helvetica, arial, sans-serif"><h3><a name="build-booter">Building the Windows CE Boot Program (pbsdboot.exe)</a>
<font size="-1">(<a href="#top">top</a>)</font></h3></font>
</dt><dd>

</dd></dl></p>
<p><dl><dt>
<font face="helvetica, arial, sans-serif"><h3><a name="build-references">Further references for the Microsoft tools</a>
<font size="-1">(<a href="#top">top</a>)</font></h3></font>
</dt><dd>

  <ul>
    <li><a href="http://msdn.microsoft.com/visualc/prodinfo/datasheet/default.asp">Visual C++ Datasheet</a>
    <li><a href="http://msdn.microsoft.com/cetools/vcprodinfo/vcdata.asp">Windows CE Toolkit for Visual C++ Datasheet</a>
    <li><a href="http://www.microsoft.com/windowsce/Embedded/start/datasheet.asp">Windows CE Platform Builder Datasheet</a>
  </ul>

</dd></dl></p>
<hr>
<h2>NetBSD/hpcmips kernel hacking</h2><hr>
<p><dl><dt>
<font face="helvetica, arial, sans-serif"><h3><a name="add-platform">Adding support for a new system</a>
<font size="-1">(<a href="#top">top</a>)</font></h3></font>
</dt><dd>

<!-- XXX REWORK -->
<dl>
  <dt>commit syssrc/sys/arch/hpcmips/hpcmips: platid.def
  <dt>make syssrc/sys/arch/hpcmips/ dir.
  <dd>regen syssrc/sys/arch/hpcmips/include: platid_generated.h platid_mask.h
  <dt>commit syssrc/sys/arch/hpcmips/ dir.
  <dt>add entry /syssrc/sys/arch/hpcmips/stand/pbsdboot/main.c and commit
  <dt>keyboard translation table
  <dd>commit /syssrc/sys/arch/hpcmips/vr/vrkiu.c
</dl>

</dd></dl></p>
<hr>

<a href="">Up to <em>NetBSD/hpcmips Port Page</em></a>
<hr>

<HOMELINK>

<hr>
<address>
  <a href="../../Misc/feedback.html">(Contact us)</a>
  $NetBSD: howto-develop.html,v 1.1 2000/02/16 09:22:40 jun Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 2000
    The NetBSD Foundation, Inc. ALL RIGHTS RESERVED.</a> 
</address>

</body>
</html>

