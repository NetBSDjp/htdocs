<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<!-- Copyright (c) 2001-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@JP.NetBSD.ORG">
<title>NetBSD/hpcarm User How-To page</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD/<font color="#657595">hpcarm</font>の利用法</h1>

このページは、NetBSD/hpcarm を使っている、あるいは使いたいと考えている
ユーザーがシステムをセットアップし保守することを助けるための情報が含ま
れています。

<LIST>

<SECTION>NetBSD/hpcarm を始めよう

<ENTRY>files  用意するファイル
NetBSD/hpcarm を使うためには、少なくとも三つのファイルが必要です。
<p>

<dl>
  <dt>hpcboot.exe
    <dd>WindowsCE 環境で動作するブートローダーです。
	現在 WinCE2.11 および PocketPC(WinCE 3.xx) の機械をサポートしていま
す。
	sys/arch/hpc/stand/binary/arm/ にあります。 (NetBSD-current
	のソースに含まれます;  <a
        href="../../Documentation/current/">NetBSD-current
	の追跡</a>を見てください。)
  <dt>netbsd (kernel)
    <dd>テスト用 (iPAQ): <URL>ftp://ftp.NetBSD.org/pub/NetBSD/arch/hpcarm/snapshot/kernel/netbsd-IPAQ20010708.gz
    <dd>テスト用 (JORNADA720): <URL>ftp://ftp.NetBSD.org/pub/NetBSD/arch/hpcarm/snapshot/kernel/netbsd-JORNADA720-20010623.gz
  <dt>miniroot.fs (vnconfig を使い作成されたファイルシステムイメージ)
    <dd>もうじき出来るよ。
</dl>

<ENTRY>boot-flash  メモリカードからの起動
多分、今のところ、これが一番簡単な方法です。
<p>

何らかのデバイスを、19200bps、パリティー無し、8bit 
でマシンのシリアルポートにつなぎます。
<p>

DOS でフォーマットされたカードを用意し、それに上の三つ
(今は二つだけ)のファイルをコピーします。
<p>

WinCE マシンにカードを挿し込みます。
<p>

確認項目: 既にシリアルケーブルが接続されていますか? シリアルケーブルは、
hpcboot.exe を実行する前に、 WinCE マシンに接続されている *必要があります*。
<p>

「Explorer」(「Internet Explorer」ではありません)で、メモリーカードの
ディレクトリーに移動し、(メモリーカードの名前は、環境により異なります)、 
hpcboot.exe を実行します。
もしくは、もし、その WinCE 製品が可能にできていれば、自動起動できるように設定
できます。
<p>

<br>[訳者注: 日本語版の Windows CE では、"Explorer" は"エクスプローラ"、
"Internet Explorer" は "Internet Explorer" となります。
英語のままか日本語になっているかは、同じバージョンの 日本語 WinCE でも機種に
よって違うようです。
また "\Storage Card 1\" は "メモリーカード1"となっているようです。
"メモリカード"の後ろにつく番号は機種/カードの入っているスロットに依存しま
す。]

hpcboot では、以下の項目を設定します。
<ul>
<li>「kernel」画面:
    <ul>
    <li>1行目:  「netbsd」へのパス名を設定します。
	「\Storage Card 1\」と「netbsd」 (引用符は含まれません) 、
	あるいは他の適切なパスを指定してください。
    <li>2行目: 使ってる機械の型を指定します。
	この情報は、画面のサイズ、キーボードの型や、
	いろいろなデバイスの設定を決定するのに使われます。
    <li>3,4行目: ファイルシステムの型を指定します。
	現時点では、 miniroot.fs が無いので、このオプションは意味がありません。
    <li>5行目: 「Serial console」だけが、明確に選択したくなるものです。
	他の項目は好きなように設定してください。
    </ul>
</ul>

お祈りします。
一番下の「boot」を押します。
「Last chance: Push OK to boot」(最後の機会です: OK を押すと起動します) 
というダイアログが出ます。
OK か リターンを押します(もちろん)。
成功すれば、
<a href="/Ports/hpcarm/dmesg-iPAQ-2000-02-24.txt" origlink="dmesg-iPAQ-2000-02-24.txt">このようなブートメッセージ</a> が
シリアルポートに表示されるはずです。
おめでとうございます!

<SECTION>カーネルのクロスコンパイル

<ENTRY>cross-tools クロスツールの準備
<a href="../../Documentation/current/">NetBSD-current の追跡</a>ドキュメントの
cvs の使い方に従い、 cvs checkout <code>gnusrc/gnu/dist/toolchain</code>
する必要があります。
<p>
<code>arm-unknown-netbsdelf</code> ターゲット用に configure してから
<code>gmake -k</code> を実行します。
<dl>
  <dd><code>cd gnusrc/gnu/dist/toolchain</code>
  <dd><code>./configure --target=arm-unknown-netbsdelf --prefix=/usr/local/cross</code>
  <dd><code>gmake -k</code>
  <dd><code>gmake -k install</code>
</dl>
以上の構築プロセスでエラーが出るかもしれませんが、 binutils、 gas、 gcc、
ld を使っている限りは気にする必要はありません。

<ENTRY>kernel-build カーネルの構築
少なくとも、下記の環境変数を <code>make</code> に渡すようにすべきです。
上記のクロスツールを <code>/usr/local/cross</code>
以外の場所にインストールしている場合は、パス名を調整してください。
<blockquote><pre>
MACHINE=hpcarm
MACHINE_ARCH=arm32
CC=/usr/local/cross/bin/arm-unknown-netbsdelf-gcc
AS=/usr/local/cross/bin/arm-unknown-netbsdelf-as
LD=/usr/local/cross/bin/arm-unknown-netbsdelf-ld
NM=/usr/local/cross/bin/arm-unknown-netbsdelf-nm
RANLIB=/usr/local/cross/bin/arm-unknown-netbsdelf-ranlib
SIZE=/usr/local/cross/bin/arm-unknown-netbsdelf-size
</pre></blockquote>
</LIST>

<a href="./"> <em>NetBSD/hpcarm ポートページ</em> にもどる</a>
<hr>

<PORTLINK>

<hr>
<address>
  <small>
  www@JP.NetBSD.ORG<br>
  $NetBSD: howto-use.list,v 1.8 2003/07/17 08:40:39 keihan Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 2001-2003
    The NetBSD Foundation, Inc. ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
