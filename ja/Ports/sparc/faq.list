<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
<!-- Copyright (c) 1994-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<link rev="made" href="mailto:www@jp.NetBSD.org">
<title>NetBSD/sparc Frequently Asked Questions</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1>NetBSD/sparc Frequently Asked Questions</h1>

NetBSD/sparc 固有のよく聞かれる質問(とその答)を集めるつもりです。

<LIST>

<h2>その他の情報</h2>

<ul>
<li><a href="http://sunsolve.sun.com/handbook_pub/">Sun System Handbook</a> - Sun のオンラインシステムドキュメント
<li><a href="http://sunsolve.sun.com/handbook_pub/Devices/Memory/MEM_Modules.html">Memory Modules</a> - メモリーモジュールの互換性
<li><a href="http://www.sunhelp.org/">SunHELP</a> - sun 関連の膨大な情報
<li><a href="http://www.sunhelp.org/faq/sunref1.html">Sun
    ハードウェアリファレンス FAQ</a> - 数年にわたる Sun のハードウェアの概要
<li><a href="http://docs.sun.com/?p=/coll/216.2">OpenBoot Collection</a>
    PROM コマンドと変数のリファレンス
<li><a href="http://www.squirrel.com/squirrel/sun-nvram-hostid.faq.html">Sun
    NVRAM/Hostid FAQ</a> - あなたのマシンの PROM のバッテリーがきれた時に
<li><a href="http://www.stokely.com/unix.serial.port.resources/A-B-Ycablepinout.html">
    Sun シリアルポートとケーブルのピン配置</a> - ほとんどのモデルのシリアル
    ポートのピン配置の一覧
<li>David Tong による<a href="http://www.sunhelp.org/faq/FrameBuffer.html"
    >フレームバッファー FAQ</a>
<li>Craig Dewick が集めている<a
    href="http://lios.apana.org.au/~cdewick/data/">The SunShack Data 
    Archive</a> (BootROM アップグレードと
    Sun Field Engineer Handbook を含む)
<li><a href="http://www.users.qwest.net/~eballen1/sparc.tech.links.html">Technical SPARC CPU resources</a>
<li><a href="http://mbus.sunhelp.org/misc/genconf.htm">MBus モジュールの組合せに関する情報</a>
</ul>
<p>

<ul>
<li><a href="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-1.6/sparc/INSTALL.html">
    NetBSD 1.6 インストールノート</a> - 対応ハードウェアとインストール方法。
<li><a href="../../MailingLists/#port-sparc"> port-sparc メーリングリスト</a>
    - もし、何か質問があれば、ぜひ講読してください。
<li><a href="../../Documentation/network/netboot/">
    NetBSD/sparc と NetBSD/sun3</a> のネットワークからの起動。
<li><a href="../../Documentation/Hardware/Misc/serial.html">NetBSD
シリアルポート入門</a>
<li><a href="../../Documentation/">一般的な NetBSD ドキュメンテーション</a>
    - NetBSD/sparc 固有でない質問。
</ul>
<p>

<SECTION>一般的な質問

<ENTRY>mpg123-nosupportedrate mpg123 から <tt><b>No supported rate found!</b></tt> というエラーメッセージが表示されました
もし、このエラーが表示されたら、チャンネルの数とストリームのレートを、
mpg123 の引数に指定する必要があります。古いシステム(sun4c マシンや
SPARC Classic のような)は、8 bit の 8 kHz モノサンプリングレートにしか
対応していません。これらのシステムでは、以下のように指定してください:
<p>

<blockquote>
mpg123 -m -r 8000 <i>filename</i>
</blockquote>
<p>

-m オプションは両チャンネルをモノ出力にミックスするためのものです。
-r はオーディオカードが対応しているレートを指定します。

<ENTRY>serial-console-garbage シリアルコンソールがごみを表示します
これは大抵、コンソール用のデフォルトの端末の種類が <tt>sun</tt> であり、また、
ほとんどのシリアル端末が <tt>vt100</tt> (またはその眷族) であって、両者が
異なるエスケープコードを使うためです。その場での回避策は、端末の種類の変更です:
<pre># <b>setenv TERM vt100</b></pre>

永続的な解決法は、 <tt>/etc/ttys</tt> を編集して <tt>console</tt>
行を変更することです:
<pre>console "/usr/libexec/getty suncons"    vt100 on secure</pre>
変更後、 <tt>kill -HUP 1</tt> またはリブートする必要があります。

<ENTRY>consoleopt どうすれば色や文字サイズといったコンソールオプションを変更できますか
変更するためにはカーネルの再コンパイルが必要です。黒地コンソールと白字にする
場合は、カーネルコンフィグファイルに以下を追加します:
<blockquote><pre> 
options         RASTERCONSOLE_FGCOL=WSCOL_WHITE 
options         RASTERCONSOLE_BGCOL=WSCOL_BLACK
</pre></blockquote>

<p>
フォントを小さくするには、以下を追加します:
<blockquote><pre>
options         FONT_BOLD8x16
</pre></blockquote>

<p>
このほか便利なオプションは、以下のものです
<blockquote><pre>
options         RASTERCONS_FULLSCREEN
</pre></blockquote>

<ENTRY>voyager-mouse SPARCstation Voyager の X 上のマウスの挙動が変です (<tt>ms0: input error (0xc47)</tt>)
どうやら Voyager 附属の純正マウス (Compact1 370-1865-01 マウス。 370-1865-03
ではない) は、他の Sun マウスのどれよりも速いシリアル速度
(1200 bps に対して、 4800 bps) で動作するようです。
対応策は二つあります:

<ul>
<li>別のマウスを使う
<li>カーネルコンフィギュレーションに <tt>options SUN_MS_BPS=4800</tt>
  を追加して再コンパイルする
</ul>

より詳しくは ms(4) を参照してください。

<ENTRY>cgsix-framebuffer-garbage スクロールバック時にフレームバッファーがごみを表示します
vi を終了した時、それからたまにスクロールバックした時に、ディスプレイは
数秒間ごみを表示しながらスクロールバックします。また、スクリーンの非テキ
スト部に、常にごみが表示されることもあります。これは、Sbus cgsix ボードの
ファームウェアのバグによるものであり、現在でも cgsix ボードがインストール
されているすべてのマシンで発生しています。
<br> これに対応するために、いくつかの方法があります:
<p>

<ul>
<li>端末タイプを <tt>sun-cgsix</tt> に設定してください
<li>termcap を編集し、デフォルトの '<tt>sun</tt>' エントリーが
<tt>:tc=sun-il:</tt> でなく<tt>:tc=sun-cgsix:</tt> を使用するように
    変更してください。
<li><tt>/etc/ttys</tt> を編集し、
<br><tt>console "/usr/libexec/getty suncons"    sun on secure</tt>
<br>を
<br><tt>console "/usr/libexec/getty suncons"    sun-cgsix on secure</tt>
<br>に変更してください。
</ul>

<ENTRY>sparclinux-sun4c なぜ、sun4c 上で NetBSD は SparcLinux より速いのですか
sun4c マシン(SPARCstation 1、1+、2、IPC、IPX、SLC、ELC と互換機)の
メモリー管理ハードウェアは、Linux ではうまく扱えていません。Linux が
MMU のコードを書きかえるまでは、これらのマシンでは NetBSD のほうが非常
に速く動作するでしょう。なお、 SPARCstation/server 1、 SPARCstation/server 1+
および Sun IPC の各機種では、NetBSD 1.6.2 より前まで長らくバグがありました。
これらの機種での安定性と速度の改善のため、最新バージョンの NetBSD
にアップデートすることをおすすめします。
<a href="#sun4c-sw-cache"><tt>sw flush: cache enabled</tt></a> の項を参照してください。

<ENTRY>illegal-reloc コンパイル中に <tt><b>ld: /usr/lib/c++rt0.o: illegal reloc type mix</b></tt> というメッセージが表示されます
1.4.3 より古いバージョンでは、NetBSD/sparc の /usr/lib/c++rt0.o は、
デフォルトで -fpic オプション付きでコンパイルされています。これは
あるサイズのオフセットしか扱えないという事を意味しています。-fPIC 付き
でコンパイルすれば、大きなオフセットを扱うことができ、大きなプログラムを
動かすことができます。
<p>

もし、1.4.3 以前の NetBSD リリースを使っているのであれば、/usr/lib/c++rt0.o
を <a
href="ftp://ftp.NetBSD.org/pub/NetBSD/arch/sparc/c++rt0/">ftp://ftp.NetBSD.org/pub/NetBSD/arch/sparc/c++rt0/</a> にある -fPIC バージョンのものと置き
換えれば問題は解決します。

<ENTRY>boot-floppy インストールブートフロッピーを作る
NetBSD/sparc のインストールフロッピーを作成するためには、まずリリース
ソースを入手する必要があります。次にリリースファイルをインストール
するが必要があります。リリースソースは、
<a href="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-release-1-6/tar_files/src/distrib.tar.gz">
NetBSD リリース</a>セクションにあります。リリースソースは
<tt>src</tt> ディレクトリーに展開されるので、<tt>/usr</tt> でアーカイブを
展開してください。次に、インストールカーネルを作成します:
<blockquote><pre>
# cd /sys/arch/sparc/INSTALL; make</pre></blockquote>
カーネルのビルドが終了したら、インストレーションフロッピーを作成すること
ができます:
<blockquote><pre># cd /usr/src/distrib/sparc/sysinst.ramdisk; make
# cd /usr/src/distrib/sparc/sysinst.bootfs; make</pre></blockquote>

<ENTRY>bootcd ブート可能な CD-ROM を作成する方法
<a href="../../Documentation/bootcd.html#sparcimage">NetBSD
ブート可能 CD ROM HOWTO</a>を御覧ください。

<ENTRY>nell <i>nell</i> sbus-to-PCMCIA ブリッジを使う
NetBSD 1.6 以降では、 SPARCstation Voyager のオンボードインターフェースや
nell sbus-to-PCMCIA ブリッジカードに繋がった cardbus および PCMCIA カードを
サポートしています。NetBSD 2.0 では、長年存在していたバグが多数修正され、
これらのサポートが劇的に改善されました。
<a href="../../Hardware/pcmcia.html">機種独立の PCMCIA ドライバー</a>
ページに挙げられたあらゆる PCMCIA デバイスが NetBSD 2.0 で動作するはずです。
一部のものはテスト済みです。デフォルトの GENERIC カーネルでは nell
インターフェースは有効になっていませんので、 nell および各種 pcmcia
インターフェースのコメントを外してカーネルを再構築する必要があります。

<p>NetBSD 1.6.x にはバイトエンディアン問題があり、現在のところ 16 ビットデバイスは動作しません。
nell サポートに関する Martin Husemann の
<a href="http://mail-index.NetBSD.org/port-sparc/2002/03/10/0002.html">投稿</a>
を参照してください。
この問題は NetBSD 2.0 およびそれ以降では修正されています。

<p>NetBSD 1.6.x では、sun4c および一部の sun4m の機種の <i>audioamd</i>
デバイスと (nell) デバイスの間でコンフリクトがあります。
この問題は NetBSD 2.0 およびそれ以降では修正されています。

<p>1.6.x のシステムでオンボード audioamd デバイスがあり、これと
nell インターフェースを両方使いたい場合は、
以下のオプションを追加して新しいカーネルを構築する必要があります:
<pre>
options 	AUDIO_C_HANDLER
</pre>
この問題は NetBSD 2.0 およびそれ以降では修正されています。

<p>Lucent WaveLAN カードを 1.6.x で使いたい場合は、カーネルコンフィギュレーションに
以下のハックを加える必要があります:
<pre>
options	WI_AT_BIGENDIAN_BUS_HACK
wi*	at pcmcia? function ?		# Lucent WaveLan IEEE (802.11)
</pre>

<SECTION>ハードウェアに関する質問

<ENTRY>smp-cpus どの CPU モジュールがマルチプロセッサーで動作可能ですか
<i>註: マルチプロセッサー対応は NetBSD 2.0 で追加されたものです。
NetBSD 1.6.x およびそれより前では、複数の CPU があっても、一つしか使いません。</i>

<p>SMP 対応の NetBSD/sparc モデルは、Sun 4/600、 SPARCstation/server 10、
SPARCstation/server 20 と、これらのクローンだけです。
SuperSPARC-I、  SuperSPARC-II および hyperSPARC MBus CPU
モジュールのほとんどは、 SMP システムで利用可能です。
手短にいえば、速度と
(ゼロでない) キャッシュサイズが同じモジュール 2 個の組み合わせでは、
問題ないはずです。キャッシュサイズや速度が異なるモジュールの組み合わせは、
動作報告はありましたが、古い (つまり遅い) モジュールやキャッシュを持たない
モジュールを使った場合には問題が起きるでしょう。以下の参照先で確認してください:
<ul>
<li><a href="http://lios.apana.org.au/~cdewick/data/suncpum.html">Sun CPU
    and Memory Tables</a>
<li><a href="http://mbus.sunhelp.org/">The Rough Guide to MBus Modules</a>
</ul>

<p>SMP で利用するためには、 GENERIC.MP カーネル
または以下のオプションを有効にしたカーネルを使う必要があります:
<pre>options         MULTIPROCESSOR          # include multiprocessor support
cpu*            at mainbus0             # declare additional CPUs</pre>

<p>別の CPU からブートするには、 PROM プロンプトで以下のコマンドを
実行します:
<pre>&lt;#0&gt; ok <b>N switch-cpu</b></pre>

このコマンド中の <tt><b>N</b></tt> は、どの CPU を使うかを指定するものです。
0 は 1 番目の mbus モジュール上の 1 個目の CPU、
1 は 1 番目のモジュール上の 2 個目の CPU、 2 は 2 番目のモジュール上の 1 個目の CPU、
3 は 2 番目のモジュール上の 2 個目の CPU を表します。
存在しない CPU を指定すると、システムが固まるかもしれません。
CPU コードをロードするためには、あらかじめ一度は NetBSD をブートしておく
必要があります。 Paul Kranenburg の <a 
href="http://mail-index.NetBSD.org/port-sparc/2003/01/20/0016.html">投稿記事</a>をご覧ください。

<ENTRY>video-cables どうすれば VGA モニターを Sun に接続できますか
Well, ケーブルを作るのと、アダプターを買うのと二つの方法があります。
アダプターは 30米ドル程度で見つけることができ、通常、フレームバッファー
はデフォルトの解像度で動作するでしょう。
<p>

ケーブルを作る方法は、Izumi Tsutsui の書いた
<a href="http://mail-index.NetBSD.org/port-sparc/2000/04/22/0001.html">手順
</a>を参照してください。
<p>

<a 
href="http://www.sunhelp.org/faq/FrameBuffer.html">フレームバッファー FAQ</a>
のフレームバッファーの情報、対応している解像度、デフォルトの解像度
を prom に設定する方法を見る事を忘れないでください。

<ENTRY>pmap-failure PROM の <tt>"*** U0209 ***</tt>" "<tt>PMAP 000d5000, Exp = 00000000, Obs = 04000000</tt>" といったメッセージはどういう意味ですか?
sparc2 でページマップ ram が機能しない場合、 PROM はフレームバッファーを
初期化しませんが、シリアルコンソールに
<pre>
*** U0209 ***
	PMAP = 000d5000, Exp = 00000000, Obs = 04000000
</pre>
といったメッセージを出力します。 (U0209 が U0208 となっていることもあります)
これへの対処はチップの交換しかありませんが、これには非常にデリケートな
ハンダ作業か、完全なマザーボードが必要になります。

<ENTRY>ross-mbus hyperSPARC mbus モジュールには対応していますか?
はい。すべての Ross の hyperSPARC モジュールは動作するはずです。
<a href="#smp-cpus">どの CPU モジュールがマルチプロセッサーで動作可能ですか</a>の項も参照してください。

<ENTRY>ross-memory Ross sparc 20 クローンのメモリー配置はどのようになっていますか?
Ben Cottrell は以下のように報告しています:
<cite>興味がある人のために書くと、Ross sparc クローンのスロットは:
一般的な方向にケースを見た時に、上から下へ 0 4 1 5 2 6 3 7 となっています。
</cite>

<ENTRY>oldscsi どうすれば奇妙な型の SCSI コントローラーに普通のデバイスを接続できますか
古い sun4 マシンは、古い型の 三段の SCSI コネクターをもっています。
このピンは<a href="oldscsipins.html">このページ</a>にのっています。


<SECTION>PROM とブートに関する質問

<ENTRY>abort-to-prom prom に落とす方法
prom に落す三つの方法があります:
<p>

<ul>
<li>Sun キーボードを使用している場合、<tt>[L1]</tt>+<tt>[A]</tt> 
    (あるいは <tt>[STOP]</tt>+<tt>[A]</tt>)を押下してください。
<li>Tadpole SPARCbook キーボードを使用している場合、
    <tt>[Pause]</tt>+<tt>[A]</tt> を押下してください。
<li>シリアルコンソールを使用している場合、BREAK シグナルを送信してください
    (端末の種類によって方法は異なります)。
</ul>
<p>

prom に落ちれば、'<tt>go</tt>' ('ok' プロンプト)、または
'<tt>c</tt>' (&gt; プロンプト)で処理を続行することができます。

<ENTRY>prom-troubleshooting PROM の問題のトラブルシューティング
<a href="http://docs.sun.com/db?p=/doc/806-2906-10/6jc3f0abd&a=view">docs.sun.com</a>
にあるトラブルシューティングガイドを参照してください。
また、イーサネットアドレスが <tt>FF:FF:FF:FF:FF:FF</tt> になってしまった場合は、
NVRAM が死んでおり、ブートに問題があるかもしれません。
<a href="#dead-nvram">イーサネットアドレス、あるいは hostid がすべて 1 になります</a>
を参照してください。

<ENTRY>non-sun-cdrom Sun 以外の CD-ROM ドライブで NetBSD/sparc CD-ROM がブートできないのですが、なぜ?
Sun の OpenBoot PROM を含む、ほとんどの UNIX ワークステーションの PROM では、
CD-ROM が 512 バイトのブロックサイズをサポートしていることを必要とします。
ほとんどの OEM Sun CD-ROM ドライブは、デフォルトで 512 バイトブロックサイズに
設定されています。ほとんどの最近のサードパーティー製ドライブは、 512 バイトと
2048 バイトのブロックサイズの両方を自動でサポートします。古いサードパーティー製
ドライブには、 2048 バイトと 512 バイトを切り替えるジャンパーがあるかもしれません。
ハードウェアベンダーで確認してください─
512 バイトセクターをサポートしないドライブはブートには使えませんが、
カーネルのロード後に通常の操作用としてなら使えます。

<p><a href="http://www.ebsinc.com/solaris/suncdrom.html">Sun CD-ROM 
FAQ</a> を参照してください。

<ENTRY>sun4c-sw-cache <tt>sw flush: cache enabled</tt>
NetBSD 1.6.2 より前まで、 sun4c アーキテクチャーには、 MMU のバグが長い間
存在していました。 NetBSD 1.6 および 1.6.1 では、 SPARCstation/server 1、
SPARCstation/server 1+ および Sun IPC で、遅いキャッシュ機構を使って
このバグを回避するようにしています。既知の問題はすべて、 1.6.2
およびそれ以降では修正されています。詳細は Paul Kranenburg の
<a href="http://mail-index.NetBSD.org/port-sparc/2003/07/18/0002.html">投稿</a>
をご覧ください。

<ENTRY>no-kernel-1-6-install <tt>open netbsd: no such file or directory</tt>
うぐぅ。 NetBSD 1.6 のインストーラーは、デフォルトインストールを選択した場合には
カーネルをインストールしません。もちろん、この問題は NetBSD 1.6.1
およびそれ以降では修正されています。

<p>簡単な対処としては、インストーラーを再度実行し、 <tt>Re-install
sets or install additional sets</tt> を選択してから、インストール対象として
<tt>kern-GENERIC.tgz</tt> を選ぶという方法があります。

<ENTRY>sun4c-framebuffer-speedup sun4c ホスト上で、どうすればフレームバッファーをスピードアップできますか
greywolf@starwolf.com が作ったシェルスクリプトがあります。これは、
OBP バージョン 2 以上(IPX のような)の sun4c ホストで、フレームバッファー
への PROM アクセスのスピードを向上させます。
<pre>
#! /bin/sh -
eeprom 'nvramrc=probe-all install-console
ramforth
: cache-page dup pgmap@ cacheable swap pgmap! ;
up@ cache-page
here origin do i cache-page pagesize +loop
banner'
eeprom 'use-nvramrc?=true'
exit 0
</pre>

<ENTRY>cylinders パーティションの開始、終了位置はシリンダー境界である必要が本当にあるのでしょうか
必要であるとも、いえないともいえます。prom は、シリンダーの先頭からしか、
ブートローダーをロードすることができません。つまり、ブート可能なパーティ
ションはシリンダー境界で始まる必要があります。ディスクラベルのシリンダー
サイズはディスクの本当の物理的なシリンダーサイズとまったく関係ありません。
シリンダーサイズを 1 に設定することはできません(つまり、シリンダー数=
セクター数)。これは、シリンダー数は16 ビットの整数として保存されるからです。
(あなたのディスクはたったの 32MB になってしまいます)
<p>

パーティションは、シリンダー境界で終了する必要はありません。そして、これに
よる副作用はまったくありません。


<ENTRY>prom-passwd ブートを中断した時に、PROM がパスワードをたずねます
パスワードを消去するために、マシンに物理的にアクセスする必要があります。
電源をおとし、再度電源をいれます。そして、PROM のプロンプトが表示される
前に、<tt>[L1]</tt>+<tt>[N]</tt>(または <tt>[STOP]</tt>+<tt>[N]</tt>)
を押下します。これにより、PROM は工場出荷時の状態にもどります。
<p>

また別の方法として(驚かせるわけではありませんが)、電源をおとし、再度、
電源をいれ、prom に落とします。パスワードプロンプトが表示されるのを待って、
細心の注意をしながら PROM チップを取り除いてください。リターンを押下し、
PROM を注意深く交換してから、新しいパスワードを入力してください。

<ENTRY>cachechipbug カーネルメッセージ <tt><b>cache chip bug; trap page uncached</b></tt> はどういう意味ですか?
もし、このカーネルのメッセージが表示されても、まったく問題はありません。
「buserr-type」が 1 のマシンは、キャッシュチップにバグがあります。
<tt><b>cache chip bug; trap page uncached</b></tt> というメッセージは、
このバグに対応するためにカーネルの応急措置がおこなわれたという事です。
<p>

この応急措置をおこなわなければ、キャッシュは間違ったデータを送りだ
します。この結果、しばしば不正なインストラクションが発生し、トラップ
につぐトラップにより、リセットがかかります。この状況は、ROM によって
のみ捕捉可能ですが、捕捉時に何かをしようとしても遅すぎます。もし、たま
たまこのメッセージを目にしたとしても、これは問題は発生しないであろうと
いう事を意味しているにすぎません。

<ENTRY>floppy-memory-boundary 1.4.2 フロッピーから起動すると、"Data Access Exception" と表示されます
不幸にも、NetBSD 1.4.2 のフロッピーは、いくつかのマシン(特に IPX のような
隣接していないメモリーバンクを持つ sun4c マシン)上でブートローダーに問題
をかかえています。もし、このエラーが発生したら、この不具合が修正された
<a href="ftp://ftp.NetBSD.org/pub/NetBSD/arch/sparc/1.4.2-bootfs/">フロッピー
イメージ</a> をダウンロードするか、マシンの最初のバンクに 16MB の SIMM を
さす必要があります
(不具合のあるブートローダーとカーネルに対応するには、4 MB では小さすぎます)。
<p>

これは、1.4.2 ブートフロッピーにだけ存在する問題です。すでに -current では
修正済みで、NetBSD/sparc の将来のリリースでは発生しないはずです。

<ENTRY>powerlite85-floppy RDI PowerLite 85 をフロッピーディスクからブートする方法は?
PowerLite 85 の OpenBoot PROM は、フロッピードライバーにバグがあるようです。
Cliff Wright はこれを修正する nvramrc パッチを作りました:
<pre>: trk0_delay
    50 ms 4
;
['] trk0_delay false ['] 4 false ffd34e90 (patch)
4 true ['] 2 false ffd34f28 (patch)</pre>

より詳しくは、彼の
<a href="http://mail-index.NetBSD.org/port-sparc/2001/05/14/0001.html">投稿</a>
を参照してください。

<SECTION>シリアルポートに関する質問

<ENTRY>sparc2-serial-console NetBSD 1.4.2 以前のバージョンで SPARCstation 2 でシリアルコンソール使用する時の問題
1.4、または 1.4.1 カーネルをシリアルコンソールでブートした時に、以下の
メッセージが表示されます:
<blockquote>
<pre>Warning: unparseable stdin-path property
Warning: unparseable stdout-path property
cninit: invalid inSource 0xffffffff</pre>
</blockquote>
これは、PROM のリビジョンが 2.4 以前の SPARCstation 2 でシリアルコンソール
を使いブートした時に発生する既知の問題です。詳細は、
<a href="http://www.NetBSD.org/cgi-bin/query-pr-single.pl?number=7409">
PR/7409</a>を参照してください。この問題は、NetBSD 1.4.2 で解決されています。
もし、修正がおこなわれた 1.4.1 GENERIC カーネルが必要なら、
<a href="ftp://ftp.yubyub.net/pub/NetBSD/NetBSD-1.4.1/sparc/netbsd.GENERIC_SS2_CONSOLE.gz">
これ</a>を使ってください。<tt>src/arch/sparc/dev/zs.c</tt> を強制的に
<tt>/dev/ttya</tt> だけをシリアルコンソールとして使用するように変更する
パッチが
<a href="ftp://ftp.yubyub.net/pub/NetBSD/NetBSD-1.4.1/sparc/zs.diff">
zs.diff</a>です。
このパッチをあてても、標準のキーボードとモニターをコンソールとして使用する
ことは可能です。シリアルコンソールを使用する場合に、常に<tt>/dev/ttya</tt>
がコンソールとなるだけです。

<ENTRY>serial-unplug シリアルコンソールを unplug するとマシンがいつも再起動します
連続するゼロのストリームは prom に入力される「BREAK」コマンドと同じです。
ケーブルを抜くとシリアルラインが空くので、このような現象が発生します。
pullup 抵抗を使用するスイッチボックスを作れば、この問題を避けることができ
ます。
<p>

4.7 KOhm の抵抗を ピン 3 と 25 の間に挿入してください。

<ENTRY>serial-port-minidin8 MiniDin8 コネクターを持っているマシンで Macintosh シリアルケーブルを使うことはできますか?
はい、そしていいえです。もちろん、このケーブルを使うことはできます。しかし、
いくつかのハードウェアハンドシェーキングラインには対応していないので、
ハードウェアハンドシェーキングをおこなう事ができません。
<p>

詳しくは、 <a href="../../Documentation/Hardware/Misc/serial.html">NetBSD
シリアルポート入門</a>を見てください。

<ENTRY>serial-port-splitter SPARCstation 20 と SPARC classic 上のシリアルポートの分割
SPARCstation 20 や SPARC Classic のようないくつかの sparc マシンは、
シリアルポートを二つもっていますが、ひとつの DB-25 コネクターを使用
します。シリアルポート A は、標準のピン配置を使うように結線されてい
ます。したがって、「普通の」(シリアルポート用のものであれば何であれ)
シリアルケーブルを使うことができます。シリアルポートB を使うためには、
アダプターケーブルが必要です。Dan McMahill が Sun P/N 530-1677-01 
ケーブルのピン配置を描いています。
<p>

<ul>
<li><a href="faq/sun_530-1677-01-rev50.txt">ケーブル図 (ascii 4k)</a>
<li><a href="faq/sun_530-1677-01-rev50.jpg">ケーブル図 (jpeg 76k)</a>
<li><a href="faq/sun_530-1677-01-rev50.ps">ケーブル図 (postscript 18k)</a>
</ul>

<ENTRY>fastserial 組み込みのシリアルポートを 38400 bps 以上の速度で使用できますか?
簡単にいえばできません。
<p>
もう少し詳しく説明すると、非標準の速度(76800 bps や 51200 bps のような)
で使用することも可能です。der Mouse は、シリアルチップを
<a href="http://mail-index.NetBSD.org/port-sparc/2000/04/25/0005.html">
より速いモード</a>で動かすためにパッチをあてています。しかし、これには
全く信頼性がありません(エラーが頻発するということです)。
<p>

いくつかの<a href="../sparc64/">sparc64</a> マシンは、これ以上の速度で
シリアルポートを使うことができます。しかし、これらのマシンは異なるシリアル
チップセットを使用しているのです。

<SECTION>イーサネットに関する質問

<ENTRY>ether-address すべてのイーサネットインターフェースが同じハードウェアアドレスを持っています
はい、これは正しい状態です。
一般的には、マシンは、接続された <i>全ての</i>イーサネットインターフェース
に対してひとつのイーサネットハードウェアアドレス (いわゆる MAC)しか持って
いません。これは、MAC アドレスがイーサネットインターフェースでなく、
マザーボード上の NVRAM に保存されるからです。
<p>

これは、一つ以上のイーサネットインターフェースを持つ sparc box の場合、
二つのインターフェースが同じサブネット上に存在することはできない事を
意味しています。現実的には、これはほとんど問題になりません。例えば:
<pre>smaug% ifconfig -a
le0: flags=8822&lt;BROADCAST,NOTRAILERS,SIMPLEX,MULTICAST&gt; mtu 1500
        address: 08:00:20:20:e2:54
        media: Ethernet autoselect
be0: flags=8863&lt;UP,BROADCAST,NOTRAILERS,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        address: 08:00:20:20:e2:54
        media: Ethernet autoselect (10baseT half-duplex)
</pre>

<ENTRY>dead-nvram イーサネットアドレス、あるいは hostid がすべて 1 になります
すべてが 1 のイーサネットアドレス(ff:ff:ff:ff:ff:ff のように)や hostid 
でマシンがブートしたら、ほとんどの場合 NVRAM の寿命がつきています。
これは特に sun4c クラスのマシンでよくおこります。これらのシステムで使用
されている NVRAM は比較的寿命が短く、そろそろ寿命がつきつつあるからです。
<p>

交換の方法とチップの再初期化、新しい NVRAM チップを入手することができない
場合の一時的な回避方法については、
<a href="http://www.squirrel.com/squirrel/sun-nvram-hostid.faq.html">
Sun NVRAM/Hostid FAQ</a> を、御覧下さい。

<p>システムのオリジナルの hostid とイーサネットアドレスが不明の場合、
nvram チップのバーコードをもとに判別できるかもしれません。
より詳しくは、この
<a href="http://mail-index.NetBSD.org/port-sparc/2001/09/04/0002.html">投稿</a>
と、この
<a href="http://mail-index.NetBSD.org/port-sparc/2001/09/04/0003.html">投稿</a>
を参照してください。

<ENTRY>tadpole-3gx-transceiver ブート時に接続されていないと Tadpole 3GX トランシーバーが動きません
物理的に 10Base-T ポートが存在しないので、インターフェースは自動的に 
10BaseT と判断されるはずです。
<p>

「<tt><b>ifconfig le0</b></tt>」で出力されるメディアタイプを確認してください。
外部トランシーバーを使用するためには、<tt>10Base5</tt> でなければなりません。
もし、そうでなれば、「<tt><b>ifconfig le0 media 10base5</b></tt>」コマンド
を実行してください。

<SECTION>JavaStation に関する質問

<ENTRY>javastation-supported どの JavaStation がサポートされていますか?

<p>あなたが持っている JavaStation が何であるか、また、どのハードウェアがサポートされているかについては、
<a href="javastation.html"> JavaStation Status</a> ページをお読みください。


<ENTRY>javastation-info ハードウェア情報
Linux on the Sun JavaStation NC HOWTO には、すばらしい情報がたくさん
含まれています。<a
href="http://www.ibiblio.org/pub/Linux/docs/HOWTO/other-formats/html_single/JavaStation-HOWTO.html#WHATISCHAPTER">
セクション 2</a> は、彼らが手にいれたさまざまなモデルとその中身について
記述しています。<a
href="http://www.ibiblio.org/pub/Linux/docs/HOWTO/other-formats/html_single/JavaStation-HOWTO.html#BACKGROUNDREQUIREMENTSCHAPTER">
セクション 3</a> には、netboot 環境に関する情報が記述されています。
(初心者向け([訳注: for puppies])の netboot の設定方法に関してはNetBSD <a
href="../../Documentation/network/netboot/">Diskless HOW-TO</a> 
も御覧下さい)。そして、<a
href="http://www.ibiblio.org/pub/Linux/docs/HOWTO/other-formats/html_single/JavaStation-HOWTO.html#APPENDIXCHAPTER">
セクション 10</a> には、JavaStation のジャンパーの設定の一覧があります。


<ENTRY>fox Fox とは何だったのですか?
Fox はレンガサイズの SS4 というのが最もふさわしい表現でしょう。特徴としては:
<p>

<ul>
<li> SBus と AFX スロットは一つずつしか存在せず、並んでいます。したがって、どちらか一つしか使用できません
<li> Crystal Semiconductor 4231 オーディオ <i>(audiocs)</i>
<li> stp4020 (PCMCIA) <i>(nell)</i>
<li> 通常、オンボードのシリアル a/b、SCSI、10BaseT
</ul>
<p>

これは、Java car の初期バージョンに使用されましたが、後にもっと速いマシン
が使われるようになりました。



<SECTION>SunOS と Solaris エミュレーションに関する質問

<ENTRY>solaris-filesystem NetBSD は Solaris のファイルシステムをサポートしていますか?
種類によります。 Solaris 5 以降でアクセス制御リスト (ACL) 付のファイルシステム
を作った場合、 NetBSD の fsck(8) はスーパーブロックを Solaris
では使えないようにします (つまり、そのファイルシステムはもう Solaris でマウントできません) 。

<p>Solaris のファイルシステムはリードオンリーでマウントするか、
ACL なしで作るべきです。このトピックに関する Christos Zoulas の
<a href="http://mail-index.NetBSD.org/port-sparc/2001/03/10/0001.html">投稿</a>
を参照してください。

<ENTRY>emulation-setup SunOS/Solaris エミュレーションの設定方法
<b>注意:</b>  Sun のマーケティングや Solaris の紛らわしい uname
出力にかかわらず、 SunOS と Solaris は同じ OS ではないことに留意してください!
SunOS 4.x (Solaris 1.x) は BSD、 Solaris 2.x は SysV です。 SunOS の uname は
`SunOS 4.x' を、 Solaris の uname は `SunOS 5.x' を返します。
<p>
SunOS エミュレーションを設定するためには、いくつかの SunOS のライブラリー
が必要です。それのライブラリーは、Sun のサポートサイトにあります。以下の
ライブラリーが必要になるでしょう:
<p>

<ul>
<li><tt><a href="ftp://sunsolve.sun.com/pub/patches/102545.readme">
ftp://sunsolve.sun.com/pub/patches/102545-13.tar.Z</a></tt>
 - このアーカイブは <tt>102545-13/lib/libc.so19</tt> と
<tt>102545-13/5lib/libc.so29</tt> を含んでいます。これらを、それぞれ
<tt>/emul/sunos/usr/lib/libc.so.1.9</tt> と
 <tt>/emul/sunos/usr/5lib/libc.so.2.9</tt> という名前に変更してください。
<li><tt><a href="ftp://sunsolve.sun.com/pub/patches/100257-06.tar.Z">
ftp://sunsolve.sun.com/pub/patches/100257-06.tar.Z</a></tt>
 - このアーカイブは <tt>100257-06/4.1.3c/sun4/ld.so</tt> を含んでいます。
これを<tt>/emul/sunos/usr/lib/ld.so</tt>という名前に変更してください。
<li>最後に、SunOS マシンから<tt>libdl.so.1.0</tt>を入手する必要があります。
それから、このファイルを<tt>/emul/sunos/usr/lib</tt>に置いてください。
Solaris の <tt>libdl.so.1.0</tt> は、SunOS エミュレーションでは動作しないの
で注意してください。
<p>

より詳しくは、 compat_sunos(8) と compat_svr4(8) を参照してください。
</ul>

<ENTRY>netscape NetBSD/sparc で Netscape は動作しますか
<a href="../../Documentation/software/packages.html">NetBSD パッケージコレクション</a> に三つの「Netscape」ブラウザーがあります:
<p>

<ul>
<li><PKGSRC>www/communicator - email を含む完全な Netscape communicator のインストール(SunOS または Solaris のライブラリーが必要)
<li><PKGSRC>www/navigator - スタンドアローン Navigator ブラウザー(SunOS または Solaris のライブラリーが必要)
<li><PKGSRC>www/mozilla - フリーバージョンの Netscape ブラウザー
</ul>
<p>

communicator と navigator パッケージの両方とも、mozilla より速く動作し、
より多くの機能を持っています。しかし、これらを使うためには、 /emul/svr4
に Solaris のライブラリーをインストールする (compat_svr4(8) 参照) か、
または /emul/sunos に SunOS-4.1 のライブラリーをインストールする
(compat_sunos(8) 参照) 必要があります。
libdl.so 以外の SunOS-4.1 のライブラリーはすべて、Sun の
<a href="ftp://sunsolve.sun.com/pub/patches/">ftp サイト</a>から入手可能
です。誰かが、libdl も一緒に置いてくれると、非常にうれしいのですが :)

netscape の最新バージョンは Solaris で利用可能なので、
communicator と navigator は Solaris-2.5.1 版がデフォルトになっています。
SunOS-4.1 で利用可能な最後のバージョンは netscape-4.61 のようです。
SunOS-4.1 版の netscape を使いたい場合は、 /etc/mk.conf で変数 NS_USE_SUNOS をセットします。

<ENTRY>sunos-netscape-socket SunOS エミュレーション環境下で、Netscape の起動に失敗し、「Error: Can't open display: :0.0」と表示されます
Solaris の Netscape (すくなくともバージョン 4.51)は、X サーバーとの
接続に、Unix ドメインソケットでなく、パイプを使用します。
Netscape を起動する前に、
<b>DISPLAY=unix:0.0</b> を設定してみてください。そうすれば動作するように
なるでしょう。一番簡単な方法は、netscape を実行する前に、他に必要な環境
変数も一緒に設定するスクリプトを使うことです:
<p>

<blockquote>
<pre>#!/bin/sh
export XKEYSYMDB=/usr/X11R6/lib/X11/XKeysymDB
export MOZILLA_HOME=/usr/local/netscape.svr4
export XNLSPATH=$MOZILLA_HOME/nls
exec $MOZILLA_HOME/netscape $* </pre>
</blockquote>

</LIST>

<a href="./"><em>NetBSD/sparc ポートページ</em>にもどる</a>
<hr>

<DOCLINK>

<hr>
<address>
  <small>
  (連絡先 - <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">英語</a>,
       <a href="mailto:www@jp.NetBSD.org">日本語:
       www@jp.NetBSD.org</a>)<br>
  $NetBSD: faq.list,v 1.97 2004/06/17 07:52:44 mbw Exp $<br>
  <a href="../../Misc/disclaimer.html">Copyright &copy; 1994-2003
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
