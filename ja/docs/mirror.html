<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Website XSL Stylesheet V2.6.0">
<link rel="home" href="../../." title="Welcome to The NetBSD Project: Of course it runs NetBSD.">
<link rel="up" href="../../ja/docs/." title="NetBSD ドキュメンテーション">
<link rel="previous" href="../../ja/docs/kernel/." title="NetBSD ドキュメンテーション: カーネル">
<link rel="next" href="../../ja/docs/misc/." title="NetBSD ドキュメンテーション: 他の FAQ と HOWTO">
<link rel="first" href="../../ja/docs/Hardware/." title="ハードウェアドキュメンテーション">
<link rel="last" href="../../ja/docs/x/." title="NetBSD ドキュメンテーション: X Window System">
<link rel="stylesheet" href="../../global.css" type="text/css">

    

    
    
    <title>NetBSD ミラー FAQ</title>
  </head>
<body class="website"><div class="webpage">
<a name="ja-docs-mirror"></a><div id="top"><a href="#mainContent" class="doNotDisplay doNotPrint">本文へ飛ぶ。</a></div>
<div id="header">
<div class="topNavigation">
<span>» </span><a href="../../docs/guide/en/">
	  ガイド</a> |
	<a href="http://man.NetBSD.org/">マニュアルページ</a> |
	<a href="../../ja/mailinglists/">
	  メーリングリスト</a>と
	<a href="http://mail-index.NetBSD.org/">記事</a> |
	<a href="http://cvsweb.NetBSD.org/">CVS リポジトリー</a> |
	バグの<a href="http://www.NetBSD.org/cgi-bin/sendpr.cgi?gndb=netbsd">報告</a>
	と
	<a href="../../ja/support/query-pr.html">
	 照会</a> |
	<a href="../../ja/docs/software/packages.html">
	  ソフトウェアパッケージ
	</a>
</div>
<div class="centralHeader">
<a href="../../ja/"><img alt='NetBSD プロジェクト "Of course it runs NetBSD"' width="506" height="90" src="../../images/NetBSD-headerlogo.png"></a><div class="headerTools"><div id="headerSearch">
<div id="header-cse-search-form" style="width: 24%;">Google custom search</div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script><script type="text/javascript"> 
                  google.load('search', '1', {language : 'en'});
                  google.setOnLoadCallback(function() {
                    var header_customSearchControl = new google.search.CustomSearchControl('006277936787196004968:mbdhrauy1wm');
                    header_customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
                    var header_options = new google.search.DrawOptions();
                    header_options.enableSearchboxOnly("http://google.com/cse?cx=006277936787196004968:mbdhrauy1wm");    
                    header_customSearchControl.draw('header-cse-search-form', header_options);
                  }, true);
                </script><link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css">
</div></div>
</div>
<div class="navBar">
<span class="doNotDisplay">
	  案内:
	</span><a href="../../ja/">
	  ホーム</a> | 
	<a href="../../ja/about/">
	  概要</a> | 
	<a href="../../ja/gallery/">
	  展示室</a> | 
	<a href="../../ja/releases/">
	  ダウンロード</a> | 
	<a href="../../ja/docs/">
	  ドキュメンテーション</a> | 
	<a href="../../ja/support/">
	  サポート</a> | 
	<a href="../../ja/community/">
	  コミュニティー</a> | 
	<a href="../../ja/ports/">
	  機種</a>
</div>
</div>
<div id="content"><div class="fullWidth"><div class="rowOfBoxes">
<h1>NetBSD ミラー FAQ</h1>
<h3 class="title"><a name="ftp-mirror">FTP および ISO ミラー FAQ</a></h3>
<ul>
<li><a href="#ftp-overview">NetBSD FTP/ISO ミラー立ち上げのあらまし</a></li>
<li><a href="#ftp-diskspace">FTP/ISO ミラーに必要なディスク容量はどれくらいか?</a></li>
<li><a href="#ftp-bandwidth">FTP/ISO ミラーの提供に必要な帯域はどれくらいか?</a></li>
<li><a href="#ftp-retrieve-sync">NetBSD FTP サイトおよび
	  ISO イメージ領域のコンテンツを取得する/同期を取る</a></li>
<li><a href="#ftp-notes">NetBSD FTP/ISO ミラーに関する注意事項</a></li>
<li><a href="#ftp-outage">サービスの停止期間をどこに連絡する必要があるか</a></li>
<li><a href="#ftp-contactinfo">FTP/ISO ミラー用コンタクトインフォメーションのフォーマット</a></li>
<li><a href="#ftp-cname">(ftp|iso).country-code.NetBSD.org の取得方法</a></li>
<li><a href="#ftp-teardown">FTP/ISO ミラーの提供ができなくなった場合</a></li>
</ul>
<h3 class="title"><a name="bitorrent">BitTorrent ミラー FAQ</a></h3>
<ul>
<li><a href="#bittorrent-what">Bit…って何?</a></li>
<li><a href="#bittorrent-overview">NetBSD Bittorrent ミラー立ち上げのあらまし</a></li>
<li><a href="#bittorrent-contactinfo">BitTorrent ミラー用コンタクトインフォメーションのフォーマット</a></li>
</ul>
<h3 class="title"><a name="www">WWW ミラー FAQ</a></h3>
<ul>
<li><a href="#www-overview">NetBSD WWW ミラー立ち上げのあらまし</a></li>
<li><a href="#www-diskspace">WWW ミラーに必要なディスク容量はどれくらいか?</a></li>
<li><a href="#www-retrieve">NetBSD WWW サイトのコピーを取得する</a></li>
<li><a href="#www-sync">NetBSD WWW サイトコンテンツの同期をとる</a></li>
<li><a href="#www-fetch">htdocs/mirrors/fetch.html の目的</a></li>
<li><a href="#www-http-1.0">HTTP/1.0 クライアントが適切なページを見られるよう保証する</a></li>
<li><a href="#www-contactinfo">WWW ミラー用コンタクトインフォメーションのフォーマット</a></li>
<li><a href="#www-cname">www.country-code.NetBSD.org の取得方法</a></li>
<li><a href="#www-teardown">WWW ミラーの提供ができなくなった場合</a></li>
</ul>
<h3 class="title"><a name="cvsweb">CVSweb ミラー FAQ</a></h3>
<ul>
<li><a href="#cvsweb-overview">NetBSD CVSweb ミラー立ち上げのあらまし</a></li>
<li><a href="#cvsweb-diskspace">CVSweb ミラーに必要なディスク容量はどれくらいか?</a></li>
<li><a href="#cvsweb-retrieve">NetBSD CVS ツリーのコピーを取得する</a></li>
<li><a href="#cvsweb-sync">NetBSD CVS ツリーコンテンツの同期をとる</a></li>
<li><a href="#cvsweb-cgi">cvsweb CGI スクリプトの設定方法</a></li>
<li><a href="#cvsweb-http-1.0">HTTP/1.0 クライアントが適切なページを見られるよう保証する</a></li>
<li><a href="#cvsweb-contactinfo">CVSweb ミラー用コンタクトインフォメーションのフォーマット</a></li>
<li><a href="#cvsweb-cname">cvsweb.country-code.NetBSD.org の取得方法</a></li>
<li><a href="#cvsweb-teardown">CVSweb ミラーの提供ができなくなった場合</a></li>
</ul>
<hr>
<h3 class="title">FTP および ISO ミラー FAQ</h3>
	<h4 class="title">
<a name="ftp-overview"></a>NetBSD FTP/ISO ミラー立ち上げのあらまし (<a href="#ftp-mirror">top</a>)
  </h4>

	<p>NetBSD FTP あるいは ISO ミラーの立ち上げの基本的な手順は、
	  以下のとおりです:</p>

	<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">ディスクスペースを用意します。必要な容量については、「<a class="ulink" href="#ftp-diskspace" target="_top">FTP/ISO
	      ミラーに必要なディスク容量はどれくらいか</a>」
	    の項目を見てください。</li>
<li class="listitem">NetBSD FTP 
	    サイトのコンテンツのコピーを持ってきます</li>
<li class="listitem">あなたのミラーのコンテンツを <code class="code">ftp.NetBSD.org</code>
	    と同期を取るようにします。</li>
<li class="listitem">あなたのミラーに関する情報を
	    <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> へ送ります。これについての詳細は「<a class="ulink" href="#ftp-contactinfo" target="_top">FTP/ISO
	      ミラー用コンタクトインフォメーションのフォーマット</a>」 
	    を見てください。</li>
</ol></div>
      
	<h4 class="title">
<a name="ftp-diskspace"></a>FTP/ISO ミラーに必要なディスク容量はどれくらいか? (<a href="#ftp-mirror">top</a>)
  </h4>

	<p>必要な総ディスク容量は、コンパイル済パッケージの追加、
	  バイナリースナップショットの消去、 NetBSD の新しい公式リリースなどによって
	  変動します。
	  2008 年 9 月現在、
	  サポート中の NetBSD リリース版の完全なミラーには 90 GB が必要です
	  (サポートが終了した旧リリースを含めると 185 GB)。
	  このほか、日々構築される NetBSD のミラーには 100 GB が、
	  pkgsrc 全体 (ソースと、複数の枝分のバイナリーパッケージ) のミラーには
	  350 GB が必要です。</p>

	<p>ISO ファイル用に必要な容量は、
	  その時点でサポートされているバイナリーリリースがどれだけあるかによります。
	  古い枝の保守が終了した時には、この容量は少し減りますし、
	  NetBSD の新しいバージョンがリリースされた時には増えることになります。
	  各リリースは 7 〜 9 GB の容量を占めており、
	  2008 年 9 月現在、 iso 用の領域全体では約 30 GB の容量が必要です。</p>
      
	<h4 class="title">
<a name="ftp-bandwidth"></a>FTP/ISO ミラーの提供に必要な帯域はどれくらいか? (<a href="#ftp-mirror">top</a>)
  </h4>

	<p>私たちは今のところ、各ミラーサイトが使っている帯域の詳細な数値を、
          まったく把握していません。正確な数値をお教えするために必要な、
          各ミラーサイトで実際に使われている帯域は、
          利用可能な帯域、他のミラーサイトとの地理的な位置関係、
          ミラーしているデータ量など、さまざまな要因に大きく依存します。</p>

        <p>フルミラーサイトを運用して帯域の統計を取っている方がいらっしゃったら、
          どうぞ<a class="ulink" href="http://www.NetBSD.org/cgi-bin/feedback.cgi" target="_top">
          お知らせください</a>。</p>
      
	<h4 class="title">
<a name="ftp-retrieve-sync"></a>NetBSD FTP サイトおよび
	  ISO イメージ領域のコンテンツを取得する/同期を取る (<a href="#ftp-mirror">top</a>)
  </h4>

	<p>ファイルの取得や同期を行なう方法はいくつかあります。どの方法を使うかは、
	  あなたの個人的な趣味や、ネットワーク接続、システムに導入されたパッケージ
	  などによるでしょう。どの方法を取るにせよ、最初に適切なコマンドを手で打って実行して、
	  きちんと動作することを確認してから、 <a href="http://netbsd.gw.com/cgi-bin/man-cgi?cron+8+NetBSD-5.1+i386">cron(8)</a> 用のスクリプトを作るようにするのが、
	  おそらくよいでしょう。</p>

	<p>NetBSD の配布物のうち、 ISO イメージはすべて、
	  FTP サイトの <code class="filename">iso/</code> サブディレクトリー以下に置かれます。
	  このため、 ISO イメージのミラー方法は
	  FTP サイト全体のミラー方法とほぼ同じです。</p>

	<p>以下に、取得したコピーを同期させる方法の例をいくつか掲げます。
	  "&lt;FTPROOT&gt;" は、あなたの ftp サーバーのルートディレクトリーに置き換えてください。</p>

	<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/net/rsync/README.html" target="_top"><code class="filename">net/rsync</code></a> を使う場合:
	    </p>
<pre class="programlisting">$ rsync -v -Wartz --delete rsync://rsync.NetBSD.org/NetBSD &lt;FTPROOT&gt;/pub/NetBSD/</pre>
<p>
	    ISO ファイルのみをミラーする場合:
	    </p>
<pre class="programlisting">$ rsync -v -Wartz --delete rsync://rsync.NetBSD.org/NetBSD/iso &lt;FTPROOT&gt;/pub/NetBSD/iso</pre>
</li>
<li class="listitem">
<p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/net/wget/README.html" target="_top"><code class="filename">net/wget</code></a> を使う場合:
	    </p>
<pre class="programlisting">$ cd &lt;FTPROOT&gt;
$ wget -v -xnH -m ftp://ftp.NetBSD.org/pub/NetBSD/</pre>
<p>
	    ISO ファイルのみをミラーする場合:
	    </p>
<pre class="programlisting">$ cd &lt;FTPROOT&gt;
$ wget -v -xnH -m ftp://ftp.NetBSD.org/pub/NetBSD/iso/</pre>
</li>
<li class="listitem">
<p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/net/mirror/README.html" target="_top"><code class="filename">net/mirror</code></a> を使う場合:
	    </p>
<pre class="programlisting">$ cat &gt; ftp.NetBSD.org &lt;&lt;EOF
package=netbsd
comment=NetBSD
site=ftp.NetBSD.org
remote_dir=/pub/NetBSD
local_dir=&lt;FTPROOT&gt;/pub/NetBSD
do_deletes=true
algorithm=1
EOF
$ mirror ftp.NetBSD.org</pre>
<p>
	    ISO ファイルのみをミラーする場合:
	    </p>
<pre class="programlisting">$ cat &gt; iso.NetBSD.org &lt;&lt;EOF
package=netbsd
comment=NetBSD
site=iso.NetBSD.org
remote_dir=/pub/NetBSD/iso
local_dir=&lt;FTPROOT&gt;/pub/NetBSD/iso
do_deletes=true
algorithm=1
EOF
$ mirror iso.NetBSD.org</pre>
</li>
</ul></div>
      
	<h4 class="title">
<a name="ftp-notes"></a>NetBSD FTP/ISO ミラーに関する注意事項 (<a href="#ftp-mirror">top</a>)
  </h4>

	<p>NetBSD FTP/ISO ミラーなのですから、定期的にあなたの NetBSD FTP ツリーや ISO イメージ領域の
	  同期をとる必要があります。そうしないと、古いファイル、
	  現在は使用されていないファイルのせいで、ユーザーは困惑するかもしれません。</p>

	<p>また、たとえばセキュリティー上の問題などにより、プロジェクトから
	  ファイルの削除 (または他の管理作業) を要求されることもあります。</p>
      
	<h4 class="title">
<a name="ftp-outage"></a>サービスの停止期間をどこに連絡する必要があるか (<a href="#ftp-mirror">top</a>)
  </h4>
	
	<p>あなたの FTP/ISO ミラーが、何らかの影響をおよぼすようなシステム停止をする場合は、
	  あなた用の CNAME (がある場合) を近隣の代替サイトに一時的に振り替えられるように
	  するため、できるだけ早く <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> に連絡すべきです。
	  また、停止の注意を <a class="ulink" href="../mailinglists/#netbsd-users" target="_top">netbsd-users メーリングリスト</a>
	  にも送るべきかもしれません。</p>

	<p>あなたのミラーの CNAME を振り替えた場合は、元に戻すことができるよう、
	  いつ復旧するかを私たちにお知らせください。</p>
      
	<h4 class="title">
<a name="ftp-contactinfo"></a>FTP/ISO ミラー用コンタクトインフォメーションのフォーマット (<a href="#ftp-mirror">top</a>)
  </h4>

	<p>コンタクトインフォメーションを
	  <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> に提出する必要があります。</p>

	<p>この情報は、内部のミラーデータベースに追加され、このデータベースをもとに
	  ミラー関係の文書が作られます。
	  "<code class="code">contact*</code>" の項目は公開されることはありません。 NetBSD FTP/ISO
	  ミラー用コンタクトインフォメーションは、以下のフォーマットで
	  送付してください:</p>

	<pre class="programlisting">mirror          *マシン名*
country         *ホストの ISO 3166 国コード、/usr/share/zoneinfo/iso3166.tab 参照*
location        *詳細な場所(例えば、Foo 大学)*
ftp		*NetBSD ftp ミラー領域の url*
ftp-host	*ftp ミラーサービスを提供するホストの fqdn*
ftp-releng	*NetBSD リリースエンジニアリングファイル、別名 NetBSD-daily の url*
iso		*NetBSD イメージ領域の url*
iso-host	*iso イメージミラーサービスを提供するホストの fqdn*
organisation    *組織名*
contactperson   *担当者の名前*
contactemail    *担当者の電子メールアドレス*
contactkeyid	*担当者の pgp 鍵 id*
contactphone    *担当者の電話番号*
contactaddress  *担当者の郵政省メールアドレス*</pre>

	<p>たとえば以下のように書きます。</p>
	<pre class="programlisting">mirror          netbsd.foo.com
country         jp
location        Department of Computer Science, Foo University
ftp             ftp://ftp.foo-univ.ac.jp/pub/NetBSD/
ftp-host        ftp.foo-univ.ac.jp
iso		ftp://iso.foo-univ.ac.jp/pub/NetBSD/iso/
iso-host	iso.foo-univ.ac.jp
organisation    Foo University
contactperson   Foo Bar
contactemail    Bar@foo-univ.ac.jp
contactkeyid	GA23FG12
contactphone    +81 3 xxxx yyyy
contactaddress  9876 Foo City, Tokyo 1234567 Japan</pre>

	<p><code class="literal">ftp*</code> および
	  <code class="literal">iso*</code> の各行は、
	  適切なミラーサービスを提供している場合にのみ使ってください。たとえば、
	  あなたのサーバーにリリースエンジニアリングファイルを置かない場合は
	  <code class="literal">ftp-releng</code> は削除します。また、
	  ISO ミラーのみをおこなう場合は、 <code class="literal">ftp*</code> はいずれも使いません。</p>

	<p>あなたのミラーのコンタクトインフォメーションが変わったような場合は、
	  お気軽に <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> までお知らせください。</p>
      
	<h4 class="title">
<a name="ftp-cname"></a>(ftp|iso).country-code.NetBSD.org の取得方法 (<a href="#ftp-mirror">top</a>)
  </h4>

	<p>現在、ミラーの方針を再検討しているため、
	  .NetBSD.org
	  ドメイン内の名前の割当を一時的に中止しています。</p>
      
	<h4 class="title">
<a name="ftp-teardown"></a>FTP/ISO ミラーの提供ができなくなった場合 (<a href="#ftp-mirror">top</a>)
  </h4>

	<p>あなたのミラーをリストから削除し、当該 DNS 名を代替サイトに振り替えますので、
	  <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> までお知らせください。</p>
      <hr>
<h3 class="title">BitTorrent ミラー FAQ</h3>
	<h4 class="title">
<a name="bittorrent-what"></a>Bit…って何? (<a href="#bitorrent">top</a>)
  </h4>

	<p><a class="ulink" href="http://bitconjurer.org/BitTorrent/" target="_top">BitTorrent</a>
	  はファイル配布用のツールです。BitTorrent は非常に簡単に使えます - ダウンロードは、
	  ハイパーリンクをクリックすれば始まります。複数人が同時にダウンロードする場合は、
	  お互いにファイルの断片を送り合い、これによって中央サーバーの帯域負担がやわらげられます。
	  たとえ同時に多くのダウンロードがあっても、
	  新たにダウンロードした人は新たにアップロードできることになるので、
	  中央サーバーのアップロード負荷は非常に小さいままです。</p>
      
	<h4 class="title">
<a name="bittorrent-overview"></a>NetBSD Bittorrent ミラー立ち上げのあらまし (<a href="#bitorrent">top</a>)
  </h4>

	<p>NetBSD BitTorrent
	  ミラーの立ち上げの基本的な手順は、以下のとおりです:</p>

	<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/net/bittorrent/README.html" target="_top"><code class="filename">net/bittorrent</code></a> をインストールします。</li>
<li class="listitem">NetBSD の FTP サイトから <code class="filename">.torrent</code> ファイル群を持ってきます。
	    このファイル群は <code class="filename">/pub/NetBSD/iso/&lt;release&gt;</code> サブディレクトリーにあります。
	    このため、もしこのディレクトリーをミラー済みなら、この項はもう準備ができています。
	    さらなる情報については<a class="ulink" href="../../mirrors/torrents/" target="_top">このページ</a>
	    をご覧ください。</li>
<li class="listitem">
<p>BitTorrent を起動します:
	    </p>
<pre class="programlisting">cd /ftp/pub/NetBSD/iso/&lt;release&gt;; (btlaunchmany.py .) &gt;/dev/null 2&gt;/dev/null &amp;</pre>
<p>
	    ISO イメージをまだダウンロードしていない場合は、ここでダウンロードがおこなわれます。
	    転送レートの上限を指定するため、
	    <code class="code">--max_upload_rate arg</code>
	    や <code class="code">--max_download_rate arg</code>
	    のオプションを使えます。</p>
</li>
</ol></div>
      
	<h4 class="title">
<a name="bittorrent-contactinfo"></a>BitTorrent ミラー用コンタクトインフォメーションのフォーマット (<a href="#bitorrent">top</a>)
  </h4>

	<p>コンタクトインフォメーションを <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> に提出する必要があります。
	  この情報は、内部のミラーデータベースに追加され、このデータベースをもとに
	  ミラー関係の文書が作られます。
	  "<code class="code">contact*</code>" の項目は公開されることはありません。 NetBSD BitTorrent
	  ミラー用コンタクトインフォメーションは、以下のフォーマットで
	  送付してください:</p>

	<pre class="programlisting">mirror          *マシン名*
country         *ホストの ISO 3166 国コード、/usr/share/zoneinfo/iso3166.tab 参照*
location        *詳細な場所(例えば、Foo 大学)*
bittorrent	*BitTorrent URL / 付加情報の URL*
ipv6		*IPv6 サポートの有無*
organisation    *組織名*
contactperson   *担当者の名前*
contactemail    *担当者の電子メールアドレス*
contactkeyid	*担当者の pgp 鍵 id*
contactphone    *担当者の電話番号*
contactaddress  *担当者の郵政省メールアドレス*</pre>

	<p>たとえば以下のように書きます。</p>

	<pre class="programlisting">mirror          ftp.NetBSD.org
country         us
location        Silicon Valley, California
bittorrent	http://www.NetBSD.org/mirrors/torrents/
ipv6            yes
organisation    The NetBSD Foundation, Inc.
contactperson   Admins
contactemail    &lt;email-here&gt;@NetBSD.org
contactkeyid	AF226A4C
contactphone    555-123-1234
contactaddress 	Somwhere in Silicon Valley, California</pre>
      <hr>
<h3 class="title">WWW ミラー FAQ</h3>
	<h4 class="title">
<a name="www-overview"></a>NetBSD WWW ミラー立ち上げのあらまし (<a href="#www">top</a>)
  </h4>

	<p>以下は、NetBSD WWW ミラーの立ち上げにあたって推奨される手順の
	  概観です。</p>

	<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">この手順に沿ってミラーを立ち上げる場合、 cvs、 ssh、 wget が必要です。
	    cvs と ssh は 1.5 以降のバージョンの NetBSD に附属しており、また、
	    wget は <a class="ulink" href="software/packages.html" target="_top">NetBSD パッケージコレクション</a>
	    から利用可能です (<a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/net/wget/README.html" target="_top"><code class="filename">net/wget</code></a> 参照) 。もちろん、 apache
	    のような web サーバーも必要です。</li>
<li class="listitem">NetBSD WWW サイトのコピーを持ってきます。 anoncvs
	    を使った取得方法の説明は、「<a class="ulink" href="#www-retrieve" target="_top">NetBSD WWW サイトのコピーを取得する</a>」
	    を見てください。</li>
<li class="listitem">あなたのミラーのコンテンツを <code class="code">www.NetBSD.org</code>
	    と同期を取るようにします。 cron ジョブを使った同期方法の例は「<a class="ulink" href="#www-sync" target="_top">NetBSD WWW サイトコンテンツの同期をとる</a>」
	    を見てください。</li>
<li class="listitem">あなたのミラーに関する情報を <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> へ送ります。
	    これについての詳細は「<a class="ulink" href="#www-contactinfo" target="_top">WWW ミラー用
	      コンタクトインフォメーションのフォーマット</a>」を見てください。</li>
</ol></div>
      
	<h4 class="title">
<a name="www-diskspace"></a>WWW ミラーに必要なディスク容量はどれくらいか? (<a href="#www">top</a>)
  </h4>

	<p>htdocs リポジトリーの完全なコピーに必要なディスク容量は、現在 (2008 年 9 月)
	  のところ 170 MB ほどです。総容量は急激には変わらないはずですが、
	  明らかに時間とともに増大しています。</p>
      
	<h4 class="title">
<a name="www-retrieve"></a>NetBSD WWW サイトのコピーを取得する (<a href="#www">top</a>)
  </h4>
	
	<p><code class="code">www.NetBSD.org</code> のコピーを anoncvs を使って取得するには、
	  以下のようにします:
	  </p>
<pre class="programlisting"># su - nbwww
# cd /path/to/htdocs
# env CVS_RSH=ssh CVSROOT=anoncvs@anoncvs.NetBSD.org:/cvsroot \
  cvs checkout -P htdocs</pre>
<p>

	  <span class="bold"><strong>注意:</strong></span>
	  ここで "<code class="filename">/path/to/htdocs</code>"
	  は <code class="code">www.NetBSD.org</code>
	  のミラーを置こうとしているディレクトリーです。このディレクトリーは、
	  たとえば "nbwww" ユーザーの所有にすべきです。</p>
      
	<h4 class="title">
<a name="www-sync"></a>NetBSD WWW サイトコンテンツの同期をとる (<a href="#www">top</a>)
  </h4>
	
	<p>同期をとるための一番よい方法は、 cron ジョブを設定して、たとえば nbwww
	  ユーザーで anoncvs と wget を使って定期的に web サイトを更新することです
	  (wget の使い方の詳細は下記のとおり) :
	  </p>
<pre class="programlisting"># crontab -u nbwww -e
SHELL=/bin/sh
PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/pkg/bin
MAILTO=whoever@gets.the.mirror.mail
CVS_RSH=ssh
CVSROOT=anoncvs@anoncvs.NetBSD.org:/cvsroot
0 1 * * * cd /path/to/htdocs &amp;&amp; cvs update -dP &amp;&amp; wget -B http://www.NetBSD.org/ -nv -xnH -N -Fi mirrors/fetch.html &amp;&amp; wget -nv -xnH -N -r -np http://www.NetBSD.org/Gnats/</pre>
<p>
	  <span class="bold"><strong>注意:</strong></span> この例示のなかの "MAILTO" は、ミラー関連のメールを
	  受け取るユーザーのものに書き換えてください。
	  また、 "<code class="filename">/path/to/htdocs</code>" は <code class="code">www.NetBSD.org</code> のミラーの
	  置き場所に書き換えます。</p>
      
	<h4 class="title">
<a name="www-fetch"></a><code class="filename">htdocs/mirrors/fetch.html</code> の目的 (<a href="#www">top</a>)
  </h4>

	<p>この <code class="filename">fetch.html</code> ファイルは、 <code class="code">www.NetBSD.org</code> 上にある、
	  <code class="code">www.NetBSD.org</code> <span class="emphasis"><em>によって</em></span>生成される文書群に
	  リンクしています。これらのファイルは、 NetBSD CVS リポジトリーの
	  <code class="code">doc</code> モジュールの内容をもとに毎日生成されています。</p>
	
	<p>上記の cron tab の例に、
	  "<code class="code">wget -nv -xnH -NFi mirrors/fetch.html</code>" というのがあります。
	  これは、毎日 wget を使って、あなたの web サイトコンテンツのコピー内の、
	  これら <code class="code">www.NetBSD.org</code> で生成されるファイルを更新するためのものです。</p>
      
	<h4 class="title">
<a name="www-http-1.0"></a>HTTP/1.0 クライアントが適切なページを見られるよう保証する (<a href="#www">top</a>)
  </h4>
	
	<p>NetBSD WWW ミラーサイトは、 <code class="code">www.NetBSD.org</code> ミラー用の
	  バーチャル web サーバーを専用の IP アドレス上で運用することが強く望まれます。
	  こうすることで、 HTTP/1.0 を使うクライアントでも正しく web サイトを
	  見られるからです。</p>
	
	<p>そのように設定することができない場合、 HTTP/1.0 クライアントに対する
	  別の解決法は、 NetBSD ミラーをプライマリーのネームベースのバーチャルホスト
	  にすることです。</p>
      
	<h4 class="title">
<a name="www-contactinfo"></a>WWW ミラー用コンタクトインフォメーションのフォーマット (<a href="#www">top</a>)
  </h4>
	
	<p>コンタクトインフォメーションを <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> に提出する必要があります。
	  この情報は、内部のミラーデータベースに追加され、このデータベースをもとに
	  ミラー関係の文書が作られます。
	  "<code class="code">contact*</code>" の項目は公開されることはありません。 NetBSD WWW
	  ミラー用コンタクトインフォメーションは、以下のフォーマットで
	  送付してください:</p>
	<pre class="programlisting">mirror          *マシン名*
country         *ホストの ISO 3166 国コード、/usr/share/zoneinfo/iso3166.tab 参照*
location        *詳細な場所(例えば、Foo 大学)*
www             *WWW URL*
www-host        *external WWW name*
organisation    *組織名*
contactperson   *担当者の名前*
contactemail    *担当者の電子メールアドレス*
contactkeyid	*担当者の pgp 鍵 id*
contactphone    *担当者の電話番号*
contactaddress  *担当者の郵政省メールアドレス*</pre>

	<p>たとえば以下のように書きます。</p>

	<pre class="programlisting">mirror          netbsd.foo-univ.ac.jp
country         jp
location        Department of Computer Science, Foo University
www             http://netbsd.foo-univ.ac.jp/
www-host        netbsd.foo-univ.ac.jp
organisation    Foo University
contactperson   Foo Bar
contactemail    Bar@foo-univ.ac.jp
contactkeyid	GA23FG12
contactphone    +81 3 xxxx yyyy
contactaddress  9876 Foo City, Tokyo 1234567 Japan</pre>

	<p>あなたのミラーのコンタクトインフォメーションが変わったような場合は、
	  お気軽に <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> までお知らせください。</p>  
      
	<h4 class="title">
<a name="www-cname"></a>www.country-code.NetBSD.org の取得方法 (<a href="#www">top</a>)
  </h4>

	<p>現在、ミラーの方針を再検討しているため、
	  .NetBSD.org
	  ドメイン内の名前の割当を一時的に中止しています。</p>
      
	<h4 class="title">
<a name="www-teardown"></a>WWW ミラーの提供ができなくなった場合 (<a href="#www">top</a>)
  </h4>
	
	  <p>あなたのミラーをリストから削除し、当該 DNS 名を代替サイトに振り替えますので、
	  <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> までお知らせください。</p>
      <hr>
<h3 class="title">CVSweb ミラー FAQ</h3>
	<h4 class="title">
<a name="cvsweb-overview"></a>NetBSD CVSweb ミラー立ち上げのあらまし (<a href="#cvsweb">top</a>)
  </h4>

	<p>以下は、NetBSD CVSweb ミラーの立ち上げにあたって推奨される手順の
	  概観です。</p>

	<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">この手順に沿ってミラーを立ち上げる場合、 cvs、 cvsup、 cvsweb CGI
	    スクリプトが必要です。 NetBSD 1.6 以降には CVS が標準で附属しており、また、
	    cvsup と cvsweb CGI スクリプトは <a class="ulink" href="software/packages.html" target="_top">NetBSD
	      パッケージコレクション</a>から利用可能です (<a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/devel/cvsup/README.html" target="_top"><code class="filename">devel/cvsup</code></a> と <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/www/cvsweb/README.html" target="_top"><code class="filename">www/cvsweb</code></a> 参照) 。もちろん、 <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/www/apache/README.html" target="_top"><code class="filename">www/apache</code></a>
	    のような web サーバーも必要です。</li>
<li class="listitem">NetBSD CVS ツリーのコピーを持ってきます。 cvsup
	    を使った取得方法の説明は、「<a class="ulink" href="#cvsweb-retrieve" target="_top">NetBSD CVS ツリーのコピーを取得する</a>」
	    を見てください。</li>
<li class="listitem">あなたのミラーのコンテンツを cvsup サーバーと同期を取るようにします。
	    cron ジョブを使った同期方法の例は「<a class="ulink" href="#cvsweb-sync" target="_top">NetBSD CVS ツリーコンテンツの同期をとる</a>」
	    を見てください。</li>
<li class="listitem">あなたのミラーに関する情報を <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> へ送ります。
	    これについての詳細は「<a class="ulink" href="#cvsweb-contactinfo" target="_top">CVSweb ミラー用
	      コンタクトインフォメーションのフォーマット</a>」を見てください。</li>
</ol></div>
      
	<h4 class="title">
<a name="cvsweb-diskspace"></a>CVSweb ミラーに必要なディスク容量はどれくらいか? (<a href="#cvsweb">top</a>)
  </h4>

	<p>必要な総ディスク容量は、<span class="emphasis"><em>完全な CVS リポジトリー</em></span>
	  のインターフェースを提供するという事実から、やや大きなものになります。
	  現在 (2006 年 5 月)、 CVS の全ソースに必要な総ディスク容量は 4.3 GB
	  ほどです。</p>
      
	<h4 class="title">
<a name="cvsweb-retrieve"></a>NetBSD CVS ツリーのコピーを取得する (<a href="#cvsweb">top</a>)
  </h4>

	<p>CVS ツリーのコピーを cvsup を使って取得するには、
	  以下のようにします:
	  </p>
<pre class="programlisting"># su - cvsweb
# mkdir -p /home/cvsweb/netbsd
# cd /home/cvsweb</pre>
<p>

	  <span class="bold"><strong>注意:</strong></span> 
	  ここで "<code class="filename">/home/cvsweb/netbsd</code>"
	  は CVS ツリーのミラーを
	  置こうとしているディレクトリーです。このディレクトリーは、
	  たとえば "cvsweb" ユーザーの所有にすべきです。エディターを使って
	  "supfile" ファイルを作ります (書き方の例は、
	  <a class="ulink" href="../../docs/netbsd-supfile" target="_top">netbsd-supfile</a> を見てください) 。
	  ファイル中の cvsup-server-hostname は、利用可能な公開 cvsup サーバーの一覧の中から選んで書き換えてください。サーバーの<a class="ulink" href="../mirrors/index.html#cvsup" target="_top">一覧はこちらにあります</a>。
	  </p>
<pre class="programlisting"># cvsup -g -L 2 netbsd-supfile</pre>
<p>
	</p>
      
	<h4 class="title">
<a name="cvsweb-sync"></a>NetBSD CVS ツリーコンテンツの同期をとる (<a href="#cvsweb">top</a>)
  </h4>

	<p>同期をとるための一番よい方法は、 cron ジョブを設定して、たとえば cvsweb
	  ユーザーで cvsup を使って定期的に CVS ツリーを更新することです:
	  </p>
<pre class="programlisting"># crontab -u cvsweb -e
SHELL=/bin/sh
PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/pkg/bin
MAILTO=whoever@gets.the.mirror.mail
0 1 * * * cvsup -g /home/cvsweb/netbsd-supfile</pre>
<p>

	  <span class="bold"><strong>注意:</strong></span> この例のなかの "MAILTO" は、ミラー関連のメールを
	  受け取るユーザーのものに書き換えてください。</p>
      
	<h4 class="title">
<a name="cvsweb-cgi"></a>cvsweb CGI スクリプトの設定方法 (<a href="#cvsweb">top</a>)
  </h4>

	<p><code class="filename">cvsweb.conf</code>
	  ファイルを見て、以下の各オプションを書き換えておきます:</p>
	  <pre class="programlisting">
@CVSrepositories = (
        'netbsd'  =&gt; ['NetBSD',           '/home/cvsweb/netbsd'],
);

$mancgi = "http://netbsd.gw.com/cgi-bin/man-cgi?%s+%s+NetBSD-current";
</pre>
	  <p>cvsweb.cgi を web サーバーの cgi-bin ディレクトリーに置いて、 <code class="filename">cvsweb.conf</code>
	  を参照するように cvsweb.cgi を書き換えてください。</p>
      
	<h4 class="title">
<a name="cvsweb-http-1.0"></a>HTTP/1.0 クライアントが適切なページを見られるよう保証する (<a href="#cvsweb">top</a>)
  </h4>

	<p>NetBSD CVSweb ミラーサイトは、 CVSweb ミラー用の
	  バーチャル web サーバーを専用の IP アドレス上で運用することが強く望まれます。
	  こうすることで、 HTTP/1.0 を使うクライアントでも正しく web サイトを
	  見られるからです。</p>

	<p>そのように設定することができない場合、 HTTP/1.0 クライアントに対する
	  別の解決法は、 NetBSD ミラーをプライマリーのネームベースのバーチャルホスト
	  にすることです。</p>
      
	<h4 class="title">
<a name="cvsweb-contactinfo"></a>CVSweb ミラー用コンタクトインフォメーションのフォーマット (<a href="#cvsweb">top</a>)
  </h4>

	<p>コンタクトインフォメーションを
	  <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> に提出する必要があります。

	  この情報は、内部のミラーデータベースに追加され、このデータベースをもとに
	  ミラー関係の文書が作られます。
	  "<code class="code">contact*</code>" の項目は公開されることはありません。 NetBSD CVSweb
	  ミラー用コンタクトインフォメーションは、以下のフォーマットで
	  送付してください:</p>

	<pre class="programlisting">mirror          *マシン名*
country         *ホストの ISO 3166 国コード、/usr/share/zoneinfo/iso3166.tab 参照*
location        *詳細な場所 (例えば、Foo 大学)*
cvsweb          *CVSweb URL*
cvsweb-host     *external CVSweb name*
organisation    *組織名*
contactperson   *担当者の名前*
contactemail    *担当者の電子メールアドレス*
contactkeyid	*担当者の pgp 鍵 id*
contactphone    *担当者の電話番号*
contactaddress  *担当者の郵政省メールアドレス*</pre>

	<p>たとえば以下のように書きます。</p>

	<pre class="programlisting">mirror          netbsd.foo-univ.ac.jp
country         jp
location        Department of Computer Science, Foo University
cvsweb          http://netbsd.foo-univ.ac.jp/cgi-bin/cvsweb.cgi/
cvsweb-host     cvsweb.netbsd.foo-univ.ac.jp
organisation    Foo University
contactperson   Foo Bar
contactemail    Bar@foo-univ.ac.jp
contactkeyid	GA23FG12
contactphone    +81 3 xxxx yyyy
contactaddress  9876 Foo City, Tokyo 1234567 Japan</pre>

	<p>あなたのミラーのコンタクトインフォメーションが変わったような場合は、
	  お気軽に <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> までお知らせください。</p>
      
	<h4 class="title">
<a name="cvsweb-cname"></a>cvsweb.country-code.NetBSD.org の取得方法 (<a href="#cvsweb">top</a>)
  </h4>

	<p>現在、ミラーの方針を再検討しているため、
	  .NetBSD.org
	  ドメイン内の名前の割当を一時的に中止しています。</p>
      
	<h4 class="title">
<a name="cvsweb-teardown"></a>CVSweb ミラーの提供ができなくなった場合 (<a href="#cvsweb">top</a>)
  </h4>

	<p>あなたのミラーをリストから削除し、当該 DNS 名を代替サイトに振り替えますので、
	  <code class="email">&lt;<a class="email" href="mailto:mirrors@NetBSD.org">mirrors@NetBSD.org</a>&gt;</code> までお知らせください。</p>
      <hr>
<em><a href=".">NetBSD ドキュメンテーション</a></em> に戻る</div></div></div>
<div class="navfoot"></div>
<div id="footer"><center>
<span class="footfeed"><a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">
	  連絡</a> |
      </span><span class="footcopy"><a href="../../ja/about/disclaimer.html">
      免責事項</a> |

      <span class="copyright">Copyright © 1994-2012 The NetBSD Foundation, Inc. </span>ALL RIGHTS RESERVED.<br>NetBSD<sup>®</sup> は The NetBSD
	Foundation, Inc. の登録商標です。</span>
</center></div>
</div></body>
</html>
