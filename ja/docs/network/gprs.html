<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Website XSL Stylesheet V2.6.0">
<link rel="home" href="../../../." title="Welcome to The NetBSD Project: Of course it runs NetBSD.">
<link rel="up" href="../../../ja/docs/network/." title="The NetBSD Network FAQ">
<link rel="previous" href="../../../ja/docs/network/dhcp.html" title="NetBSD DHCP HOWTO">
<link rel="next" href="../../../ja/docs/network/pf.html" title="NetBSD Packet Filter 情報">
<link rel="first" href="../../../ja/docs/network/dhcp.html" title="NetBSD DHCP HOWTO">
<link rel="last" href="../../../ja/docs/network/pppoe/." title="NetBSD ドキュメンテーション: PPPoE (DSL) 経由の接続手順">
<link rel="stylesheet" href="../../../global.css" type="text/css">







<title>GPRS, CDPD HowTo</title>
</head>
<body class="website"><div class="webpage">
<a name="ja-docs-network-gprs"></a><div id="top"><a href="#mainContent" class="doNotDisplay doNotPrint">本文へ飛ぶ。</a></div>
<div id="header">
<div class="topNavigation">
<span>» </span><a href="../../../docs/guide/en/">
	  ガイド</a> |
	<a href="http://man.NetBSD.org/">マニュアルページ</a> |
	<a href="../../../ja/mailinglists/">
	  メーリングリスト</a>と
	<a href="http://mail-index.NetBSD.org/">記事</a> |
	<a href="http://cvsweb.NetBSD.org/">CVS リポジトリー</a> |
	バグの<a href="http://www.NetBSD.org/cgi-bin/sendpr.cgi?gndb=netbsd">報告</a>
	と
	<a href="../../../ja/support/query-pr.html">
	 照会</a> |
	<a href="../../../ja/docs/software/packages.html">
	  ソフトウェアパッケージ
	</a>
</div>
<div class="centralHeader">
<a href="../../../ja/"><img alt='NetBSD プロジェクト "Of course it runs NetBSD"' width="506" height="90" src="../../../images/NetBSD-headerlogo.png"></a><div class="headerTools"><div id="headerSearch"><form method="get" action="http://www.google.com/custom">
<input class="whiteOnBlack" type="text" name="q" onfocus="if(this.value==this.defaultValue ) this.value='';" size="12" maxlength="255" value="Search"><input type="hidden" name="cof" value="L:http://www.NetBSD.org/images/NetBSD-smaller.png;LH:200;LW:200;AH:center;AWFID:4f6b0499f0f58d2c;"><input type="hidden" name="domains" value="NetBSD.org"><input type="hidden" name="sitesearch" value="www.NetBSD.org"><input type="submit" value="検索">
</form></div></div>
</div>
<div class="navBar">
<span class="doNotDisplay">
	  案内:
	</span><a href="../../../ja/">
	  ホーム</a> | 
	<a href="../../../ja/about/">
	  概要</a> | 
	<a href="../../../ja/gallery/">
	  展示室</a> | 
	<a href="../../../ja/releases/">
	  ダウンロード</a> | 
	<a href="../../../ja/docs/">
	  ドキュメンテーション</a> | 
	<a href="../../../ja/support/">
	  サポート</a> | 
	<a href="../../../ja/community/">
	  コミュニティー</a> | 
	<a href="../../../ja/ports/">
	  機種</a>
</div>
</div>
<div id="content"><div class="fullWidth"><div class="rowOfBoxes">
<h1>GPRS, CDPD HowTo</h1>
<h3 class="title"><a name="gprs"></a></h3>
<ul>
<li><a href="#gprs-intro">はじめに</a></li>
<li><a href="#gprs-using-gprs">General Packet Radio Service (GPRS) カードを使う</a></li>
<li><a href="#gprs-sony-ericcson-t200">SonyEricsson t200 を使う</a></li>
<li><a href="#gprs-using-cdpd">Cellular Digital Packet Data (CDPD) カードを使う</a></li>
</ul>
<hr>
<h3 class="title"></h3>
<h4 class="title">
<a name="gprs-intro"></a>はじめに (<a href="#gprs">top</a>)
  </h4>


<p>
GPRS/CDPD では、
カードは純技術的にはモデムですが、普通の感覚ではモデムには見えないでしょう。
たとえば、カードは PSTN 電話番号をダイアルしたり、キャリアーを受け取ったり、
速度をネゴシエートしたり、シリアルデータを前後に渡したりしません。
</p>

<p>
カードはセルラーのパケットを使ってセルラーの基地局と喋ります。このパケットに
IP データグラムが含まれており、基地局はこのデータグラムをインターネットへ
送ります。クライアントは基地局に 'ppp' を喋りません。
クライアントはカードに対してだけ ppp で喋ります。カードは ppp
からパケットを抽出して CDPD または GPRS パケットに包み直し、
アンテナから基地局へ送出します。カードは、クライアントに対しては、
クライアントのオペレーティングシステムのドライバーの設定が容易になるように、
PPP インターフェースを提供しています。ご覧のとおり、単に設定すればいいだけで、
NetBSD ユーティリティーを作り直す必要はありません。
</p>

<p>
GPRS の場合、モデムは (私が思うに) 5 つのプロバイダー設定を持ちます。
それぞれの設定を、あなたがお使いのサービスプロバイダー用に設定します。
そのために、
"AT" コマンドを使って指定するパラメーターがあります。
</p>

<p>
CDPD でも AT コマンドを使って設定しますが、こちらは各プロバイダーに対して
ひとつの設定があるだけです。
</p>

<p>
'kermit' は、 (モデムをメーカーから受け取った後の) 最初の AT 設定コマンドを
モデムに送るために使うことができます。一旦モデムを設定してしまえば、
再度 'kermit' を使う必要はありません。配布に含まれているので 'tip'
を使うこともできますが、設定方法や使用方法を文書で説明するのは
こちらのほうが難しいでしょう。
モデム自体の設定については、この文書の守備範囲外ですので、
お使いのベンダーのドキュメンテーションを確認してください。
GPRS などで、プロバイダーが顧客向けにカードをあらかじめ設定したり、
カードに早見表を附属させることが可能です。おそらく、携帯電話と同様で、
プロバイダーからの購入時に設定してもらえるでしょう。
</p>

<p>
いずれにせよ、 PPP 開始用のコマンドは機種特有です。
</p>



<h4 class="title">
<a name="gprs-using-gprs"></a>General Packet Radio Service (GPRS) カードを使う (<a href="#gprs">top</a>)
  </h4>


<p>
NovatelWireless GPRS ワイヤレスデータカードを使うためには、まず
カードのメーカーとプロバイダーの設定に応じてカードを設定する必要があります。
お使いのプロバイダーに連絡を取ってください。
テスト済の GPRS カードとしては NovatelWireless Merlin G100 と
NovatelWireless Merlin G201 があります。
</p>

<p>
それが済んだら、いくつかファイルを編集する必要があります。以下のとおりです:
</p>

<div class="variablelist">
<p>
ファイルの編集後、コマンドラインで以下のようにして始めます:
</p>
<pre class="programlisting">
pppd file /etc/ppp/options.gprs
</pre>
<p>
これで、このカード用のデフォルトのプロバイダーとして設定されます。
カードの別のコンフィグスロットに設定された別のプロバイダーに接続するには、
/etc/ppp/chatscript.gprs ファイル中の "ATDT" 文字列を、
NovatelWireless
のドキュメンテーションに従って書き換える必要があります。
</p>
<p>
このカードのドキュメンテーションは今では入手が困難なので、
たいていの場合、設定する必要があるのは以下の設定だけでしょう。
'apn' は移動体通信事業者から示された APN (Access Point Name, アクセスポイント名)、
1234 はお使いの SIM カードの PIN 番号です。
</p>
<pre class="programlisting">
at+cgdcont=1,"IP","apn"
at+cpin=1234
</pre>
<p>
/etc/ppp/options.gprs ファイル中の tty を適切に書き換えてください。
モデム・ com ポート・ IR ポートを内蔵した典型的なラップトップでは、
NovatelWireless モデムは tty03 になります。
接続時にプロバイダーが自動的に DNS の設定を送ってこない場合は、
接続できるようにするために `usepeerdns` オプションを削除する必要があります。
</p>
<p>
また、 /etc/ppp/chap-secrets に、お使いのプロバイダーでの
あなたのユーザー名とパスワードが書いてあることを確認してください。
</p>
<p>
NetBSD での PPP ネットワーキングの使用について、詳細は
<a class="ulink" href="./" target="_top">ネットワーキングドキュメンテーション</a>を参照してください。
</p>
<dl>
<dt><span class="term"></span></dt>
<dd>
<pre class="programlisting">
/dev/tty03
115200
defaultroute
ipcp-accept-local
ipcp-accept-remote
noauth
novj
connect 'chat -v -f /etc/ppp/chatscript.gprs'
user dummy
usepeerdns
mru 1500
mtu 1500
</pre>
</dd>
<dt><span class="term"></span></dt>
<dd>
<pre class="programlisting">
ABORT BUSY ABORT 'NO CARRIER' ABORT ERROR '' AT OK 'ATDT*99#' CONNECT
</pre>
</dd>
<dt><span class="term"></span></dt>
<dd>
<pre class="programlisting">
* * "dummy"
</pre>
</dd>
</dl>
</div>


<h4 class="title">
<a name="gprs-sony-ericcson-t200"></a>SonyEricsson t200 を使う (<a href="#gprs">top</a>)
  </h4>


<font size="-1">以下の情報は、 Andrew Cagney の提供によるものです:</font>
<p>
SonyEricsson t200 GPRS 電話は、シリアルボーレートが 9600 に固定されています。
この機種は、 pppd が接続を切っても GPRS コネクションを切りません。
また、現在のところ、附属の USB 電話ケーブルは NetBSD では使えないようです。
</p>
<p>最後の問題は、 USB&lt;-&gt;シリアルケーブルを使って
SonyEricsson に繋ぐ事で回避できます。
はじめの二つの問題は、以下の init, connect, disconnect スクリプトを
options または peers ファイルに含めることで回避/解決できます:
</p>

<pre class="programlisting">
115200
init "/etc/ppp/chat/t200.sh"
connect "chat -v -f /etc/ppp/chat/t200"
disconnect "chat -v -f /etc/ppp/chat/hup"
</pre>

<p>
さらに、 t200.sh に以下の内容を含めてください:
</p>

<pre class="programlisting">
#!/bin/sh
# Find out the intended baud rate
b=`stty -g | sed -e 's/.*ispeed=//' -e 's/:.*//'`
# Force the serial line to 9600 baud so that it can be re-configured
stty 9600
# Ask for the modem to list all baud rates, and the current one.  Then
# force it to the rate the line was originally set to.
if chat -v \
    TIMEOUT 5 '' \
    +++AT OK \
    AT+IPR=? OK \
    AT+IPR? OK \
    AT+IPR=${b} OK
then
    stty ${b}
    exit 0
else
    exit 1
fi
</pre>
t200 ファイルには以下の内容を含めます:
<pre class="programlisting">
ABORT BUSY
ABORT ERROR
ABORT 'NO CARRIER'
ABORT 'NO DIALTONE'
ABORT 'NO DIAL TONE'
TIMEOUT 10 ''
AT OK--AT--OK
# Ask the modem its baud rate - a sanity check
AT+IPR=? OK
AT+IPR? OK
# connect
ATDT*99# CONNECT
</pre>

<p>
そして最後に、以下の内容の hup ファイルが必要です:
</p>

<pre class="programlisting">
TIMEOUT 2
'' +++ATH OK
</pre>


<h4 class="title">
<a name="gprs-using-cdpd"></a>Cellular Digital Packet Data (CDPD) カードを使う (<a href="#gprs">top</a>)
  </h4>


<p>
NovatelWireless GPRS ワイヤレスデータカードを使うためには、まず
カードのメーカーとプロバイダーの設定に応じてカードを設定する必要があります。
お使いのプロバイダーに連絡を取ってください。
これまでにテスト済のカードは NovatelWireless Merlin CDPD だけです。
</p>

<p>
こちらも、いくつかファイルを編集する必要があります。以下のとおりです:
</p>

<div class="variablelist">
<p>
ファイルの編集後、コマンドラインで以下のようにして始めます:
</p>
<pre class="programlisting">
pppd file /etc/ppp/options.cdpd
</pre>
<p>
/etc/ppp/options.cdpd ファイル中の tty を適切に書き換えてください。
モデム・ com ポート・ IR ポートを内蔵した典型的なラップトップでは、
NovatelWireless モデムは tty03 になります。
</p>
<p>
NetBSD での PPP ネットワーキングの使用について、詳細は
<a class="ulink" href="./" target="_top">ネットワーキングドキュメンテーション</a>を参照してください。
</p>
<dl>
<dt><span class="term"></span></dt>
<dd>
<pre class="programlisting">
/dev/tty03
115200
defaultroute
ipcp-accept-local
ipcp-accept-remote
noipdefault
novj
noauth
connect 'chat -v -f /etc/ppp/chatscript.cdpd'
mru 1500
mtu 1500
</pre>
</dd>
<dt><span class="term"></span></dt>
<dd>
<pre class="programlisting">
ABORT BUSY ABORT 'NO CARRIER' ABORT ERROR '' AT OK 'AT\\APPP' CONNECT
</pre>
</dd>
</dl>
</div>



</div></div></div>
<div class="navfoot"></div>
<div id="footer"><center>
<span class="footfeed"><a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">
	  連絡</a> |
      </span><span class="footcopy"><a href="../../../ja/about/disclaimer.html">
      免責事項</a> |

      <span class="copyright">Copyright © 1994-2011 The NetBSD Foundation, Inc. </span>ALL RIGHTS RESERVED.<br>NetBSD<sup>®</sup> は The NetBSD
	Foundation, Inc. の登録商標です。</span>
</center></div>
</div></body>
</html>
