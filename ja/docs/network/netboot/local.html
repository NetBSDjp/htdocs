<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
<!-- Copyright (c) 1998-2004
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@NetBSD.org">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<title>Local bootloader, Diskless NetBSD HOW-TO</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<a href="intro.html">Previous</a> |
<a href="rarp.html">Next</a> |
<a href="./">Table of Contents</a>

<hr>

<h1>Local bootloader, Diskless NetBSD HOW-TO</h1>

<h3>Local bootloader</h3>

This is by far the most versatile and flexible boot method of them all.  That's
the good news.  The bad news is that it requires some sort of local bootable
media (hard drive, Zip drive, floppy drive, or tape drive).  The bootable
media available depends on your platform.
<p>

You can either install the bootloader and get the kernel off the diskless
server (if your local media doesn't have enough capacity to hold the kernel),
or have the bootloader and kernel reside on the local media.
<p>

<ul>
<li><big><b>Only the bootloader resides locally:</b></big>
<p>

Note, this requires user intervention the first time the machine is booted
after being reset or power-cycled, as you won't continue to be booting
from the same media (the default behavior of the bootloader).  This example
is from an hp300, your behavior may differ depending on platform.
<p>

<ol>
<li>Install bootblocks on a local device (hard drive, floppy drive, or
   tape drive)
<p>

<li>When the bootloader is done loading, type in the following command:
<pre>&gt;&gt; NetBSD/hp300 Primary Boot, Revision 1.9
&gt;&gt; (scottr@polka, Fri Mar 13 18:11:29 CST 1998)
&gt;&gt; HP 9000/340 SPU
&gt;&gt; Enter "reset" to reset system.
Boot: [[[rd0a:]netbsd][-s][-a][-d]] :- <b>le0a:/netbsd [-s]</b></pre>

Where <tt>le0</tt> is the NetBSD device name for your ethernet card.
</ol>
<p>

Now the bootloader will continue with the procedure outlined in the
introduction.  Whether the bootloader uses rarp&amp;bootparams or
bootp|dhcp&amp;tftp depends on which platform you're using.  This
can be found in the <a href="intro.html#platdaemon">Platform/daemon</a>
chart.
<p>

Continue on to setting up <a href="rarp.html"><tt>rarp</tt></a><br>
Continue on to setting up <a href="bootpd.html"><tt>bootpd</tt></a><br>
Continue on to setting up <a href="dhcpd.html"><tt>dhcpd</tt></a>
<p>

<li><big><b>Both bootloader and kernel reside on local media:</b></big>
<p>

<ol>
<li>Install bootblocks, and filesystem on the media
<li><a href="../../kernel/#how_to_build_a_kernel">Create a kernel</a>
that always looks for a diskless root:<br>
<pre>config root on (network-device, e.g. ln0) swap on (etc.)</pre>
<li>Move this kernel onto the media
</ol>
<p>

Continue on to setting up <a href="bootpd.html"><tt>bootpd</tt></a><br>
Continue on to setting up <a href="dhcpd.html"><tt>dhcpd</tt></a>
</ul>
<p>

<hr>

<a href="intro.html">Previous</a> |
<a href="rarp.html">Next</a> |
<a href="./">Table of Contents</a>

<hr> 

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../../"><img
        src="../../../images/NetBSD-flag.png" border="0"
        width="90" height="90" alt=""></a> 
  </td><td>
    <a href="../../../"><img
        src="../../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">Home Page</a>
  </td></tr></table>
</td><td>
  <table><tr><td> 
    <a href="../../../docs/"><img
        src="../../../images/NetBSD-flag.png" border="0"
        width="90" height="90" alt=""></a>
  </td><td>
    <a href="../../../docs/"><img
        src="../../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">(Contact us)</a>
  $NetBSD: local.html,v 1.3 2007/08/01 15:36:02 kano Exp $<br>
  <a href="../../../about/disclaimer.html">Copyright &copy; 1998-2004
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
