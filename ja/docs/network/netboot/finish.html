<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
<!-- Copyright (c) 1998-2004
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->
<link rev="made" href="mailto:www@NetBSD.org">
<title>Finishing up your installation, Diskless NetBSD HOW-TO</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<a href="files.html">Previous</a> |
Next |
<a href="./">Table of Contents</a>

<hr>

<h1>Finishing up your installation, Diskless NetBSD HOW-TO</h1>

This last section covers how to ensure that all of the daemons you set up
will automatically run each time your server(s) are booted.
<p>

Also, you might consider compiling a new kernel for your client.  If
you use the <tt>DISKLESS</tt> config file, it will produce a smaller
kernel (without SCSI, HP-IB, NFS server, and a few other things), which 
will load more quickly, and will use less RAM.  This is detailed in the
<a href="../../kernel/#how_to_build_a_kernel">How to build a
kernel</a> NetBSD Kernel FAQ item.
<p>

Another suggestion is to <tt>gzip</tt> the kernel on the nfs server,
as this will load over the network faster (even with a slow client).
The client <i>will</i> boot from this, even though it isn't named 
<tt>netbsd</tt>, it merely has to figure out that <tt>netbsd</tt> doesn't
exist on the nfs server and try the next kernel name, which happens to be
<tt>netbsd.gz</tt>.  The NetBSD bootloader will attempt to load each of
the following files in sequence until it loads one successfully and
then executes it:
<pre>	netbsd
	netbsd.gz
	netbsd.bak
	netbsd.bak.gz
	netbsd.old
	netbsd.old.gz
	onetbsd
	onetbsd.gz</pre>
<p>

Finishing up, <a href="#netbsd">NetBSD</a><br>
Finishing up, <a href="#openbsd">OpenBSD</a><br>
Finishing up, <a href="#freebsd">FreeBSD</a><br>
Finishing up, <a href="#macosx">Mac OS X and Darwin</a><br>
Finishing up, <a href="#linux">Linux</a><br>
Finishing up, <a href="#sunos">SunOS</a><br>
Finishing up, <a href="#solaris">Solaris</a><br>
Finishing up, <a href="#news">NEWS-OS</a><br>
Finishing up, <a href="#next">NEXTSTEP</a><br>
Finishing up, <a href="#hpux9">HP-UX 9</a><br>
Finishing up, <a href="#hpux10">HP-UX 10</a><br>
<p>

<hr>

<h3><a name="netbsd">NetBSD</a></h3>
<dl><dt><dd>
In NetBSD, all of the rc setup parameters are stored in 
<tt>/etc/defaults/rc.conf</tt>.  Do not modify this file.  Instead, copy the
relevant lines to <tt>/etc/rc.conf</tt> and change the values there.
<p>
<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>To set up rbootd for hp300, edit <tt>/etc/rc.conf</tt> and
       make sure that the following line is set:<br>
       <pre>rbootd=<b>YES</b>              rbootd_flags=""</pre>
       <p>

   <li>To set up mopd for vax, edit <tt>/etc/rc.conf</tt> and
       make sure that the following line is set:<br>
       <pre>mopd=<b>YES</b>              mopd_flags="-a"</pre>
   </ul>
</li>

<li>Setting up rarpd and bootparamd:<br>
    Edit <tt>/etc/rc.conf</tt> and make sure the following lines are set:<br>
<pre>rarpd=<b>YES</b>               rarpd_flags="-a"
bootparamd=<b>YES</b>          bootparamd_flags=""</pre>
<p>

<li>Setting up dhcpd:<br>
    Edit <tt>/etc/rc.conf</tt> and make sure the following line is set:<br>
<pre>dhcpd=YES               dhcpd_flags="-q"</pre>
<p>

<li>Setting up nfs:<br>
    Edit <tt>/etc/rc.conf</tt> and make sure the following line is set:<br>
<pre>nfs_server=<b>YES</b>                             # enable server daemons
                        mountd_flags=""
                        nfsd_flags="-6tun 4"</pre>
</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<h3><a name="openbsd">OpenBSD</a></h3>
<dl><dt><dd>
For OpenBSD 2.3 and later (earlier versions needed to edit the 
<tt>/etc/netstart</tt> file):
<p>

<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>To set up rbootd for hp300, edit <tt>/etc/rc.conf</tt> and
       make sure that the following line is set:<br>
       <pre>rbootd=<b>""</b></pre>
       <p>

   <li>To set up mopd for vax, edit <tt>/etc/rc.conf</tt> and
       make sure that the following line is set:<br>
       <pre>mopd_flags="-a"</pre>
   </ul>
</li>

<li>Setting up rarpd and bootparamd:<br>
    Edit <tt>/etc/rc.conf</tt> and make sure the following lines are set:<br>
<pre>rarpd=<b>"-a"</b>
bootparamd=<b>""</b></pre>
<p>

<li>Setting up dhcpd:<br>
    Edit <tt>/etc/rc.conf</tt> and make sure the following line is set:<br>
<pre>dhcpd_flags="-q"</pre>
<p>

<li>Setting up nfs:<br>
    Edit <tt>/etc/rc.conf</tt> and make sure the following line is set:<br>
<pre>nfs_server=<b>YES</b></pre>
</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<h3><a name="freebsd">FreeBSD</a></h3>
<dl><dt><dd>
In recent versions of FreeBSD, all of the rc setup parameters are stored in 
<tt>/etc/defaults/rc.conf</tt>.  Do not modify this file.  Instead, copy the
relevant lines to <tt>/etc/rc.conf</tt> and change the values there.
<p>
<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>To set up rbootd for hp300, edit <tt>/etc/rc.local</tt> and add the 
       following lines:
<pre><b>echo -n ' rbootd'
/usr[/local]/libexec/rbootd
echo -n ' bootparamd'
/usr/sbin/bootparamd</b></pre>
       <p>

   <li>To set up mopd for vax, edit <tt>/etc/rc.local</tt> and add the 
   following lines:
<pre><b>echo -n ' mopd'
/usr/local/sbin/rbootd
echo -n ' bootparamd'
/usr/sbin/bootparamd</b></pre>
   </ul>
</li>

<li>Setting up rarpd:<br>
   Edit <tt>/etc/rc.conf</tt> (or <tt>/etc/sysconfig</tt> for earlier 
   versions) and make sure the following lines are set:<br>
<pre>rarpd_enable="<b>YES</b>"
rarpd_flags="<b>-a -s</b>"</pre>
<p>

<li>Setting up dhcpd:<br>
There is probably a line in <tt>/etc/rc.conf</tt> which will start dhcpd.
<p>

<li>Setting up nfs:<br>
Some versions of the FreeBSD nfs server are unable to deal with the 8 KB block 
size that NetBSD likes to use (see
<a href="http://www.freebsd.org/doc/handbook/network-nfs.html">http://www.freebsd.org/doc/handbook/network-nfs.html</a>).
If you find that you're getting terrible 
performance (on the order of 2 KB/sec) and/or are having serious problems, 
then you may need to do the following:
<p>

<ol>
<li>Put the following at the top of the client's <tt>/etc/rc</tt>:
   <pre><b>mount -t nfs -a -o -I=1024,-r=1024,-w=1024 nfsserver:/export/client/root/ /</b></pre>
<p>

<li>Build a new kernel for the client that uses smaller blocksizes,
   in particular, you'll need the following line in your config file:<br>
   <tt><b>options NFS_BOOT_RWSIZE=1024</b></tt>
<p>

<li>Then follow the directions in the 
<a href="../../kernel/#how_to_build_a_kernel">
How to build a kernel</a> NetBSD Kernel FAQ item.
</ol>
<p>

Also, some versions of FreeBSD have problems with NFS3.  If you encountered
this when trying out <a href="nfs.html">nfs</a>, then be sure to include
the <tt><b>-r2</b></tt> flag when
starting <tt><b>mountd</b></tt>.
<p>
   Edit <tt>/etc/rc.conf</tt> (or <tt>/etc/sysconfig</tt> for earlier 
   versions) and make sure the following lines are set:<br>
<pre>nfs_server_enable="<b>YES</b>"
mountd_flags="<b>-[2]r</b>"</pre>
<p>

<li>Setting up detailed logging (optional):<br>
You may consider adding the following lines to
<tt>/etc/syslog.conf</tt>, as they will add entries to
<tt>/var/log/bootlog</tt> whenever your client tries booting:<br>
<pre><b>!rbootd
*.*                                             /var/log/bootlog
!rarpd  
*.*                                             /var/log/bootlog</b></pre>
</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<h3><a name="macosx">Mac OS X and Darwin</a></h3>
<dl><dt><dd>
In Mac OS X and Darwin, the system startup scripts are stored in 
<tt>/System/Library/StartupItems/</tt>.  You'll want to create a bundle like
these to start the netboot services in the user startup 
scripts <tt>/Library/StartupItems</tt>.  NFS services are always started if 
there is a NetInfo directory called <tt>/exports</tt>.
<p>
The <tt>/etc/hostconfig</tt> describes which built-in services are 
automatically started.  To prevent the native <tt>bootpd</tt> from starting
(since it doesn't work and conflicts with <tt>dhcpd</tt>), make sure that 
the following lines are set:
<pre>CONFIGSERVER=-NO-
NETBOOTSERVER=-NO-</pre>
<p>The 
<a href="http://www.darwinfo.org/howto/SystemStarter_HOWTO.shtml">SystemStarter
HOWTO</a> is a good reference if you want to learn more about creating your
own startup bundles.
<p>
<ol>
<li>
<tt># <b>mkdir -p /Library/StartupItems/NetBSDNetBoot</b></tt>
<p><li>Create 
   <tt>/Library/StartupItems/NetBSDNetBoot/StartupParameters.plist</tt> with
   the following contents:
<pre>{
  Description     = "NetBoot services for NetBSD clients";
  Provides        = ("DHCPD",
                     "bootparams",
                     "rbootd");
  Requires        = ("NetInfo",
                     "Network");
  OrderPreference = "None";
  Messages =
  {
    start = "Starting NetBSD NetBoot services";
    stop  = "Stopping NetBSD NetBoot services";
  };
}</pre>
<p><li>Create
   <tt>/Library/StartupItems/NetBSDNetBoot/NetBSDNetBoot</tt> with
   the following contents:
<pre>#!/bin/sh

. /etc/rc.common

##
# Start up NetBSD NetBoot services
##

ConsoleMessage "Starting NetBSD NetBoot Services"

##
# Start NetBSD NetBoot services
##
/usr/libexec/rbootd
bootparamd
dhcpd -q</pre>
<p><li>
  <tt># <b>chown -R root /Library/StartupItems/NetBSDNetBoot</b></tt><br>
  <tt># <b>chmod a+rx /Library/StartupItems/NetBSDNetBoot/NetBSDNetBoot</b></tt>
</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<h3><a name="linux">Linux</a></h3>
<dl><dt><dd>
Some Linux nfs servers are unable to deal with the 8 KB block size that
NetBSD likes to use.  If you find that you're getting terrible performance
(on the order of 2 KB/sec) and/or are having serious problems, then you may
need to do the following:
<p>

<ol>
<li>Put the following at the top of the client's <tt>/etc/rc</tt>:
   <pre><b>mount -t nfs -a -o -I=1024,-r=1024,-w=1024 nfsserver:/export/client/root/ /</b></pre>
<p>

<li>Build a new kernel for the client that uses smaller blocksizes,
   in particular, you'll need the following line in your config file:<br>
   <tt><b>options NFS_BOOT_RWSIZE=1024</b></tt>
<p>

<li>Then follow the directions in the 
<a href="../../kernel/#how_to_build_a_kernel">
How to build a kernel</a> NetBSD Kernel FAQ item.
</ol>
<p>

Also, some flavors of linux have problems with NFS3.  If you encountered
this when trying out <a href="nfs.html">nfs</a>, then be sure to include
the <tt><b>--no-nfs-version 3</b></tt> flag when
starting <tt><b>rpc.mountd</b></tt>.
<p>

Each flavor of linux deals with starting the daemons in a different way.  Pick
your distribution from the list below and follow those directions.
<p>

<ul>
   <li><a href="#slack">Slackware</a>
   <li><a href="#redhat">Red Hat</a>
   <li><a href="#debian">Debian</a>
</ul>
<p>

<hr noshade>
<p>

<big><b><a name="slack">Finishing up, Slackware Linux</a></b></big>
<p>

<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>To set up rbootd for hp300, add the following lines to your
      <tt>/etc/rc.d/rc.local</tt> file<br>
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemons:'
if [ -f /usr/local/bin/rbootd ]; then
    echo -n ' rbootd'; /usr/local/bin/rbootd &gt; /dev/null
fi</pre>
      <p>

   <li>To set up mopd for vax, add the following lines to your
      <tt>/etc/rc.d/rc.local</tt> file<br>
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemons:'
if [ -f /usr/local/sbin/mopd ]; then
    echo -n ' mopd'; /usr/local/sbin/mopd &gt; /dev/null
fi</pre>
   </ul>
</li>

<li>Setting up rarp and bootparamd:<br>
    Add the following lines to <tt>/etc/rc.d/rc.local</tt> after your
    client-specific daemon
<pre>echo -n ' arp'
/sbin/arp -s client CC:CC:CC:CC:CC:CC
/sbin/rarp -s client CC:CC:CC:CC:CC:CC
if [ -f /usr/[local]/sbin/rpc.bootparamd ]; then
    echo -n ' rpc.bootparamd'; /usr/[local]/sbin/rpc.bootparamd &gt; /dev/null
fi
echo '.'</pre>
<p>

<li>Setting up dhcpd:<br>
    This depends on whether dhcpd ships with your distribution.  If it
does, then there's probably some startup script you can use.  Otherwise, 
    add the following lines to <tt>/etc/rc.d/rc.local</tt>
<pre>echo -n ' dhcpd'
if [ -f /usr/[local]/sbin/dhcpd ]; then
    /usr/[local]/sbin/dhcpd -q
fi
echo '.'</pre>
<p>

<li>Setting up nfs<br>
   Make sure that the following lines in <tt>/etc/rc.d/rc.inet2</tt> are
   not commented (#) out:<br>
<pre>if [ -f ${NET}/rpc.portmap ]; then
  # Start the NFS server daemons.
  if [ -f ${NET}/rpc.mountd ]; then
    echo -n " mountd"
    ${NET}/rpc.mountd
  fi
  if [ -f ${NET}/rpc.nfsd ]; then
    echo -n " nfsd"
    ${NET}/rpc.nfsd
  fi
fi # Done starting various SUN RPC servers.</pre>
</ol>
<p>

Congratulations, you're done!
<p>

<hr noshade>
<p>

<big><b><a name="redhat">Finishing up, Red Hat Linux</a></b></big>
<p>

The <a href="http://world.std.com/~bdc/projects/vaxen/VAX-netboot-HOWTO-6.html#auto-linux">
VAX Network Booting HOWTO</a> discusses how to set up SysV style
scripts for Red Hat linux.
<p>

If you don't want to bother with that, you can just add the daemons to your
<tt>/etc/rc.d/rc.local</tt>.
<p>

<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>To set up rbootd for hp300, add the following lines to your
      <tt>/etc/rc.d/rc.local</tt> file<br>
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemons:'
if [ -f /usr/local/bin/rbootd ]; then
    echo -n ' rbootd'; /usr/local/bin/rbootd &gt; /dev/null
fi</pre>
      <p>

   <li>To set up mopd for vax, add the following lines to your
      <tt>/etc/rc.d/rc.local</tt> file<br>
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemons:'
if [ -f /usr/local/sbin/mopd ]; then
    echo -n ' mopd'; /usr/local/sbin/mopd &gt; /dev/null
fi</pre>
   </ul>
</li>

<li>Setting up rarp and bootparamd:<br>
    Add the following lines to <tt>/etc/rc.d/rc.local</tt> after your
    client-specific daemon
<pre>echo -n ' arp'
/sbin/arp -s client CC:CC:CC:CC:CC:CC
/sbin/rarp -s client CC:CC:CC:CC:CC:CC
if [ -f /usr/[local]/sbin/rpc.bootparamd ]; then
    echo -n ' rpc.bootparamd'; /usr/[local]/sbin/rpc.bootparamd &gt; /dev/null
fi
echo '.'</pre>
<p>

<li>Setting up dhcpd:<br>
    This depends on whether dhcpd ships with your distribution.  If it
does, then there's probably some startup script you can use.  Otherwise, 
    add the following lines to <tt>/etc/rc.d/rc.local</tt>
<pre>echo -n ' dhcpd'
if [ -f /usr/[local]/sbin/dhcpd ]; then
    /usr/[local]/sbin/dhcpd -q
fi
echo '.'</pre>
<p>

<li>Setting up nfs:<br>
   Actually, NFS is supposed to be enabled by default on Red Hat systems.
   If you encountered NFS3 errors, then change the line in
   <tt>/etc/rc.d/init.d/nfs</tt> to read:
<pre>daemon rpc.mountd --no-nfs-version 3</pre>
</ol>
<p>

Congratulations, you're done!
<p>

<hr noshade>
<p>

<big><b><a name="debian">Finishing up, Debian Linux</a></b></big>
<p>

The <a href="http://world.std.com/~bdc/projects/vaxen/VAX-netboot-HOWTO-6.html#auto-linux">
VAX Network Booting HOWTO</a> discusses how to set up SysV style
scripts for Red Hat Linux.  The only notable difference is that Red Hat
uses <tt>/etc/rc.d/init.d/</tt> and Debian uses <tt>/etc/init.d/</tt>.
<p>

Note that
the Debian rbootd package will have already installed a SysV init script 
for rbootd and bootparam if you installed this.
<p>

If you don't want to bother with that, you can just add the daemons to your
<tt>/etc/rc.local</tt>.
<p>

<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>If you did not install the Debian rbootd package, then you need
      to set up rbootd for hp300, add the following lines to your
      <tt>/etc/rc.local</tt> file<br>
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemons:'
if [ -f /usr/local/bin/rbootd ]; then
    echo -n ' rbootd'; /usr/local/bin/rbootd &gt; /dev/null
fi</pre>
      <p>

   <li>To set up mopd for vax, add the following lines to your
      <tt>/etc/rc.local</tt> file<br>
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemons:'
if [ -f /usr/local/sbin/mopd ]; then
    echo -n ' mopd'; /usr/local/sbin/mopd &gt; /dev/null
fi</pre>
   </ul>
</li>

<li>Setting up rarp and bootparam:<br>
    Add the following lines to <tt>/etc/init.d/network</tt>
<pre>/sbin/arp -s client CC:CC:CC:CC:CC:CC
/sbin/rarp -s client CC:CC:CC:CC:CC:CC
if [ -f /usr/[local]/sbin/rpc.bootparamd ]; then
    /usr/[local]/sbin/rpc.bootparamd &gt; /dev/null
fi
echo '.'</pre>
<p>

<li>Setting up dhcpd:<br>
    This depends on whether dhcpd ships with your distribution.  If it
does, then there's probably some startup script you can use.  Otherwise, 
    add the following lines to <tt>/etc/rc.d/rc.local</tt>
<pre>echo -n ' dhcpd'
if [ -f /usr/[local]/sbin/dhcpd ]; then
    /usr/[local]/sbin/dhcpd -q
fi
echo '.'</pre>
<p>

<li>Setting up nfs:<br>
   Make sure the important lines in <tt>/etc/init.d/netstd_nfs</tt> are not
   commented (#) out.  There are six lines that contain <tt>nfsd</tt> and
   <tt>mountd</tt> that you need to make sure are uncommented.

</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<h3><a name="sunos">SunOS</a></h3>
<dl><dt><dd>
<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>To set up rbootd for hp300, add the following lines to your
      <tt>/etc/rc.d/rc.local</tt> file<br>
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemon:'
if [ -f /usr/local/sbin/sun-rbootd ]; then
    echo ' rbootd.'; /usr/local/sbin/sun-rbootd -a &gt; /dev/null
fi</pre>
   </ul>
</li>

<li>Setting up rarpd and bootparamd:<br>
   <tt># <b>mkdir -p /tftpboot</b></tt>
<p>

<li>Setting up dhcpd:<br>
Add the following lines to your
      <tt>/etc/rc.d/rc.local</tt> file<br>
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemon:'
if [ -f /usr/local/sbin/dhcpd ]; then
    echo ' dhcpd.'; /usr/local/sbin/dhcpd -q
fi</pre>
<p>

<li>Setting up nfs:<br>
   <tt># <b>touch /etc/exports</b></tt>
</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<h3><a name="solaris">Solaris</a></h3>
<dl><dt><dd>
<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>To set up rbootd for hp300, create a SysV-style init script that 
      runs:<br>
      <tt>/usr/local/sbin/sun-rbootd -a</tt>
   </ul>
</li>

<li>Setting up rarpd and bootparamd:<br>
   <tt># <b>mkdir -p /tftpboot</b></tt>
<p>

<li>To set up the ISC dhcpd, create a SysV-style init script that 
   runs:<br>
   <tt>/usr/local/sbin/dhcpd -q</tt>
<p>

<li>Setting up nfs:<br>
   Make sure that <tt>/etc/rc3.d/S15nfs.server</tt> exists (this is default)<br>
   Make sure your share commands in <tt>/etc/dfs/dfstab</tt> are of the form:<br>
   <tt>share -F nfs ...</tt>
   <p><li>To test out what will happen at boot time (optional), run:<br>
   <tt># <b>/etc/init.d/nfs.server stop; /etc/init.d/nfs.server start</b></tt><br>
   This should start rarpd, bootparam, and nfs.
   <p>If you later decide to remove these services, don't forget to:<br>
   <tt># <b>rm -rf /tftpboot</b></tt><br>
   Remove the <tt>share</tt> lines in <tt>/etc/dfs/dfstab</tt>
</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<h3><a name="news">NEWS-OS</a></h3>
<dl><dt><dd>
<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>To set up rbootd for hp300, add the following lines to your
      <tt>/etc/rc.net</tt> file<br>
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemon:'
if [ -f /usr/local/bin/rbootd ]; then
    echo ' rbootd.'; /usr/local/sbin/sun-rbootd -a &gt; /dev/null
fi</pre>
   </ul>
</li>

<li>Setting up rarpd and bootparamd:<br>
   Edit <tt>/etc/rc.net</tt> and make sure that the following lines are 
   uncommented:<br>
<pre>if [ -f /usr/etc/rpc.bootparamd ]; then   
       /usr/etc/rpc.bootparamd & (echo -n ' bootparamd' &gt;/dev/console)
fi
if [ -f /etc/rarpd ]; then
       /etc/rarpd;               (echo -n ' rarpd'      &gt;/dev/console)
fi
</pre>
<p>

<li>Setting up nfs:<br>
   Edit <tt>/etc/rc.custom</tt> and make sure that:<br>
   <tt>NET=<b>on</b></tt>
</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<h3><a name="next">NEXTSTEP</a></h3>
<dl><dt><dd>
<ol>
<li>Setting up rarpd, bootparamd, and bootpd:<br>
   Edit <tt>/etc/hostconfig</tt> and make sure that the <tt>NETMASTER</tt>
line reads:<br>
<pre>NETMASTER=-YES-
</pre>
<p>

<li>Setting up nfs:<br>
NFS is automatically set up from the steps described on the <a
href="nfs.html">nfs</a> page.
</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<h3><a name="hpux9">HP-UX 9 and earlier</a></h3>
<dl><dt><dd>
<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>To set up rbootd for hp300, you don't need to do anything.
      When SAM sets your machine up to be a cluster server, it configures
      everything so that <tt>/etc/rc</tt> will start rbootd.
      <p>
   <li>To set up sun-rbootd, edit <tt>/etc/rc</tt> and make sure the
      following four lines are commented out (with a #):
<pre><b>#</b>            if /usr/bin/rtprio 64 /etc/rbootd $RBOOTD_DEVICES; then
<b>#</b>                echo "remote boot daemon started"
  <i>[...]</i>
<b>#</b>                if /usr/bin/rtprio 64 /etc/rbootd; then
<b>#</b>                    echo "remote boot daemon started"</pre>
   Now edit one of the startup files (preferably
   <tt>/etc/netlinkrc</tt>) and add the following lines:
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemon:'
if [ -f /usr/local/sbin/sun-rbootd ]; then
    echo ' rbootd.'; /usr/local/sbin/sun-rbootd -a &gt; /dev/null
fi</pre>
   </ul>
</li>

<li>Setting up rarpd and bootparamd:<br>
   HP-UX 9 and earlier do not have rarpd or bootparamd
<p>

<li>Setting up dhcpd:<br>
Edit one of the startup files (preferably
   <tt>/etc/netlinkrc</tt>) and add the following lines:
      <pre>#Start the daemons to netboot a NetBSD client
echo -n 'Starting diskless server daemon:'
if [ -f /usr/local/sbin/dhcpd ]; then
    echo ' dhcpd.'; /usr/local/sbin/dhcpd -q
fi</pre>
<p>

<li>Setting up nfs:<br>
   Edit <tt>/etc/netnfsrc</tt> and make sure that:<br>
   <tt>NFS_SERVER=<b>1</b></tt><br>
   <tt>START_MOUNTD=<b>1</b></tt>
</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<h3><a name="hpux10">HP-UX 10</a></h3>
<dl><dt><dd>
<ol>
<li>Setting up the client-specific daemon:
<p>
   <ul>
   <li>To set up the HP-UX rbootd for hp300, edit your
      <tt>/etc/rc.config.d/netdaemons</tt>  and make sure that<br>
      <tt>START_RBOOTD=<b>1</b></tt>
      <p>
   <li>To set up the sun-rbootd for hp300, create a SYSV init script
       and make sure it is enabled (i.e. linked into <tt>/sbin/rc2.d</tt>).
       Also, edit <tt>/etc/rc.config.d/netdaemons</tt> and make sure that<br>
      <tt>START_RBOOTD=<b>0</b></tt>
   </ul>
</li>

<li>Setting up rarpd and bootparamd: <br>
   HP-UX 10 does not support bootparamd<br>
   Edit <tt>/etc/rc.config.d/netconf</tt> and make sure that:<br>
   <tt>RARPD=<b>1</b></tt>
<p>

<li>To set up dhcpd, create a SYSV init script
    and make sure it is enabled (i.e. linked into <tt>/sbin/rc2.d</tt>).
<p>

<li>Setting up nfs:<br>
   Edit <tt>/etc/rc.config.d/nfsconf</tt> and make sure that:<br>
   <tt>NFS_SERVER=<b>1</b></tt><br>
   <tt>START_MOUNTD=<b>1</b></tt>
</ol>
<p>

Congratulations, you're done!
</dd></dl>

<hr>

<a href="files.html">Previous</a> |
Next |
<a href="./">Table of Contents</a>

<hr> 

<table width="100%"><tr><td>
  <table><tr><td>
    <a href="../../../"><img
        src="../../../images/NetBSD-flag.png" border="0"
        width="90" height="90" alt=""></a> 
  </td><td>
    <a href="../../../"><img
        src="../../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">Home Page</a>
  </td></tr></table>
</td><td>
  <table><tr><td> 
    <a href="../../../docs/"><img
        src="../../../images/NetBSD-flag.png" border="0"
        width="90" height="90" alt=""></a>
  </td><td>
    <a href="../../../docs/"><img
        src="../../../images/empty.gif" border="0"
        width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></table>
</td></tr></table>

<hr>
<address>
  <small>
  <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">(Contact us)</a>
  $NetBSD: finish.html,v 1.2 2007/07/31 13:45:37 kano Exp $<br>
  <a href="../../../Misc/disclaimer.html">Copyright &copy; 1998-2004
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>
