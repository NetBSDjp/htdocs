<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="generator" content="Website XSL Stylesheet V2.6.0">
<link rel="home" href="../../../../." title="Welcome to The NetBSD Project: Of course it runs NetBSD.">
<link rel="up" href="../../../../ja/docs/network/ipsec/." title="NetBSD IPsec FAQ">
<link rel="previous" href="../../../../ja/docs/network/ipsec/." title="NetBSD IPsec FAQ">
<link rel="next" href="../../../../ja/docs/network/ipv6/." title="IPv6 Networking FAQ">
<link rel="stylesheet" href="../../../../global.css" type="text/css">

  

  <title>Racoon &#12434;&#20351;&#12387;&#12383;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12450;&#12463;&#12475;&#12473; VPN &#12398;&#27083;&#31689;&#26041;&#27861;</title>
</head>
<body class="website"><div class="webpage">
<a name="ja-docs-network-ipsec-rasvpn"></a><div id="top"><a href="#mainContent" class="doNotDisplay doNotPrint">Skip to main content.</a></div>
<div id="centralHeader">
<div id="logo">
<a href="../../../../"><img alt="[NetBSD Logo]" src="../../../../images/NetBSD-smaller.png"></a><div id="name"><a href="../../../../">
	  The NetBSD Project
	</a></div>
<div id="slogan"><a href="../../../../">
	  &#8220;Of course it runs NetBSD&#8221;
	</a></div>
</div>
<div id="headerTools">
<div id="header-cse-search-form">Google custom search</div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script><script type="text/javascript"> 
		  google.load('search', '1', {language : 'ja'});
		  google.setOnLoadCallback(function() {
		    var header_customSearchControl = new google.search.CustomSearchControl('016685087845965994609:5539h4dkepg');
		    header_customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
		    var header_options = new google.search.DrawOptions();
		    header_options.enableSearchboxOnly("http://google.com/cse?cx=016685087845965994609:5539h4dkepg");    
		    header_customSearchControl.draw('header-cse-search-form', header_options);
		  }, true);
		</script>
</div>
</div>
<div id="navBar" role="navigation">
<span class="doNotDisplay">
	  &#26696;&#20869;:
	</span><ul>
<li><a href="../../../../ja/">
	  &#12507;&#12540;&#12512;</a></li>
<li>
<a href="../../../../ja/">
	  &#12491;&#12517;&#12540;&#12473;&#12392;&#12513;&#12487;&#12451;&#12450;</a><ul>
<li><a href="../../../../ja/changes/">
	    &#26368;&#36817;&#12398;&#22793;&#26356;</a></li>
<li><a href="http://blog.NetBSD.org/">
	    NetBSD&#12502;&#12525;&#12464;</a></li>
<li><a href="../../../../ja/gallery/events.html">
	    &#12452;&#12505;&#12531;&#12488;</a></li>
<li><a href="../../../../ja/changes/rss.html">
	    &#12501;&#12451;&#12540;&#12489;</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/about/">
	  &#27010;&#35201;</a><ul>
<li><a href="../../../../ja/about/">
	    NetBSD</a></li>
<li><a href="../../../../ja/foundation/">
	    The NetBSD Foundation</a></li>
<li><a href="../../../../ja/gallery/">
	    &#25512;&#34214;</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/docs/">
	  &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;</a><ul>
<li><a href="../../../../ja/docs/misc/index.html">
	    FAQ&#12392;HOWTO</a></li>
<li><a href="../../../../ja/docs/guide/en/">
	    &#12460;&#12452;&#12489;</a></li>
<li><a href="http://man.NetBSD.org/">
	    &#12510;&#12491;&#12517;&#12450;&#12523;&#12506;&#12540;&#12472;</a></li>
<li><a href="http://wiki.NetBSD.org/">
	    Wiki</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/support/">
	  &#12469;&#12509;&#12540;&#12488;</a><ul>
<li><a href="../../../../ja/support/send-pr.html">
	    &#21839;&#38988;&#22577;&#21578;&#12460;&#12452;&#12489;</a></li>
<li><a href="../../../../cgi-bin/sendpr.cgi?gndb=netbsd">
	    &#12496;&#12464;&#12398;&#22577;&#21578;</a></li>
<li><a href="../../../../ja/support/query-pr.html">
	    &#12496;&#12464;&#12398;&#29031;&#20250;</a></li>
<li><a href="../../../../ja/support/security/">
	    &#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/community/">
	  &#12467;&#12511;&#12517;&#12491;&#12486;&#12451;&#12540;</a><ul>
<li><a href="http://onetbsd.org/">
	    &#12502;&#12525;&#12464;</a></li>
<li><a href="../../../../ja/mailinglists/">
	    &#12513;&#12540;&#12522;&#12531;&#12464;&#12522;&#12473;&#12488;</a></li>
<li><a href="http://mail-index.NetBSD.org/">
	    &#12513;&#12540;&#12522;&#12531;&#12464;&#12522;&#12473;&#12488;&#12450;&#12540;&#12459;&#12452;&#12502;</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/developers/">
	  &#38283;&#30330;&#32773;</a><ul>
<li><a href="http://cvsweb.NetBSD.org/">
	    &#12477;&#12540;&#12473;&#12434;&#38322;&#35239;</a></li>
<li><a href="http://nxr.NetBSD.org/">
	    &#12463;&#12525;&#12473;&#12522;&#12501;&#12449;&#12524;&#12531;&#12473;</a></li>
<li><a href="http://releng.NetBSD.org/">
	    &#12522;&#12522;&#12540;&#12473;&#12456;&#12531;&#12472;&#12491;&#12450;&#12522;&#12531;&#12464;</a></li>
<li><a href="http://wiki.NetBSD.org/projects/">
	    &#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12522;&#12473;&#12488;</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/ports/">
	  &#27231;&#31278;</a><ul>
<li><a href="../../../../ja/ports/history.html">
	    &#27508;&#21490;</a></li>
<li><a href="../../../../ja/ports/emulators.html">
	    &#12456;&#12511;&#12517;&#12524;&#12540;&#12479;&#12540;</a></li>
</ul>
</li>
<li>
<a href="http://www.pkgsrc.org/">
	  &#12497;&#12483;&#12465;&#12540;&#12472;</a><ul>
<li><a href="http://www.pkgsrc.se/">
	    &#12497;&#12483;&#12465;&#12540;&#12472;&#12434;&#38322;&#35239;</a></li>
<li><a href="http://releng.NetBSD.org/index-pkgsrc.html">
	    &#12522;&#12522;&#12540;&#12473;&#12456;&#12531;&#12472;&#12491;&#12450;&#12522;&#12531;&#12464;</a></li>
</ul>
</li>
</ul>
</div>
<div id="content"><div class="fullWidth"><div class="rowOfBoxes">
<h1>Racoon &#12434;&#20351;&#12387;&#12383;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12450;&#12463;&#12475;&#12473; VPN &#12398;&#27083;&#31689;&#26041;&#27861;</h1>
<h3 class="title"><a name="version">&#12477;&#12501;&#12488;&#12454;&#12455;&#12450;&#12522;&#12522;&#12540;&#12473;</a></h3>
<ul>
<li><a href="#kernel">&#12459;&#12540;&#12493;&#12523;</a></li>
<li><a href="#userland">&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;</a></li>
</ul>
<h3 class="title"><a name="remote-user-vpn">&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12450;&#12463;&#12475;&#12473; VPN</a></h3>
<ul>
<li><a href="#context">&#32972;&#26223;&#12392;&#12394;&#12427;&#29366;&#27841;</a></li>
<li><a href="#security">&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#19978;&#12398;&#21839;&#38988;</a></li>
<li><a href="#solutions">&#35299;&#27770;&#31574;</a></li>
</ul>
<h3 class="title"><a name="remote-user-ipsec">IPsec &#12434;&#20351;&#12387;&#12383;&#12518;&#12540;&#12470;&#12540;&#12522;&#12514;&#12540;&#12488;&#12450;&#12463;&#12475;&#12473;</a></h3>
<ul>
<li><a href="#ph1auth">IPsec &#12501;&#12455;&#12540;&#12474; 1 &#35469;&#35388;</a></li>
<li><a href="#xauth">Xauth</a></li>
<li><a href="#hybrid">Hybrid auth</a></li>
<li><a href="#mode_cfg">ISAKMP &#12514;&#12540;&#12489;&#35373;&#23450;</a></li>
<li><a href="#nat_t">NAT Traversal</a></li>
<li><a href="#ike_frag">IKE &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12362;&#12424;&#12403; ESP &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;</a></li>
<li><a href="#dpd">Dead Peer Detection</a></li>
</ul>
<h3 class="title"><a name="vpn-gateway">VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12398;&#35373;&#23450;</a></h3>
<ul>
<li><a href="#kernel">&#12459;&#12540;&#12493;&#12523;&#12467;&#12531;&#12501;&#12451;&#12462;&#12517;&#12524;&#12540;&#12471;&#12519;&#12531;</a></li>
<li><a href="#forw">&#12497;&#12465;&#12483;&#12488;&#12501;&#12457;&#12527;&#12540;&#12487;&#12451;&#12531;&#12464;</a></li>
<li><a href="#cert">&#35388;&#26126;&#26360;&#12398;&#20316;&#25104;</a></li>
<li><a href="#config">racoon(8) &#12398;&#35373;&#23450;</a></li>
<li><a href="#more_frag">&#12373;&#12425;&#12394;&#12427;&#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#21839;&#38988;</a></li>
<li><a href="#firewall">&#12501;&#12449;&#12452;&#12450;&#12454;&#12457;&#12540;&#12523;&#12392;&#12398;&#38306;&#20418;</a></li>
<li><a href="#radius">VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12392; RADIUS </a></li>
</ul>
<h3 class="title"><a name="vpn-client">VPN &#12463;&#12521;&#12452;&#12450;&#12531;&#12488;</a></h3>
<ul>
<li><a href="#client">Cisco VPN client</a></li>
<li><a href="#client_conf">&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12392;&#12375;&#12390;&#12398; racoon(8) : &#35373;&#23450;&#20363;</a></li>
<li><a href="#connection">VPN &#12392;&#12398;&#25509;&#32154;&#12392;&#20999;&#26029;</a></li>
<li><a href="#save_pwd">Xauth &#12497;&#12473;&#12527;&#12540;&#12489;&#12398;&#20445;&#23384;</a></li>
</ul>
<hr>
<h3 class="title">&#12477;&#12501;&#12488;&#12454;&#12455;&#12450;&#12522;&#12522;&#12540;&#12473;</h3>
      <h4 class="title">
<a name="kernel"></a>&#12459;&#12540;&#12493;&#12523; (<a href="#version">&#12488;&#12483;&#12503;</a>)
  </h4>
      <p>&#12371;&#12398;&#25991;&#26360;&#12398;&#24773;&#22577;&#12399;&#12289;&#20197;&#19979;&#12398;
	NetBSD &#12459;&#12540;&#12493;&#12523;&#12434;&#23550;&#35937;&#12392;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">2005 &#24180; 5 &#26376;&#20197;&#38477;&#12398; NetBSD-current</li>
<li class="listitem">2005 &#24180; 5 &#26376;&#20197;&#38477;&#12398; NetBSD-3.0_BETA</li>
</ul></div>
<p>
      </p>
    
      <h4 class="title">
<a name="userland"></a>&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489; (<a href="#version">&#12488;&#12483;&#12503;</a>)
  </h4>
      <p>&#12371;&#12398;&#25991;&#26360;&#12398;&#24773;&#22577;&#12399;&#12289;&#20197;&#19979;&#12398;&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;
	(<a href="http://netbsd.gw.com/cgi-bin/man-cgi?setkey+8+NetBSD-6.0+i386">setkey(8)</a>, <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a>, <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoonctl+8+NetBSD-6.0+i386">racoonctl(8)</a> &#12362;&#12424;&#12403;
	libipsec) &#12434;&#23550;&#35937;&#12392;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">2005 &#24180; 5 &#26376;&#20197;&#38477;&#12398; NetBSD-current</li>
<li class="listitem">2005 &#24180; 5 &#26376;&#20197;&#38477;&#12398; NetBSD-3.0_BETA</li>
<li class="listitem">&#12371;&#12428;&#12424;&#12426;&#21069;&#12398; NetBSD &#12522;&#12522;&#12540;&#12473;&#12395;&#12289;NetBSD &#12398; pkgsrc &#12434;&#20351;&#12387;&#12390;
	    ipsec-tools 0.6.beta2 &#20197;&#19978;&#12398;&#12497;&#12483;&#12465;&#12540;&#12472;&#12434;&#36861;&#21152;&#12375;&#12383;&#12418;&#12398;</li>
</ul></div>
<p>
      </p>
    <hr>
<h3 class="title">&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12450;&#12463;&#12475;&#12473; VPN</h3>
      <h4 class="title">
<a name="context"></a>&#32972;&#26223;&#12392;&#12394;&#12427;&#29366;&#27841; (<a href="#remote-user-vpn">&#12488;&#12483;&#12503;</a>)
  </h4>
    
      <p>&#22810;&#12367;&#12398;&#32068;&#32340;&#12391;&#12399;&#12289;&#12522;&#12514;&#12540;&#12488;&#12450;&#12463;&#12475;&#12473;&#12469;&#12540;&#12496;&#12540; (Remote Access Server, RAS)
	&#12434;&#25345;&#12387;&#12390;&#12362;&#12426;&#12289;&#12518;&#12540;&#12470;&#12540;&#12364;&#26087;&#26469;&#12398;&#20844;&#34886;&#38651;&#35441;&#22238;&#32218; (Plain Old Telephone System, POTS)
	&#12392;&#12514;&#12487;&#12512;&#25509;&#32154;&#12434;&#20351;&#12387;&#12390;&#12522;&#12514;&#12540;&#12488;&#12450;&#12463;&#12475;&#12473;&#12391;&#12365;&#12427;&#12424;&#12358;&#12395;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
      
      <p>&#12487;&#12472;&#12479;&#12523;&#21152;&#20837;&#32773;&#22238;&#32218; (Digital Subscriber Line, DSL) &#12420;&#12465;&#12540;&#12502;&#12523;&#22238;&#32218;&#12392;&#12356;&#12387;&#12383;
	&#39640;&#24111;&#22495;&#25509;&#32154;&#12398;&#26222;&#21450;&#12395;&#20276;&#12356;&#12289;POTS &#12434;&#20351;&#12387;&#12383;&#12522;&#12514;&#12540;&#12488;&#12450;&#12463;&#12475;&#12473;&#12399;&#26178;&#20195;&#36933;&#12428;&#12392;&#12394;&#12426;&#12289;
	&#12518;&#12540;&#12470;&#12540;&#12399;&#39640;&#24111;&#22495;&#12398;&#12522;&#12514;&#12540;&#12488;&#12450;&#12463;&#12475;&#12473;&#12434;&#27714;&#12417;&#12427;&#12424;&#12358;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;
	&#20206;&#24819;&#12503;&#12521;&#12452;&#12505;&#12540;&#12488;&#12493;&#12483;&#12488;&#12527;&#12540;&#12463; (Virtual Private Network, VPN) &#12434;&#20351;&#12358;&#12371;&#12392;&#12399;&#12289;
	&#12371;&#12398;&#21839;&#38988;&#12395;&#23550;&#12377;&#12427;&#35299;&#27770;&#31574;&#12398;&#12402;&#12392;&#12388;&#12391;&#12377;&#12290;</p>

      <p>VPN &#12450;&#12463;&#12475;&#12473;&#29992;&#12398;&#12518;&#12540;&#12470;&#12540;&#35469;&#35388;&#12392;&#12375;&#12390;&#12399;&#12289;&#12356;&#12367;&#12388;&#12363;&#12398;&#26041;&#27861;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">&#12464;&#12523;&#12540;&#12503;&#12497;&#12473;&#12527;&#12540;&#12489; (&#12518;&#12540;&#12470;&#12540;&#20840;&#21729;&#12364;&#21516;&#12376;&#12497;&#12473;&#12527;&#12540;&#12489;&#12434;&#20351;&#12358;)</li>
<li class="listitem">&#12525;&#12464;&#12452;&#12531;&#21517;&#12392;&#12497;&#12473;&#12527;&#12540;&#12489;</li>
<li class="listitem">x509 &#35388;&#26126;&#26360;</li>
</ul></div>
<p>
      </p>

      <p>&#12464;&#12523;&#12540;&#12503;&#12497;&#12473;&#12527;&#12540;&#12489;&#12399;&#21155;&#12387;&#12383;&#25163;&#27861;&#12391;&#12354;&#12426;&#12289;&#20351;&#12358;&#12409;&#12365;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;
	&#12518;&#12540;&#12470;&#12540;&#12434;&#26412;&#24403;&#12395;&#35469;&#35388;&#12375;&#12390;&#12356;&#12427;&#12431;&#12369;&#12391;&#12399;&#12394;&#12356;&#12363;&#12425;&#12391;&#12377;&#12290;
	x509 &#35388;&#26126;&#26360;&#12399;&#26368;&#39640;&#12398;&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#12434;&#12418;&#12383;&#12425;&#12375;&#12414;&#12377;&#12364;&#12289;&#12518;&#12540;&#12470;&#12540;&#35388;&#26126;&#26360;&#12398;&#31649;&#29702;&#12364;&#38754;&#20498;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#12290;
	&#12381;&#12428;&#12391;&#12418;&#27083;&#12431;&#12394;&#12369;&#12428;&#12400;&#12289;&#24517;&#35201;&#12394;&#24773;&#22577;&#12399; <a class="ulink" href="index.html" target="_top">IPsec FAQ</a>
	&#12395;&#12377;&#12409;&#12390;&#12354;&#12426;&#12414;&#12377;&#12290;&#12525;&#12464;&#12452;&#12531;&#21517;&#12392;&#12497;&#12473;&#12527;&#12540;&#12489;&#12399;&#12289;&#20006;&#12398;&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#12524;&#12505;&#12523;&#12391;&#12377;&#12290;
	&#12497;&#12473;&#12527;&#12540;&#12489;&#12399;&#25512;&#28204;&#12373;&#12428;&#12383;&#12426;&#12289;&#21029;&#12398;&#12503;&#12525;&#12488;&#12467;&#12523;&#12391;&#20844;&#38283;&#12373;&#12428;&#12383;&#12426; (&#20363;: SSL &#12434;&#20351;&#12431;&#12394;&#12356; POP3)
	&#12377;&#12427;&#12398;&#12391;&#12289;&#23433;&#20840;&#24615;&#12399;&#39640;&#12367;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;&#12375;&#12363;&#12375;&#12289;&#24375;&#12356;&#12497;&#12473;&#12527;&#12540;&#12489;&#12434;&#20351;&#12358;&#12424;&#12358;&#12395;&#12375;&#12289;
	&#12414;&#12383;&#12289;&#20621;&#21463;&#12373;&#12428;&#12394;&#12356;&#12424;&#12358;&#12394;&#12503;&#12525;&#12488;&#12467;&#12523;&#12398;&#20351;&#12356;&#26041;&#12434;&#12375;&#12390;&#12356;&#12428;&#12400;&#12289;
	&#32076;&#28168;&#30340;&#12395;&#23433;&#20840;&#12434;&#23455;&#29694;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

      <p>&#12371;&#12398; HOW-TO &#12391;&#12399;&#12289;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540; VPN &#12450;&#12463;&#12475;&#12473;&#29992;&#12395;
	&#12525;&#12464;&#12452;&#12531;&#21517;&#12392;&#12497;&#12473;&#12527;&#12540;&#12489;&#12364;&#20351;&#12431;&#12428;&#12390;&#12356;&#12427;&#29366;&#27841;&#12434;&#23550;&#35937;&#12392;&#12375;&#12414;&#12377;&#12290;</p>
    
      <h4 class="title">
<a name="security"></a>&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#19978;&#12398;&#21839;&#38988; (<a href="#remote-user-vpn">&#12488;&#12483;&#12503;</a>)
  </h4>
      
      <p>&#23433;&#20840;&#12394; VPN &#12434;&#30906;&#31435;&#12377;&#12427;&#12383;&#12417;&#12395;&#12289;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12399; VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12434;&#35469;&#35388;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12378;&#12289;
	&#12414;&#12383;&#12289;VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12399;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12434;&#35469;&#35388;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290;
	&#12362;&#20114;&#12356;&#12398;&#35469;&#35388;&#12364;&#12362;&#12371;&#12394;&#12431;&#12428;&#12394;&#12356;&#12392;&#12289;&#20013;&#38291;&#32773;&#25915;&#25731; (Man in the Middle (MiM) attack)
	&#12398;&#25244;&#12369;&#31348;&#12364;&#38283;&#12365;&#12289;&#25915;&#25731;&#32773;&#12364; VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12395;&#12394;&#12426;&#12377;&#12414;&#12375;&#12390;
	&#12518;&#12540;&#12470;&#12540;&#12497;&#12473;&#12527;&#12540;&#12489;&#12434;&#21454;&#38598;&#12391;&#12365;&#12390;&#12375;&#12414;&#12356;&#12414;&#12377;&#12290;</p>
      
      <p>&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12364;&#12525;&#12464;&#12452;&#12531;&#21517;&#12392;&#12497;&#12473;&#12527;&#12540;&#12489;&#12391;&#35469;&#35388;&#12377;&#12427;&#12392;&#35500;&#26126;&#12375;&#12414;&#12375;&#12383;&#12364;&#12289;
	VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12399;&#12393;&#12358;&#12420;&#12387;&#12390;&#35469;&#35388;&#12377;&#12427;&#12398;&#12391;&#12375;&#12423;&#12358;&#12363;? &#20107;&#21069;&#20849;&#26377;&#37749;&#12434;&#20351;&#12358;&#22580;&#21512;&#12289;
	&#12381;&#12398;&#37749;&#12434;&#30693;&#12387;&#12390;&#12356;&#12427;&#20154;&#12394;&#12425;&#35504;&#12391;&#12418; VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12395;&#12394;&#12426;&#12377;&#12414;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12375;&#12289;
	&#27491;&#24403;&#12394;&#12518;&#12540;&#12470;&#12540;&#12399;&#20107;&#21069;&#20849;&#26377;&#37749;&#12434;&#30693;&#12387;&#12390;&#12362;&#12363;&#12397;&#12400;&#12394;&#12425;&#12394;&#12367;&#12394;&#12426;&#12414;&#12377;&#12290;&#12371;&#12428;&#12399;&#38750;&#24120;&#12395;&#24369;&#12356;&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#12391;&#12377;&#12290;
	&#20195;&#26367;&#31574;&#12399;&#12289;VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12391; x509 &#35388;&#26126;&#26360;&#12434;&#20351;&#12358;&#12371;&#12392;&#12391;&#12377;&#12290;&#12371;&#12428;&#12399;&#12469;&#12540;&#12496;&#12540;&#35388;&#26126;&#26360;&#12391;&#12354;&#12426;&#12289;
	&#12518;&#12540;&#12470;&#12540;&#35388;&#26126;&#26360;&#12424;&#12426;&#31649;&#29702;&#12375;&#12420;&#12377;&#12356;&#12418;&#12398;&#12391;&#12377;&#12290;&#12371;&#12371;&#12391;&#12399;&#12289;
	VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12398;&#35469;&#35388;&#12395;&#35388;&#26126;&#26360;&#12434;&#20351;&#12358;&#12418;&#12398;&#12392;&#12375;&#12414;&#12377;&#12290;</p>
    
      <h4 class="title">
<a name="solutions"></a>&#35299;&#27770;&#31574; (<a href="#remote-user-vpn">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#12371;&#12371;&#12391;&#12399;&#12289;&#12518;&#12540;&#12470;&#12540;&#12398;&#35469;&#35388;&#12395;&#12399;&#12525;&#12464;&#12452;&#12531;&#21517;&#12392;&#12497;&#12473;&#12527;&#12540;&#12489;&#12434;&#20351;&#12356;&#12289;
	VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12398;&#35469;&#35388;&#12395;&#12399;&#35388;&#26126;&#26360;&#12434;&#20351;&#12358;&#12371;&#12392;&#12364;&#24517;&#35201;&#12391;&#12377;&#12290;&#12371;&#12428;&#12434;&#23455;&#29694;&#12391;&#12365;&#12427;&#25163;&#27861;&#12399;&#12354;&#12414;&#12426;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;
	<a class="ulink" href="http://www.openvpn.org" target="_top">OpenVPN</a> &#12399;&#12289;&#12371;&#12428;&#12364;&#23455;&#29694;&#21487;&#33021;&#12394;&#12289;
	Secure Socket Layer (SSL) &#12434;&#20351;&#12387;&#12383;&#35299;&#27770;&#31574;&#12391;&#12377;&#12290;&#21029;&#12398;&#35299;&#27770;&#31574;&#12392;&#12375;&#12390;&#12289; IPsec &#12434;&#20351;&#12358;&#26041;&#27861;&#12418;&#12354;&#12426;&#12289;
	&#12371;&#12398; HOW-TO &#12391;&#12399;&#12371;&#12385;&#12425;&#12398;&#26041;&#27861;&#12434;&#21462;&#12426;&#25201;&#12356;&#12414;&#12377;&#12290;</p>
    <hr>
<h3 class="title">IPsec &#12434;&#20351;&#12387;&#12383;&#12518;&#12540;&#12470;&#12540;&#12522;&#12514;&#12540;&#12488;&#12450;&#12463;&#12475;&#12473;</h3>
      <h4 class="title">
<a name="ph1auth"></a>IPsec &#12501;&#12455;&#12540;&#12474; 1 &#35469;&#35388; (<a href="#remote-user-ipsec">&#12488;&#12483;&#12503;</a>)
  </h4>
      
      <p>IPsec &#12501;&#12455;&#12540;&#12474; 1 &#12399;&#12289;NetBSD &#12391;&#12399; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12392;&#12375;&#12390;&#12418;&#30693;&#12425;&#12428;&#12427; IKE &#12487;&#12540;&#12514;&#12531;&#12395;&#12424;&#12387;&#12390;&#34892;&#12394;&#12431;&#12428;&#12427;&#12289;
	IPsec &#37749;&#20132;&#25563; (IPsec Key Exchange, IKE) &#25805;&#20316;&#12398;&#19968;&#37096;&#12391;&#12377;&#12290;IPsec &#12501;&#12455;&#12540;&#12474; 1 &#12398;&#30446;&#30340;&#12399;&#12289;
	&#36890;&#20449;&#30456;&#25163;&#12434;&#35469;&#35388;&#12375;&#12383;&#12358;&#12360;&#12391;&#12289; IPsec &#12501;&#12455;&#12540;&#12474; 2 &#12434;&#23433;&#20840;&#12395;&#34892;&#12394;&#12358;&#12383;&#12417;&#12398;&#12510;&#12473;&#12479;&#12540;&#37749;&#12398;&#35373;&#23450;&#12434;&#12377;&#12427;&#12371;&#12392;&#12391;&#12377;&#12290;
	&#12501;&#12455;&#12540;&#12474; 2 &#12398;&#30446;&#30340;&#12399;&#12289;IPsec &#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#20132;&#25563;&#12395;&#20351;&#12431;&#12428;&#12427;&#37749;&#12434;&#24471;&#12427;&#12371;&#12392;&#12391;&#12377;&#12290;
	IPsec &#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#20132;&#25563;&#12364;&#12362;&#12371;&#12394;&#12431;&#12428;&#12390;&#12356;&#12427;&#38291;&#12289;&#12501;&#12455;&#12540;&#12474; 2 &#12398;&#37749;&#12399;&#23450;&#26399;&#30340;&#12395;&#20877;&#29983;&#25104;&#12373;&#12428;&#12414;&#12377;&#12290;</p>

      <p>IPsec &#12501;&#12455;&#12540;&#12474; 1 &#12399;&#12289;&#20108;&#12388;&#12398;&#35469;&#35388;&#26041;&#27861;&#12434;&#25552;&#20379;&#12375;&#12414;&#12377;&#12290;&#20107;&#21069;&#20849;&#26377;&#37749;&#12392;&#12289;&#35388;&#26126;&#26360;&#12391;&#12377;&#12290;
	&#20197;&#19979;&#12398;&#29702;&#30001;&#12395;&#12424;&#12426;&#12289;IPsec &#12501;&#12455;&#12540;&#12474; 1 &#12399;&#12431;&#12428;&#12431;&#12428;&#12364;&#27714;&#12417;&#12390;&#12356;&#12427;&#12418;&#12398;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;
	</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">&#20107;&#21069;&#20849;&#26377;&#37749;&#12399;&#12289;&#12525;&#12464;&#12452;&#12531;&#21517;&#12395;&#32283;&#12425;&#12428;&#12414;&#12379;&#12435;&#12290;&#12464;&#12523;&#12540;&#12503;&#12497;&#12473;&#12527;&#12540;&#12489;&#12392;&#12375;&#12383;&#22580;&#21512;&#12384;&#12369;&#12399;&#31649;&#29702;&#21487;&#33021;&#12391;&#12377;&#12364;&#12289;
	    &#12381;&#12428;&#12434;&#38500;&#12369;&#12400;&#12289;&#20107;&#21069;&#20849;&#26377;&#37749;&#12434;&#36969;&#20999;&#12395;&#25201;&#12358;&#12383;&#12417;&#12398;&#31649;&#29702;&#12484;&#12540;&#12523;&#12364;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;</li>
<li class="listitem">IPsec &#12501;&#12455;&#12540;&#12474; 1 &#35469;&#35388;&#12399;&#12289;&#23550;&#31216;&#30340;&#12391;&#12354;&#12427;&#12371;&#12392;&#12364;&#21069;&#25552;&#12391;&#12377;&#12290;
	    &#12388;&#12414;&#12426;&#12289;&#20001;&#31471;&#12392;&#12418;&#12395;&#20107;&#21069;&#20849;&#26377;&#37749;&#35469;&#35388;&#12434;&#12289;&#12414;&#12383;&#12399;&#20001;&#31471;&#12392;&#12418;&#12395;&#35388;&#26126;&#26360;&#35469;&#35388;&#12434;&#20351;&#12358;&#12289;&#12392;&#12356;&#12358;&#12418;&#12398;&#12391;&#12377;&#12290;
	    &#12371;&#12428;&#12399;&#12289;&#12431;&#12428;&#12431;&#12428;&#12364;&#25506;&#12375;&#12390;&#12356;&#12427;&#12418;&#12398;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;</li>
</ul></div>
<p>
      </p>
    
      <h4 class="title">
<a name="xauth"></a>Xauth (<a href="#remote-user-ipsec">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>Xauth &#12399;&#12289;&#12501;&#12455;&#12540;&#12474; 1 &#12398;&#24460;&#12395;&#20351;&#12431;&#12428;&#12289;&#12525;&#12464;&#12452;&#12531;&#21517;/&#12497;&#12473;&#12527;&#12540;&#12489;&#35469;&#35388;&#12434;&#36861;&#21152;&#12377;&#12427; IKE &#25313;&#24373;&#12391;&#12377;&#12290;
	&#12371;&#12428;&#12399;&#12289;&#35469;&#35388;&#12395;&#12414;&#12388;&#12431;&#12427;&#21839;&#38988;&#12398;&#21322;&#20998;&#12434;&#35299;&#27770;&#12375;&#12414;&#12377;&#12290;Xauth &#12399;&#12501;&#12455;&#12540;&#12474; 1 &#12398;&#30452;&#24460;&#12395;&#20351;&#12431;&#12428;&#12427;&#12398;&#12391;&#12289;
	&#12501;&#12455;&#12540;&#12474; 1 &#35469;&#35388;&#12395;&#12424;&#12426;&#23433;&#20840;&#12394;&#12418;&#12398;&#12392;&#12394;&#12426;&#12414;&#12377;&#12290;&#21839;&#38988;&#12398;&#21322;&#20998;&#12399;&#35299;&#27770;&#12375;&#12414;&#12375;&#12383;&#12364;&#12289;&#12414;&#12384;
	&#12501;&#12455;&#12540;&#12474; 1 &#12391;&#12399;&#20107;&#21069;&#20849;&#26377;&#37749;&#12363;&#35388;&#26126;&#26360;&#12364;&#24517;&#35201;&#12391;&#12377;&#12290;&#20107;&#21069;&#20849;&#26377;&#37749;&#12398;&#20351;&#29992;&#12399;&#23433;&#20840;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12375;&#12289;
	&#35388;&#26126;&#26360;&#12434;&#20351;&#12358;&#12371;&#12392;&#12399;&#12289;&#12518;&#12540;&#12470;&#12540;&#35388;&#26126;&#26360;&#12434;&#20351;&#12358;&#12371;&#12392;&#12434;&#24847;&#21619;&#12375;&#12414;&#12377;&#12290;
	&#12518;&#12540;&#12470;&#12540;&#35388;&#26126;&#26360;&#12398;&#20351;&#29992;&#12399;&#12431;&#12428;&#12431;&#12428;&#12364;&#36991;&#12369;&#12383;&#12363;&#12387;&#12383;&#12371;&#12392;&#12391;&#12377;&#12290;</p>
    
      <h4 class="title">
<a name="hybrid"></a>Hybrid auth (<a href="#remote-user-ipsec">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>Hybrid auth &#12399;&#12418;&#12358;&#12402;&#12392;&#12388;&#12398; IKE &#25313;&#24373;&#12391;&#12289;&#12501;&#12455;&#12540;&#12474; 1 &#12434;&#38750;&#23550;&#31216;&#12395;&#12377;&#12427;&#12418;&#12398;&#12391;&#12377;&#12290;
        &#12501;&#12455;&#12540;&#12474; 1 &#12398;&#34892;&#12394;&#12431;&#12428;&#12390;&#12356;&#12427;&#38291;&#12289;VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12399;&#12289;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12364;&#35469;&#35388;&#12434;&#12377;&#12427;&#24517;&#35201;&#12364;&#12394;&#12367;&#12390;&#12418;&#12289;
        &#35388;&#26126;&#26360;&#12434;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;&#12501;&#12455;&#12540;&#12474; 1 &#12364;&#34892;&#12394;&#12431;&#12428;&#12383;&#24460;&#12398;&#29366;&#27841;&#12399;&#12289;&#20197;&#19979;&#12398;&#12392;&#12362;&#12426;&#12391;&#12377;&#12290;
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12399;&#12289;&#36890;&#20449;&#30456;&#25163;&#12364; VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12391;&#12354;&#12427;&#12371;&#12392;&#12364;&#12431;&#12363;&#12387;&#12390;&#12356;&#12414;&#12377;</li>
<li class="listitem">&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12392; VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12392;&#12398;&#38291;&#12398;&#12420;&#12426;&#12392;&#12426;&#12399;&#23433;&#20840;&#12391;&#12377;</li>
<li class="listitem">VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12399;&#12289;&#35441;&#12375;&#12390;&#12356;&#12427;&#30456;&#25163;&#12364;&#35504;&#12363;&#12431;&#12363;&#12387;&#12390;&#12356;&#12414;&#12379;&#12435;</li>
</ul></div>
<p>
      </p>

      <p>&#12371;&#12398;&#12501;&#12455;&#12540;&#12474; 1 &#12398;&#24460;&#12289;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12398;&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#35469;&#35388;&#12398;&#12383;&#12417;&#12395; Xauth &#20132;&#25563;&#12434;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
        &#12381;&#12398;&#24460;&#12289;&#12501;&#12455;&#12540;&#12474; 2 &#12364;&#12362;&#12371;&#12394;&#12431;&#12428;&#12414;&#12377;&#12290;</p>

      <p>IPsec + Xauth + Hybrid auth &#12398;&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#12398;&#24230;&#21512;&#12399;&#12289;
        &#12497;&#12473;&#12527;&#12540;&#12489;&#35469;&#35388;&#12434;&#20351;&#12387;&#12383; SSH &#12392;&#12384;&#12356;&#12383;&#12356;&#21516;&#12376;&#12368;&#12425;&#12356;&#12391;&#12377;&#12290;</p>
    
      <h4 class="title">
<a name="mode_cfg"></a>ISAKMP &#12514;&#12540;&#12489;&#35373;&#23450; (<a href="#remote-user-ipsec">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#20197;&#19978;&#12398;&#12392;&#12362;&#12426;&#12289;&#35469;&#35388;&#12398;&#21839;&#38988;&#12399; IPsec + Xauth + Hybrid auth &#12434;&#20351;&#12358;&#12371;&#12392;&#12391;&#35299;&#27770;&#12373;&#12428;&#12414;&#12375;&#12383;&#12290;
	&#12522;&#12514;&#12540;&#12488;&#12450;&#12463;&#12475;&#12473;&#12434;&#12518;&#12540;&#12470;&#12540;&#12501;&#12524;&#12531;&#12489;&#12522;&#12540;&#12394;&#12418;&#12398;&#12395;&#12377;&#12427;&#12383;&#12417;&#12395;&#12289;
	&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12398;&#12510;&#12471;&#12531;&#35373;&#23450;&#12434;&#33258;&#21205;&#21270;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;ISAKMP &#12514;&#12540;&#12489;&#35373;&#23450;&#12399;&#12289;
	VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12364;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12398;&#12510;&#12471;&#12531;&#12395;&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;&#35373;&#23450; (&#20869;&#37096; IP &#12450;&#12489;&#12524;&#12473;&#12289;
	DNS &#12450;&#12489;&#12524;&#12473;&#12289;&#12489;&#12513;&#12452;&#12531;&#21517;&#12394;&#12393;) &#12434;&#25552;&#20379;&#12391;&#12365;&#12427;&#12424;&#12358;&#12395;&#12377;&#12427; IKE &#25313;&#24373;&#12391;&#12377;&#12290;</p>
    
      <h4 class="title">
<a name="nat_t"></a>NAT Traversal (<a href="#remote-user-ipsec">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12399;&#12289;IPsec &#26263;&#21495;&#21270;&#12473;&#12488;&#12522;&#12540;&#12512;&#12434;&#20351;&#12387;&#12383;&#22580;&#21512;&#12395;&#12399;&#27231;&#33021;&#12375;&#12394;&#12356;&#12289;
	&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;&#12450;&#12489;&#12524;&#12473;&#22793;&#25563;&#22120; (Network Address Translator, NAT) &#12398;&#21521;&#12371;&#12358;&#12395;&#12356;&#12427;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#12290;
	&#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#12434;&#26263;&#21495;&#21270;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#12392;&#12365;&#12399;&#12289;IPsec &#12399;&#12289;&#26263;&#21495;&#12506;&#12452;&#12525;&#12540;&#12489; (Encapsulated Security Payload, ESP)
	&#12392;&#12356;&#12358;&#12524;&#12452;&#12516;&#12540; 4 &#12398;&#12503;&#12525;&#12488;&#12467;&#12523;&#12434;&#20351;&#29992;&#12375;&#12414;&#12377;&#12290;TCP &#12420; UDP &#12392;&#12399;&#30064;&#12394;&#12426;&#12289;ESP
	&#12399;&#12509;&#12540;&#12488;&#30058;&#21495;&#12434;&#25345;&#12383;&#12378;&#12289; NAT &#12487;&#12496;&#12452;&#12473;&#12364;&#31777;&#21336;&#12395;&#25201;&#12358;&#12371;&#12392;&#12399;&#12391;&#12365;&#12414;&#12379;&#12435;&#12290;</p>

      <p>RFC 3947 &#12362;&#12424;&#12403; 3948 &#12391;&#12399;&#12289;ESP &#12434; UDP &#12391;&#12459;&#12503;&#12475;&#12523;&#21270;&#12377;&#12427;&#26041;&#27861;&#12392;&#12289;
	IPsec &#12473;&#12488;&#12522;&#12540;&#12512;&#12398;&#20001;&#31471;&#12398;&#38291;&#12395;&#12354;&#12427; NAT &#12434;&#31649;&#29702;&#12377;&#12427;&#12383;&#12417;&#12398; IKE &#25313;&#24373;&#12395;&#12388;&#12356;&#12390;&#35299;&#35500;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	&#12371;&#12398;&#12459;&#12503;&#12475;&#12523;&#21270;&#12398;&#26041;&#27861;&#12392; IKE &#25313;&#24373;&#12398;&#32068;&#12415;&#21512;&#12431;&#12379;&#12399;&#12289;NAT Traversal (NAT-T)
	&#12392;&#12375;&#12390;&#30693;&#12425;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;</p>

      <p>NAT-T &#12399;&#12289;&#21512;&#34886;&#22269;&#29305;&#35377;&#12398;<a class="ulink" href="https://datatracker.ietf.org/public/ipr_detail_show.cgi?&amp;ipr_id=78" target="_top">&#21046;&#32004;&#12434;&#21463;&#12369;&#12427;&#12371;&#12392;&#12395;&#12394;&#12427;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;</a>&#12290;</p>
    
      <h4 class="title">
<a name="ike_frag"></a>IKE &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12362;&#12424;&#12403; ESP &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531; (<a href="#remote-user-ipsec">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12364; DSL &#12514;&#12487;&#12512;&#12523;&#12540;&#12479;&#12540;&#27231;&#22120;&#12434;&#20171;&#12375;&#12390;&#25509;&#32154;&#12375;&#12390;&#12367;&#12427;&#12398;&#12399;&#12289;&#12424;&#12367;&#12354;&#12427;&#12371;&#12392;&#12391;&#12375;&#12423;&#12358;&#12290;
	&#12371;&#12428;&#12425;&#12398;&#12487;&#12496;&#12452;&#12473;&#12398;&#12411;&#12392;&#12435;&#12393;&#12399;&#12289;&#22823;&#12365;&#12394; UDP &#12497;&#12465;&#12483;&#12488;&#12398;&#25201;&#12356;&#12395;&#38306;&#12375;&#12390;&#12289;&#12414;&#12387;&#12383;&#12367;&#29992;&#12434;&#12394;&#12375;&#12414;&#12379;&#12435;&#12290;
	UDP &#12364; DNS &#12522;&#12463;&#12456;&#12473;&#12488;&#12391;&#12375;&#12363;&#20351;&#12431;&#12428;&#12394;&#12356;&#12392;&#12356;&#12358;&#24819;&#23450;&#12391;&#20316;&#12425;&#12428;&#12390;&#12362;&#12426;&#12289;&#12381;&#12428;&#12424;&#12426;&#22823;&#12365;&#12394;
	UDP &#12497;&#12465;&#12483;&#12488;&#12420;&#12501;&#12521;&#12464;&#12513;&#12531;&#12488;&#12373;&#12428;&#12383; UDP &#12497;&#12465;&#12483;&#12488;&#12399;&#12371;&#12412;&#12375;&#12390;&#12375;&#12414;&#12356;&#12414;&#12377;&#12290;
	IKE &#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12420; ESP &#12458;&#12540;&#12496;&#12540; UDP &#12399;&#22823;&#12365;&#12367;&#12394;&#12426;&#12364;&#12385;&#12394;&#12398;&#12391;&#12289;
	&#12502;&#12525;&#12483;&#12463;&#12373;&#12428;&#12390;&#12375;&#12414;&#12356;&#12414;&#12377;&#12290;</p>

      <p>&#12371;&#12398;&#21839;&#38988;&#12434;&#20966;&#29702;&#12377;&#12427;&#12383;&#12417;&#12289;IKE &#12497;&#12465;&#12483;&#12488;&#12434;&#23567;&#12373;&#12394;&#26029;&#29255;&#12395;&#20998;&#21106; IKE &#25313;&#24373;&#12391;&#12354;&#12427;&#12289;
	IKE &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12434;&#20351;&#12356;&#12414;&#12377;&#12290;
	ESP &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12399;&#12289;&#22823;&#12365;&#12394; ESP &#12458;&#12540;&#12496;&#12540; UDP &#12497;&#12465;&#12483;&#12488;&#12398;&#21839;&#38988;&#12434;&#12289;
	ESP &#12398;&#12459;&#12503;&#12475;&#12523;&#21270;&#12398;&#21069;&#12395; IP &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12434;&#12377;&#12427;&#12371;&#12392;&#12395;&#12424;&#12387;&#12390;&#12289;&#20966;&#29702;&#12375;&#12414;&#12377;&#12290;
	&#12377;&#12394;&#12431;&#12385;&#12289;&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;&#12395; frag(IP/UDP/ESP/IP) &#12434;&#36865;&#12427;&#12398;&#12391;&#12399;&#12394;&#12367; IP/UDP/ESP/frag(IP) &#12434;&#36865;&#12427;&#12398;&#12391;&#12377;&#12290;
	&#12371;&#12398;&#12383;&#12417;&#12289;IPsec &#20001;&#31471;&#28857;&#12398;&#38291;&#12395;&#12399;&#12373;&#12414;&#12428;&#12383;&#12487;&#12496;&#12452;&#12473;&#12399;&#12289;
	&#12356;&#12363;&#12394;&#12427;&#12501;&#12521;&#12464;&#12513;&#12531;&#12488;&#12373;&#12428;&#12383;&#12497;&#12465;&#12483;&#12488;&#12418;&#35469;&#35672;&#12375;&#12414;&#12379;&#12435;&#12290;</p>
    
      <h4 class="title">
<a name="dpd"></a>Dead Peer Detection (<a href="#remote-user-ipsec">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#26368;&#24460;&#12398;&#21839;&#38988;&#12391;&#12377;&#12290;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12398;&#12452;&#12531;&#12479;&#12540;&#12493;&#12483;&#12488;&#25509;&#32154;&#12364;&#19981;&#23433;&#23450;&#12391;&#12289;
	&#12354;&#12383;&#12363;&#12418;&#25509;&#32154;&#12364;&#20999;&#12428;&#12383;&#12363;&#12398;&#12424;&#12358;&#12395;&#12394;&#12427;&#12371;&#12392;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;&#12371;&#12428;&#12395;&#23550;&#12375;&#12390;&#12289;
	IPsec &#12395;&#20869;&#34101;&#12373;&#12428;&#12390;&#12356;&#12427;&#20181;&#32068;&#12415;&#12399;&#12289;&#12375;&#12400;&#12425;&#12367;&#24460;&#12395; IKE phase 2 &#37749;&#20877;&#29983;&#25104;&#12434;&#24375;&#21046;&#30340;&#12395;&#34892;&#12394;&#12358;&#12371;&#12392;&#12384;&#12369;&#12391;&#12377;&#12290;
	&#12381;&#12398;&#26178;&#12395;&#36890;&#20449;&#30456;&#25163;&#12364;&#12458;&#12531;&#12521;&#12452;&#12531;&#12391;&#12394;&#12363;&#12387;&#12383;&#12425;&#12289;&#12371;&#12428;&#12399;&#22833;&#25943;&#12375;&#12289;&#12381;&#12398;&#32080;&#26524; VPN &#12488;&#12531;&#12493;&#12523;&#12399;&#30772;&#26820;&#12373;&#12428;&#12414;&#12377;&#12290;</p>

      <p>&#12371;&#12398;&#20181;&#32068;&#12415;&#12399;&#12289;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12364;&#12458;&#12501;&#12521;&#12452;&#12531;&#12395;&#12394;&#12387;&#12383;&#12371;&#12392;&#12434;&#30906;&#35469;&#12377;&#12427;&#12383;&#12417;&#38971;&#32321;&#12395;&#37749;&#20877;&#29983;&#25104;&#12434;&#24375;&#21046;&#12373;&#12428;&#12427;&#12398;&#12391;&#12289;
	&#12354;&#12414;&#12426;&#20415;&#21033;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;Dead Peer Detection (DPD) &#12399;&#12289;&#12522;&#12514;&#12540;&#12488;&#12398; IPsec &#31471;&#28857;&#12364;&#29983;&#12365;&#12390;&#12356;&#12427;&#12371;&#12392;&#12434;
	&#23450;&#26399;&#30340;&#12395;&#30906;&#35469;&#12377;&#12427;&#12398;&#12395;&#20351;&#12431;&#12428;&#12427; IKE &#25313;&#24373;&#12391;&#12377;&#12290;
	DPD &#12399;&#12289;&#12522;&#12514;&#12540;&#12488;&#12507;&#12473;&#12488;&#12364;&#25968;&#31186;&#38291;&#12458;&#12501;&#12521;&#12452;&#12531;&#12395;&#12394;&#12387;&#12383;&#12371;&#12392;&#12434;&#30906;&#35469;&#12377;&#12427;&#12398;&#12395;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>
    <hr>
<h3 class="title">VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12398;&#35373;&#23450;</h3>
<p>&#20197;&#19979;&#12395;&#12289;IPsec + Xauth + Hybrid auth + ISAKMP &#12514;&#12540;&#12489;&#35373;&#23450; + NAT-T + DPD + IKE &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531; +
      ESP &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12434;&#20351;&#12387;&#12383; VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12398;&#35373;&#23450;&#20363;&#12434;&#31034;&#12375;&#12414;&#12377;&#12290;</p>
      <h4 class="title">
<a name="kernel"></a>&#12459;&#12540;&#12493;&#12523;&#12467;&#12531;&#12501;&#12451;&#12462;&#12517;&#12524;&#12540;&#12471;&#12519;&#12531; (<a href="#vpn-gateway">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#26368;&#21021;&#12395;&#12289;&#23569;&#12394;&#12367;&#12392;&#12418;&#20197;&#19979;&#12398;&#12458;&#12503;&#12471;&#12519;&#12531;&#12434;&#21547;&#12417;&#12383;<a class="ulink" href="../../kernel/#how_to_build_a_kernel" target="_top">&#12459;&#12540;&#12493;&#12523;&#12434;
	  &#27083;&#31689;&#12375;&#12390;&#12452;&#12531;&#12473;&#12488;&#12540;&#12523;</a>&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;</p>
      <pre class="programlisting">options INET
options GATEWAY
options PFIL_HOOKS
options IPSEC
options IPSEC_ESP
options IPSEC_NAT_T

pseudo-device   ipfilter</pre>
    
      <h4 class="title">
<a name="forw"></a>&#12497;&#12465;&#12483;&#12488;&#12501;&#12457;&#12527;&#12540;&#12487;&#12451;&#12531;&#12464; (<a href="#vpn-gateway">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#20197;&#19979;&#12398;&#12467;&#12510;&#12531;&#12489;&#12434;&#20351;&#12387;&#12390;&#12289;IPv4 &#12497;&#12465;&#12483;&#12488;&#12501;&#12457;&#12527;&#12540;&#12487;&#12451;&#12531;&#12464;&#12434;&#26377;&#21177;&#21270;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting"># sysctl -w net.inet.ip.forwarding=1</pre>
<p>
	<code class="filename">/etc/sysctl.conf</code> &#12395;&#20197;&#19979;&#12398;&#34892;&#12434;&#36861;&#21152;&#12375;&#12390;&#12289;
	&#12522;&#12502;&#12540;&#12488;&#26178;&#12395;&#33258;&#21205;&#30340;&#12395;&#23455;&#34892;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting">net.inet.ip.forwarding=1</pre>
    
      <h4 class="title">
<a name="cert"></a>&#35388;&#26126;&#26360;&#12398;&#20316;&#25104; (<a href="#vpn-gateway">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>OpenSSL &#12398;&#35373;&#23450;&#12434;&#12414;&#12384;&#34892;&#12394;&#12387;&#12390;&#12356;&#12394;&#12356;&#22580;&#21512;&#12399;&#12289;&#35373;&#23450;&#12501;&#12449;&#12452;&#12523;&#12398;&#12469;&#12531;&#12503;&#12523;&#12398;&#12452;&#12531;&#12473;&#12488;&#12540;&#12523;&#12363;&#12425;&#22987;&#12417;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	</p>
<pre class="programlisting"># cp /usr/share/examples/openssl/openssl.cnf /etc/openssl/</pre>
<p>
	&#35373;&#23450;&#12501;&#12449;&#12452;&#12523;&#12398;&#29992;&#24847;&#12364;&#12391;&#12365;&#12383;&#12425;&#12289;&#31192;&#23494;&#37749;&#12434;&#20316;&#12426;&#12289;&#12381;&#12398;&#37749;&#12434;&#20351;&#12387;&#12390;&#35388;&#26126;&#26360;&#32626;&#21517;&#35201;&#27714; (Certificate Signing 
	Request, CSR) &#12434;&#20316;&#12426;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting"># cd /etc/openssl
# umask 077
# openssl genrsa &gt; certs/vpngw.key
# umask 022
# openssl req -new -key certs/vpngw.key -out certs/vpngw.csr</pre>
<p>
	&#12371;&#12398; CSR (<code class="filename">vpngw.csr</code>) &#12434;&#35469;&#35388;&#23616;&#12408;&#36865;&#12387;&#12390;&#12289;&#32626;&#21517;&#12434;&#12375;&#12390;&#12418;&#12425;&#12356;&#12414;&#12377;&#12290;
	&#12371;&#12428;&#12391; x509 &#35388;&#26126;&#26360;&#12364;&#20132;&#20184;&#12373;&#12428;&#12414;&#12377;&#12290;&#12371;&#12398;&#35388;&#26126;&#26360;&#12434; <code class="filename">vpngw.crt</code>
	&#12392;&#12356;&#12358;&#21517;&#21069;&#12395;&#12377;&#12427;&#12371;&#12392;&#12395;&#12375;&#12414;&#12377;&#12290;</p>

      <p>&#33258;&#20998;&#33258;&#36523;&#12364;&#35469;&#35388;&#23616;&#12392;&#12394;&#12426;&#12383;&#12356;&#22580;&#21512;&#12399;&#12289;&#20197;&#19979;&#12398;&#25163;&#38918;&#12391;
	CA &#31192;&#23494;&#37749;&#12398;&#29983;&#25104;&#12392;&#32626;&#21517;&#12434;&#12362;&#12371;&#12394;&#12356;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting"># cd /etc/openssl
# mkdir -p demoCA/newcerts
# touch demoCA/index.txt
# echo "00" &gt; demoCA/serial
# umask 077
# openssl genrsa &gt; certs/ca.key
# umask 022
# openssl req -days 3650 -x509 -key certs/ca.key -new &gt; certs/ca.crt
# openssl ca -in certs/vpngw.csr -keyfile certs/ca.key -cert certs/ca.crt -out certs/vpngw.crt</pre>

      <p>&#31192;&#23494;&#37749;&#12364;&#28431;&#12428;&#12427;&#12392;&#12289; VPN &#12399;&#12418;&#12358;&#23433;&#20840;&#12391;&#12399;&#12394;&#12367;&#12394;&#12387;&#12390;&#12375;&#12414;&#12358;&#12398;&#12391;&#12289;
	&#31192;&#23494;&#37749;&#12399;&#31192;&#23494;&#12395;&#12377;&#12427;&#12424;&#12358;&#12395;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;CA &#35388;&#26126;&#26360; <code class="filename">ca.crt</code>
	&#12434;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12395;&#28193;&#12375;&#12390;&#12289;&#27425;&#12398;&#25163;&#38918;&#12395;&#36914;&#12435;&#12391;&#12367;&#12384;&#12373;&#12356;&#12290;</p>
    
      <h4 class="title">
<a name="config"></a><a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12398;&#35373;&#23450; (<a href="#vpn-gateway">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#20197;&#19979;&#12395; <code class="filename">/etc/racoon/racoon.conf</code> &#12501;&#12449;&#12452;&#12523;&#12398;&#20363;&#12434;&#31034;&#12375;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting">path certificate "/etc/openssl/certs";

listen {
        adminsock disabled;
}

remote anonymous {
        exchange_mode aggressive;
        certificate_type x509 "vpngw.crt" "vpngw.key";
        my_identifier asn1dn;
        proposal_check claim;
        generate_policy on;		# IPsec &#12509;&#12522;&#12471;&#12540;&#12434;&#33258;&#21205;&#29983;&#25104;&#12377;&#12427;
	dpd_delay 20;			# 20 &#31186;&#27598;&#12395;&#12289; DPD &#12509;&#12540;&#12522;&#12531;&#12464;&#12377;&#12427;
        nat_traversal force;		# NAT-T &#12434;&#24120;&#12395;&#20351;&#12358;
        ike_frag on;			# IKE &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12434;&#20351;&#12358;
        esp_frag 552;			# ESP &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12434;&#20351;&#12358;
        proposal {
                encryption_algorithm aes;
                hash_algorithm sha1;
                authentication_method hybrid_rsa_server;
                dh_group 2;
        }
}
mode_cfg {
        network4 10.99.99.1;		# VPN &#29992; IPv4 &#12450;&#12489;&#12524;&#12473;&#22312;&#24235;&#12398;&#20808;&#38957;&#12398;&#12450;&#12489;&#12524;&#12473;
        pool_size 253;			# VPN &#29992; IP &#12450;&#12489;&#12524;&#12473;&#22312;&#24235;&#12398;&#12469;&#12452;&#12474;: 253 &#12450;&#12489;&#12524;&#12473;
        auth_source system;		# /etc/passwd &#12434;&#12418;&#12392;&#12395;&#12525;&#12464;&#12452;&#12531;&#12434;&#26908;&#35388;&#12377;&#12427;
        dns4 10.0.12.1;			# IPv4 DNS &#12469;&#12540;&#12496;&#12540;
        wins4 10.0.12.1;		# IPv4 WINS &#12469;&#12540;&#12496;&#12540;
        banner "/etc/racoon/motd";	# &#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12395;&#23550;&#12377;&#12427;&#12496;&#12490;&#12540;&#12513;&#12483;&#12475;&#12540;&#12472;
	pfs_group 2;
}

sainfo anonymous {
	pfs_group 2;
        lifetime time 1 hour;
        encryption_algorithm aes;
        authentication_algorithm hmac_sha1;
        compression_algorithm deflate;
}</pre>

      <p><code class="code">mode_cfg</code> &#12475;&#12463;&#12471;&#12519;&#12531;&#12391;&#12289;ISAKMP &#12514;&#12540;&#12489;&#35373;&#23450;&#12434;&#20351;&#12387;&#12390;
	VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12363;&#12425;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12408;&#36865;&#12425;&#12428;&#12427;&#35373;&#23450;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	&#29694;&#22312;&#12398;&#12392;&#12371;&#12429;&#12289;IPv4 &#12398;&#35373;&#23450;&#12384;&#12369;&#12395;&#23550;&#24540;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	&#12371;&#12398;&#12475;&#12463;&#12471;&#12519;&#12531;&#12391;&#12289;&#25173;&#12356;&#20986;&#12377; VPN &#12450;&#12489;&#12524;&#12473;&#12398;&#22312;&#24235;&#12434;&#12289;&#20808;&#38957;&#12398;&#12450;&#12489;&#12524;&#12473; (<code class="code">network4</code>)
	&#12392;&#22312;&#24235;&#12398;&#12469;&#12452;&#12474; (<code class="code">pool_size</code>) &#12395;&#12424;&#12426;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;<code class="code">auth_source</code>
	&#12399;&#12289;&#12525;&#12464;&#12452;&#12531;&#21517;&#12392;&#12497;&#12473;&#12527;&#12540;&#12489;&#12434;&#12393;&#12358;&#12420;&#12387;&#12390;&#26908;&#35388;&#12377;&#12427;&#12363;&#12434;&#34920;&#12375;&#12414;&#12377;&#12290;&#12371;&#12371;&#12391;&#25351;&#23450;&#12391;&#12365;&#12427;&#20516;&#12399;&#12289;
	&#12471;&#12473;&#12486;&#12512;&#12518;&#12540;&#12470;&#12540;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12434;&#12418;&#12392;&#12395;&#26908;&#35388;&#12377;&#12427; <code class="code">system</code>&#12289;Pluggable Authentication Module (PAM)
	&#12471;&#12473;&#12486;&#12512; (<code class="filename">/etc/pam.d/racoon</code> &#12364;&#20351;&#12431;&#12428;&#12414;&#12377;) &#12434;&#20351;&#12358; <code class="code">pam</code>&#12289;
	RADIUS &#12434;&#12418;&#12392;&#12395;&#12525;&#12464;&#12452;&#12531;&#12434;&#26908;&#35388;&#12377;&#12427; <code class="code">radius</code> &#12391;&#12377;&#12290;</p>

      <p><code class="filename">/etc/racoon/racoon.conf</code> &#12501;&#12449;&#12452;&#12523;&#12398;&#28310;&#20633;&#12364;&#12391;&#12365;&#12428;&#12400;&#12289;
	<a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12434;&#23455;&#34892;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting"># racoon</pre>

      <p>&#12502;&#12540;&#12488;&#26178;&#12395; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12434;&#36215;&#21205;&#12377;&#12427;&#12383;&#12417;&#12395;&#12399;&#12289;
	<code class="filename">/etc/rc.conf</code> &#12395;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#26360;&#12365;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting">racoon=YES</pre>
    
      <h4 class="title">
<a name="more_frag"></a>&#12373;&#12425;&#12394;&#12427;&#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#21839;&#38988; (<a href="#vpn-gateway">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#12371;&#12398;&#35373;&#23450;&#20363;&#12391;&#12399;&#12289;ESP &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12434;&#20351;&#12387;&#12390;&#12289;&#36865;&#20986;&#12377;&#12427;&#12497;&#12465;&#12483;&#12488;&#12364;
	552 &#12496;&#12452;&#12488;&#12424;&#12426;&#22823;&#12365;&#12367;&#12394;&#12425;&#12394;&#12356;&#12424;&#12358;&#12394; <code class="code">esp_frag</code> &#12398;&#25351;&#23450;&#12434;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	552 &#12496;&#12452;&#12488;&#12399;&#38750;&#24120;&#12395;&#23567;&#12373;&#12356;&#12391;&#12377;&#12364;&#12289;&#12371;&#12428;&#12394;&#12425;&#26368;&#12418;&#12402;&#12393;&#12356; DSL &#12514;&#12487;&#12512;&#12523;&#12540;&#12479;&#12540;&#27231;&#22120;&#12391;&#12418;&#20351;&#12360;&#12427;&#12399;&#12378;&#12391;&#12377;&#12290;
	<code class="code">esp_frag</code> &#12434;&#22823;&#12365;&#12367;&#12377;&#12428;&#12400;&#12289;&#24615;&#33021;&#12364;&#21521;&#19978;&#12375;&#12414;&#12377;&#12290;</p>

      <p>ESP &#12501;&#12521;&#12464;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12434;&#20351;&#12360;&#12400;&#12289;&#12393;&#12435;&#12394;&#12469;&#12452;&#12474;&#12398; IP &#12497;&#12465;&#12483;&#12488;&#12391;&#12418;&#12488;&#12531;&#12493;&#12523;&#32076;&#30001;&#12391;&#20132;&#25563;&#21487;&#33021;&#12391;&#12377;&#12290;
	&#12375;&#12363;&#12375;&#12289;TCP &#12395;&#12399;&#29305;&#21029;&#12394;&#22580;&#21512;&#12364;&#12354;&#12426;&#12289;Path Maximum Transmission Unit (PMTU)
	&#25506;&#32034;&#12395;&#12414;&#12388;&#12431;&#12427;&#21839;&#38988;&#12364;&#36215;&#12365;&#12427;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#12290;&#12371;&#12428;&#12395;&#23550;&#12377;&#12427;&#35299;&#27770;&#31574;&#12399;&#12289;
	&#26368;&#22823;&#12475;&#12464;&#12513;&#12531;&#12488;&#38263; (Maximum Segment Size, MSS)
	&#12398;&#35519;&#31680;&#12434;&#20351;&#12358;&#12371;&#12392;&#12391;&#12377;&#12290;&#25173;&#12356;&#20986;&#12375;&#29992;&#12398; VPN &#20869;&#37096;&#12450;&#12489;&#12524;&#12473;&#12398;&#31684;&#22258;&#12364; 10.99.99.0/24 &#12391;&#12354;&#12427;&#12392;&#12377;&#12427;&#12392;&#12289;
	<code class="filename">/etc/ipnat.conf</code> &#12395;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#26360;&#12369;&#12400;&#12424;&#12356;&#12391;&#12377;&#12290;
	</p>
<pre class="programlisting">map ex0 10.99.99.0/24 -&gt; 0/0 mssclamp 512</pre>
<p>
	&#12371;&#12398;&#35373;&#23450;&#12434;&#26377;&#21177;&#12395;&#12377;&#12427;&#12383;&#12417;&#12395;&#12289;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#12479;&#12452;&#12503;&#12375;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting"># ipf -E; ipnat -f /etc/ipnat.conf</pre>
<p>
	&#36215;&#21205;&#26178;&#12395;&#12371;&#12398;&#12467;&#12510;&#12531;&#12489;&#12434;&#23455;&#34892;&#12377;&#12427;&#12395;&#12399;&#12289;
	<code class="filename">/etc/rc.conf</code> &#12395;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#26360;&#12365;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting">ipfilter=YES
ipnat=YES</pre>
<p>
	
	&#27880;&#24847;: <code class="filename">/etc/ipf.conf</code> &#12501;&#12449;&#12452;&#12523;&#12364;&#12394;&#12356;&#22580;&#21512;&#12399;&#12289;<code class="code">ipfilter=YES</code>
	&#12392;&#12377;&#12427;&#12392;&#12471;&#12473;&#12486;&#12512;&#12364;&#36215;&#21205;&#12375;&#12414;&#12379;&#12435;&#12290; IP &#12501;&#12451;&#12523;&#12479;&#12522;&#12531;&#12464;&#12364;&#19968;&#20999;&#24517;&#35201;&#12394;&#12356;&#22580;&#21512;&#12399;&#12289;
	&#31354;&#12398;&#12501;&#12449;&#12452;&#12523;&#12434;&#20316;&#12387;&#12390;&#12362;&#12369;&#12400;&#12424;&#12356;&#12391;&#12377;&#12290;</p>
    
      <h4 class="title">
<a name="firewall"></a>&#12501;&#12449;&#12452;&#12450;&#12454;&#12457;&#12540;&#12523;&#12392;&#12398;&#38306;&#20418; (<a href="#vpn-gateway">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#12371;&#12398; VPN &#12398;&#25163;&#27861;&#12391;&#12399;&#12289;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12399; VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12398; 500 &#30058;&#12509;&#12540;&#12488;&#12392; 4500 &#30058;&#12509;&#12540;&#12488;&#12408;
	UDP &#12497;&#12465;&#12483;&#12488;&#12434;&#36865;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;&#26368;&#21021;&#12398;&#12497;&#12465;&#12483;&#12488;&#12399; 500 &#30058;&#12509;&#12540;&#12488;&#12391;&#20132;&#25563;&#12373;&#12428;&#12289;
	&#12381;&#12428;&#12363;&#12425; NAT-T &#20132;&#28169;&#12391; 4500 &#30058;&#12509;&#12540;&#12488;&#12395;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12364;&#31227;&#12426;&#12414;&#12377;&#12290;</p>

      <p>VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12398;&#21069;&#12395;&#31435;&#12388;&#12501;&#12449;&#12452;&#12450;&#12454;&#12457;&#12540;&#12523;&#12399;&#12289;
	VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#23451;&#12398; udp/500 &#12392; udp/4500 &#12434;&#36890;&#12377;&#12424;&#12358;&#12395;&#35373;&#23450;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;</p>
    
      <h4 class="title">
<a name="radius"></a>VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12392; RADIUS  (<a href="#vpn-gateway">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>RADIUS &#12399;&#12289;&#12525;&#12464;&#12452;&#12531;&#12398;&#26908;&#35388;&#12289;IP &#12450;&#12489;&#12524;&#12473;&#12398;&#21106;&#12426;&#24403;&#12390;&#12392;&#12289;
	&#12450;&#12459;&#12454;&#12531;&#12486;&#12451;&#12531;&#12464;&#12395;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;&#20197;&#19979;&#12395;&#31034;&#12377;&#12398;&#12399;&#12289;
	<code class="filename">/etc/racoon/racoon.conf</code> &#12501;&#12449;&#12452;&#12523;&#12398; <code class="code">mode_cfg</code> &#12475;&#12463;&#12471;&#12519;&#12531;&#12391;&#12289;
	RADIUS &#12434;&#20351;&#12358;&#12424;&#12358;&#12395;&#12377;&#12427;&#12383;&#12417;&#12398;&#20363;&#12391;&#12377;&#12290;
	</p>
<pre class="programlisting">mode_cfg {
	pool_size 253;			# IPv4 &#12450;&#12489;&#12524;&#12473;&#22312;&#24235;&#12398;&#12469;&#12452;&#12474;
	auth_source radius;		# RADIUS &#12434;&#12418;&#12392;&#12395;&#12525;&#12464;&#12452;&#12531;&#12434;&#26908;&#35388;&#12377;&#12427;
	conf_source radius;		# RADIUS &#12391; IPv4 &#12450;&#12489;&#12524;&#12473;&#12434;&#21106;&#12426;&#24403;&#12390;&#12427;
	accounting radius;		# RADIUS &#12450;&#12459;&#12454;&#12531;&#12486;&#12451;&#12531;&#12464;
        dns4 10.0.12.1;			# IPv4 DNS &#12469;&#12540;&#12496;&#12540;
        wins4 10.0.12.1;		# IPv4 WINS &#12469;&#12540;&#12496;&#12540;
        banner "/etc/racoon/motd";	# &#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12395;&#23550;&#12377;&#12427;&#12496;&#12490;&#12540;&#12513;&#12483;&#12475;&#12540;&#12472;
	pfs_group 2;
}</pre>

      <p>&#12371;&#12398;&#35373;&#23450;&#12398;&#12411;&#12363;&#12289;RADIUS &#12469;&#12540;&#12496;&#12540;&#12398;&#12450;&#12489;&#12524;&#12473;&#12392; RADIUS &#12469;&#12540;&#12496;&#12540;&#12392;&#12398;&#20849;&#26377;&#37749;&#12434;&#21547;&#12435;&#12384;
	<code class="filename">/etc/radius.conf</code> &#12501;&#12449;&#12452;&#12523;&#12434;&#20316;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	&#12371;&#12398;&#12501;&#12449;&#12452;&#12523;&#12399;&#12289;&#20849;&#26377;&#37749;&#12434;&#23433;&#20840;&#12395;&#20445;&#12388;&#12383;&#12417;&#12395;&#12289;
	root &#12398;&#25152;&#26377;&#12392;&#12375;&#12390;&#12497;&#12540;&#12511;&#12483;&#12471;&#12519;&#12531;&#12434; 0600 &#12395;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290;
	&#20197;&#19979;&#12395;&#20363;&#12434;&#31034;&#12375;&#12414;&#12377;&#12290;&#35443;&#32048;&#12399; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?radius.conf+5+NetBSD-6.0+i386">radius.conf(5)</a> &#12434;&#12372;&#35239;&#12367;&#12384;&#12373;&#12356;&#12290;
	</p>
<pre class="programlisting">auth radius.example.net MyDirtySecret
acct radius.example.net MyDirtySecret</pre>
    <hr>
<h3 class="title">VPN &#12463;&#12521;&#12452;&#12450;&#12531;&#12488;</h3>
      <h4 class="title">
<a name="client"></a>Cisco VPN client (<a href="#vpn-client">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>&#21069;&#31456;&#12391;&#35500;&#26126;&#12375;&#12383;&#12424;&#12358;&#12394;&#35373;&#23450;&#12434;&#12375;&#12383; VPN &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12399;&#12289;&#30456;&#20114;&#12464;&#12523;&#12540;&#12503;&#35469;&#35388; (mutual group authentication;
	Hybrid authentication &#12392;&#21516;&#32681;) &#12398;&#35373;&#23450;&#12434;&#12375;&#12383; Cisco VPN Client &#12392;&#30456;&#20114;&#36939;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	Cisco VPN &#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12364;&#35201;&#27714;&#12377;&#12427;&#12464;&#12523;&#12540;&#12503;&#12362;&#12424;&#12403;&#12464;&#12523;&#12540;&#12503;&#12497;&#12473;&#12527;&#12540;&#12489;&#12434;&#12289;
	<a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12399;&#28961;&#35222;&#12375;&#12414;&#12377;&#12364;&#12289;&#12371;&#12428;&#12395;&#12424;&#12387;&#12390;&#12518;&#12540;&#12470;&#12540;&#35469;&#35388;&#12364;&#23433;&#20840;&#12391;&#12394;&#12367;&#12394;&#12427;&#12371;&#12392;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;</p>

      <p>NAT-T &#12364;&#26377;&#21177;&#12395;&#12394;&#12427;&#12424;&#12358;&#12289;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12395;
	IPsec &#12458;&#12540;&#12496;&#12540; UDP &#12488;&#12521;&#12531;&#12473;&#12509;&#12540;&#12488;&#12398;&#35373;&#23450;&#12434;&#12377;&#12427;&#12371;&#12392;&#12434;&#24536;&#12428;&#12394;&#12356;&#12391;&#12367;&#12384;&#12373;&#12356;&#12290;</p>
    
      <h4 class="title">
<a name="client_conf"></a>&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12392;&#12375;&#12390;&#12398; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> : &#35373;&#23450;&#20363; (<a href="#vpn-client">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p><a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12399;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12392;&#12375;&#12390;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	CA &#35388;&#26126;&#26360;&#12434; <code class="filename">/etc/openssl/certs/ca.crt</code> &#12395;&#12452;&#12531;&#12473;&#12488;&#12540;&#12523;&#12375;&#12289;
	<code class="filename">/etc/racoon/racoon.conf</code> &#12434;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#35373;&#23450;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting">path certificate "/etc/openssl/certs";
path pre_shared_key "/etc/racoon/psk.txt";

listen {
	# racoon &#12392; racoonctl &#12392;&#12398;&#38291;&#12391;&#20351;&#12358;&#12477;&#12465;&#12483;&#12488;
        adminsock "/var/racoon/racoon.sock" "root" "operator" 0660;
}

# Here is the address of the VPN gateway
remote 192.0.2.50 {
        exchange_mode aggressive;
        ca_type x509 "ca.crt";
        proposal_check obey;
        mode_cfg on;		# ISAKMP &#12514;&#12540;&#12489;&#35373;&#23450;&#12395;&#12424;&#12427;&#35373;&#23450;&#12434;&#21463;&#12369;&#20837;&#12428;&#12427;
	dpd_delay 20;
        nat_traversal force;
        ike_frag on;
        esp_frag 552;
        script "/etc/racoon/phase1-up.sh" phase1_up;
        script "/etc/racoon/phase1-down.sh" phase1_down;
        passive off;
        proposal {
                encryption_algorithm aes;
                hash_algorithm sha1;
                authentication_method hybrid_rsa_client;
                dh_group 2;
       }
}


sainfo anonymous {
        lifetime time 1 hour;
        encryption_algorithm aes;
        authentication_algorithm hmac_sha1;
        compression_algorithm deflate ;
}</pre>

      <p>&#20108;&#12388;&#12398;&#12473;&#12463;&#12522;&#12503;&#12488; <code class="filename">phase1-up.sh</code> &#12392; <code class="filename">phase1-down.sh</code> &#12399;&#12289;
	&#12381;&#12428;&#12382;&#12428; IKE phase 1 &#12398;&#30906;&#31435;&#26178;&#12392;&#32066;&#20102;&#26178;&#12289;&#12388;&#12414;&#12426; VPN &#25509;&#32154;&#26178;&#12392;&#20999;&#26029;&#26178;&#12395;&#21628;&#12400;&#12428;&#12414;&#12377;&#12290;
	&#12371;&#12398;&#12473;&#12463;&#12522;&#12503;&#12488;&#12399; IPsec Security Policies (SP), VPN IP &#12450;&#12489;&#12524;&#12473;&#12289;
	&#12523;&#12540;&#12486;&#12451;&#12531;&#12464;&#12456;&#12531;&#12488;&#12522;&#12540;&#12398;&#35373;&#23450;&#12392;&#28040;&#21435;&#12434;&#21463;&#12369;&#25345;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;
	&#12469;&#12531;&#12503;&#12523;&#12473;&#12463;&#12522;&#12503;&#12488;&#12398;&#12414;&#12414;&#12391;&#12418;&#24517;&#35201;&#12394;&#12371;&#12392;&#12399;&#12391;&#12365;&#12427;&#12399;&#12378;&#12391;&#12377;&#12364;&#12289;
	&#21508;&#33258;&#12398;&#24517;&#35201;&#12395;&#24540;&#12376;&#12390;&#12459;&#12473;&#12479;&#12510;&#12452;&#12474;&#12377;&#12427;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting"># cp /usr/share/examples/racoon/roadwarrior/client/*.sh /etc/racoon/</pre>

      <p>&#12371;&#12398;&#28310;&#20633;&#12364;&#12391;&#12365;&#12428;&#12400;&#12289; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12434;&#36215;&#21205;&#12391;&#12365;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting"># racoon</pre>
<p>
	&#12502;&#12540;&#12488;&#26178;&#12395; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12434;&#36215;&#21205;&#12377;&#12427;&#12395;&#12399;&#12289;<code class="filename">/etc/rc.conf</code> &#12395;
	<code class="code">racoon=YES</code> &#12434;&#26360;&#12365;&#21152;&#12360;&#12414;&#12377;&#12290;</p>
    
      <h4 class="title">
<a name="connection"></a>VPN &#12392;&#12398;&#25509;&#32154;&#12392;&#20999;&#26029; (<a href="#vpn-client">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>racoonctl(8) &#12399;&#12289;VPN &#12408;&#12398;&#25509;&#32154;&#12420; VPN &#12363;&#12425;&#12398;&#20999;&#26029;&#12395;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	&#12525;&#12464;&#12452;&#12531;&#21517;&#12434; <code class="code">-u</code> &#12458;&#12503;&#12471;&#12519;&#12531;&#12391;&#25351;&#23450;&#12375;&#12414;&#12377;&#12290;
	&#12497;&#12473;&#12527;&#12540;&#12489;&#12399;&#31471;&#26411;&#19978;&#12391;&#20837;&#21147;&#12434;&#20419;&#12373;&#12428;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting">$ racoonctl vc -u username 192.0.2.50
Password: password
Bound to address 10.99.99.3
==========================================================
                     Flying pigs LTD

 Welcome to our internal network, remote user.
==========================================================
$ racoonctl vd 192.0.2.50
VPN connection terminated</pre>
<p>
	&#12371;&#12398;&#20363;&#12391;&#12399; IP &#12450;&#12489;&#12524;&#12473;&#12434;&#20351;&#12387;&#12390;&#12356;&#12414;&#12377;&#12364;&#12289;DNS &#12450;&#12489;&#12524;&#12473;&#12434;&#20351;&#12358;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290;
	&#27880;&#24847;: &#20309;&#12425;&#12363;&#12398;&#29702;&#30001;&#12391;&#12289;&#12523;&#12540;&#12486;&#12451;&#12531;&#12464;&#12456;&#12531;&#12488;&#12522;&#12540;&#12363;&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#12509;&#12522;&#12471;&#12540;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;
	(Security Policy Database, SPD) &#12395;&#12397;&#12376;&#12428;&#12364;&#36215;&#12365;&#12427;&#12392;&#12289;
	VPN &#12398;&#20999;&#26029;&#26178;&#12395; DNS &#21517;&#21069;&#35299;&#27770;&#12364;&#12391;&#12365;&#12394;&#12367;&#12394;&#12426;&#12414;&#12377;&#12290;
	&#12371;&#12398;&#22580;&#21512;&#12399;&#12289;root &#12391;&#20197;&#19979;&#12398;&#12467;&#12510;&#12531;&#12489;&#12434;&#20351;&#12387;&#12390;&#24489;&#26087;&#12391;&#12365;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting"># setkey -F
# setkey -FP
# route flush
# route add default your_default_gateway</pre>

      <p><a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12477;&#12465;&#12483;&#12488; <code class="filename">/var/racoon/racoon.sock</code> &#12408;&#12398;&#35501;&#12415;&#26360;&#12365;&#27177;&#38480;&#12364;&#12354;&#12427;&#20154;&#12394;&#12425;&#12289;
	&#35504;&#12391;&#12418; VPN &#12398;&#36215;&#21205;&#12420;&#20572;&#27490;&#12434;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	&#12371;&#12398;&#12477;&#12465;&#12483;&#12488;&#12398;&#25152;&#26377;&#32773;&#12392;&#12450;&#12463;&#12475;&#12473;&#27177;&#38480;&#12399;&#12289;<code class="filename">/etc/racoon/racoon.conf</code> &#12398;
	<code class="code">listen</code> &#12475;&#12463;&#12471;&#12519;&#12531;&#12391;&#12289;<code class="code">adminsock</code> &#12473;&#12486;&#12540;&#12488;&#12513;&#12531;&#12488;&#12434;&#20351;&#12387;&#12390;&#35373;&#23450;&#12391;&#12365;&#12414;&#12377;&#12290;</p>
    
      <h4 class="title">
<a name="save_pwd"></a>Xauth &#12497;&#12473;&#12527;&#12540;&#12489;&#12398;&#20445;&#23384; (<a href="#vpn-client">&#12488;&#12483;&#12503;</a>)
  </h4>

      <p>Xauth &#12497;&#12473;&#12527;&#12540;&#12489;&#12398;&#20837;&#21147;&#12434;&#30465;&#30053;&#12375;&#12383;&#12356;&#22580;&#21512;&#12289;&#12371;&#12398;&#12497;&#12473;&#12527;&#12540;&#12489;&#12434; racoon &#12398;&#20107;&#21069;&#20849;&#26377;&#37749; (PSK)
	&#12501;&#12449;&#12452;&#12523;&#12395;&#20445;&#25345;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;<code class="filename">/etc/racoon/racoon.conf</code> &#12398;
	<code class="code">remote</code> &#12475;&#12463;&#12471;&#12519;&#12531;&#12395;&#12289;&#20197;&#19979;&#12398;&#35352;&#36848;&#12434;&#36861;&#21152;&#12375;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting">xauth_login "username";</pre>

      <p>&#12381;&#12375;&#12390;&#12289; <code class="filename">/etc/racoon/psk.txt</code> &#12395;&#12289;
	&#12525;&#12464;&#12452;&#12531;&#21517;&#12392;&#12497;&#12473;&#12527;&#12540;&#12489;&#12434;&#19968;&#34892;&#12391;&#26360;&#12365;&#36275;&#12375;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting">username	password</pre>

      <p>&#20197;&#19978;&#12398;&#35373;&#23450;&#12434;&#12375;&#12390;&#12362;&#12369;&#12400;&#12289;&#20197;&#19979;&#12398;&#12467;&#12510;&#12531;&#12489;&#12399;&#12289;&#12497;&#12473;&#12527;&#12540;&#12489;&#12398;&#20837;&#21147;&#12434;&#27714;&#12417;&#12427;&#12371;&#12392;&#12394;&#12367;&#12289;
	<code class="code">toto</code> &#12525;&#12464;&#12452;&#12531;&#12434;&#20351;&#12387;&#12390; VPN &#25509;&#32154;&#12434;&#30906;&#31435;&#12375;&#12414;&#12377;&#12290;
	</p>
<pre class="programlisting">$ racoonctl vc 192.0.2.50</pre>
    <hr>Back to <em><a href="./">NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: NetBSD IPSec</a></em>
</div></div></div>
<div class="navfoot"></div>
<div id="footer"><div id="footerContent"><center>
<span class="footfeed"><a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">
	  &#36899;&#32097;</a> |
      </span><span class="footcopy"><a href="../../../../about/disclaimer.html">
      &#20813;&#36012;&#20107;&#38917;</a> |

      <span class="copyright">Copyright  1994-2012 The NetBSD Foundation, Inc. </span>ALL RIGHTS RESERVED.<br>NetBSD<sup></sup>&#12399;
	 NetBSD Foundation, Inc. &#12398;&#30331;&#37682;&#21830;&#27161;&#12391;&#12377;&#12290;</span>
</center></div></div>
</div></body>
</html>
