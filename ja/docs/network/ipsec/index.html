<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="generator" content="Website XSL Stylesheet V2.6.0">
<link rel="home" href="../../../../." title="Welcome to The NetBSD Project: Of course it runs NetBSD.">
<link rel="up" href="../../../../ja/docs/network/." title="The NetBSD Network FAQ">
<link rel="previous" href="../../../../ja/docs/network/netboot/." title="Diskless NetBSD HOW-TO">
<link rel="next" href="../../../../ja/docs/network/ipsec/rasvpn.html" title="Racoon &#12434;&#20351;&#12387;&#12383;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12450;&#12463;&#12475;&#12473; VPN &#12398;&#27083;&#31689;&#26041;&#27861;">
<link rel="first" href="../../../../ja/docs/network/dhcp.html" title="NetBSD DHCP HOWTO">
<link rel="last" href="../../../../ja/docs/network/pppoe/." title="NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: PPPoE (DSL) &#32076;&#30001;&#12398;&#25509;&#32154;&#25163;&#38918;">
<link rel="stylesheet" href="../../../../global.css" type="text/css">
    

    <title>NetBSD IPsec FAQ</title>
  </head>
<body class="website"><div class="webpage">
<a name="ja-docs-network-ipsec-index"></a><div id="top"><a href="#mainContent" class="doNotDisplay doNotPrint">Skip to main content.</a></div>
<div id="centralHeader">
<div id="logo">
<a href="../../../../"><img alt="[NetBSD Logo]" src="../../../../images/NetBSD-smaller.png"></a><div id="name"><a href="../../../../">
	  The NetBSD Project
	</a></div>
<div id="slogan"><a href="../../../../">
	  &#8220;Of course it runs NetBSD&#8221;
	</a></div>
</div>
<div id="headerTools">
<div id="header-cse-search-form">Google custom search</div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script><script type="text/javascript"> 
		  google.load('search', '1', {language : 'ja'});
		  google.setOnLoadCallback(function() {
		    var header_customSearchControl = new google.search.CustomSearchControl('016685087845965994609:5539h4dkepg');
		    header_customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
		    var header_options = new google.search.DrawOptions();
		    header_options.enableSearchboxOnly("http://google.com/cse?cx=016685087845965994609:5539h4dkepg");    
		    header_customSearchControl.draw('header-cse-search-form', header_options);
		  }, true);
		</script>
</div>
</div>
<div id="navBar" role="navigation">
<span class="doNotDisplay">
	  &#26696;&#20869;:
	</span><ul>
<li><a href="../../../../ja/">
	  &#12507;&#12540;&#12512;</a></li>
<li>
<a href="../../../../ja/">
	  &#12491;&#12517;&#12540;&#12473;&#12392;&#12513;&#12487;&#12451;&#12450;</a><ul>
<li><a href="../../../../ja/changes/">
	    &#26368;&#36817;&#12398;&#22793;&#26356;</a></li>
<li><a href="http://blog.NetBSD.org/">
	    NetBSD&#12502;&#12525;&#12464;</a></li>
<li><a href="../../../../ja/gallery/events.html">
	    &#12452;&#12505;&#12531;&#12488;</a></li>
<li><a href="../../../../ja/changes/rss.html">
	    &#12501;&#12451;&#12540;&#12489;</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/about/">
	  &#27010;&#35201;</a><ul>
<li><a href="../../../../ja/about/">
	    NetBSD</a></li>
<li><a href="../../../../ja/foundation/">
	    The NetBSD Foundation</a></li>
<li><a href="../../../../ja/gallery/">
	    &#25512;&#34214;</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/docs/">
	  &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;</a><ul>
<li><a href="../../../../ja/docs/misc/index.html">
	    FAQ&#12392;HOWTO</a></li>
<li><a href="../../../../ja/docs/guide/en/">
	    &#12460;&#12452;&#12489;</a></li>
<li><a href="http://man.NetBSD.org/">
	    &#12510;&#12491;&#12517;&#12450;&#12523;&#12506;&#12540;&#12472;</a></li>
<li><a href="http://wiki.NetBSD.org/">
	    Wiki</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/support/">
	  &#12469;&#12509;&#12540;&#12488;</a><ul>
<li><a href="../../../../ja/support/send-pr.html">
	    &#21839;&#38988;&#22577;&#21578;&#12460;&#12452;&#12489;</a></li>
<li><a href="../../../../cgi-bin/sendpr.cgi?gndb=netbsd">
	    &#12496;&#12464;&#12398;&#22577;&#21578;</a></li>
<li><a href="../../../../ja/support/query-pr.html">
	    &#12496;&#12464;&#12398;&#29031;&#20250;</a></li>
<li><a href="../../../../ja/support/security/">
	    &#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/community/">
	  &#12467;&#12511;&#12517;&#12491;&#12486;&#12451;&#12540;</a><ul>
<li><a href="http://onetbsd.org/">
	    &#12502;&#12525;&#12464;</a></li>
<li><a href="../../../../ja/mailinglists/">
	    &#12513;&#12540;&#12522;&#12531;&#12464;&#12522;&#12473;&#12488;</a></li>
<li><a href="http://mail-index.NetBSD.org/">
	    &#12513;&#12540;&#12522;&#12531;&#12464;&#12522;&#12473;&#12488;&#12450;&#12540;&#12459;&#12452;&#12502;</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/developers/">
	  &#38283;&#30330;&#32773;</a><ul>
<li><a href="http://cvsweb.NetBSD.org/">
	    &#12477;&#12540;&#12473;&#12434;&#38322;&#35239;</a></li>
<li><a href="http://nxr.NetBSD.org/">
	    &#12463;&#12525;&#12473;&#12522;&#12501;&#12449;&#12524;&#12531;&#12473;</a></li>
<li><a href="http://releng.NetBSD.org/">
	    &#12522;&#12522;&#12540;&#12473;&#12456;&#12531;&#12472;&#12491;&#12450;&#12522;&#12531;&#12464;</a></li>
<li><a href="http://wiki.NetBSD.org/projects/">
	    &#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12522;&#12473;&#12488;</a></li>
</ul>
</li>
<li>
<a href="../../../../ja/ports/">
	  &#27231;&#31278;</a><ul>
<li><a href="../../../../ja/ports/history.html">
	    &#27508;&#21490;</a></li>
<li><a href="../../../../ja/ports/emulators.html">
	    &#12456;&#12511;&#12517;&#12524;&#12540;&#12479;&#12540;</a></li>
</ul>
</li>
<li>
<a href="http://www.pkgsrc.org/">
	  &#12497;&#12483;&#12465;&#12540;&#12472;</a><ul>
<li><a href="http://www.pkgsrc.se/">
	    &#12497;&#12483;&#12465;&#12540;&#12472;&#12434;&#38322;&#35239;</a></li>
<li><a href="http://releng.NetBSD.org/index-pkgsrc.html">
	    &#12522;&#12522;&#12540;&#12473;&#12456;&#12531;&#12472;&#12491;&#12450;&#12522;&#12531;&#12464;</a></li>
</ul>
</li>
</ul>
</div>
<div id="content"><div class="fullWidth"><div class="rowOfBoxes">
<h1>NetBSD IPsec FAQ</h1>
<p>&#12371;&#12398;&#12506;&#12540;&#12472;&#12399;&#20316;&#25104;&#20013;&#12391;&#12377;&#12398;&#12391;&#12289;
    <a class="ulink" href="http://www.NetBSD.org/cgi-bin/feedback.cgi" target="_top">&#12467;&#12513;&#12531;&#12488;&#12420;&#25552;&#26696;</a>&#12434;&#27475;&#36814;&#12375;&#12414;&#12377;&#12290;</p>
<h3 class="title"><a name="IPsecFAQ">IPsec FAQ</a></h3>
<ul>
<li><a href="#getting_started">&#12399;&#12376;&#12417;&#12414;&#12375;&#12423;&#12358;</a></li>
<li><a href="#ipsec_breakdown">IPsec = AH + ESP + IPcomp + IKE</a></li>
<li><a href="#trans_tunnel">&#12488;&#12521;&#12531;&#12473;&#12509;&#12540;&#12488;&#12514;&#12540;&#12489;&#12392;&#12488;&#12531;&#12493;&#12523;&#12514;&#12540;&#12489;</a></li>
<li><a href="#policy">IPsec&#12509;&#12522;&#12471;&#12540;&#31649;&#29702;</a></li>
<li><a href="#config_kernel">IPsec&#12459;&#12540;&#12493;&#12523;&#12398;&#35373;&#23450;</a></li>
<li><a href="#sample_esp">&#35373;&#23450;&#20363;: &#12507;&#12473;&#12488;&#38291;&#12398;&#26263;&#21495;&#21270;</a></li>
<li><a href="#sample_ah">&#35373;&#23450;&#20363;: &#12507;&#12473;&#12488;&#38291;&#12398;&#35469;&#35388;</a></li>
<li><a href="#sample_both">&#35373;&#23450;&#20363;: &#12507;&#12473;&#12488;&#38291;&#12398;&#26263;&#21495;&#21270;+&#35469;&#35388;</a></li>
<li><a href="#sample_vpn">&#35373;&#23450;&#20363;: IPsec VPN</a></li>
<li><a href="#sample_leaftunnel">&#35373;&#23450;&#20363;: &#33865;&#12494;&#12540;&#12489;&#12488;&#12531;&#12493;&#12523;</a></li>
<li><a href="#config_ike">IKE&#12395;&#12424;&#12427;AH/ESP&#37749;&#12398;&#35373;&#23450;</a></li>
<li><a href="#configboot">&#12502;&#12540;&#12488;&#36942;&#31243;&#12391; IPsec &#25163;&#21205;&#37749;&#12392;&#12509;&#12522;&#12471;&#12540;&#12434;&#35373;&#23450;&#12377;&#12427;</a></li>
<li><a href="#ipf-interaction">ipfilter &#12392;&#12398;&#30456;&#20114;&#12398;&#24433;&#38911;</a></li>
<li><a href="#procorder">&#20966;&#29702;&#38918;&#24207;</a></li>
<li><a href="#pitfalls">&#12354;&#12426;&#12364;&#12385;&#12394;&#33853;&#12392;&#12375;&#31348;&#12392;&#12289;&#12487;&#12496;&#12483;&#12464;&#12398;&#25216;&#24039;</a></li>
<li><a href="#issues">&#26082;&#30693;&#12398;&#21839;&#38988;</a></li>
<li><a href="#conformance">&#27161;&#28310;&#21270;&#12289;&#20114;&#25563;&#24615;&#12408;&#12398;&#36969;&#21512;</a></li>
<li><a href="#compatibility">&#20182;&#12398;IPsec&#12473;&#12479;&#12483;&#12463;&#12392;&#12398;API&#20114;&#25563;&#24615;</a></li>
<li><a href="#readings">&#26360;&#31821;&#12381;&#12398;&#20182;&#12398;&#35501;&#12415;&#12418;&#12398;&#12399; ?</a></li>
</ul>
<h3 class="title"><a name="Other_links">&#20182;&#12398;&#12522;&#12531;&#12463;</a></h3>
<ul><li><a href="#linklist">&#38609;&#22810;&#12394;&#12522;&#12531;&#12463;</a></li></ul>
<hr>
<h3 class="title">IPsec FAQ</h3>
	<h4 class="title">
<a name="getting_started"></a>&#12399;&#12376;&#12417;&#12414;&#12375;&#12423;&#12358; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>IPsec (IP security protocol) &#12399;&#12289; NetBSD &#37197;&#24067;&#29289;&#12398;&#19968;&#37096;&#12392;&#12375;&#12390;&#21547;&#12414;&#12428;&#12390;&#12362;&#12426;&#12289;
	  IPsec&#12364;&#25552;&#20379;&#12377;&#12427;&#12497;&#12465;&#12483;&#12488;&#27598;&#12398;&#35469;&#35388;/&#27231;&#23494;&#24615;&#12399;&#12289;IPsec&#12434;&#20351;&#29992;&#12375;&#12390;&#36890;&#20449;&#12377;&#12427;peer&#38291;&#36890;&#20449;&#12434;&#20445;&#35703;&#12375;&#12414;&#12377;&#12290;
	  IPsec&#12399; IPv6&#12392;IPv4&#12391;&#21033;&#29992;&#21487;&#33021;&#12391;&#12377;&#12290;</p>

	<p>&#12375;&#12363;&#12375;IPsec&#12434;&#20351;&#29992;&#12377;&#12427;&#12395;&#12399;&#12289;&#12459;&#12540;&#12493;&#12523;&#12398;&#20877;&#27083;&#25104;&#12364;&#24517;&#35201;&#12391;&#12354;&#12427;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;
	  &#12381;&#12428;&#12399;GENERIC&#12459;&#12540;&#12493;&#12523;&#12391;&#12399;&#26377;&#21177;&#12395;&#12399;&#12394;&#12387;&#12390;&#12356;&#12414;&#12379;&#12435;&#12290;</p>

	<p>&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;&#12395;&#12399;IPsec&#12469;&#12509;&#12540;&#12488;&#12467;&#12540;&#12489;&#12364;&#21547;&#12414;&#12428;&#12390;&#12356;&#12414;&#12377;&#12364;&#12289;
	  IPsec&#12434;&#12469;&#12509;&#12540;&#12488;&#12377;&#12427;&#12459;&#12540;&#12493;&#12523;&#12363;&#12425;&#12469;&#12509;&#12540;&#12488;&#12375;&#12390;&#12356;&#12394;&#12356;
	  &#12459;&#12540;&#12493;&#12523;&#12395;&#20999;&#12426;&#26367;&#12360;&#12390;&#12418;&#12289;&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;&#12398;&#20877;&#12467;&#12531;&#12497;&#12452;&#12523;&#12399;&#24517;&#35201;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;</p>

	<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">&#27880;&#24847;</h3>
	  
	  <p>&#31169;&#12383;&#12385;&#12399;&#12289; <span class="quote">&#8220;<span class="quote">IP security</span>&#8221;</span> &#12392;&#12356;&#12358;&#29992;&#35486;&#12399;&#12289; IP &#12501;&#12449;&#12452;&#12450;&#12454;&#12457;&#12540;&#12523;&#12289;
	    &#12497;&#12465;&#12483;&#12488;&#12501;&#12451;&#12523;&#12479;&#12522;&#12531;&#12464;&#12394;&#12393;&#12398;&#12289;&#12424;&#12426;&#24195;&#12356;&#27010;&#24565;&#12391;&#29992;&#12356;&#12414;&#12377;&#12290;</p>
	</div>
      
	<h4 class="title">
<a name="ipsec_breakdown"></a>IPsec = AH + ESP + IPcomp + IKE (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>IPsec&#12399;&#20197;&#19979;&#12395;&#25369;&#12370;&#12425;&#12428;&#12427;&#21029;&#12293;&#12398;&#12503;&#12525;&#12488;&#12467;&#12523;&#12391;&#25104;&#12426;&#31435;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;</p>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">Authentication Header (AH): &#24375;&#12356;&#26263;&#21495;&#12481;&#12455;&#12483;&#12463;&#12469;&#12512;&#12434;&#12497;&#12465;&#12483;&#12488;&#12395;&#20184;&#21152;&#12377;&#12427;&#12371;&#12392;&#12395;&#12424;&#12387;&#12390;&#12497;&#12465;&#12483;&#12488;&#12398;&#20449;&#38972;&#24615;&#12434;&#20445;&#35388;&#12375;&#12414;&#12377;&#12290;
	    AH&#12398;&#12388;&#12356;&#12383;&#12497;&#12465;&#12483;&#12488;&#12434;&#21463;&#12369;&#21462;&#12426;&#12481;&#12455;&#12483;&#12463;&#12469;&#12512;&#12364;&#27491;&#24120;&#12394;&#12425;&#12289;
	    <span class="emphasis"><em>&#12354;&#12394;&#12383;&#12392;peer&#12364;&#37749;&#12434;&#20849;&#26377;&#12375;&#20182;&#12398;&#35504;&#12418;&#12364;&#37749;&#12434;&#30693;&#12425;&#12394;&#12356;&#12394;&#12425;&#12289;</em></span>
	    2&#12388;&#12398;&#12371;&#12392;&#12395;&#12388;&#12356;&#12390;&#30906;&#20449;&#12391;&#12365;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;
	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">&#12497;&#12465;&#12483;&#12488;&#12399;peer&#12395;&#12424;&#12387;&#12390;&#20316;&#25104;&#12373;&#12428;&#12289;&#12497;&#12465;&#12483;&#12488;&#12399;&#20605;&#36896;&#12373;&#12428;&#12390;&#12356;&#12414;&#12379;&#12435;&#12290;
	      </li>
<li class="listitem">&#12497;&#12465;&#12483;&#12488;&#12399;&#36578;&#36865;&#20013;&#12395;&#22793;&#26356;&#12373;&#12428;&#12414;&#12379;&#12435;&#12391;&#12375;&#12383;&#12290;
	      </li>
</ul></div>
	    &#20182;&#12398;&#12503;&#12525;&#12488;&#12467;&#12523;&#12392;&#30064;&#12394;&#12426;&#12289;AH&#12399;&#12289;IP&#12504;&#12483;&#12480;&#12540;&#12363;&#12425;&#12497;&#12465;&#12483;&#12488;&#12398;&#32066;&#12431;&#12426;&#12414;&#12391;
	    &#12497;&#12465;&#12483;&#12488;&#20840;&#20307;&#12434;&#12459;&#12496;&#12540;&#12375;&#12414;&#12377;&#12290;
	  </li>
<li class="listitem">Encapsulating Security Payload (ESP): &#26263;&#21495;&#21270;&#12450;&#12523;&#12468;&#12522;&#12474;&#12512;&#12391;&#26263;&#21495;&#21270;&#12373;&#12428;&#12383;&#12497;&#12465;&#12483;&#12488;&#12398;&#27231;&#23494;&#24615;&#12434;&#20445;&#35388;&#12375;&#12414;&#12377;&#12290;
	    ESP&#12391;&#12497;&#12465;&#12483;&#12488;&#12434;&#21463;&#12369;&#21462;&#12387;&#12390;&#12289;&#35299;&#35501;&#12395;&#25104;&#21151;&#12375;&#12383;&#12394;&#12425;
	    &#12497;&#12465;&#12483;&#12488;&#12364;&#36884;&#20013;&#12391;&#30423;&#32884;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;&#12392;&#30906;&#20449;&#12391;&#12365;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;
	    <span class="emphasis"><em>&#12354;&#12394;&#12383;&#12392;peer&#12364;&#37749;&#12434;&#20849;&#26377;&#12375;&#12289;&#20182;&#12398;&#35504;&#12418;&#12364;&#37749;&#12434;&#30693;&#12425;&#12394;&#12356;&#12394;&#12425;&#12290;</em></span>
	  </li>
<li class="listitem">IP payload compression (IPcomp): ESP&#12364;&#12497;&#12465;&#12483;&#12488;&#12395;&#26263;&#21495;&#21270;&#12469;&#12540;&#12499;&#12473;&#12434;&#25552;&#20379;&#12375;&#12414;&#12377;&#12290;
	    &#12375;&#12363;&#12375;&#12289;&#26263;&#21495;&#21270;&#12399;(ppp compression&#12398;&#12424;&#12358;&#12395;)&#20253;&#36208;&#36335;&#19978;&#12398;&#22311;&#32302;&#12395;&#25171;&#25731;&#30340;&#12394;&#24433;&#38911;&#12434;&#19982;&#12360;&#12427;&#20670;&#21521;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	    IPcomp&#12399;ESP(IPcomp&#12384;&#12369;&#12434;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12427;)&#12395;&#12424;&#12387;&#12390;&#26263;&#21495;&#21270;&#12434;&#34892;&#12358;&#21069;&#12395;&#12497;&#12465;&#12483;&#12488;&#12434;&#22311;&#32302;&#12377;&#12427;&#26041;&#27861;&#12434;&#25552;&#20379;&#12375;&#12414;&#12377;&#12290;
	  </li>
<li class="listitem">Internet Key Exchange (IKE): &#12371;&#12428;&#12414;&#12391;&#26360;&#12356;&#12383;&#12424;&#12358;&#12395;&#12289;AH&#12392;ESP&#12399;peer&#12392;&#37749;&#12434;&#20849;&#26377;&#12377;&#12427;&#12371;&#12392;&#12364;&#24517;&#35201;&#12392;&#12394;&#12426;&#12414;&#12377;&#12290;
	    &#36960;&#12356;&#22580;&#25152;&#12392;&#12398;&#36890;&#20449;&#12398;&#12383;&#12417;&#12395;&#12289;&#31192;&#23494;&#35041;&#12395;&#37749;&#12434;&#20132;&#28169;&#12377;&#12427;&#26041;&#27861;&#12434;&#25552;&#20379;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	    IKE&#12399;&#12381;&#12428;&#12434;&#21487;&#33021;&#12395;&#12375;&#12414;&#12377;&#12290;
	  </li>
</ul></div>

	<p>AH&#12289;ESP&#12289;IPcomp&#12399;&#12459;&#12540;&#12493;&#12523;&#12395;&#23455;&#35013;&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;
	  IKE&#12399;&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;&#12391;&#12487;&#12540;&#12514;&#12531;&#12503;&#12525;&#12475;&#12473;&#12392;&#12375;&#12390;&#23455;&#35013;&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;
	  &#12459;&#12540;&#12493;&#12523;&#12392;&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;&#12399;&#12289;&#37749;&#31649;&#29702;&#12486;&#12540;&#12502;&#12523;&#12434;&#36890;&#12375;&#12390;&#21332;&#35519;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>

	<p>IKE&#12399;&#12458;&#12503;&#12471;&#12519;&#12531;&#12391;&#12377;&#12290;AH/ESP&#12398;&#12383;&#12417;&#12395;&#25163;&#20316;&#26989;&#12391;&#37749;&#12434;&#27083;&#25104;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	  &#12375;&#12363;&#12375;&#12289;&#21516;&#12376;&#37749;&#12434;&#12378;&#12387;&#12392;&#20351;&#12356;&#32154;&#12369;&#12427;&#12371;&#12392;&#12399;&#12391;&#12365;&#12394;&#12356;&#12371;&#12392;&#12434;&#29702;&#35299;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;
	  &#12418;&#12375;&#38263;&#12356;&#38291;&#21516;&#12376;&#37749;&#12434;&#20351;&#12358;&#12394;&#12425;&#12289;&#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#12364;&#21361;&#38522;&#12395;&#12373;&#12425;&#12373;&#12428;&#12427;&#21487;&#33021;&#24615;&#12364;&#12414;&#12377;&#12414;&#12377;&#39640;&#12367;&#12394;&#12426;&#12414;&#12377;&#12290;</p>

	<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
	  <p><span class="bold"><strong>IPsec&#12503;&#12525;&#12488;&#12467;&#12523;&#12398;&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#12399;&#37749;&#12398;&#27231;&#23494;&#24615;&#22914;&#20309;&#12391;&#12377;&#12290;
	    </strong></span>
	    &#12418;&#12375;&#37749;&#12364;&#21361;&#38522;&#12395;&#12373;&#12425;&#12373;&#12428;&#12427;&#12394;&#12425;&#12289;IPsec&#12503;&#12525;&#12488;&#12467;&#12523;&#12399;&#23433;&#20840;&#12391;&#12354;&#12426;&#24471;&#12414;&#12379;&#12435;&#12290;
	    &#35373;&#23450;&#12501;&#12449;&#12452;&#12523;&#12289;&#37749;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12501;&#12449;&#12452;&#12523;&#12398;&#12497;&#12540;&#12511;&#12483;&#12471;&#12519;&#12531;&#12354;&#12427;&#12356;&#12399;&#24773;&#22577;&#28431;&#27945;&#12395;&#12388;&#12394;&#12364;&#12427;&#12363;&#12418;&#30693;&#12428;&#12394;&#12356;&#12373;&#12414;&#12374;&#12414;&#12394;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;</p>
	</div>

	<p>&#12405;&#12383;&#12388;&#12398; RFC &#12364;&#20986;&#12390;&#12356;&#12414;&#12377;: RFC1825 &#12395;&#12424;&#12427;&#21476;&#12356; IPsec &#12392;&#12289;
	  RFC2401 &#12395;&#12424;&#12427;&#26032;&#12375;&#12356; IPsec &#12391;&#12377;&#12290;
	  NetBSD &#12391;&#12399;&#12356;&#12378;&#12428;&#12418;&#23455;&#35013;&#12375;&#12390;&#12356;&#12414;&#12377;&#12364;&#12289;&#26032;&#12375;&#12356; IPsec &#12434;&#20351;&#12358;&#12424;&#12358;&#25512;&#22888;&#12375;&#12414;&#12377;&#12290;</p>

	<pre class="programlisting">

        userland programs               IKE daemon
          ^ | AF_INET{,6} socket          ^ | PF_KEY socket
========= | | =========================== | | ======== Kernel/user boundary
          | v                             | v
        transport layer, TCP/UDP        key management table
          ^ |                             ^ | key information
          | |                             | |
          | v                             | v
        IP input/output logic &lt;-------&gt; AH/ESP/IPcomp logic
          ^ |
          | v
        Network drivers (ethernet)
</pre>
      
	<h4 class="title">
<a name="trans_tunnel"></a>&#12488;&#12521;&#12531;&#12473;&#12509;&#12540;&#12488;&#12514;&#12540;&#12489;&#12392;&#12488;&#12531;&#12493;&#12523;&#12514;&#12540;&#12489; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>AH, ESP &#12381;&#12375;&#12390; IPcomp&#12395;&#12399;&#12488;&#12521;&#12531;&#12473;&#12509;&#12540;&#12488;&#12514;&#12540;&#12489;&#12392;&#12488;&#12531;&#12493;&#12523;&#12514;&#12540;&#12489;&#12398;2&#12388;&#12398;&#25805;&#20316;&#12514;&#12540;&#12489;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	  &#12488;&#12521;&#12531;&#12473;&#12509;&#12540;&#12488;&#12514;&#12540;&#12489;&#12399;&#12289;&#36890;&#24120;&#12398;&#12500;&#12450;&#38291;&#12398;&#36890;&#20449;&#12434;&#26263;&#21495;&#21270;&#12375;&#12414;&#12377;&#12290;
	  &#12488;&#12531;&#12493;&#12523;&#12514;&#12540;&#12489;&#12399;&#12289;&#12497;&#12465;&#12483;&#12488;&#12434;&#26032;&#12375;&#12356;IPv4/6&#12504;&#12483;&#12480;&#12540;&#12398;&#20013;&#12395;&#12459;&#12503;&#12475;&#12523;&#21270;&#12375;&#12414;&#12377;&#12290;
	  &#12488;&#12531;&#12493;&#12523;&#12514;&#12540;&#12489;&#12399;&#12289;VPN&#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#12391;&#20351;&#29992;&#12391;&#12365;&#12427;&#12424;&#12358;&#12395;&#35373;&#35336;&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;</p>

	<pre class="programlisting">
[[&#12488;&#12521;&#12531;&#12473;&#12509;&#12540;&#12488;&#12514;&#12540;&#12489;]]
my host ======== peer's host
        transport
        mode

packets: [IP: me-&gt;peer] ESP payload
                        &lt;---------&gt; encrypted


[[&#12488;&#12531;&#12493;&#12523;&#12514;&#12540;&#12489;]]
        (a)                  (b)                        (c)
my host ---- my VPN gateway ======== peer's VPN gateway ---- peer's host
                            tunnel mode

packets on (a): [IP: me-&gt;peer] payload
packets on (b): [IP: mygw-&gt;peergw] ESP [IP: me-&gt;peer] payload
                                   &lt;------------------------&gt; encrypted
packets on (c): [IP: me-&gt;peer] payload
</pre>
      
	<h4 class="title">
<a name="policy"></a>IPsec<span class="quote">&#8220;<span class="quote">&#12509;&#12522;&#12471;&#12540;</span>&#8221;</span>&#31649;&#29702; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#12459;&#12540;&#12493;&#12523;&#12399;&#12497;&#12465;&#12483;&#12488;&#12434;&#12475;&#12461;&#12517;&#12450;&#12540;&#12395;&#12377;&#12427;&#26041;&#27861;&#12434;&#30693;&#12387;&#12390;&#12356;&#12414;&#12377;&#12364;
	  <span class="emphasis"><em>&#12393;&#12398;&#12497;&#12465;&#12483;&#12488;</em></span>&#12364;&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#12434;&#24517;&#35201;&#12392;&#12377;&#12427;&#12363;&#30693;&#12426;&#12414;&#12379;&#12435;&#12290;
	  &#25105;&#12293;&#12399;&#12393;&#12398;&#12497;&#12465;&#12483;&#12488;&#12434;&#12475;&#12461;&#12517;&#12450;&#12540;&#12395;&#12377;&#12427;&#12363;&#12434;&#12459;&#12540;&#12493;&#12523;&#12395;&#31034;&#12377;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	  IPsec<span class="quote">&#8220;<span class="quote">&#12509;&#12522;&#12471;&#12540;</span>&#8221;</span>&#35373;&#23450;&#12395;&#12424;&#12426;&#12381;&#12428;&#12425;&#12434;&#25351;&#23450;&#12375;&#12414;&#12377;&#12290;</p>

	<p>IPsec&#12509;&#12522;&#12471;&#12540;&#12399;&#12289;&#12497;&#12465;&#12483;&#12488;&#27598;&#12414;&#12383;&#12399;&#12477;&#12465;&#12483;&#12488;&#22411;&#27598;&#12395;&#35373;&#23450;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">&#12497;&#12465;&#12483;&#12488;&#27598;: &#12497;&#12465;&#12483;&#12488;&#12501;&#12451;&#12523;&#12479;&#12540;&#12392;&#21516;&#12376;&#12424;&#12358;&#12395;&#12459;&#12540;&#12493;&#12523;&#12395;&#35373;&#23450;&#12391;&#12365;&#12414;&#12377;&#12290;
	    <span class="quote">&#8220;<span class="quote">10.1.1.0/24&#12395;&#12513;&#12483;&#12475;&#12540;&#12472;&#12434;&#36865;&#12387;&#12390;&#12356;&#12427;&#12394;&#12425;&#12289;&#22806;&#21521;&#12394;&#12497;&#12465;&#12483;&#12488;&#12434;&#26263;&#21495;&#21270;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;</span>&#8221;</span>
	    &#12392;&#12356;&#12358;&#12424;&#12358;&#12395;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	    &#12371;&#12428;&#12399;&#12289;IPsec&#12523;&#12540;&#12479;&#12540;&#12434;&#36208;&#12425;&#12379;&#12390;&#12356;&#12427;&#26178;&#12289;&#12358;&#12414;&#12367;&#20685;&#12365;&#12414;&#12377;&#12290;
	  </li>
<li class="listitem">&#12477;&#12465;&#12483;&#12488;&#27598;: &#29305;&#23450;&#12398;&#12477;&#12465;&#12483;&#12488;&#12395; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?setsockopt+2+NetBSD-6.0+i386">setsockopt(2)</a> &#12434;&#20351;&#12387;&#12390;&#35373;&#23450;&#12375;&#12414;&#12377;&#12290;
	    <span class="quote">&#8220;<span class="quote">&#12371;&#12398;&#12477;&#12465;&#12483;&#12488;&#12363;&#12425;&#22806;&#21521;&#12394;&#12497;&#12465;&#12483;&#12488;&#12434;&#26263;&#21495;&#21270;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;</span>&#8221;</span>&#12398;&#12424;&#12358;&#12395;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	    &#12371;&#12428;&#12399;&#12289;IPsec-aware&#12469;&#12540;&#12496;&#12540;&#12503;&#12525;&#12464;&#12521;&#12512;&#12434;&#36208;&#12425;&#12379;&#12383;&#12356;&#26178;&#12289;&#12358;&#12414;&#12367;&#20685;&#12365;&#12414;&#12377;&#12290;
	  </li>
</ul></div>

	<p>IPsec&#12509;&#12522;&#12471;&#12540;&#12399;&#12497;&#12465;&#12483;&#12488;&#12395;&#23550;&#12375;&#12390;&#20351;&#12431;&#12428;&#12427;&#12503;&#12525;&#12488;&#12467;&#12523;(AH&#12289;ESP&#12414;&#12383;&#12399;IPcomp)&#12434;&#27770;&#23450;&#12375;&#12414;&#12377;&#12290;
	  &#12497;&#12465;&#12483;&#12488;&#12395;&#23550;&#12375;&#12390;AH&#12289;ESP&#12289;IPcomp&#12398;&#12393;&#12398;&#32068;&#12415;&#21512;&#12431;&#12379;&#12434;&#20351;&#29992;&#12377;&#12427;&#12459;&#12540;&#12493;&#12523;&#12394;&#12398;&#12363;&#12434;&#27083;&#25104;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	  &#12402;&#12392;&#12388;&#12398;&#12497;&#12465;&#12483;&#12488;&#12395;&#23550;&#12375;&#12390;&#12289;&#22810;&#25968;&#12398;ESP&#12458;&#12506;&#12524;&#12540;&#12471;&#12519;&#12531;&#12398;&#12424;&#12358;&#12394;&#12289;
	  &#21516;&#12376;&#12503;&#12525;&#12488;&#12467;&#12523;&#12434;&#35079;&#25968;&#22238;&#12395;&#12431;&#12383;&#12387;&#12390;&#36969;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	  &#22810;&#25968;&#12398;ESP&#12458;&#12506;&#12524;&#12540;&#12471;&#12519;&#12531;&#12364;&#24441;&#12395;&#31435;&#12388;&#12363;&#12393;&#12358;&#12363;&#12399;&#12431;&#12363;&#12426;&#12414;&#12379;&#12435;&#12290;&#12375;&#12363;&#12375;&#12486;&#12473;&#12488;/&#12487;&#12496;&#12483;&#12464;&#12395;&#12399;&#33288;&#21619;&#28145;&#12356;&#12398;&#12391;&#12377;&#12364;&#12290;</p>
      
	<h4 class="title">
<a name="config_kernel"></a>IPsec&#12459;&#12540;&#12493;&#12523;&#12398;&#35373;&#23450; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#20316;&#25104;&#25163;&#38918;&#12398;&#35443;&#32048;&#12399;<a class="ulink" href="../../current/" target="_top"><span class="emphasis"><em>NetBSD-current&#12398;&#36861;&#36321;</em></span></a>&#12434;&#21442;&#29031;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;</p>

	<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">&#12459;&#12540;&#12493;&#12523;&#35373;&#23450;&#12501;&#12449;&#12452;&#12523;&#12391;&#27425;&#12398;&#37096;&#20998;&#12434;&#26377;&#21177;&#12395;&#12375;&#12390;&#12289;&#26032;&#12375;&#12356;&#12459;&#12540;&#12493;&#12523;&#12434;&#27083;&#31689;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	    <pre class="programlisting">
options IPSEC
options IPSEC_ESP
</pre>
	  </li>
<li class="listitem">&#26032;&#12375;&#12356;&#12459;&#12540;&#12493;&#12523;&#12434;&#27083;&#31689;&#12375;&#12414;&#12377;&#12290;
	  </li>
<li class="listitem">&#12459;&#12540;&#12493;&#12523;&#12434;&#32622;&#12365;&#25563;&#12360;&#12390;&#12289;&#12381;&#12375;&#12390;&#12522;&#12502;&#12540;&#12488;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  </li>
</ol></div>

	<p>&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;&#12398;&#12484;&#12540;&#12523;&#12399;&#12487;&#12501;&#12457;&#12523;&#12488;&#12391; IPsec &#12469;&#12509;&#12540;&#12488;&#12434;&#21547;&#12435;&#12391;&#12362;&#12426;&#12289;
	  &#12414;&#12383;&#12289;&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;&#12398;&#20877;&#27083;&#31689;&#12399;&#19981;&#35201;&#12391;&#12377;&#12290;</p>

	<p>&#12373;&#12425;&#12395;&#12289; NetBSD &#38468;&#23646;&#12398; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12434;&#20351;&#12387;&#12383;&#12426;&#12289;
	  <a href="http://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/security/isakmpd/README.html" target="_top"><code class="filename">security/isakmpd</code></a> &#12434;&#12452;&#12531;&#12473;&#12488;&#12540;&#12523;&#12375;&#12383;&#12426;&#12377;&#12427;&#12398;&#12418;&#12424;&#12356;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#12290;</p>
      
	<h4 class="title">
<a name="sample_esp"></a>&#35373;&#23450;&#20363;: &#12507;&#12473;&#12488;&#38291;&#12398;&#26263;&#21495;&#21270; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#12418;&#12375;&#12510;&#12491;&#12517;&#12450;&#12523;&#12391;&#35373;&#23450;&#12375;&#12383;&#37749;&#12391;&#12507;&#12473;&#12488;&#38291;&#12398;&#26263;&#21495;&#21270;(&#12488;&#12521;&#12531;&#12473;&#12509;&#12540;&#12488;&#12514;&#12540;&#12489;)&#12434;&#34892;&#12358;&#12394;&#12425;&#12289;
	  &#19979;&#35352;&#12398;&#27083;&#25104;&#12391;&#20805;&#20998;&#12391;&#12377;&#12290;&#12510;&#12491;&#12517;&#12450;&#12523;&#12391;&#37749;&#12434;&#35373;&#23450;&#12377;&#12427;&#12383;&#12417;&#12395; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?setkey+8+NetBSD-6.0+i386">setkey(8)</a> &#12434;
	  &#20351;&#29992;&#12375;&#12414;&#12377;&#12290;</p>

	<pre class="programlisting">
#! /bin/sh
#
# packet will look like this: IPv4 ESP payload
# the node is on 10.1.1.1, peer is on 20.1.1.1
setkey -c &lt;&lt;EOF
add 10.1.1.1 20.1.1.1 esp 9876 -E 3des-cbc "hogehogehogehogehogehoge";
add 20.1.1.1 10.1.1.1 esp 10000 -E 3des-cbc 0xdeadbeefdeadbeefdeadbeefdeadbeefdeadbeefdeadbeef;
spdadd 10.1.1.1 20.1.1.1 any -P out ipsec esp/transport//use;
EOF
</pre>

	<p>&#26368;&#21021;&#12398;2&#12388;&#12398;&#34892;&#12399;&#12289;ESP&#12391;&#20351;&#29992;&#12377;&#12427;&#37749;&#12434;&#35373;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	  4&#30058;&#30446;&#12398;&#25968;&#23383;&#12399; SPI(&#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;&#12539;&#12497;&#12521;&#12513;&#12540;&#12479;&#12540;&#12539;&#12452;&#12531;&#12487;&#12483;&#12463;&#12473;)&#12392;&#21628;&#12400;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;
	  &#12371;&#12398;&#20516;&#12399;ESP&#12497;&#12465;&#12483;&#12488;&#12395;&#20184;&#21152;&#12373;&#12428;&#12289;&#21463;&#20449;&#12375;&#12383;&#20596;&#12391;&#12497;&#12465;&#12483;&#12488;&#12363;&#12425;&#37749;&#12434;&#35211;&#12388;&#12369;&#12427;&#12383;&#12417;&#12395;&#36865;&#12425;&#12428;&#12414;&#12377;&#12290;
	  &#12371;&#12398;&#20516;&#12399;&#12494;&#12540;&#12489;&#19978;&#12391;&#12518;&#12491;&#12540;&#12463;&#12391;&#12354;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;</p>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">10.1.1.1&#12363;&#12425;20.1.1.1&#12395;&#12289;&#37749;<code class="code">hogehogehogehogehogehoge</code>&#12391;&#12289;
	    3DES-CBC&#12450;&#12523;&#12468;&#12522;&#12474;&#12512;&#12434;&#20351;&#12356;&#12414;&#12377;&#12290;
	    &#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#12399; SPI&#20516;9876&#12395;&#12424;&#12387;&#12390;&#35672;&#21029;&#12373;&#12428;&#12414;&#12377;&#12290;
	  </li>
<li class="listitem">20.1.1.1&#12363;&#12425;10.1.1.1&#12395;&#12289;&#37749;<code class="code">0xdeadbeefdeadbeefdeadbeefdeadbeefdeadbeefdeadbeef</code>&#12391;&#12289;
	    3DES-CBC&#12450;&#12523;&#12468;&#12522;&#12474;&#12512;&#12434;&#20351;&#12356;&#12414;&#12377;&#12290;
	  </li>
</ul></div>

	<p>&#26368;&#32066;&#34892;&#12399;&#12494;&#12540;&#12489;&#12398;&#12497;&#12465;&#12483;&#12488;&#27598;&#12398;IPsec&#12509;&#12522;&#12471;&#12540;&#12434;&#35373;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	  &#12371;&#12398;&#35373;&#23450;&#12391;&#12289;node(10.1.1.1)&#12363;&#12425;peer(20.1.1.1)&#12395;&#36865;&#12425;&#12428;&#12427;&#12497;&#12465;&#12483;&#12488;&#12399;&#26263;&#21495;&#21270;&#12373;&#12428;&#12414;&#12377;&#12290;&#37749;&#12399;&#12459;&#12540;&#12493;&#12523;&#20869;&#37096;
	  &#12391;&#27083;&#25104;&#12373;&#12428;&#12414;&#12377;&#12290;
	  &#12371;&#12398;&#35373;&#23450;&#12399;&#12289;20.1.1.1&#12363;&#12425;10.1.1.1&#12395;&#23626;&#12367;&#26263;&#21495;&#21270;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;&#12497;&#12465;&#12483;&#12488;&#12434;&#31105;&#27490;&#12375;&#12390;&#12356;&#12414;&#12379;&#12435;&#12290;
	  &#12418;&#12375;&#26263;&#21495;&#21270;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;&#12497;&#12465;&#12483;&#12488;&#12434;&#25298;&#21542;&#12375;&#12383;&#12356;&#22580;&#21512;&#12289;&#27425;&#12398;&#34892;&#12434;&#36861;&#21152;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;</p>

	<pre class="programlisting">
spdadd 20.1.1.1 10.1.1.1 any -P in ipsec esp/transport//require;
</pre>

	<p>&#12418;&#12358;&#19968;&#26041;&#12398; (20.1.1.1) &#12391;&#12399;&#12289;&#27425;&#12398;&#12424;&#12358;&#12395;&#35373;&#23450;&#12375;&#12414;&#12377;&#12290;
	  <span class="quote">&#8220;<span class="quote">spdadd</span>&#8221;</span> &#34892;&#12398;&#12450;&#12489;&#12524;&#12473;&#12434;&#20837;&#12428;&#25563;&#12360;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#19968;&#26041;&#12289;
	  <span class="quote">&#8220;<span class="quote">add</span>&#8221;</span> &#34892;&#12399;&#20837;&#12428;&#25563;&#12360;&#12394;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;</p>

	<pre class="programlisting">
#! /bin/sh
#
# packet will look like this: IPv4 ESP payload
# the node is on 20.1.1.1, peer is on 10.1.1.1
setkey -c &lt;&lt;EOF
add 10.1.1.1 20.1.1.1 esp 9876 -E 3des-cbc "hogehogehogehogehogehoge";
add 20.1.1.1 10.1.1.1 esp 10000 -E 3des-cbc 0xdeadbeefdeadbeefdeadbeefdeadbeefdeadbeefdeadbeef;
spdadd 20.1.1.1 10.1.1.1 any -P out ipsec esp/transport//use;
EOF
</pre>

	<p>&#12509;&#12522;&#12471;&#12540;&#35373;&#23450;&#12398;&#27083;&#25991;&#12399; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipsec_set_policy+3+NetBSD-6.0+i386">ipsec_set_policy(3)</a> &#12391;&#36848;&#12409;&#12425;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;</p>

	<p>&#22238;&#32218;&#19978;&#12398;&#26263;&#21495;&#21270;&#12373;&#12428;&#12383;&#12497;&#12465;&#12483;&#12488;&#12434;&#35211;&#12427;&#12383;&#12417;&#12395;
	  <a href="http://netbsd.gw.com/cgi-bin/man-cgi?tcpdump+8+NetBSD-6.0+i386">tcpdump(8)</a> &#12434;&#23455;&#34892;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;
	  &#12497;&#12465;&#12483;&#12488;&#12399;&#26263;&#21495;&#21270;&#12373;&#12428;&#12414;&#12377;&#12290;&#12381;&#12428;&#12425;&#12398;&#12497;&#12465;&#12483;&#12488;&#12434;&#30423;&#32884;&#12377;&#12427;&#12371;&#12392;&#12399;&#12391;&#12365;&#12414;&#12379;&#12435;&#12290;</p>

	<p>&#19978;&#35352;&#12398;&#20363;&#12399;&#20154;&#38291;&#12364;&#35501;&#12416;&#12371;&#12392;&#12364;&#12391;&#12365;&#12427;&#37749;&#12434;&#20351;&#12356;&#12414;&#12377;&#12290;
	  &#12375;&#12363;&#12375;&#12394;&#12364;&#12425;&#12289;&#20154;&#38291;&#12364;&#35501;&#12416;&#12371;&#12392;&#12364;&#12391;&#12365;&#12427;&#37749;&#12398;&#20351;&#29992;&#12364;&#12496;&#12452;&#12490;&#12522;&#12540;&#37749;&#12424;&#12426;&#21361;&#38522;&#12391;&#12354;&#12427;&#12371;&#12392;&#12363;&#12425;&#12289;
	  &#23455;&#38555;&#12398;&#12458;&#12506;&#12524;&#12540;&#12471;&#12519;&#12531;&#12391;&#12399;&#12289;&#12496;&#12452;&#12490;&#12522;&#12540;&#37749;&#12434;&#20351;&#29992;&#12377;&#12427;&#26041;&#12364;&#12356;&#12356;&#12391;&#12375;&#12423;&#12358;&#12290;</p>

	<p>&#37749;&#12398;&#38263;&#12373;&#12399;&#12450;&#12523;&#12468;&#12522;&#12474;&#12512;&#12395;&#12424;&#12387;&#12390;&#27770;&#23450;&#12373;&#12428;&#12414;&#12377;&#12290;
	  3des-cbc&#12391;&#12399;&#12289;&#37749;&#12399; 192 &#12499;&#12483;&#12488;(=24&#12496;&#12452;&#12488;)&#12391;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290;
	  &#12418;&#12375;&#12381;&#12428;&#12424;&#12426;&#30701;&#12356;&#12414;&#12383;&#12399;&#38263;&#12356;&#37749;&#12434;&#25351;&#23450;&#12377;&#12427;&#12394;&#12425;&#12289; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?setkey+8+NetBSD-6.0+i386">setkey(8)</a> &#12399;&#12456;&#12521;&#12540;&#12395;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;</p>

	<p>&#20182;&#12398;&#12450;&#12523;&#12468;&#12522;&#12474;&#12512;&#12434;&#20351;&#12358;&#22580;&#21512;&#12289;&#35373;&#23450;&#12399;&#12411;&#12392;&#12435;&#12393;&#21516;&#12376;&#12391;&#12377;&#12290;
	  rijndael-cbc (AES &#12392;&#12375;&#12390;&#12418;&#30693;&#12425;&#12428;&#12427;) &#12434;&#20351;&#12358;&#22580;&#21512;&#12398;&#20363;&#12434;&#31034;&#12375;&#12414;&#12377;&#12290;
	  rijndael-cbc &#12398;&#31192;&#23494;&#37749;&#12399;&#12289; 128&#12289; 192&#12289;&#12414;&#12383;&#12399; 256 &#12499;&#12483;&#12488;&#12392;&#12394;&#12426;&#12414;&#12377;&#12290;
	  &#12371;&#12371;&#12391;&#12399;&#12289; 128 &#12499;&#12483;&#12488;&#12398;&#37749;&#12434;&#20351;&#12358;&#12371;&#12392;&#12395;&#12375;&#12414;&#12377;&#12290;</p>

	<pre class="programlisting">
#! /bin/sh
#
# packet will look like this: IPv4 ESP payload
# the node is on 10.1.1.1, peer is on 20.1.1.1
# rijndael-cbc with 128bit key
setkey -c &lt;&lt;EOF
add 10.1.1.1 20.1.1.1 esp 9876 -E rijndael-cbc "hogehogehogehoge";
add 20.1.1.1 10.1.1.1 esp 10000 -E rijndael-cbc 0xdeadbeefdeadbeefdeadbeefdeadbeef;
spdadd 10.1.1.1 20.1.1.1 any -P out ipsec esp/transport//use;
EOF
</pre>
      
	<h4 class="title">
<a name="sample_ah"></a>&#35373;&#23450;&#20363;: &#12507;&#12473;&#12488;&#38291;&#12398;&#35469;&#35388; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>ESP&#12392;&#21516;&#12376;&#12424;&#12358;&#12395;&#12289;AH&#12434;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

	<pre class="programlisting">
#! /bin/sh
#
# packet will look like this: IPv4 AH payload
# the node is on 10.1.1.1, peer is on 20.1.1.1
setkey -c &lt;&lt;EOF
add 10.1.1.1 20.1.1.1 ah 9877 -A hmac-md5 "hogehogehogehoge";
add 20.1.1.1 10.1.1.1 ah 10001 -A hmac-md5 "mogamogamogamoga";
spdadd 10.1.1.1 20.1.1.1 any -P out ipsec ah/transport//use;
EOF
</pre>
      
	<h4 class="title">
<a name="sample_both"></a>&#35373;&#23450;&#20363;: &#12507;&#12473;&#12488;&#38291;&#12398;&#26263;&#21495;&#21270;+&#35469;&#35388; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#12418;&#12375;AH&#12392;ESP&#21452;&#26041;&#12391;&#37749;&#12434;&#35373;&#23450;&#12375;&#12383;&#22580;&#21512;&#12289;&#21452;&#26041;&#12392;&#12418;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
	  IPsec&#12398;&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12391;&#12399;&#12289;AH&#12398;&#24460;&#12395;ESP&#12434;&#36969;&#29992;&#12377;&#12427;&#12371;&#12392;&#12434;&#25512;&#22888;&#12375;&#12390;&#12356;&#12414;&#12377; &#12290;</p>

	<pre class="programlisting">
#! /bin/sh
#
# packet will look like this: IPv4 AH ESP payload
# the node is on 10.1.1.1, peer is on 20.1.1.1
setkey -c &lt;&lt;EOF
add 10.1.1.1 20.1.1.1 esp 9876 -E 3des-cbc "hogehogehogehogehogehoge";
add 20.1.1.1 10.1.1.1 esp 10000 -E 3des-cbc 0xdeadbeefdeadbeefdeadbeefdeadbeefdeadbeefdeadbeef;
add 10.1.1.1 20.1.1.1 ah 9877 -A hmac-md5 "hogehogehogehoge";
add 20.1.1.1 10.1.1.1 ah 10001 -A hmac-md5 "mogamogamogamoga";
spdadd 10.1.1.1 20.1.1.1 any -P out ipsec esp/transport//use ah/transport//use;
EOF
</pre>
      
	<h4 class="title">
<a name="sample_vpn"></a>&#35373;&#23450;&#20363;: IPsec VPN (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#12414;&#12378;&#26368;&#21021;&#12395;&#12289;&#12356;&#12367;&#12388;&#12363;&#12398;IPsec VPN&#35373;&#23450;&#12395;&#38306;&#12375;&#12390;&#12398;&#27880;&#24847;&#28857;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;</p>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">&#12523;&#12540;&#12486;&#12451;&#12531;&#12464;&#12398;&#35373;&#23450;&#12399;&#30340;&#30906;&#12395;&#34892;&#12431;&#12428;&#12390;&#12356;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290;
	  </li>
<li class="listitem">IPsec&#12488;&#12531;&#12493;&#12523;&#12487;&#12496;&#12452;&#12473;&#12434;&#12289;&#21516;&#26178;&#12395;NAT&#12508;&#12483;&#12463;&#12473;&#12420;&#12501;&#12451;&#12523;&#12479;&#12522;&#12531;&#12464;&#38450;&#28779;&#22721;&#12392;&#12375;&#12390;
	    &#25391;&#12427;&#33310;&#12358;&#12424;&#12358;&#12395;&#20351;&#12362;&#12358;&#12392;&#12375;&#12383;&#12426;&#12375;&#12394;&#12356;&#12391;&#12367;&#12384;&#12373;&#12356;&#12290;
	    IPsec&#12392;NAT&#12399;&#26412;&#36074;&#30340;&#12395;&#20114;&#25563;&#24615;&#12398;&#12394;&#12356;&#12503;&#12525;&#12488;&#12467;&#12523;&#12391;&#12377;&#12290;
	    &#12414;&#12383;&#12289;1.5&#12391;&#12398;&#23455;&#35013;&#12392;&#20181;&#27096;&#12398;&#21046;&#38480;&#12395;&#12424;&#12426;&#12289;
	    &#12371;&#12428;&#12399;&#12358;&#12414;&#12367;&#21205;&#12365;&#12414;&#12379;&#12435;&#12290;
	    &#25105;&#12293;&#12399;&#12371;&#12398;&#29366;&#27841;&#12434;&#25913;&#21892;&#12375;&#12424;&#12358;&#12392;&#12375;&#12390;&#12356;&#12427;&#12392;&#12371;&#12429;&#12391;&#12377;&#12290;&#35443;&#32048;&#12395;&#12388;&#12356;&#12390;&#12399;&#12289;
	    <a class="ulink" href="#ipf-interaction" target="_top">"ipfilter &#12392;&#12398;&#30456;&#20114;&#12398;&#24433;&#38911;"</a>
	    &#12434;&#21442;&#29031;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  </li>
<li class="listitem">VPN&#12398;&#35373;&#23450;&#12399;&#12289;&#12381;&#12428;&#12382;&#12428;&#12398;&#23566;&#20837;&#12395;&#12424;&#12387;&#12390;&#30064;&#12394;&#12426;&#12414;&#12377;&#12290;
	    &#23455;&#38555;&#12289;<span class="quote">&#8220;<span class="quote">VPN</span>&#8221;</span>&#12398;&#24847;&#21619;&#12377;&#12427;&#12418;&#12398;&#12395;&#12388;&#12356;&#12390;&#12398;&#26126;&#30906;&#12394;&#23450;&#32681;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;
	    &#12418;&#12375;&#12418;&#12513;&#12452;&#12522;&#12531;&#12464;&#12522;&#12473;&#12488;&#12395;&#36074;&#21839;&#12377;&#12427;&#12392;&#12375;&#12383;&#12425;&#12289;&#12354;&#12394;&#12383;&#12398;&#29694;&#22312;&#12398;&#29366;&#27841;&#12392;
	    &#12493;&#12483;&#12488;&#12527;&#12540;&#12463;&#12398;&#35373;&#23450;&#12434;&#12377;&#12409;&#12390;&#26126;&#12425;&#12363;&#12395;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	  </li>
</ul></div>

	<p>&#20197;&#19979;&#12398;&#20363;&#12399;&#20197;&#19979;&#12398;&#12424;&#12358;&#12394;&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;&#12398;&#35373;&#23450;&#12434;&#20206;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	  &#12371;&#12398;&#20363;&#12398;&#26368;&#32066;&#30446;&#30340;&#12399;:</p>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">&#12393;&#12358;&#12395;&#12363;&#12375;&#12390;&#20108;&#12388;&#12398;&#12503;&#12521;&#12452;&#12505;&#12540;&#12488;&#12450;&#12489;&#12524;&#12473;&#31354;&#38291;(10.0.1.0/24&#12362;&#12424;&#12403;10.0.2.0/24&#12289;
	    &#12354;&#12394;&#12383;&#12398;&#20250;&#31038;&#12398;&#26481;&#20140;&#25903;&#31038;&#12392;&#12491;&#12517;&#12540;&#12520;&#12540;&#12463;&#26412;&#31038;&#12398;&#12424;&#12358;&#12394;&#12418;&#12398;&#12392;&#32771;&#12360;&#12390;&#12367;&#12384;&#12373;&#12356;)
	    &#12398;&#20013;&#12398;&#12510;&#12471;&#12531;&#12434;&#25509;&#32154;&#12377;&#12427;&#12371;&#12392;&#12290;
	  </li>
<li class="listitem">&#20108;&#12388;&#12398;&#31354;&#38291;&#12398;&#38291;&#12398;&#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#12399;&#12289;
	    &#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#21516;&#22763;&#12398;&#38291;&#12391;&#23433;&#20840;&#12395;&#12420;&#12426;&#12392;&#12426;&#12373;&#12428;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#12290;
	  </li>
<li class="listitem">&#22826;&#24179;&#27915;&#12434;&#27178;&#26029;&#12377;&#12427;&#23554;&#29992;&#32218;&#12398;&#26009;&#37329;&#12434;&#25173;&#12356;&#12383;&#12367;&#12394;&#12356;&#12383;&#12417;&#12289;&#22320;&#20803;&#12398;ISP
	    (&#26481;&#20140;&#12392;&#12491;&#12517;&#12540;&#12520;&#12540;&#12463;)&#12392;&#22865;&#32004;&#12375;&#12289;&#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#12399;&#12466;&#12540;&#12488;&#12454;&#12455;&#12452;&#38291;&#12434;&#12488;&#12531;&#12493;&#12523;&#12377;&#12427;&#12290;
	  </li>
</ul></div>

	<pre class="programlisting">
((( 10.0.1.0/24 )))     &#26481;&#20140;&#25903;&#24215;&#12458;&#12501;&#12451;&#12473;&#12398;VPN&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;
  |10.0.1.1
gateway 1
  |20.0.0.1
  |IPsec tunnel
  |20.0.0.2
gateway 2
  |10.0.2.1
((( 10.0.2.0/24 )))     &#12491;&#12517;&#12540;&#12520;&#12540;&#12463;&#26412;&#31038;&#12398;VPN&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;
</pre>

	<p>&#20197;&#19979;&#12398;&#12486;&#12461;&#12473;&#12488;&#12399;gateway 1&#12398;&#35373;&#23450;&#12434;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

	<pre class="programlisting">
#! /bin/sh
#
# Note that routing should be set up in advance, i.e. for this example:
#       route -n add -net 10.0.2.0 10.0.2.1
#       route -n add 10.0.2.1 10.0.1.1
# packet will look like this: IPv4 ESP IPv4 payload
# the node is on 10.0.1.1/20.0.0.1, peer is on 10.0.2.1/20.0.0.2
setkey -c &lt;&lt;EOF
add 20.0.0.1 20.0.0.2 esp 13245 -E blowfish-cbc "blowfishtest.001" ;
add 20.0.0.2 20.0.0.1 esp 13246 -E blowfish-cbc 0xdeadbeefdeadbeefdeadbeefdeadbeef;
spdadd 10.0.1.0/24 10.0.2.0/24 any -P out ipsec esp/tunnel/20.0.0.1-20.0.0.2/require ;
spdadd 10.0.2.0/24 10.0.1.0/24 any -P in ipsec esp/tunnel/20.0.0.2-20.0.0.1/require ;
EOF
</pre>

	<p>(&#12371;&#12398;&#38917;&#12399; Per Harald Myrvang &#12398;&#23492;&#36104;&#12395;&#12424;&#12427;&#12418;&#12398;&#12391;&#12377;)</p>
      
	<h4 class="title">
<a name="sample_leaftunnel"></a>&#35373;&#23450;&#20363;: &#33865;&#12494;&#12540;&#12489;&#12488;&#12531;&#12493;&#12523; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#12488;&#12531;&#12493;&#12523;&#12514;&#12540;&#12489;&#12399;&#12289;&#12354;&#12427;&#33865;&#12494;&#12540;&#12489;&#12363;&#12425;&#12398;&#20840;&#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#12434;&#27425;&#12507;&#12483;&#12503;&#12398;&#12523;&#12540;&#12479;&#12540;&#12414;&#12391;
	  &#26263;&#21495;&#21270;&#12375;&#12289;&#36870;&#12395;&#12523;&#12540;&#12479;&#12540;&#12363;&#12425;&#12398;&#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#12399;&#24179;&#25991;&#21270;&#12377;&#12427;&#12289;
	  &#12392;&#12356;&#12358;&#29366;&#27841;&#12391;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377; (&#12383;&#12392;&#12360;&#12400;&#12289; 802.11 WEP &#12391;&#12399;&#19981;&#21313;&#20998;&#12394;&#12398;&#12391;&#12289;
	  &#12527;&#12452;&#12516;&#12524;&#12473;&#12494;&#12540;&#12489;&#12363;&#12425;&#12523;&#12540;&#12479;&#12540;&#12414;&#12391;&#12398;&#38291;&#12391;&#20351;&#12358;&#12394;&#12393;) &#12290;</p>

	<p>&#33865;&#12494;&#12540;&#12489;&#12391;&#12399;&#12289;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#20351;&#12356;&#12414;&#12377;:</p>

	<pre class="programlisting">
#! /bin/sh
#
# the node is on 10.0.1.5, router is on 10.0.1.1
setkey -c &lt;&lt;EOF
add 10.0.1.1 10.0.1.5 esp 1011 -E rijndael-cbc "rijndaeltest.001" ;
add 10.0.1.5 10.0.1.1 esp 1012 -E rijndael-cbc 0xdeadbeefdeadbeefdeadbeefdeadbeef;
spdadd 10.0.1.5/32 0.0.0.0/0 any -P out ipsec esp/tunnel/10.0.1.5-10.0.1.1/require;
spdadd 0.0.0.0/0 10.0.1.5/32 any -P in ipsec esp/tunnel/10.0.1.1-10.0.1.5/require;
EOF
</pre>

	<p>&#12523;&#12540;&#12479;&#12540;&#12391;&#12399;&#12289; spdadd &#12467;&#12510;&#12531;&#12489;&#12398; <span class="quote">&#8220;<span class="quote">out</span>&#8221;</span> &#12392; <span class="quote">&#8220;<span class="quote">in</span>&#8221;</span>
	  &#12434;&#36870;&#12395;&#12375;&#12414;&#12377;&#12290;</p>
      
	<h4 class="title">
<a name="config_ike"></a>IKE&#12395;&#12424;&#12427;AH/ESP&#37749;&#12398;&#35373;&#23450; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#12414;&#12378;&#12399;&#19979;&#35352;&#12398;&#35373;&#23450;&#12395;&#12388;&#12356;&#12390;&#35500;&#26126;&#12375;&#12414;&#12377;:</p>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">&#12494;&#12540;&#12489; A &#12392; B &#12399;&#12488;&#12521;&#12531;&#12473;&#12509;&#12540;&#12488;&#12514;&#12540;&#12489; ESP &#12434;&#20351;&#12358;&#12290;
	  </li>
<li class="listitem">&#20001;&#31471;&#12391;&#12399;&#12289;&#12377;&#12409;&#12390;&#12398;&#12503;&#12525;&#12488;&#12467;&#12523;&#12395;&#12388;&#12356;&#12390;&#12497;&#12465;&#12483;&#12488;&#20132;&#25563;&#12395; ESP
	    &#12434;&#20351;&#12358;&#24517;&#35201;&#12364;&#12354;&#12427;&#12290;
	  </li>
<li class="listitem">IKE &#12395;&#12424;&#12427;&#38291;&#12399;&#12289;&#12494;&#12540;&#12489; A &#12392; B &#12399;&#12289;&#20849;&#26377;&#12373;&#12428;&#12383;&#31192;&#23494;&#37749;&#12398;&#20132;&#25563;&#12395;&#12424;&#12387;&#12390;&#12289;
	    &#12362;&#20114;&#12356;&#12395;&#35469;&#35388;&#12375;&#21512;&#12358;&#12290;
	  </li>
</ul></div>

	<p>&#12393;&#12358;&#12363;&#24910;&#37325;&#12395;&#19979;&#35352;&#12398;&#25163;&#38918;&#12434;&#12405;&#12435;&#12391;&#12367;&#12384;&#12373;&#12356;&#12290;
	  <a href="http://netbsd.gw.com/cgi-bin/man-cgi?tcpdump+8+NetBSD-6.0+i386">tcpdump(8)</a> &#12434;&#20351;&#12356;&#12289; 2 &#12494;&#12540;&#12489;&#38291;&#12391;&#12393;&#12398;&#12424;&#12358;&#12395;&#12497;&#12465;&#12483;&#12488;&#12364;&#20132;&#25563;&#12373;&#12428;&#12390;&#12356;&#12427;&#12363;&#35519;&#12409;&#12414;&#12377;&#12290;
	  <span class="quote">&#8220;<span class="quote"><code class="code">netstat -sn</code></span>&#8221;</span> &#12395;&#12424;&#12427;&#32113;&#35336;&#24773;&#22577;&#12418;&#12289;
	  &#12459;&#12540;&#12493;&#12523;&#12398; IPsec &#37096;&#12364;&#12393;&#12398;&#12424;&#12358;&#12395;&#21205;&#20316;&#12375;&#12390;&#12356;&#12427;&#12363;&#30693;&#12427;&#12383;&#12417;&#12395;&#26377;&#29992;&#12391;&#12377;&#12290;</p>

	<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<code class="code">/usr/share/examples/racoon/racoon.conf.sample</code> &#12434;
	    <code class="code">/etc/racoon/racoon.conf</code> &#12395;&#12467;&#12500;&#12540;&#12375;&#12414;&#12377;&#12290;
	    &#24517;&#35201;&#12395;&#24540;&#12376;&#12390; <code class="code">racoon.conf</code> &#20013;&#12398;&#12497;&#12521;&#12513;&#12540;&#12479;&#12540;&#12434;&#20462;&#27491;&#12375;&#12414;&#12377;&#12290;
	    &#20001;&#31471;&#12391;&#21516;&#19968;&#12398;&#35373;&#23450;&#12434;&#20351;&#12358;&#12371;&#12392;&#12364;&#12289; *&#38750;&#24120;&#12395;* &#37325;&#35201;&#12391;&#12377; -
	    &#20001;&#32773;&#12398; racoon.conf &#12398;&#24046;&#30064;&#12364;&#12394;&#12356;&#12424;&#12358;&#12395;&#12375;&#12394;&#12369;&#12428;&#12400;&#12356;&#12369;&#12414;&#12379;&#12435;&#12290;
	  </li>
<li class="listitem"> racoon &#12399;&#12289; IPsec &#37749;&#12398;&#20132;&#28169;&#12434;&#12377;&#12427;&#38555;&#12289;&#12459;&#12540;&#12493;&#12523;&#12398;
	    IPsec &#12509;&#12522;&#12471;&#12540;&#12398;&#35373;&#23450;&#12395;&#24467;&#12356;&#12414;&#12377;&#12290;
	    &#12375;&#12383;&#12364;&#12387;&#12390;&#12289; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?setkey+8+NetBSD-6.0+i386">setkey(8)</a> &#12434;&#20351;&#12356;&#12289;&#12459;&#12540;&#12493;&#12523;&#12398; IPsec &#12509;&#12522;&#12471;&#12540;&#12434;
	    &#35373;&#23450;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290;
	    &#12494;&#12540;&#12489; A &#12391;&#12398; IPsec &#12509;&#12522;&#12471;&#12540;&#12398;&#35373;&#23450;&#12399;&#27425;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290;
	    &#12371;&#12398;&#20363;&#12395;&#12362;&#12356;&#12390;&#12289; <span class="quote">&#8220;<span class="quote">A</span>&#8221;</span> &#12392; <span class="quote">&#8220;<span class="quote">B</span>&#8221;</span> &#12399; IPv4/v6 &#12398;&#25968;&#23383;&#12450;&#12489;&#12524;&#12473;&#12391;&#12377;&#12290;
	    <pre class="programlisting">
A# setkey -c
spdadd A B any -P out ipsec esp/transport//require;
spdadd B A any -P in ipsec esp/transport//require;
^D
</pre>
	  </li>
<li class="listitem">&#12494;&#12540;&#12489; B &#12391;&#12398; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?setkey+8+NetBSD-6.0+i386">setkey(8)</a> &#12434;&#20351;&#12387;&#12383; IPsec &#12509;&#12522;&#12471;&#12540;&#12398;&#35373;&#23450;&#12399;&#27425;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;:
	    <pre class="programlisting">
B# setkey -c
spdadd B A any -P out ipsec esp/transport//require;
spdadd A B any -P in ipsec esp/transport//require;
^D
</pre>
	  </li>
<li class="listitem">&#20001;&#12494;&#12540;&#12489;&#12395;&#12362;&#12356;&#12390;&#12289;&#12354;&#12425;&#12363;&#12376;&#12417;&#20849;&#26377;&#12373;&#12428;&#12383;&#37749;&#12501;&#12449;&#12452;&#12523;&#12434;&#29992;&#24847;&#12375;&#12414;&#12377;&#12290;
	    &#12501;&#12449;&#12452;&#12523;&#12398;&#12497;&#12540;&#12511;&#12483;&#12471;&#12519;&#12531;&#12434;&#36969;&#20999;&#12395;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364; <span class="bold"><strong>&#38750;&#24120;&#12395;</strong></span>
	    &#37325;&#35201;&#12391;&#12377;&#12290;&#12373;&#12418;&#12394;&#12369;&#12428;&#12400; IPsec &#12434;&#20351;&#12358;&#24847;&#21619;&#12364;&#12354;&#12426;&#12414;&#12379;&#12435; - CPU &#26178;&#38291;&#12434;
	    &#28961;&#39364;&#12395;&#20351;&#12358;&#12384;&#12369;&#12395;&#12394;&#12387;&#12390;&#12375;&#12414;&#12356;&#12414;&#12377;
	    (<a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12399;&#12289;&#19981;&#36969;&#20999;&#12394;&#12497;&#12540;&#12511;&#12483;&#12471;&#12519;&#12531;&#12434;&#25345;&#12388;&#12501;&#12449;&#12452;&#12523;&#12399;
	    &#35501;&#12415;&#36796;&#12415;&#12414;&#12379;&#12435;) &#12290;
	    &#32368;&#12426;&#36820;&#12375;&#12414;&#12377;&#12364;&#12289; <span class="quote">&#8220;<span class="quote">A</span>&#8221;</span> &#12392; <span class="quote">&#8220;<span class="quote">B</span>&#8221;</span> &#12399; IPv4/v6 &#12398;&#25968;&#23383;&#12450;&#12489;&#12524;&#12473;&#12391;&#12377;&#12290;
	    <pre class="programlisting">
A# cat &gt;/etc/racoon/psk.txt
B       spamspamspam
^D
A# chmod 600 /etc/racoon/psk.txt

B# cat &gt;/etc/racoon/psk.txt
A       spamspamspam
^D
B# chmod 600 /etc/racoon/psk.txt
</pre>
	  </li>
<li class="listitem">
<code class="code">racoon</code> &#12434;&#23455;&#34892;&#12375;&#12414;&#12377;&#12290;
	    &#12487;&#12496;&#12483;&#12464;&#12488;&#12524;&#12540;&#12473;&#12434;&#35211;&#12383;&#12356;&#22580;&#21512;&#12399;&#12289;&#19979;&#35352;&#12398;&#12424;&#12358;&#12394;&#24341;&#25968;&#12434;&#21462;&#12426;&#12414;&#12377;:
	    <pre class="programlisting">
# racoon -f /etc/racoon/racoon.conf -dddddd
</pre>
	  </li>
<li class="listitem">A &#12392; B &#12398;&#38291;&#12391;&#12497;&#12465;&#12483;&#12488;&#12434;&#20132;&#25563;&#12375;&#12390;&#12415;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	    racoon &#12398;&#12513;&#12483;&#12475;&#12540;&#12472;&#12364;&#12467;&#12531;&#12477;&#12540;&#12523;&#12395;&#20986;&#12390;&#12289;
	    &#37749;&#12364;&#30906;&#31435;&#12373;&#12428;&#12414;&#12377;&#12290;
	    <pre class="programlisting">
A# ping -n B
(&#12375;&#12400;&#12425;&#12367;&#12375;&#12390;&#12363;&#12425;&#12289;&#24540;&#31572;&#12364;&#35211;&#12425;&#12428;&#12427;&#12391;&#12375;&#12423;&#12358;)
^C
A# setkey -D
(racoon &#12391;&#20132;&#25563;&#12373;&#12428;&#12383;&#37749;&#12364;&#35211;&#12425;&#12428;&#12427;&#12391;&#12375;&#12423;&#12358;)
</pre>
	  </li>
</ol></div>

	<p>racoon &#12399;&#12289;&#12509;&#12522;&#12471;&#12540;&#23450;&#32681;&#12395;&#22522;&#12389;&#12356;&#12390;&#37749;&#12434;&#20132;&#28169;&#12375;&#12414;&#12377;&#12290;
	  &#12509;&#12522;&#12471;&#12540;&#23450;&#32681;&#12434;&#22793;&#26356;&#12377;&#12427;&#12371;&#12392;&#12391;&#12289;&#12371;&#12428;&#20197;&#22806;&#12398;&#12465;&#12540;&#12473;&#12395;&#23550;&#12375;&#12390;&#12418;&#23481;&#26131;&#12395;&#35373;&#23450;&#12391;&#12365;&#12414;&#12377;&#12290;
	  &#27425;&#12398;&#20363;&#12399;&#12289;&#19979;&#35352;&#12398;&#29366;&#27841;&#21521;&#12369;&#12395;&#37749;&#12434;&#35373;&#23450;&#12377;&#12427;&#12418;&#12398;&#12391;&#12377;:</p>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">A &#12399;&#12513;&#12540;&#12523;&#12469;&#12540;&#12496;&#12540;&#12290;
	    A &#12399;&#12289; A &#12395; POP &#12503;&#12525;&#12488;&#12467;&#12523; (TCP &#12509;&#12540;&#12488; 110) &#12391;&#25509;&#35302;&#12377;&#12427;
	    &#12377;&#12409;&#12390;&#12398;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12395;&#12289;&#12488;&#12521;&#12531;&#12473;&#12509;&#12540;&#12488;&#12514;&#12540;&#12489; AH &#12434;&#20351;&#12431;&#12379;&#12383;&#12356;&#12290;
	    B &#12399;&#12289; A &#12392;&#25509;&#35302;&#12375;&#12383;&#12356;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12290;
	    <div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">A &#12391;&#12398;&#12509;&#12522;&#12471;&#12540;&#35373;&#23450;&#12399;&#12289;&#12525;&#12540;&#12459;&#12523;&#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#12395;&#23550;&#12375;&#12390;&#12399; AH &#12434;&#20351;&#12356;&#12414;&#12379;&#12435;
	        (racoon &#12399;&#33258;&#20998;&#33258;&#36523;&#12392;&#12399;&#37749;&#12398;&#20132;&#28169;&#12434;&#12391;&#12365;&#12394;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;)&#12290;
	        &#12509;&#12522;&#12471;&#12540;&#12398;&#38918;&#24207;&#12399;&#12383;&#12356;&#12408;&#12435;&#37325;&#35201;&#12391;&#12377;&#12290;
	        &#12371;&#12398;&#38918;&#24207;&#12434;&#22793;&#12360;&#12427;&#12392;&#12289;&#12371;&#12398;&#35373;&#23450;&#12399;&#27231;&#33021;&#12375;&#12394;&#12367;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;
	        <pre class="programlisting">
A# setkey -c
spdadd A[110] A tcp -P out none;
spdadd A A[110] tcp -P in none;
spdadd A[110] 0.0.0.0/0 tcp -P out ipsec ah/transport//require;
spdadd 0.0.0.0/0 A[110] tcp -P in ipsec ah/transport//require;
^D

B# setkey -c
spdadd B A[110] tcp -P out ipsec ah/transport//require;
spdadd A[110] B tcp -P in ipsec ah/transport//require;
^D
</pre>
	      </li>
<li class="listitem">&#12509;&#12522;&#12471;&#12540;&#35373;&#23450;&#20197;&#22806;&#12398;&#37096;&#20998;&#12399;&#12289;&#21069;&#12398;&#20363;&#12392;&#21516;&#27096;&#12395;&#35373;&#23450;&#12375;&#12414;&#12377;&#12290;
	      </li>
</ol></div>
	  </li></ul></div>

	<p>&#35373;&#23450;&#12377;&#12427;&#12358;&#12360;&#12391;&#12394;&#12395;&#12363;&#21839;&#38988;&#12364;&#12354;&#12387;&#12383;&#12425;&#12289;&#12501;&#12523;&#12487;&#12496;&#12483;&#12464;&#12525;&#12464; (racoon -dddddd)
	  &#12434;&#12375;&#12387;&#12363;&#12426;&#35211;&#12390;&#12289;&#12393;&#12371;&#12364;&#21407;&#22240;&#12363;&#35519;&#12409;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  &#12356;&#12363;&#12394;&#12427;&#35373;&#23450;&#12398;&#36949;&#12356;&#12418;&#12289;&#20132;&#28169;&#12398;&#22833;&#25943;&#12395;&#12388;&#12394;&#12364;&#12426;&#12414;&#12377;&#12290;</p>
      
	<h4 class="title">
<a name="configboot"></a>&#12502;&#12540;&#12488;&#36942;&#31243;&#12391; IPsec &#25163;&#21205;&#37749;&#12392;&#12509;&#12522;&#12471;&#12540;&#12434;&#35373;&#23450;&#12377;&#12427; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p><a href="http://netbsd.gw.com/cgi-bin/man-cgi?rc.conf+5+NetBSD-6.0+i386">rc.conf(5)</a> &#12395;&#12399;&#12289; <span class="quote">&#8220;<span class="quote"><code class="code">ipsec</code></span>&#8221;</span> &#12392;&#12356;&#12358; IPsec &#29992;&#12398;&#12456;&#12531;&#12488;&#12522;&#12540;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	  <code class="code">ipsec=YES</code> &#12392;&#12377;&#12427;&#12392;&#12289;&#12502;&#12540;&#12488;&#26178;&#12395;&#12289;&#12377;&#12409;&#12390;&#12398;&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;&#12364;&#26377;&#21177;&#12395;&#12394;&#12387;&#12390;&#12363;&#12425;
	  &#27425;&#12398;&#12467;&#12510;&#12531;&#12489;&#12434;&#23455;&#34892;&#12375;&#12414;&#12377;:</p>

	<pre class="programlisting">
/sbin/setkey -f /etc/ipsec.conf
</pre>

	<p>&#12383;&#12392;&#12360;&#12400;&#12289; /usr &#12434;&#26263;&#21495;&#21270;&#12375;&#12390; NFS &#12510;&#12454;&#12531;&#12488;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;

	  <code class="code">/etc/ipsec.conf</code> &#12398;&#20869;&#23481;&#12399;&#12289;&#27491;&#24403;&#12394; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?setkey+8+NetBSD-6.0+i386">setkey(8)</a> &#12467;&#12510;&#12531;&#12489;&#12391;&#12394;&#12369;&#12428;&#12400;
	  &#12394;&#12426;&#12414;&#12379;&#12435;; &#19978;&#35352;&#12398;&#35373;&#23450;&#20363;&#12363;&#12425;&#12289; <code class="code">setkey -c &lt;&lt;EOF</code> &#12392; <code class="code">EOF</code>
	  &#12398;&#37096;&#20998;&#12434;&#38500;&#12356;&#12383;&#37096;&#20998;&#12398;&#12424;&#12358;&#12395;&#12375;&#12414;&#12377;&#12290;</p>
      
	<h4 class="title">
<a name="ipf-interaction"></a>ipfilter &#12392;&#12398;&#30456;&#20114;&#12398;&#24433;&#38911; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>NetBSD &#12399;&#12289; Darren Reed &#12395;&#12424;&#12427; ipfilter&#12289; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf+4+NetBSD-6.0+i386">ipf(4)</a> &#12434;&#23455;&#35013;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	  <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf+4+NetBSD-6.0+i386">ipf(4)</a> &#12399;&#12497;&#12465;&#12483;&#12488;&#12434;&#12405;&#12427;&#12356;&#12395;&#12363;&#12369;&#12289;&#12414;&#12383;&#12289; IPsec &#12509;&#12522;&#12471;&#12540;&#12398;&#20316;&#29992;&#12399;&#26412;&#36074;&#30340;&#12395;
	  &#12497;&#12465;&#12483;&#12488;&#12501;&#12451;&#12523;&#12479;&#12540;&#12392;&#21516;&#12376;&#12418;&#12398;&#12391;&#12377;&#12290;
	  &#12375;&#12383;&#12364;&#12387;&#12390;&#12289;&#12371;&#12428;&#12425;&#12398;&#23455;&#35013;&#12399;&#27231;&#33021;&#30340;&#12395;&#34909;&#31361;&#12375;&#12414;&#12377;&#12290;
	  <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf+4+NetBSD-6.0+i386">ipf(4)</a>/IPsec &#30456;&#20114;&#12398;&#24433;&#38911;&#12399;&#12289;&#20197;&#19979;&#12398;&#12392;&#12362;&#12426;&#12392;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;:
	  <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf+4+NetBSD-6.0+i386">ipf(4)</a> &#12399;&#12289;&#12493;&#12452;&#12486;&#12451;&#12502;&#12398;&#12527;&#12452;&#12516;&#12540;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12398;&#12497;&#12465;&#12483;&#12488;&#12398;&#12415;&#12434;&#30435;&#35222;&#12375;&#12414;&#12377;&#12290;
	  <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf+4+NetBSD-6.0+i386">ipf(4)</a> &#12399;&#12289;&#20837;&#12387;&#12390;&#12367;&#12427;&#12497;&#12465;&#12483;&#12488;&#12399; IPsec &#12398;&#20966;&#29702;&#21069;&#12398;&#12418;&#12398;&#12434;&#12289;
	  &#20986;&#12390;&#12422;&#12367;&#12497;&#12465;&#12483;&#12488;&#12399; IPsec &#12398;&#20966;&#29702;&#24460;&#12398;&#12418;&#12398;&#12434;&#30435;&#35222;&#12375;&#12414;&#12377;&#12290;</p>

	<p>&#12371;&#12398;&#20966;&#29702;&#38918;&#24207;&#12398;&#12418;&#12392;&#12391;&#12418;&#12289;&#20197;&#19979;&#12398;&#12371;&#12392;&#12434;&#30693;&#12387;&#12390;&#12362;&#12356;&#12390;&#12367;&#12384;&#12373;&#12356;:</p>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">IPsec &#12497;&#12465;&#12483;&#12488;&#12395; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf+4+NetBSD-6.0+i386">ipf(4)</a> &#12434;&#36890;&#36942;&#12373;&#12379;&#12383;&#12367;&#12390;&#12418;&#12289;&#12371;&#12428;&#12434; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf+4+NetBSD-6.0+i386">ipf(4)</a> &#12523;&#12540;&#12523;&#12363;&#12425;
	    &#22806;&#12377;&#12409;&#12365;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;
	    IP &#12497;&#12465;&#12483;&#12488;&#12395;&#36969;&#20999;&#12394;&#36890;&#36942;&#12503;&#12525;&#12488;&#12467;&#12523;&#30058;&#21495; (ESP &#12399; 50&#12289; AH &#12399; 51)
	    &#12434;&#25391;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;

	    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">&#27880;&#24847;</h3>
	      
	      <p>&#12503;&#12525;&#12488;&#12467;&#12523;&#30058;&#21495;&#12399;&#12289; TCP/UDP &#12509;&#12540;&#12488;&#30058;&#21495;&#12392;&#12399;&#12414;&#12387;&#12383;&#12367;&#12398;&#21029;&#29289;&#12391;&#12377;&#12290;</p>
	    </div>
	  </li>
<li class="listitem">&#12488;&#12531;&#12493;&#12523;&#12487;&#12496;&#12452;&#12473; (<a href="http://netbsd.gw.com/cgi-bin/man-cgi?gif+4+NetBSD-6.0+i386">gif(4)</a> &#12362;&#12424;&#12403; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipip+4+NetBSD-6.0+i386">ipip(4)</a>) &#12363;&#12425;&#26469;&#12427;&#12497;&#12465;&#12483;&#12488;&#12399;&#12289;&#20381;&#28982;&#12392;&#12375;&#12390;
	    <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf+4+NetBSD-6.0+i386">ipf(4)</a> &#12434;&#36890;&#36942;&#12375;&#12414;&#12377;&#12290;
	    &#12371;&#12428;&#12425;&#12398;&#12497;&#12465;&#12483;&#12488;&#12395;&#12399;&#12289; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf.conf+5+NetBSD-6.0+i386">ipf.conf(5)</a> &#12391;&#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12540;&#12473;&#21517;&#12487;&#12451;&#12524;&#12463;&#12486;&#12451;&#12502;&#12434;
	    &#20351;&#12387;&#12390;&#35211;&#20998;&#12369;&#12427;&#12424;&#12358;&#12395;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#12290;
	  </li>
</ul></div>
      
	<h4 class="title">
<a name="procorder"></a>&#20966;&#29702;&#38918;&#24207; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#19979;&#35352;&#12398;&#22259;&#12399;&#12289;&#21463;&#20449;&#20596;&#12398;&#26032;&#12375;&#12356;&#20966;&#29702;&#38918;&#24207;&#12434;&#12414;&#12392;&#12417;&#12383;&#12418;&#12398;&#12391;&#12377;&#12290;</p>

	<pre class="programlisting">
&#20837;&#12387;&#12390;&#12367;&#12427;&#22580;&#21512;&#12398;&#20966;&#29702;:
        userland programs               IKE daemon
          ^ AF_INET{,6} socket            ^ | PF_KEY socket
========= | ============================= | | ======== Kernel/user boundary
          |                               | v
        transport layer, TCP/UDP        key management table
          ^                               ^ | key information
          |                               | |
          |                               | v
  +-----IP input/output logic &lt;-------&gt; AH/ESP/IPcomp logic
  v       ^          ^                      |
tunnel    |          +----------------------+ decapsulated IPsec packets
devices   |
  |     ipfilter rule
  |       ^
  +------&gt;|
          |
        Network drivers (ethernet)
</pre>

	<p>&#19979;&#35352;&#12398;&#22259;&#12399;&#12289;&#36865;&#20449;&#20596;&#12398;&#26032;&#12375;&#12356;&#20966;&#29702;&#38918;&#24207;&#12434;&#12414;&#12392;&#12417;&#12383;&#12418;&#12398;&#12391;&#12377;&#12290;</p>

	<pre class="programlisting">
&#20986;&#12390;&#12422;&#12367;&#22580;&#21512;&#12398;&#20966;&#29702;:
        userland programs               IKE daemon
            | AF_INET{,6} socket          ^ | PF_KEY socket
=========== | =========================== | | ======== Kernel/user boundary
            v                             | v
        transport layer, TCP/UDP        key management table
            |                             ^ | key information
            |                             | |
            v                             | v
  +----&gt;IP input/output logic &lt;-------&gt; AH/ESP/IPcomp logic
  |         |                           (incl. IPsec tunnel encapsulation)
tunnel      |
devices     |
  |     ipfilter rules
  |         |
  +---------+
            v
        Network drivers (ethernet)
</pre>
      
	<h4 class="title">
<a name="pitfalls"></a>&#12354;&#12426;&#12364;&#12385;&#12394;&#33853;&#12392;&#12375;&#31348;&#12392;&#12289;&#12487;&#12496;&#12483;&#12464;&#12398;&#25216;&#24039; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">&#19979;&#35352;&#12398;&#19977;&#12388;&#12398;&#12418;&#12398;&#12434;&#28151;&#21516;&#12375;&#12390;&#12356;&#12427;&#20154;&#12383;&#12385;&#12364;&#12356;&#12414;&#12377;&#12290;
	    &#20182;&#12398;&#23455;&#35013;&#12392;&#12398;&#30456;&#20114;&#36939;&#29992;&#12434;&#12375;&#12424;&#12358;&#12392;&#12377;&#12427;&#22580;&#21512;&#12395;&#12399;&#12289;&#12371;&#12428;&#12425;&#12434;&#28151;&#21516;&#12375;&#12394;&#12356;&#12424;&#12358;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	    &#12418;&#12375;&#12371;&#12428;&#12425;&#12434;&#28151;&#21516;&#12375;&#12390;&#12356;&#12383;&#12425;&#12289;&#30456;&#20114;&#36939;&#29992;&#12398;&#35373;&#23450;&#12394;&#12393;&#27704;&#36960;&#12395;
	    &#12391;&#12365;&#12394;&#12356;&#12391;&#12375;&#12423;&#12358;&#12290;
	    &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12391;&#12418;&#12289;&#12371;&#12428;&#12425;&#12434;&#38291;&#36949;&#12387;&#12383;&#29992;&#35486;&#12391;&#20351;&#12387;&#12390;&#12356;&#12427;&#12371;&#12392;&#12364;&#12354;&#12426;&#12414;&#12377; (&#12399;&#12354;&#8230;) &#12290;
	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
<span class="bold"><strong>IPsec with manual key (&#25163;&#21205;&#37749;&#12395;&#12424;&#12427; IPsec)</strong></span><br>
	        NetBSD &#12398;&#22580;&#21512;&#12289;&#12371;&#12398;&#26041;&#27861;&#12399;&#12289; IPsec &#31192;&#23494;&#37749;&#12398;&#35373;&#23450;&#12395;
	        <a href="http://netbsd.gw.com/cgi-bin/man-cgi?setkey+8+NetBSD-6.0+i386">setkey(8)</a> &#12434;&#20351;&#12356;&#12414;&#12377;&#12290;
	        IPsec &#31192;&#23494;&#37749;&#12399;&#26178;&#38291;&#12364;&#32076;&#12387;&#12390;&#12418;&#22793;&#26356;&#12373;&#12428;&#12414;&#12379;&#12435;&#12290;
	      </li>
<li class="listitem">
<span class="bold"><strong>IPsec with IKE, with pre-shared secret (&#12354;&#12425;&#12363;&#12376;&#12417;&#27770;&#12417;&#12383;&#25991;&#23383;&#21015;&#12434;&#20351;&#12387;&#12383; IKE &#12395;&#12424;&#12427; IPsec)</strong></span><br>
	        NetBSD &#12398;&#22580;&#21512;&#12289;&#12371;&#12428;&#12399; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12434;&#20351;&#12356;&#12414;&#12377;&#12290;
	        &#12354;&#12425;&#12363;&#12376;&#12417;&#27770;&#12417;&#12383;&#25991;&#23383;&#21015;&#12395;&#12424;&#12387;&#12390;&#36890;&#20449;&#30456;&#25163;&#12392;&#12398;&#35469;&#35388;&#12434;&#12375;&#12414;&#12377;&#12290;
	        <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12399; IPsec &#37749;&#12434;&#21205;&#30340;&#12395;&#20132;&#28169;&#12375;&#12390;&#12289;
	        &#12381;&#12428;&#12434;&#12459;&#12540;&#12493;&#12523;&#12452;&#12531;&#12473;&#12488;&#12540;&#12523;&#12375;&#12414;&#12377;&#12290;
	        IPsec &#31192;&#23494;&#37749;&#12399;&#23450;&#26399;&#30340;&#12395;&#22793;&#26356;&#12373;&#12428;&#12414;&#12377;&#12290;
	      </li>
<li class="listitem">
<span class="bold"><strong>IPsec with IKE, with certificates (&#35388;&#26126;&#26360;&#12434;&#20351;&#12387;&#12383; IKE &#12395;&#12424;&#12427; IPsec)</strong></span><br>
	        NetBSD &#12398;&#22580;&#21512;&#12289;&#12371;&#12428;&#12399; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12434;&#20351;&#12356;&#12414;&#12377;&#12290;
	        &#35388;&#26126;&#26360;&#12501;&#12449;&#12452;&#12523;&#12395;&#12424;&#12387;&#12390;&#36890;&#20449;&#30456;&#25163;&#12392;&#12398;&#35469;&#35388;&#12434;&#12375;&#12414;&#12377;&#12290;
	        <a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12399; IPsec &#37749;&#12434;&#21205;&#30340;&#12395;&#20132;&#28169;&#12375;&#12390;&#12289;
	        &#12381;&#12428;&#12434;&#12459;&#12540;&#12493;&#12523;&#12452;&#12531;&#12473;&#12488;&#12540;&#12523;&#12375;&#12414;&#12377;&#12290;
	        IPsec &#31192;&#23494;&#37749;&#12399;&#23450;&#26399;&#30340;&#12395;&#22793;&#26356;&#12373;&#12428;&#12414;&#12377;&#12290;
	      </li>
</ul></div>
	  </li>
<li class="listitem">IPsec &#12398;&#35373;&#23450;&#12399;&#12289; *&#23481;&#26131;&#12394;&#12418;&#12398;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;* &#12290;
	    &#12358;&#12414;&#12367;&#20351;&#12358;&#12383;&#12417;&#12395;&#12399;&#22810;&#12367;&#12398;&#38556;&#23475;&#12364;&#12354;&#12426;&#12414;&#12377;&#12375;&#12289; IPsec &#12398;&#12418;&#12388;&#30423;&#32884;&#12408;&#12398;
	    &#23550;&#25239;&#24615;&#12422;&#12360;&#12395;&#12487;&#12496;&#12483;&#12464;&#12399;&#38750;&#24120;&#12395;&#38627;&#12375;&#12356;&#12418;&#12398;&#12391;&#12377;&#12290;&#12497;&#12465;&#12483;&#12488;&#12488;&#12524;&#12540;&#12473;&#12434;&#12418;&#12392;&#12395;
	    &#20309;&#12364;&#36215;&#12365;&#12390;&#12356;&#12427;&#12363;&#25512;&#28204;&#12377;&#12427;&#12371;&#12392;&#12399;&#12289;&#22522;&#26412;&#30340;&#12395;&#12391;&#12365;&#12414;&#12379;&#12435;&#12290;
	    &#35373;&#23450;&#12375;&#12424;&#12358;&#12392;&#12377;&#12427;&#21069;&#12395;&#12289;&#26412;&#12420;&#27161;&#28310;&#25991;&#26360;/RFC &#12434;&#35501;&#12416;&#12394;&#12426;&#12289;&#12467;&#12531;&#12469;&#12523;&#12479;&#12531;&#12488;&#12434;
	    &#38599;&#12358;&#12394;&#12426;&#20309;&#12394;&#12426;&#12377;&#12427;&#12424;&#12358;&#12395;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  </li>
<li class="listitem">&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;&#12398;&#12487;&#12496;&#12483;&#12464;&#12395;&#12399;&#12289;&#24120;&#12395; tcpdump &#12434;&#36208;&#12425;&#12379;&#12414;&#12377;&#12290;
	    &#12383;&#12392;&#12360;&#12488;&#12521;&#12501;&#12451;&#12483;&#12463;&#12364;&#26263;&#21495;&#21270;&#12373;&#12428;&#12390;&#12356;&#12390;&#12418;&#12289;&#12497;&#12465;&#12483;&#12488;&#12364;&#23455;&#38555;&#12395;&#32076;&#36335;&#19978;&#12395;
	    &#12354;&#12427;&#12363;&#12393;&#12358;&#12363;&#12398;&#24773;&#22577;&#12399;&#24471;&#12425;&#12428;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;
	  </li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?netstat+1+NetBSD-6.0+i386">netstat(1)</a> &#12399;&#12354;&#12394;&#12383;&#12398;&#21619;&#26041;&#12391;&#12377;&#12290;
	    <code class="code">netstat -sn</code> &#12434;&#23455;&#34892;&#12375;&#12390; IPsec &#12497;&#12465;&#12483;&#12488;&#12398;&#25968;&#12434;&#30906;&#35469;&#12375;&#12414;&#12377;&#12290;
	  </li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12398;&#23455;&#34892;&#12391;&#21839;&#38988;&#12364;&#12354;&#12387;&#12383;&#12425;&#12289;&#26368;&#22823;&#38480;&#12398;
	    &#12487;&#12496;&#12483;&#12464;&#20986;&#21147;&#12434;&#12377;&#12427;&#12424;&#12358;&#12395;&#12375;&#12390;&#23455;&#34892;&#12375;&#12289;&#12381;&#12398;&#20986;&#21147;&#12434;&#35211;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	    (&#12467;&#12510;&#12531;&#12489;&#12521;&#12452;&#12531;&#24341;&#25968; <code class="code">-dddddd</code>)
	  </li>
<li class="listitem">&#12354;&#12394;&#12383;&#12398; NetBSD &#12487;&#12496;&#12452;&#12473;&#12399;&#12289;&#36890;&#20449;&#30456;&#25163;&#12398;&#12487;&#12496;&#12452;&#12473;&#12392;&#12398;&#30456;&#20114;&#36939;&#29992;&#12398;&#12383;&#12417;&#12289;
	    &#38291;&#36949;&#12356;&#12394;&#12367;&#26412;&#24403;&#12395;<span class="bold"><strong>&#21427;&#23494;&#12395;&#21516;&#19968;</strong></span>&#12395;&#35373;&#23450;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	    &#12497;&#12465;&#12483;&#12488;&#12399;&#12289;&#30456;&#25163;&#26041;&#12364;&#26399;&#24453;&#12375;&#12390;&#12356;&#12427;&#12418;&#12398;&#12392;&#21427;&#23494;&#12395;&#21516;&#19968;&#12398;&#12503;&#12525;&#12488;&#12467;&#12523;&#12392;
	    &#26263;&#21495;&#21270;&#12450;&#12523;&#12468;&#12522;&#12474;&#12512;&#12395;&#12424;&#12387;&#12390;&#29983;&#25104;&#12373;&#12428;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290;
	    &#12371;&#12428;&#12364;&#12391;&#12365;&#12390;&#12356;&#12394;&#12356;&#12392;&#12289;&#36861;&#36321;&#12377;&#12427;&#12371;&#12392;&#12364;&#38750;&#24120;&#12395;&#38627;&#12375;&#12356;&#12456;&#12521;&#12540;&#12395;&#35211;&#33310;&#12431;&#12428;&#12414;&#12377;&#12290;
	    IPsec &#12395;&#12362;&#12356;&#12390;&#12399;&#12289;&#26263;&#21495;&#21270;/&#35469;&#35388;&#12398;&#22833;&#25943;&#12399;&#12497;&#12465;&#12483;&#12488;&#12398;&#27424;&#33853;&#12392;&#12375;&#12390;&#29694;&#12428;&#12414;&#12377;&#12290;
	    &#12371;&#12398;&#12383;&#12417;&#12289;&#35373;&#23450;&#12434;&#22833;&#25943;&#12377;&#12427;&#12392;&#12289;&#12497;&#12465;&#12483;&#12488;&#12364;&#12456;&#12521;&#12540;&#34920;&#31034;&#12434;&#20276;&#12431;&#12378;&#12395;
	    &#28040;&#12360;&#12390;&#12394;&#12367;&#12394;&#12427;&#12371;&#12392;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290;
	    &#12371;&#12398;&#12497;&#12465;&#12483;&#12488;&#12398;&#20869;&#23481;&#12399;&#12289;&#12377;&#12391;&#12395;&#35299;&#35501;&#19981;&#33021;&#12395;&#12394;&#12387;&#12390;&#12356;&#12427;&#12398;&#12391;&#12289;
	    <a href="http://netbsd.gw.com/cgi-bin/man-cgi?tcpdump+8+NetBSD-6.0+i386">tcpdump(8)</a> &#12399;&#12383;&#12356;&#12375;&#12390;&#24441;&#12395;&#31435;&#12385;&#12414;&#12379;&#12435;&#12290;
	    &#20182;&#12398;&#30456;&#25163;&#26041;&#12434;&#20276;&#12358;&#35373;&#23450;&#12399;&#12289;&#12367;&#12428;&#12368;&#12428;&#12418;&#24910;&#37325;&#12395;&#12377;&#12427;&#12424;&#12358;&#12395;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  </li>
<li class="listitem">IKE &#20132;&#28169;&#12399; net.key.larval_lifetime sysctl MIB (&#12487;&#12501;&#12457;&#12523;&#12488;&#12391;&#12399; 30 &#31186;)
	    &#12398;&#31684;&#22258;&#20869;&#12391;&#23436;&#20102;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12394;&#12356;&#12383;&#12417;&#12289;
	    &#36933;&#12356;&#12510;&#12471;&#12531;&#12391;&#12399;&#37749;&#12398;&#20132;&#28169;&#12364;&#12391;&#12365;&#12394;&#12356;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#12290;
	    &#26412;&#24403;&#12395;&#36933;&#12356;&#12510;&#12471;&#12531;&#12434;&#12362;&#20351;&#12356;&#12394;&#12425;&#12289;&#12371;&#12398;&#22793;&#25968;&#20516;&#12434;&#22679;&#12420;&#12375;&#12390;&#12415;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  </li>
</ul></div>
      
	<h4 class="title">
<a name="issues"></a>&#26082;&#30693;&#12398;&#21839;&#38988; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">&#12459;&#12540;&#12493;&#12523; IPsec &#12509;&#12522;&#12471;&#12540;&#12456;&#12531;&#12472;&#12531;&#12398;&#21046;&#38480;&#12398;&#12383;&#12417;&#12289;&#12488;&#12531;&#12493;&#12523;&#12514;&#12540;&#12489; AH
	    &#12399;&#12289;&#26399;&#24453;&#36890;&#12426;&#12395;&#12399;&#21205;&#20316;&#12375;&#12414;&#12379;&#12435;&#12290;
	    &#12488;&#12531;&#12493;&#12523;&#12514;&#12540;&#12489; AH &#12399;&#20351;&#12431;&#12394;&#12356;&#12424;&#12358;&#12395;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  </li>
<li class="listitem">IPsec &#12392; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf+4+NetBSD-6.0+i386">ipf(4)</a> &#12398;&#12467;&#12540;&#12489;&#12399;&#12289;&#12358;&#12414;&#12367;&#21332;&#35519;&#12375;&#12414;&#12379;&#12435;&#12290;
	    &#35443;&#32048;&#12399; <a class="ulink" href="#ipf-interaction" target="_top">"ipfilter &#12392;&#12398;&#30456;&#20114;&#12398;&#24433;&#38911;"</a>
	    &#12434;&#21442;&#29031;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  </li>
<li class="listitem">IPsec &#12509;&#12522;&#12471;&#12540;&#12523;&#12540;&#12523;&#12399;&#12289; tcp/udp &#20197;&#22806;&#12398;&#12503;&#12525;&#12488;&#12467;&#12523;&#20181;&#27096;&#12395;&#23550;&#12375;&#12390;&#12399;
	    &#21313;&#20998;&#12486;&#12473;&#12488;&#12373;&#12428;&#12390;&#12356;&#12414;&#12379;&#12435;&#12290;&#23433;&#20840;&#20596;&#12434;&#21462;&#12427;&#22580;&#21512;&#12395;&#12399;&#12503;&#12525;&#12488;&#12467;&#12523;
	    <span class="quote">&#8220;<span class="quote">any</span>&#8221;</span> (= &#12450;&#12489;&#12524;&#12473;&#12510;&#12483;&#12481;&#12398;&#12415;) &#12434;&#20351;&#12387;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;&#12371;&#12398;&#21839;&#38988;&#12399;&#12289;&#12377;&#12409;&#12390;&#12398;
	    &#12497;&#12465;&#12483;&#12488;&#12501;&#12451;&#12523;&#12479;&#12540;&#19968;&#33324;&#12395;&#12388;&#12356;&#12390;&#12356;&#12360;&#12427;&#12418;&#12398;&#12391;&#12377; - &#36890;&#24120;&#12398;&#12497;&#12465;&#12483;&#12488;&#12501;&#12451;&#12523;&#12479;&#12540;
	    &#35352;&#36848;&#12399;&#12289;&#12504;&#12483;&#12480;&#12540;&#12481;&#12455;&#12452;&#12531;&#12395;&#38306;&#12375;&#12390;&#12358;&#12414;&#12367;&#12405;&#12427;&#12414;&#12356;&#12414;&#12379;&#12435;&#12290;
	  </li>
</ul></div>
      
	<h4 class="title">
<a name="conformance"></a>&#27161;&#28310;&#21270;&#12289;&#20114;&#25563;&#24615;&#12408;&#12398;&#36969;&#21512; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>KAME&#12398;IPsec&#12398;&#23455;&#35013;(NetBSD&#12484;&#12522;&#12540;&#12395;&#21547;&#12417;&#12425;&#12428;&#12427;)&#12364;&#12289;&#26368;&#26032;&#12398;IPsec&#27161;&#28310;&#12395;&#36969;&#21512;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;
	  <a class="ulink" href="http://orange.kame.net/dev/cvsweb.cgi/kame/netbsd/sys/netinet6/IMPLEMENTATION" target="_top">KAME &#12398;
	    NetBSD &#23455;&#35013;&#12494;&#12540;&#12488;</a>
	  &#12395;&#12399;&#12289;&#23455;&#35013;&#12377;&#12427;&#12383;&#12417;&#12398;&#21253;&#25324;&#30340;&#12394;&#27161;&#28310;&#21270;&#25991;&#26360;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;</p>

	<p>&#20182;&#12398;&#23455;&#35013;&#12392;&#12398;&#20114;&#25563;&#24615;&#12364;&#12289;&#12373;&#12414;&#12374;&#12414;&#12394;&#22580;&#25152;&#12391;&#30906;&#35469;&#12373;&#12428;&#12414;&#12375;&#12383;&#12290;
	  <a class="ulink" href="http://orange.kame.net/dev/cvsweb.cgi/kame/netbsd/sys/netinet6/IMPLEMENTATION" target="_top">KAME &#12398;
	    NetBSD &#23455;&#35013;&#12494;&#12540;&#12488;</a>
	  &#12395;&#21547;&#12414;&#12428;&#12427;&#23455;&#35013;&#12399;&#12289;&#36942;&#21435;&#12395;&#20114;&#25563;&#24615;&#12399;&#30906;&#35469;&#12373;&#12428;&#12383;&#12418;&#12398;&#12391;&#12377;&#12290;
	  &#12375;&#12363;&#12375;&#12289;&#20114;&#25563;&#24615;&#12398;&#12486;&#12473;&#12488;&#24460;&#12395;&#12467;&#12540;&#12489;&#12399;&#22793;&#26356;&#12373;&#12428;&#12427;&#21487;&#33021;&#24615;&#12364;&#12354;&#12426;&#12414;&#12377;&#12398;&#12391;&#12289;&#20114;&#25563;&#24615;&#12364;&#12394;&#12367;&#12394;&#12387;&#12390;&#12356;&#12427;&#21487;&#33021;&#24615;&#12418;&#12354;&#12426;&#12414;&#12377;&#12398;&#12391;&#27880;&#24847;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;
	  NetBSD&#12487;&#12496;&#12452;&#12473;&#12392;peer&#12487;&#12496;&#12452;&#12473;&#12364;&#12354;&#12427;&#29305;&#23450;&#12398;&#27083;&#25104;&#12398;&#12415;&#12391;&#20114;&#25563;&#24615;&#12434;&#12392;&#12427;&#12371;&#12392;&#12418;&#21487;&#33021;&#12391;&#12377;&#12290;</p>

	<p>&#12418;&#12375;&#20182;&#12398;&#23455;&#35013;&#12391;NetBSD&#12487;&#12496;&#12452;&#12473;&#12434;&#35373;&#23450;&#12377;&#12427;&#22580;&#21512;&#12289;&#12381;&#12398;IPsec&#12398;&#20181;&#27096;/&#23455;&#35013;&#12395;&#12399;&#22810;&#12367;&#12398;&#38627;&#28857;&#12364;&#12354;&#12427;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  &#20114;&#25563;&#24615;&#12434;&#21462;&#12427;&#12383;&#12417;&#12395;&#12399;peer&#12398;&#12487;&#12496;&#12452;&#12473;&#12392;&#21516;&#12376;&#12487;&#12496;&#12452;&#12473;&#12391;NetBSD&#12487;&#12496;&#12452;&#12473;&#12398;&#27083;&#25104;&#12434;&#35373;&#23450;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;</p>
      
	<h4 class="title">
<a name="compatibility"></a>&#20182;&#12398;IPsec&#12473;&#12479;&#12483;&#12463;&#12392;&#12398;API&#20114;&#25563;&#24615; (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>IPsec&#12398;&#30693;&#35672;&#12364;&#12354;&#12426;&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;&#12398;&#12467;&#12540;&#12489;&#12434;&#26360;&#12365;&#12383;&#12356;&#12394;&#12425;&#12289;&#12354;&#12394;&#12383;&#12399;IPsec&#12503;&#12521;&#12483;&#12488;&#12501;&#12457;&#12540;&#12512;&#38291;&#12398;API&#20114;&#25563;&#24615;&#12395;&#12388;&#12356;&#12390;&#30693;&#12426;&#12383;&#12367;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;</p>

	<p>&#25105;&#12293;&#12399;&#12459;&#12540;&#12493;&#12523;&#20869;&#12395;&#37749;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12434;&#25805;&#20316;&#12377;&#12427;&#12383;&#12417;&#12395; RFC2367 PF_KEY API&#12434;&#25345;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;
	  &#12371;&#12398;API&#12398;&#22522;&#26412;&#30340;&#12394;&#37096;&#20998;&#12399;&#20182;&#12398;UNIX&#12505;&#12540;&#12473;&#12398;IPsec&#12473;&#12479;&#12483;&#12463;&#19978;&#12391;&#21033;&#29992;&#21487;&#33021;&#12391;&#12354;&#12426;&#12289;&#12381;&#12375;&#12390;&#12354;&#12427;&#31243;&#24230;(&#20363;&#12360;&#12400;&#12289;OpenBSD&#12364;&#21516;&#27096;&#12395;PF_KEY API&#12434;&#23455;&#34892;&#12377;&#12427;)&#12398;&#20114;&#25563;&#24615;&#12364;&#12354;&#12427;&#12363;&#12418;&#30693;&#12428;&#12414;&#12379;&#12435;&#12290;
	  &#12363;&#12417;IPsec&#12473;&#12479;&#12483;&#12463;&#12364;&#12289;&#20182;&#12398;&#12464;&#12523;&#12540;&#12503;&#12364;&#12381;&#12358;&#12377;&#12427;&#12398;&#12392;&#21516;&#12376;&#12424;&#12358;&#12395;&#12289;&#12354;&#12427;&#29305;&#23450;&#12398;&#26041;&#27861;&#12391;&#12371;&#12428;&#12434;&#25313;&#24373;&#12375;&#12414;&#12377;&#12290;
	  &#25313;&#24373;&#12373;&#12428;&#12383;&#37096;&#20998;&#12399;&#20182;&#12398;(&#38750;&#12363;&#12417;)IPsec&#12473;&#12479;&#12483;&#12463;&#12392;&#20001;&#31435;&#12391;&#12365;&#12414;&#12379;&#12435;&#12290;</p>

	<p>IPsec&#12509;&#12522;&#12471;&#12540;&#31649;&#29702;API&#12398;&#20181;&#27096;&#26360;&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;
	  &#12381;&#12428;&#25925;&#12395;&#12289;IPsec&#12509;&#12522;&#12471;&#12540;&#31649;&#29702;API&#12391;(&#38750;&#12363;&#12417;)IPsec&#12473;&#12479;&#12483;&#12463;&#12392;&#12398;&#20114;&#25563;&#24615;&#12434;&#24819;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12379;&#12435;&#12290;</p>

	<p>&#35373;&#23450;&#12501;&#12449;&#12452;&#12523;&#12398;&#26360;&#24335;&#12398;&#27161;&#28310;&#12364;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;
	  NetBSD &#20197;&#22806;&#12398; IPsec &#12487;&#12496;&#12452;&#12473;&#12392;&#12398;&#38291;&#12391;&#35373;&#23450;&#12434;&#12467;&#12500;&#12540;&#12375;&#12383;&#12356;&#22580;&#21512;&#12399;&#12289;&#35373;&#23450;&#12501;&#12449;&#12452;&#12523;&#12398;&#26360;&#24335;&#12434;&#22793;&#25563;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;</p>

	<p>NetBSD&#12392;FreeBSD&#12399;&#21516;&#12376;&#21407;&#28857;(&#12363;&#12417;)&#12363;&#12425;IPsec&#12467;&#12540;&#12489;&#12505;&#12540;&#12473;&#12434;&#20849;&#26377;&#12377;&#12427;&#12383;&#12417;&#12289;API&#20114;&#25563;&#24615;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	  &#12375;&#12363;&#12375;&#12394;&#12364;&#12425;&#12289;&#30064;&#12394;&#12387;&#12383;&#26085;&#20184;&#12398;&#12363;&#12417;&#12467;&#12540;&#12489;&#12434;&#12510;&#12540;&#12472;&#12375;&#12383;&#26178;&#28857;&#12391;&#12289;NetBSD&#12392;FreeBSD&#12398;IPsec&#12467;&#12540;&#12489;&#12395;&#12399;&#36949;&#12356;&#12364;&#29983;&#12376;&#12414;&#12377;&#12290;
	  &#27161;&#28310;&#30340;&#12394;&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12364;&#12381;&#12398;&#36949;&#12356;&#12434;&#35469;&#35672;&#12377;&#12427;&#24517;&#35201;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;
	  &#12383;&#12384;&#12375;&#12289; IPsec key management daemons &#12398;&#23455;&#35013;&#12434;&#12377;&#12427;&#12398;&#12391;&#12354;&#12428;&#12400;&#12289;
	  PF_KEY API &#12398;&#24046;&#30064;&#12434;&#32771;&#24942;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;</p>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">NetBSD 1.5 &#12399;2000&#24180;6&#26376;&#21021;&#26092;&#12395;&#12363;&#12417;IPsec&#12473;&#12479;&#12483;&#12463;&#12434;&#21462;&#12426;&#36796;&#12435;&#12391;&#12356;&#12414;&#12377;&#12290;
	  </li>
<li class="listitem">FreeBSD 4.0-RELEASE &#12399;1999&#24180;12&#26376;&#21021;&#26092;&#12395;&#12363;&#12417;IPsec&#12473;&#12479;&#12483;&#12463;&#12434;&#21462;&#12426;&#36796;&#12435;&#12391;&#12356;&#12414;&#12377;&#12290;
	  </li>
<li class="listitem">&#12510;&#12491;&#12517;&#12450;&#12523;&#12391;&#12398;ipsec&#37749;&#35373;&#23450;&#12289; AH/ESP&#12458;&#12506;&#12524;&#12540;&#12471;&#12519;&#12531;&#12414;&#12383;&#12399;
	    <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ipsec_set_policy+3+NetBSD-6.0+i386">ipsec_set_policy(3)</a> API&#12399;&#12459;&#12540;&#12493;&#12523;&#12395;&#12362;&#12369;&#12427;&#30456;&#36949;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;
	  </li>
<li class="listitem">PF_KEY&#12477;&#12465;&#12483;&#12488;&#12289;libipsec API&#12289;PF_KEY&#12521;&#12483;&#12497;&#12540;&#38306;&#25968;&#12394;&#12393;&#12395;&#12399;&#36949;&#12356;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	    &#30452;&#25509;PF_KEY&#12477;&#12465;&#12483;&#12488;&#12434;&#25805;&#20316;&#12377;&#12427;
	    (<a href="http://netbsd.gw.com/cgi-bin/man-cgi?racoon+8+NetBSD-6.0+i386">racoon(8)</a> &#12398;&#12424;&#12358;&#12394;IKE&#12487;&#12540;&#12514;&#12531;&#12420;
	    <a href="http://netbsd.gw.com/cgi-bin/man-cgi?setkey+8+NetBSD-6.0+i386">setkey(8)</a>&#12398;&#12424;&#12358;&#12394;&#37749;&#35373;&#23450;&#12503;&#12525;&#12464;&#12521;&#12512;)
	    &#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12434;&#23455;&#35013;&#12377;&#12427;&#38555;&#12395;&#12289;&#12381;&#12398;&#36949;&#12356;&#12399;&#36763;&#12356;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#12290;
	  </li>
</ul></div>

	<p>NetBSD 1.4 &#12363;&#12425; 1.5 &#12414;&#12391;&#12398; NetBSD-current &#12398;&#38283;&#30330;&#12395;&#12362;&#12356;&#12390;&#12289;
	  KAME &#12398; IPsec &#37096;&#20998;&#12434; 3 &#24230;&#12395;&#12431;&#12383;&#12387;&#12390;&#23566;&#20837;&#12375;&#12414;&#12375;&#12383;&#12290;
	  &#12371;&#12398;&#23566;&#20837;&#12395;&#12399;&#12289;&#24460;&#26041;&#38750;&#20114;&#25563;&#12394; API &#12398;&#22793;&#26356;&#12434;&#21547;&#12435;&#12391;&#12356;&#12414;&#12377;&#12290;
	  1.4 &#12363;&#12425; 1.5 &#12414;&#12391;&#12398; NetBSD-current &#12434;&#20351;&#12358;&#22580;&#21512;&#12399;&#12289;
	  &#12381;&#12428;&#12364;&#26368;&#26032;&#12398;&#12467;&#12540;&#12489;&#12434;&#20351;&#12387;&#12390;&#12356;&#12427;&#12363;&#30906;&#35469;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  NetBSD 1.5 &#12391;&#12399;&#12289; NetBSD 1.5 &#12391;&#25552;&#20379;&#12373;&#12428;&#12427; API &#12395;&#12388;&#12356;&#12390;&#12289;
	  &#23436;&#20840;&#12394;&#12496;&#12452;&#12490;&#12522;&#12540;&#20114;&#25563;&#12414;&#12383;&#12399; API &#12496;&#12540;&#12472;&#12519;&#12531;&#12481;&#12455;&#12483;&#12463;&#12434;&#23455;&#29694;&#12377;&#12427;&#20104;&#23450;&#12391;&#12377;&#12290;</p>
      
	<h4 class="title">
<a name="readings"></a>&#26360;&#31821;&#12381;&#12398;&#20182;&#12398;&#35501;&#12415;&#12418;&#12398;&#12399; ? (<a href="#IPsecFAQ">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#25991;&#23383;&#12393;&#12362;&#12426;&#12289;&#23665;&#12411;&#12393;&#12398;&#26360;&#31821;&#12364;&#20986;&#12390;&#12356;&#12414;&#12377;&#12290;</p>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="ulink" href="http://search.barnesandnoble.com/booksearch/results.asp?WRD=ipsec" target="_top">
	      Barnes &amp; Noble for books &#12434; <span class="quote">&#8220;<span class="quote">IPsec</span>&#8221;</span> &#12391;&#26908;&#32034;</a>
	    (&#27880;&#24847;: &#31169;&#12383;&#12385;&#12399;&#26360;&#24215;&#12395;&#12388;&#12356;&#12390;&#12289;&#20309;&#12425;&#12398;&#25512;&#22888;&#12418;&#12375;&#12390;&#12356;&#12414;&#12379;&#12435;)
	  </li></ul></div>
      <hr>
<h3 class="title">&#20182;&#12398;&#12522;&#12531;&#12463;</h3>
	<h4 class="title">
<a name="linklist"></a>&#38609;&#22810;&#12394;&#12522;&#12531;&#12463; (<a href="#Other_links">&#12488;&#12483;&#12503;</a>)
  </h4>

	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<a class="ulink" href="rasvpn.html" target="_top">Racoon &#12434;&#20351;&#12387;&#12383;&#12522;&#12514;&#12540;&#12488;&#12518;&#12540;&#12470;&#12540;&#12450;&#12463;&#12475;&#12473; VPN &#12398;&#27083;&#31689;&#26041;&#27861;</a>
	  </li>
<li class="listitem">
<a class="ulink" href="http://asherah.dyndns.org/~josh/ipsec-howto.txt" target="_top">FreeBSD IPsec mini-HOWTO</a>, Windows 2000 &#12392;&#12398;&#30456;&#20114;&#36939;&#29992;&#12434;&#21547;&#12415;&#12414;&#12377;
	  </li>
<li class="listitem">
<a class="ulink" href="http://www.kame.net/" target="_top">&#12363;&#12417;&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;</a>,
	    &#29694;&#22312;&#12510;&#12540;&#12472;&#12373;&#12428;&#12390;&#12356;&#12427; IPv6 &#12362;&#12424;&#12403; IPsec &#23455;&#35013;&#12398;&#12391;&#12418;&#12392;
	  </li>
<li class="listitem">
<a class="ulink" href="http://orange.kame.net/dev/cvsweb.cgi/kame/netbsd/sys/netinet6/IMPLEMENTATION" target="_top">KAME &#12398;
	      NetBSD &#23455;&#35013;&#12494;&#12540;&#12488;</a>
	  </li>
<li class="listitem">
<a class="ulink" href="http://orange.kame.net/dev/cvsweb.cgi/kame/IMPLEMENTATION" target="_top">KAME &#12398;
	      &#23455;&#35013;&#12494;&#12540;&#12488;</a> - &#20869;&#23481;&#12399; NetBSD &#12392;&#38306;&#20418;&#12394;&#12356;&#12418;&#12398;&#12418;&#21547;&#12414;&#12428;&#12414;&#12377;
	  </li>
<li class="listitem">
<a class="ulink" href="http://orange.kame.net/dev/cvsweb.cgi/kame/COVERAGE" target="_top">
	      KAME &#12503;&#12521;&#12483;&#12488;&#12501;&#12457;&#12540;&#12512;&#38291;&#12391;&#12398;&#23455;&#35013;&#12398;&#24046;&#20998;</a>
	  </li>
<li class="listitem">
<a class="ulink" href="../../../about/crypto-export.html" target="_top">
	      NetBSD &#26263;&#21495;&#12467;&#12540;&#12489;&#12398;&#36664;&#20986;&#12395;&#38306;&#12375;&#12390;</a>
	  </li>
</ul></div>
      <hr>Back to <em><a href="../">NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: &#12493;&#12483;&#12488;&#12527;&#12540;&#12463;</a></em>
</div></div></div>
<div class="navfoot"></div>
<div id="footer"><div id="footerContent"><center>
<span class="footfeed"><a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">
	  &#36899;&#32097;</a> |
      </span><span class="footcopy"><a href="../../../../about/disclaimer.html">
      &#20813;&#36012;&#20107;&#38917;</a> |

      <span class="copyright">Copyright  1994-2012 The NetBSD Foundation, Inc. </span>ALL RIGHTS RESERVED.<br>NetBSD<sup></sup>&#12399;
	 NetBSD Foundation, Inc. &#12398;&#30331;&#37682;&#21830;&#27161;&#12391;&#12377;&#12290;</span>
</center></div></div>
</div></body>
</html>
