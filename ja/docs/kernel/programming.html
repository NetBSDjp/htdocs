<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="generator" content="Website XSL Stylesheet V2.6.0">
<link rel="home" href="../../../." title="Welcome to The NetBSD Project: Of course it runs NetBSD.">
<link rel="up" href="../../../ja/docs/kernel/." title="NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: &#12459;&#12540;&#12493;&#12523;">
<link rel="previous" href="../../../ja/docs/kernel/pseudo/." title="NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: &#25836;&#20284;&#12487;&#12496;&#12452;&#12473;&#12398;&#26360;&#12365;&#26041;">
<link rel="next" href="../../../ja/docs/kernel/uvm.html" title="NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: UVM&#12289;&#26032;&#12375;&#12356;&#20206;&#24819;&#12513;&#12514;&#12522;&#12540;&#12471;&#12473;&#12486;&#12512;">
<link rel="first" href="../../../ja/docs/kernel/lazyfpu.html" title="NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: &#12393;&#12398;&#12424;&#12358;&#12395; lazy FPU &#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12473;&#12452;&#12483;&#12481;&#12399;&#21205;&#20316;&#12377;&#12427;&#12398;&#12363;">
<link rel="last" href="../../../ja/docs/kernel/elf-notes.html" title="NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: &#12505;&#12531;&#12480;&#12540;&#29305;&#26377;&#12398; ELF &#35352;&#21495;&#35201;&#32032;(Note Elements)">
<link rel="stylesheet" href="../../../global.css" type="text/css">

    
    
    <title>NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: &#12459;&#12540;&#12493;&#12523;&#12503;&#12525;&#12464;&#12521;&#12511;&#12531;&#12464; FAQ</title>
  </head>
<body class="website"><div class="webpage">
<a name="ja-docs-kernel-programming"></a><div id="top"><a href="#mainContent" class="doNotDisplay doNotPrint">Skip to main content.</a></div>
<div id="centralHeader">
<div id="logo">
<a href="../../../"><img alt="[NetBSD Logo]" src="../../../images/NetBSD-smaller.png"></a><div id="name"><a href="../../../">
	  The NetBSD Project
	</a></div>
<div id="slogan"><a href="../../../">
	  &#8220;Of course it runs NetBSD&#8221;
	</a></div>
</div>
<div id="headerTools">
<div id="header-cse-search-form">Google custom search</div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script><script type="text/javascript"> 
		  google.load('search', '1', {language : 'ja'});
		  google.setOnLoadCallback(function() {
		    var header_customSearchControl = new google.search.CustomSearchControl('016685087845965994609:5539h4dkepg');
		    header_customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
		    var header_options = new google.search.DrawOptions();
		    header_options.enableSearchboxOnly("http://google.com/cse?cx=016685087845965994609:5539h4dkepg");    
		    header_customSearchControl.draw('header-cse-search-form', header_options);
		  }, true);
		</script>
</div>
</div>
<div id="navBar" role="navigation">
<span class="doNotDisplay">
	  &#26696;&#20869;:
	</span><ul>
<li><a href="../../../ja/">
	  &#12507;&#12540;&#12512;</a></li>
<li>
<a href="../../../ja/">
	  &#12491;&#12517;&#12540;&#12473;&#12392;&#12513;&#12487;&#12451;&#12450;</a><ul>
<li><a href="../../../ja/changes/">
	    &#26368;&#36817;&#12398;&#22793;&#26356;</a></li>
<li><a href="http://blog.NetBSD.org/">
	    NetBSD&#12502;&#12525;&#12464;</a></li>
<li><a href="../../../ja/gallery/events.html">
	    &#12452;&#12505;&#12531;&#12488;</a></li>
<li><a href="../../../ja/changes/rss.html">
	    &#12501;&#12451;&#12540;&#12489;</a></li>
</ul>
</li>
<li>
<a href="../../../ja/about/">
	  &#27010;&#35201;</a><ul>
<li><a href="../../../ja/about/">
	    NetBSD</a></li>
<li><a href="../../../ja/foundation/">
	    The NetBSD Foundation</a></li>
<li><a href="../../../ja/gallery/">
	    &#25512;&#34214;</a></li>
</ul>
</li>
<li>
<a href="../../../ja/docs/">
	  &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;</a><ul>
<li><a href="../../../ja/docs/misc/index.html">
	    FAQ&#12392;HOWTO</a></li>
<li><a href="../../../ja/docs/guide/en/">
	    &#12460;&#12452;&#12489;</a></li>
<li><a href="http://man.NetBSD.org/">
	    &#12510;&#12491;&#12517;&#12450;&#12523;&#12506;&#12540;&#12472;</a></li>
<li><a href="http://wiki.NetBSD.org/">
	    Wiki</a></li>
</ul>
</li>
<li>
<a href="../../../ja/support/">
	  &#12469;&#12509;&#12540;&#12488;</a><ul>
<li><a href="../../../ja/support/send-pr.html">
	    &#21839;&#38988;&#22577;&#21578;&#12460;&#12452;&#12489;</a></li>
<li><a href="../../../cgi-bin/sendpr.cgi?gndb=netbsd">
	    &#12496;&#12464;&#12398;&#22577;&#21578;</a></li>
<li><a href="../../../ja/support/query-pr.html">
	    &#12496;&#12464;&#12398;&#29031;&#20250;</a></li>
<li><a href="../../../ja/support/security/">
	    &#12475;&#12461;&#12517;&#12522;&#12486;&#12451;&#12540;</a></li>
</ul>
</li>
<li>
<a href="../../../ja/community/">
	  &#12467;&#12511;&#12517;&#12491;&#12486;&#12451;&#12540;</a><ul>
<li><a href="http://onetbsd.org/">
	    &#12502;&#12525;&#12464;</a></li>
<li><a href="../../../ja/mailinglists/">
	    &#12513;&#12540;&#12522;&#12531;&#12464;&#12522;&#12473;&#12488;</a></li>
<li><a href="http://mail-index.NetBSD.org/">
	    &#12513;&#12540;&#12522;&#12531;&#12464;&#12522;&#12473;&#12488;&#12450;&#12540;&#12459;&#12452;&#12502;</a></li>
</ul>
</li>
<li>
<a href="../../../ja/developers/">
	  &#38283;&#30330;&#32773;</a><ul>
<li><a href="http://cvsweb.NetBSD.org/">
	    &#12477;&#12540;&#12473;&#12434;&#38322;&#35239;</a></li>
<li><a href="http://nxr.NetBSD.org/">
	    &#12463;&#12525;&#12473;&#12522;&#12501;&#12449;&#12524;&#12531;&#12473;</a></li>
<li><a href="http://releng.NetBSD.org/">
	    &#12522;&#12522;&#12540;&#12473;&#12456;&#12531;&#12472;&#12491;&#12450;&#12522;&#12531;&#12464;</a></li>
<li><a href="http://wiki.NetBSD.org/projects/">
	    &#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12522;&#12473;&#12488;</a></li>
</ul>
</li>
<li>
<a href="../../../ja/ports/">
	  &#27231;&#31278;</a><ul>
<li><a href="../../../ja/ports/history.html">
	    &#27508;&#21490;</a></li>
<li><a href="../../../ja/ports/emulators.html">
	    &#12456;&#12511;&#12517;&#12524;&#12540;&#12479;&#12540;</a></li>
</ul>
</li>
<li>
<a href="http://www.pkgsrc.org/">
	  &#12497;&#12483;&#12465;&#12540;&#12472;</a><ul>
<li><a href="http://www.pkgsrc.se/">
	    &#12497;&#12483;&#12465;&#12540;&#12472;&#12434;&#38322;&#35239;</a></li>
<li><a href="http://releng.NetBSD.org/index-pkgsrc.html">
	    &#12522;&#12522;&#12540;&#12473;&#12456;&#12531;&#12472;&#12491;&#12450;&#12522;&#12531;&#12464;</a></li>
</ul>
</li>
</ul>
</div>
<div id="content"><div class="fullWidth"><div class="rowOfBoxes">
<h1>NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: &#12459;&#12540;&#12493;&#12523;&#12503;&#12525;&#12464;&#12521;&#12511;&#12531;&#12464; FAQ</h1>
<h3 class="title"><a name="misc">Misc</a></h3>
<ul>
<li><a href="#knf">KNF &#12392;&#12399;&#20309;&#12391;&#12377;&#12363;</a></li>
<li><a href="#packed-attribute">pack &#12373;&#12428;&#12383;&#23646;&#24615;&#12434;&#20351;&#29992;&#12377;&#12427;</a></li>
<li><a href="#printf">&#12487;&#12496;&#12483;&#12464;&#12398;&#12383;&#12417;&#12398; printf() &#12398;&#20351;&#12356;&#26041;</a></li>
<li><a href="#forcing-ddb">&#24375;&#21046;&#30340;&#12395; DDB &#12395;&#33853;&#12392;&#12377;</a></li>
<li><a href="#adding_a_new_driver">&#12459;&#12540;&#12493;&#12523;&#12395;&#26032;&#12375;&#12356;&#12489;&#12521;&#12452;&#12496;&#12540;&#12434;&#36861;&#21152;&#12377;&#12427;</a></li>
<li><a href="#autoconf">&#12371;&#12398; autoconf &#12398;&#32032;&#26448;&#12399;&#12289;&#12393;&#12398;&#12424;&#12358;&#12395;&#21205;&#20316;&#12377;&#12427;&#12398;&#12363;?</a></li>
<li><a href="#adding_a_system_call">&#12471;&#12473;&#12486;&#12512;&#12467;&#12540;&#12523;&#12434;&#36861;&#21152;&#12377;&#12427;</a></li>
<li><a href="#adding_a_sysctl">sysctl &#12434;&#36861;&#21152;&#12377;&#12427;</a></li>
<li><a href="#mmap_in_pseudo-device">&#20206;&#24819;&#12487;&#12496;&#12452;&#12473;&#12395; mmap(2) &#12434;&#23455;&#35013;&#12377;&#12427;&#26041;&#27861;</a></li>
<li><a href="#accessing_a_kernel_structure_from_userland">&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;&#12363;&#12425;&#12459;&#12540;&#12493;&#12523;&#12398;&#27083;&#36896;&#20307;&#12408;&#12450;&#12463;&#12475;&#12473;&#12377;&#12427;</a></li>
<li><a href="#sample_driver">&#21442;&#32771;&#12395;&#12391;&#12365;&#12381;&#12358;&#12394;&#31777;&#21336;&#12394; PCI &#12489;&#12521;&#12452;&#12496;&#12540;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12363;</a></li>
<li><a href="#other-related-links">&#20182;&#12398;&#38306;&#36899;&#12377;&#12427;&#12522;&#12531;&#12463;</a></li>
</ul>
<hr>
<h3 class="title">Misc</h3>
	<h4 class="title">
<a name="knf"></a>KNF &#12392;&#12399;&#20309;&#12391;&#12377;&#12363; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>KNF &#12399; Kernel Normal Form &#12398;&#30053;&#12391;&#12289;
	  <code class="filename">/usr/share/misc/style</code> &#12395;&#35352;&#36848;&#12373;&#12428;&#12390;&#12356;&#12427;
	  C &#12398;&#12467;&#12540;&#12487;&#12451;&#12531;&#12464;&#12473;&#12479;&#12452;&#12523;&#12391;&#12377;&#12290;&#12477;&#12540;&#12473;&#12484;&#12522;&#12540;&#12395; <a href="http://cvsweb.NetBSD.org/bsdweb.cgi/src/share/misc/style?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top"><code class="filename">src/share/misc/style</code></a>
	  &#12392;&#12375;&#12390;&#21547;&#12414;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
      
	<h4 class="title">
<a name="packed-attribute"></a>pack &#12373;&#12428;&#12383;&#23646;&#24615;&#12434;&#20351;&#29992;&#12377;&#12427; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>
	
	<p>wire &#12503;&#12525;&#12488;&#12467;&#12523;&#12487;&#12540;&#12479;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12434;&#35352;&#36848;&#12377;&#12427;&#27083;&#36896;&#20307;&#12398;&#20013;&#12391;&#12399;&#12289;&#12356;&#12388;&#12418;
	  <code class="code">`pack'</code> &#12373;&#12428;&#12383;&#23646;&#24615;&#12434;&#20351;&#29992;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>
      
	<h4 class="title">
<a name="printf"></a>&#12487;&#12496;&#12483;&#12464;&#12398;&#12383;&#12417;&#12398; <code class="code">printf()</code> &#12398;&#20351;&#12356;&#26041; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#12459;&#12540;&#12493;&#12523;&#12489;&#12521;&#12452;&#12496;&#12540;&#12398;&#12487;&#12496;&#12483;&#12464;&#29992;&#12398;&#24773;&#22577;&#12434;&#20986;&#21147;&#12377;&#12427;&#12418;&#12387;&#12392;&#12418;&#31777;&#21336;&#12394;&#26041;&#27861;&#12399;&#12289;
	  <code class="code">printf()</code> &#12434;&#20351;&#12358;&#12371;&#12392;&#12391;&#12375;&#12423;&#12358;&#12290;&#12459;&#12540;&#12493;&#12523;&#12398; printf &#12399; &#12467;&#12531;&#12477;&#12540;&#12523;&#12395;&#20986;&#21147;
	  &#12373;&#12428;&#12427;&#12398;&#12391;&#12289;&#22810;&#12367;&#20986;&#21147;&#12375;&#12377;&#12366;&#12289;&#12471;&#12473;&#12486;&#12512;&#12364;&#20351;&#12356;&#12418;&#12398;&#12395;&#12394;&#12425;&#12394;&#12356;&#12424;&#12358;&#12395;&#27880;&#24847;
	  &#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290;</p>
      
	<h4 class="title">
<a name="forcing-ddb"></a>&#24375;&#21046;&#30340;&#12395; DDB &#12395;&#33853;&#12392;&#12377; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#12459;&#12540;&#12493;&#12523;&#12398;&#12467;&#12531;&#12501;&#12451;&#12464;&#12501;&#12449;&#12452;&#12523;&#12364; '<code class="code">options DDB</code>' &#12434;
	  &#21547;&#12435;&#12391;&#12356;&#12427;&#20107;&#12434;&#30906;&#35469;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;
	  &#12501;&#12449;&#12452;&#12523;&#12395; '<code class="code">#include "opt_ddb.h"</code>' &#12434;&#35352;&#36848;&#12375;&#12289;
	  '<code class="code">Debugger()</code>' &#12434;&#20351;&#12387;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;</p>
      
	<h4 class="title">
<a name="adding_a_new_driver"></a>&#12459;&#12540;&#12493;&#12523;&#12395;&#26032;&#12375;&#12356;&#12489;&#12521;&#12452;&#12496;&#12540;&#12434;&#36861;&#21152;&#12377;&#12427; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>

	<p>&#20840;&#12390;&#12398;&#12489;&#12521;&#12452;&#12496;&#12540;&#12399;&#12289;&#12377;&#12367;&#12394;&#12367;&#12392;&#12418;&#20197;&#19979;&#12398;&#20108;&#12388;&#12398;&#38306;&#25968;&#12434;&#24517;&#35201;&#12392;&#12375;&#12414;&#12377;&#12290;
	  </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<code class="code"><span class="emphasis"><em>xxx</em></span>probe()</code> (
	      NetBSD
	      &#12364;&#12487;&#12496;&#12452;&#12473;&#12398;&#23384;&#22312;&#12434;&#35519;&#12409;&#12427;&#26178;)</li>
<li class="listitem">
<code class="code"><span class="emphasis"><em>xxx</em></span>attach()</code>
	      &#12523;&#12540;&#12481;&#12531;&#12399;&#12487;&#12496;&#12452;&#12473;&#12434;&#35373;&#23450;&#12289;
	      &#12450;&#12479;&#12483;&#12481;&#12375;&#12414;&#12377;&#12290;</li>
</ul></div>
<p>
	</p>

	<p>&#12503;&#12525;&#12540;&#12502;&#12392;&#12450;&#12479;&#12483;&#12481;&#12523;&#12540;&#12481;&#12531;&#12434;&#26360;&#12356;&#12383;&#12425;&#12289;
	  <code class="filename">/usr/src/sys/arch/&lt;your-arch&gt;/&lt;your-arch&gt;/conf.c</code>
	  &#12395;&#12456;&#12531;&#12488;&#12522;&#12540;&#12434;&#36861;&#21152;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;&#12381;&#12371;&#12395;&#12399;&#20197;&#19979;&#12398;&#20108;&#12388;&#12398;&#12486;&#12540;&#12502;&#12523;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;</p>
	
	<p>
	  </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<code class="code">cdevsw</code> &#12461;&#12515;&#12521;&#12463;&#12479;&#12540;&#12487;&#12496;&#12452;&#12473;&#29992;&#12290;</li>
<li class="listitem">
<code class="code">bdevsw</code> &#12502;&#12525;&#12483;&#12463;&#12487;&#12496;&#12452;&#12473;&#29992;
	      (&#12502;&#12525;&#12483;&#12463;I/O
	      &#12392;&#12473;&#12488;&#12521;&#12486;&#12472;&#12540;&#12539;&#12523;&#12540;&#12481;&#12531;&#12392;&#12375;&#12390;&#20351;&#29992;&#12377;&#12427;)&#12290;</li>
</ul></div>

	<p>&#12411;&#12392;&#12435;&#12393;&#12398;&#12456;&#12531;&#12488;&#12522;&#12540;&#12399; <code class="code">cdev_<span class="emphasis"><em>xxx</em></span>_init()</code> &#12392;&#12356;&#12358;&#24418;&#24335;&#12392;
	  &#12394;&#12426;&#12414;&#12377;&#12290;&#12371;&#12428;&#12399;&#27161;&#28310;&#30340;&#12394; Unix &#12398;&#12487;&#12496;&#12452;&#12473;&#12473;&#12452;&#12483;&#12481;&#12523;&#12540;&#12481;&#12531;&#12398;&#12503;&#12525;&#12488;&#12479;&#12452;&#12503;
	  &#12398;&#12383;&#12417;&#12398;&#12510;&#12463;&#12525;&#12391;&#12377;&#12290;</p>

	<p>&#12503;&#12525;&#12540;&#12502;&#12392;&#12450;&#12479;&#12483;&#12481;&#12523;&#12540;&#12481;&#12531;&#12399;&#12502;&#12540;&#12488;&#26178;&#12395;&#12424;&#12400;&#12428;&#12414;&#12377;&#12290;
	  <code class="code">open()</code>&#12289;<code class="code">close()</code>&#12289;<code class="code">read()</code>&#12289;
	  <code class="code">write()</code> &#12523;&#12540;&#12481;&#12531;&#12399;&#12289;&#12513;&#12472;&#12515;&#12540;&#30058;&#21495;&#12364;&#12486;&#12540;&#12502;&#12523;&#12398;&#12452;&#12531;&#12487;&#12483;&#12463;&#12473;
	  &#12395;&#19968;&#33268;&#12377;&#12427;&#12487;&#12496;&#12452;&#12473;&#12473;&#12506;&#12471;&#12515;&#12523;&#12501;&#12449;&#12452;&#12523;&#12364;&#12458;&#12540;&#12503;&#12531;&#12373;&#12428;&#12383;&#26178;&#12395;&#12424;&#12400;&#12428;&#12414;&#12377;&#12290;
	  &#20363;&#12360;&#12400;&#12289;&#12513;&#12472;&#12515;&#12540;&#30058;&#21495;18 &#12398;&#12487;&#12496;&#12452;&#12473;&#12434;&#12458;&#12540;&#12503;&#12531;&#12375;&#12383;&#22580;&#21512;&#12289;<code class="code">cdevsw[]/bdevsw</code>
	  &#12398;&#20013;&#12398;&#12487;&#12496;&#12452;&#12473;&#30058;&#21495;18&#12398; "open" &#12523;&#12540;&#12481;&#12531;&#12364;&#12424;&#12400;&#12428;&#12414;&#12377;&#12290;</p>

	<p>&#12411;&#12392;&#12435;&#12393;&#12398;&#12489;&#12521;&#12452;&#12496;&#12540;&#12399;&#12496;&#12473;&#22266;&#26377;&#12398;&#12450;&#12479;&#12483;&#12481;&#12467;&#12540;&#12489;&#12392;&#12510;&#12471;&#12531;&#29420;&#31435;&#12398;&#12467;&#12450;&#12395;&#20998;&#21106;
	  &#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;&#20363;&#12360;&#12400;&#12289;PCI lance &#12452;&#12540;&#12469;&#12493;&#12483;&#12488;&#12489;&#12521;&#12452;&#12496;&#12540;&#12399;&#20197;&#19979;&#12398;&#12501;&#12449;&#12452;&#12523;&#12391;
	  &#27083;&#25104;&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;

	  </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<a href="http://cvsweb.NetBSD.org/bsdweb.cgi/src/sys/dev/pci/files.pci?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top"><code class="filename">src/sys/dev/pci/files.pci</code></a>
	      - &#12450;&#12479;&#12483;&#12481;&#24773;&#22577; ('le at pci'&#12434;&#35211;&#12390;&#12367;&#12384;&#12373;&#12356;)&#12290;</li>
<li class="listitem">
<a href="http://cvsweb.NetBSD.org/bsdweb.cgi/src/sys/dev/pci/if_le_pci.c?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top"><code class="filename">src/sys/dev/pci/if_le_pci.c</code></a> 
	      - &#12489;&#12521;&#12452;&#12496;&#12540;&#12398;&#12383;&#12417;&#12398;PCI &#12496;&#12473;&#12398;&#12450;&#12479;&#12483;&#12481;&#12398;&#12467;&#12540;&#12489;&#12290;</li>
</ul></div>
<p>
	</p>
	
	<p>
	  </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<a href="http://cvsweb.NetBSD.org/bsdweb.cgi/src/sys/conf/files?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top"><code class="filename">src/sys/conf/files</code></a>
	      - MI &#12467;&#12450;&#12398;&#12450;&#12479;&#12483;&#12481;&#24773;&#22577;('le:'&#12434;&#35211;&#12390;&#12367;&#12384;&#12373;&#12356;)&#12290;</li>
<li class="listitem">
<a href="http://cvsweb.NetBSD.org/bsdweb.cgi/src/sys/dev/ic/am7990.c?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top"><code class="filename">src/sys/dev/ic/am7990.c</code></a>
	      - MI &#12489;&#12521;&#12452;&#12496;&#12540;&#12289;24&#12499;&#12483;&#12488;&#12450;&#12463;&#12475;&#12473;&#12398;&#12467;&#12540;&#12489;&#12290;</li>
<li class="listitem">
<a href="http://cvsweb.NetBSD.org/bsdweb.cgi/src/sys/dev/ic/am79900.c?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top"><code class="filename">src/sys/dev/ic/am79900.c</code></a>
	      - MI &#12489;&#12521;&#12452;&#12496;&#12540;&#12289;32&#12499;&#12483;&#12488;&#12450;&#12463;&#12475;&#12473;&#12398;&#12467;&#12540;&#12489;&#12290;</li>
<li class="listitem">
<a href="http://cvsweb.NetBSD.org/bsdweb.cgi/src/sys/dev/ic/lance.c?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top"><code class="filename">src/sys/dev/ic/lance.c</code></a>
	      - MI &#12467;&#12450;&#12398;&#12489;&#12521;&#12452;&#12496;&#12540;&#12398;&#12467;&#12540;&#12489;&#12290;</li>
</ul></div>
<p>
	</p>

	<p><a class="ulink" href="#autoconf" target="_top">autoconf &#12398;&#35500;&#26126;</a>&#12418;&#12372;&#35239;&#12367;&#12384;&#12373;&#12356;&#12290;</p>
      
	<h4 class="title">
<a name="autoconf"></a>&#12371;&#12398; autoconf &#12398;&#32032;&#26448;&#12399;&#12289;&#12393;&#12398;&#12424;&#12358;&#12395;&#21205;&#20316;&#12377;&#12427;&#12398;&#12363;? (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>
	
	<p>autoconf &#12398;&#20181;&#32068;&#12415;&#12399;&#12289;&#12381;&#12398;&#21205;&#20316;&#26041;&#27861;&#12434;&#19968;&#24230;&#29702;&#35299;&#12375;&#12390;&#12375;&#12414;&#12360;&#12400;&#38750;&#24120;&#12395;&#21336;&#32020;&#12394;&#12418;&#12398;&#12391;&#12377;&#12290;
	  &#23455;&#34892;&#26178;&#12395;&#12487;&#12496;&#12452;&#12473;&#12503;&#12525;&#12540;&#12502;&#12484;&#12522;&#12540;&#12364;&#12393;&#12398;&#12424;&#12358;&#12395;&#27083;&#31689;&#12373;&#12428;&#12390;&#20351;&#12431;&#12428;&#12427;&#12398;&#12363;&#12395;&#12388;&#12356;&#12390;&#12289;
	  &#27491;&#30906;&#12394;&#35443;&#32048;&#12399;&#28961;&#35222;&#12375;&#12383;&#12356;&#12398;&#12391;&#12354;&#12428;&#12400;&#12289;
	  &#20491;&#12293;&#12398;<span class="quote">&#8220;<span class="quote">&#33865;</span>&#8221;</span>&#12398;&#12489;&#12521;&#12452;&#12496;&#12540;&#12395;&#38306;&#12375;&#12390;&#24517;&#35201;&#12394;&#12371;&#12392;&#12399;&#20197;&#19979;&#12398;&#12392;&#12362;&#12426;&#12391;&#12377;&#12290;
	  
	  </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">&#21508;&#12489;&#12521;&#12452;&#12496;&#12540;&#12399;&#12289; 3 &#20491;&#12398;&#27083;&#25104;&#35201;&#32032;&#12363;&#12425;&#12394;&#12427;&#27083;&#36896;&#20307;&#12434;&#35215;&#23450;&#12375;&#12414;&#12377; -
	      &#27083;&#25104;&#35201;&#32032;&#12399;&#12289;&#12381;&#12398;&#12503;&#12521;&#12452;&#12505;&#12540;&#12488;&#27083;&#36896;&#20307;&#12398;&#12469;&#12452;&#12474;&#12289;&#12503;&#12525;&#12540;&#12502;&#38306;&#25968;&#12289;&#12450;&#12479;&#12483;&#12481;&#38306;&#25968;&#12391;&#12377;&#12290;
	      &#12371;&#12428;&#12399;&#12467;&#12531;&#12497;&#12452;&#12523;&#12373;&#12428;&#12390;&#23455;&#34892;&#26178;&#12395;&#20351;&#12431;&#12428;&#12414;&#12377; - &#12383;&#12392;&#12360;&#12400;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;:
	      <pre class="programlisting">
struct cfattach foo_baz_ca = {
    sizeof(struct foo_baz_softc), foo_baz_match, foo_baz_attach
};</pre>
</li>
<li class="listitem">&#12459;&#12540;&#12493;&#12523;&#36215;&#21205;&#12395;&#38555;&#12375;&#12390;&#12289;&#12371;&#12398;&#12487;&#12496;&#12452;&#12473;&#12434;&#12450;&#12479;&#12483;&#12481;&#12377;&#12427;&#26178;&#12395;&#12289;
	      autoconf &#12398;&#12467;&#12540;&#12489;&#12399;&#12487;&#12496;&#12452;&#12473;&#12398;&#12503;&#12525;&#12540;&#12502;&#12523;&#12540;&#12481;&#12531;&#12434;&#21628;&#12435;&#12391;&#12289;
	      &#35242;&#12408;&#12398;&#12509;&#12452;&#12531;&#12479;&#12540; (<code class="code">struct device *parent</code>)&#12539;
	      &#12450;&#12479;&#12483;&#12481;&#12479;&#12464;&#27083;&#36896;&#20307;&#12408;&#12398;&#12509;&#12452;&#12531;&#12479;&#12540; (<code class="code">void *aux</code>)&#12539;
	      &#36969;&#20999;&#12394; autoconf &#12494;&#12540;&#12489; (<code class="code">struct cfdata *cf</code>) &#12434;&#28193;&#12375;&#12414;&#12377;&#12290;
	      &#12489;&#12521;&#12452;&#12496;&#12540;&#12399;&#12289;&#21628;&#12400;&#12428;&#12427;&#12409;&#12365;&#22580;&#25152;&#12363;&#12393;&#12358;&#12363;&#12434;&#21028;&#26029;&#12377;&#12427;&#12371;&#12392;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;
	      (&#36890;&#24120;&#12289;&#12525;&#12465;&#12540;&#12471;&#12519;&#12531;&#12362;&#12424;&#12403;&#12467;&#12531;&#12501;&#12451;&#12462;&#12517;&#12524;&#12540;&#12471;&#12519;&#12531;&#24773;&#22577;&#12364;&#12450;&#12479;&#12483;&#12481;&#12479;&#12464;&#12395;&#12424;&#12387;&#12390;&#28193;&#12373;&#12428;&#12414;&#12377;)&#12290;
	      &#12381;&#12371;&#12364;&#12375;&#12363;&#12427;&#12409;&#12365;&#22580;&#25152;&#12384;&#12387;&#12383;&#22580;&#21512;&#12399;&#12289;&#12503;&#12525;&#12540;&#12502;&#12523;&#12540;&#12481;&#12531;&#12399; 1 &#12434;&#36820;&#12377;&#12409;&#12365;&#12391;&#12377;&#12290;
	      &#12418;&#12375;&#12487;&#12496;&#12452;&#12473;&#12364;&#12381;&#12371;&#12395;&#12394;&#12369;&#12428;&#12400;&#12289;&#12503;&#12525;&#12540;&#12502;&#12523;&#12540;&#12481;&#12531;&#12399; 0 &#12434;&#36820;&#12377;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
	      &#12356;&#12378;&#12428;&#12398;&#22580;&#21512;&#12418;&#12289;<span class="bold"><strong>&#12356;&#12363;&#12394;&#12427;&#29366;&#24907;&#12418;&#20445;&#25345;&#12373;&#12428;&#12390;&#12399;&#12356;&#12369;&#12414;&#12379;&#12435;</strong></span>&#12290;</li>
<li class="listitem">&#12503;&#12525;&#12540;&#12502;&#12364;&#25104;&#21151;&#12375;&#12390;&#25147;&#12427;&#12392;&#12289; autoconf &#12399;&#12289;&#12487;&#12496;&#12452;&#12473;&#12398; *_ca
	      &#12391;&#25351;&#23450;&#12373;&#12428;&#12383;&#12469;&#12452;&#12474;&#12398;&#12513;&#12514;&#12522;&#12540;&#22602;&#12434;&#21106;&#12426;&#24403;&#12390;&#12289;&#12381;&#12398;&#12487;&#12496;&#12452;&#12473;&#12398;&#12450;&#12479;&#12483;&#12481;&#12523;&#12540;&#12481;&#12531;&#12434;&#21628;&#12435;&#12391;&#12289;
	      &#35242;&#12408;&#12398;&#12509;&#12452;&#12531;&#12479;&#12540; (<code class="code">struct device *parent</code>)&#12539;
	      &#20170;&#21106;&#12426;&#24403;&#12390;&#12383;&#12513;&#12514;&#12522;&#12540;&#12408;&#12398;&#12509;&#12452;&#12531;&#12479;&#12540;(<code class="code">struct device *self</code>)&#12539;
	      &#12450;&#12479;&#12483;&#12481;&#12479;&#12464;&#27083;&#36896;&#20307;&#12408;&#12398;&#12509;&#12452;&#12531;&#12479;&#12540; (<code class="code">void *aux</code>) &#12434;&#28193;&#12375;&#12414;&#12377;&#12290;
	      &#12489;&#12521;&#12452;&#12496;&#12540;&#12399;&#12289;&#27491;&#30906;&#12394;&#12509;&#12540;&#12488;&#12392;&#12513;&#12514;&#12522;&#12540;&#12434;&#35211;&#12388;&#12369;&#20986;&#12375;&#12289;&#36039;&#28304;&#12434;&#21106;&#12426;&#24403;&#12390;&#12289;
	      &#12371;&#12428;&#12395;&#24540;&#12376;&#12390;&#12489;&#12521;&#12452;&#12496;&#12540;&#20869;&#12398;&#27083;&#36896;&#20307;&#12434;&#21021;&#26399;&#21270;&#12377;&#12427;&#12371;&#12392;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;
	      &#12489;&#12521;&#12452;&#12496;&#12540;&#12398;&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#12395;&#22266;&#26377;&#12394;&#24773;&#22577;&#12399;&#12289;
	      &#26997;&#21147;&#12289;&#12371;&#12371;&#12391;&#21106;&#12426;&#24403;&#12390;&#12425;&#12428;&#12383;&#12513;&#12514;&#12522;&#12540;&#12395;&#20445;&#25345;&#12377;&#12409;&#12365;&#12391;&#12377;&#12290;</li>
</ol></div>
<p>
	</p>
	
	<p>&#20363;: PCI &#12452;&#12540;&#12469;&#12493;&#12483;&#12488;&#12489;&#12521;&#12452;&#12496;&#12540; 'baz' &#12434;&#32771;&#12360;&#12414;&#12375;&#12423;&#12358;&#12290;
	  &#12459;&#12540;&#12493;&#12523;&#12467;&#12531;&#12501;&#12451;&#12464;&#12399;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;:
	  </p>
<pre class="programlisting">
pci*    at mainbus?
baz*    at pci? dev ? function ?</pre>
<p>

	  &#23455;&#34892;&#26178;&#12289; autoconf &#12399;&#12510;&#12471;&#12531;&#12398; PCI &#12496;&#12473;&#19978;&#12398;&#29289;&#29702;&#12487;&#12496;&#12452;&#12473;&#12377;&#12409;&#12390;&#12395;&#23550;&#12375;&#12390;
	  &#32368;&#12426;&#36820;&#12375;&#23455;&#34892;&#12373;&#12428;&#12414;&#12377;&#12290;&#21508;&#29289;&#29702;&#12487;&#12496;&#12452;&#12473;&#12395;&#23550;&#12375;&#12390;&#12289; autoconf &#12399;&#12289;
	  pci &#12496;&#12473;&#19978;&#12395;&#12354;&#12427;&#12371;&#12392;&#12364;&#12459;&#12540;&#12493;&#12523;&#12395;&#35373;&#23450;&#12373;&#12428;&#12390;&#12356;&#12427;&#12377;&#12409;&#12390;&#12398;&#12487;&#12496;&#12452;&#12473;&#12398;
	  &#12489;&#12521;&#12452;&#12496;&#12540;&#12398;&#12503;&#12525;&#12540;&#12502;&#12523;&#12540;&#12481;&#12531;&#12434;&#21628;&#12406;&#12371;&#12392;&#12434;&#32368;&#12426;&#36820;&#12375;&#12414;&#12377;&#12290;
	  &#12356;&#12378;&#12428;&#12363;&#12398;&#12503;&#12525;&#12540;&#12502;&#12523;&#12540;&#12481;&#12531;&#12364;&#12381;&#12398;&#12487;&#12496;&#12452;&#12473;&#12395;&#12388;&#12356;&#12390; 1 &#12434;&#36820;&#12377;&#12392;&#12289;
	  autoconf &#12399;&#12371;&#12428;&#12434;&#20013;&#27490;&#12375;&#12289;&#19978;&#36848;&#12398; 3) &#12391;&#35500;&#26126;&#12375;&#12383;&#20316;&#26989;&#12434;&#12362;&#12371;&#12394;&#12356;&#12414;&#12377;&#12290;
	  &#12450;&#12479;&#12483;&#12481;&#38306;&#25968;&#12364;&#25147;&#12427;&#12392;&#12289; autoconf &#12399;&#27425;&#12398;&#29289;&#29702;&#12487;&#12496;&#12452;&#12473;&#12398;&#20966;&#29702;&#12434;&#32154;&#12369;&#12414;&#12377;&#12290;</p>
	
	<p><a class="ulink" href="#adding_a_new_driver" target="_top">&#12459;&#12540;&#12493;&#12523;&#12395;&#26032;&#12375;&#12356;&#12489;&#12521;&#12452;&#12496;&#12540;&#12434;&#36861;&#21152;&#12377;&#12427;</a>&#12418;&#12372;&#35239;&#12367;&#12384;&#12373;&#12356;&#12290;</p>
      
	<h4 class="title">
<a name="adding_a_system_call"></a>&#12471;&#12473;&#12486;&#12512;&#12467;&#12540;&#12523;&#12434;&#36861;&#21152;&#12377;&#12427; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>
	
	<p><code class="code">syscalls.master</code> &#12395;&#12456;&#12531;&#12488;&#12522;&#12540;&#12434;&#36861;&#21152;&#12375;&#12289;syscall &#12473;&#12479;&#12502;&#12434;
	  <code class="code"><a href="http://cvsweb.NetBSD.org/bsdweb.cgi/src/lib/libc/sys/Makefile.inc?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top"><code class="filename">src/lib/libc/sys/Makefile.inc</code></a></code>
	  &#12398;&#36969;&#24403;&#12394;&#22580;&#25152;&#12395;&#36861;&#21152;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;</p>
	<p>&#12373;&#12425;&#12394;&#12427;&#24773;&#22577;&#12399;&#12289;<a class="ulink" href="../../../docs/internals/en/" target="_top">
	    NetBSD Internals Guide</a> &#20869;&#12398; <a class="ulink" href="../../../docs/internals/en/chap-processes.html#syscall_howto" target="_top">
            HOWTO</a> &#12362;&#12424;&#12403;&#38306;&#36899;&#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;&#12434;&#12372;&#35239;&#12367;&#12384;&#12373;&#12356;&#12290;
	</p>
      
	<h4 class="title">
<a name="adding_a_sysctl"></a>sysctl &#12434;&#36861;&#21152;&#12377;&#12427; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>
	
	<p><a class="ulink" href="http://mail-index.NetBSD.org/tech-kern/" target="_top">tech-kern</a>
	  &#12513;&#12540;&#12522;&#12531;&#12464;&#12522;&#12473;&#12488;&#12395;&#12289;&#12371;&#12398;&#36074;&#21839;&#12408;&#12398;&#31572;&#12360;&#12364;<a class="ulink" href="http://mail-index.NetBSD.org/tech-kern/2001/06/24/0000.html" target="_top">&#25237;&#31295;</a>
	  &#12373;&#12428;&#12390;&#12356;&#12427;&#12398;&#12391;&#12289;&#12381;&#12385;&#12425;&#12434;&#21442;&#29031;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;</p>
	
	<p>&#12394;&#12362;&#12289; NetBSD 1.6 &#12392;&#12381;&#12428;&#20197;&#38477;&#12391;&#12399;&#12289;&#12505;&#12531;&#12480;&#12540;&#29305;&#26377;&#12398;&#38917;&#30446;&#29992;&#12392;&#12375;&#12390;&#12289;
	  &#29305;&#21029;&#12394; <span class="quote">&#8220;<span class="quote">vendor</span>&#8221;</span> &#12459;&#12486;&#12468;&#12522;&#12540;&#12364;&#20104;&#32004;&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;&#12373;&#12425;&#12394;&#12427;&#24773;&#22577;&#12399;
	  <a href="http://netbsd.gw.com/cgi-bin/man-cgi?sysctl+8+NetBSD-6.0+i386">sysctl(8)</a> &#12434;&#21442;&#29031;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;</p>
      
	<h4 class="title">
<a name="mmap_in_pseudo-device"></a>&#20206;&#24819;&#12487;&#12496;&#12452;&#12473;&#12395; <a href="http://netbsd.gw.com/cgi-bin/man-cgi?mmap+2+NetBSD-6.0+i386">mmap(2)</a> &#12434;&#23455;&#35013;&#12377;&#12427;&#26041;&#27861; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>
	
	<p>&#12354;&#12394;&#12383;&#12398;&#20316;&#12387;&#12383;&#12487;&#12496;&#12452;&#12473;&#12399;&#12289;&#12362;&#12381;&#12425;&#12367;&#12461;&#12515;&#12521;&#12463;&#12479;&#12540;&#12487;&#12496;&#12452;&#12473;&#12391;&#12375;&#12423;&#12358;&#12290;&#12418;&#12375;&#12289;
	  &#12381;&#12358;&#12391;&#12354;&#12428;&#12400;&#12289;&#12487;&#12496;&#12452;&#12473;&#12506;&#12540;&#12472;&#12515;&#12540;&#12434;&#20351;&#12387;&#12390;&#12356;&#12427;&#12399;&#12378;&#12391;&#12377;&#12290;(VM &#12471;&#12473;&#12486;&#12512;&#12399;&#12289;
	  &#12371;&#12428;&#12425;&#12377;&#12409;&#12390;&#12434;&#38560;&#34109;&#12375;&#12390;&#12356;&#12427;&#12398;&#12391;&#12289;&#24515;&#37197;&#12375;&#12394;&#12356;&#12391;&#12367;&#12384;&#12373;&#12356;)&#12290;</p>
	
	<p>&#26368;&#21021;&#12395;&#12289;mmap &#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12540;&#12473;&#12398;&#12383;&#12417;&#12395;&#12289;&#36969;&#24403;&#12394;&#12458;&#12501;&#12475;&#12483;&#12488;&#12434;&#12356;&#12367;&#12388;&#12363;&#36984;
	  &#12435;&#12391;&#12367;&#12384;&#12373;&#12356;&#12290;&#20363;&#12360;&#12400;&#12300;mmap &#12458;&#12501;&#12475;&#12483;&#12488; 0-M &#12399; &#12458;&#12502;&#12472;&#12455;&#12463;&#12488;A&#12434;&#12354;&#12383;&#12360;&#12427;&#12289;
	  N-O &#12399;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488; B &#12434;&#12354;&#12383;&#12360;&#12427;&#12301;&#31561;&#12398;&#12424;&#12358;&#12395;&#12290;</p>
	
	<p>&#12371;&#12428;&#12364;&#32066;&#12427;&#12392;&#12289;mmap &#12523;&#12540;&#12481;&#12531;&#12399;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#23455;&#35013;&#12391;&#12365;&#12414;&#12377;&#12290;
	  </p>
<pre class="programlisting">
int
foommap(dev_t dev, int off, int prot)
{

        if (off &amp; PAGE_MASK)
                panic("foommap");

        if ((u_int)off &gt;= FOO_REGION1_MMAP_OFFSET &amp;&amp;
            (u_int)off &lt; (FOO_REGION1_MMAP_OFFSET + FOO_REGION1_SIZE))
                return (atop(FOO_REGION1_ADDR + ((u_int)off -
                    FOO_REGION1_MMAP_OFFSET)));

        if ((u_int)off &gt;= FOO_REGION2_MMAP_OFFSET &amp;&amp;
            (u_int)off &lt; (FOO_REGION2_MMAP_OFFSET + FOO_REGION2_SIZE))
                return (atop(FOO_REGION1_ADDR + ((u_int)off -
                    FOO_REGION2_MMAP_OFFSET)));

        /* Page not found. */
        return (-1);
}</pre>

	  <p>&#12373;&#12390;&#12289;&#23455;&#38555;&#12395;&#12399;&#21336;&#32020;&#12394;&#12459;&#12540;&#12493;&#12523;&#12513;&#12514;&#12522;&#12540;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12434; mmap &#12377;&#12427;&#12398;&#12391;&#12289;
	    &#12467;&#12540;&#12489;&#12399;&#12418;&#12358;&#12377;&#12371;&#12375;&#35079;&#38609;&#12395;&#12394;&#12426;&#12414;&#12377;(&#32080;&#23616;&#12399;&#20206;&#24819;&#12487;&#12496;&#12452;&#12473;&#12391;&#12377;&#12363;&#12425;)&#12290;</p>
	  
	  <p>&#12371;&#12428;&#12434;&#21205;&#20316;&#12373;&#12379;&#12427;&#12383;&#12417;&#12395;&#12399;&#12289;&#12450;&#12525;&#12465;&#12540;&#12488;&#12375;&#12383;&#12513;&#12514;&#12522;&#12540;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12434;&#12506;&#12540;&#12472;&#35519;&#25972;
	    &#12373;&#12428;&#12383;&#22659;&#30028;&#12395;&#30906;&#23455;&#12395; mmap &#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290;&#12418;&#12375;&#12289;&#12450;&#12525;&#12465;&#12540;&#12488;&#12375;&#12383;&#12513;&#12514;&#12522;&#12540;
	    &#12398;&#12469;&#12452;&#12474; &gt;= <code class="code">PAGE_SIZE</code> &#12394;&#12425;&#12289;&#12371;&#12428;&#12399;&#20445;&#35388;&#12373;&#12428;&#12414;&#12377;&#12290;&#12381;&#12358;&#12391;&#12394;&#12369;&#12428;&#12400;&#12289;
	    <code class="code">uvm_km_alloc()</code> &#12434;&#20351;&#12356;&#12289;&#12450;&#12525;&#12465;&#12540;&#12471;&#12519;&#12531;&#12469;&#12452;&#12474;&#12434;&#12506;&#12540;&#12472;&#12469;&#12452;&#12474;&#12395;&#20999;&#12426;&#12354;&#12370;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;</p>
	  
	  <p>&#33509;&#24178;&#12398;&#20462;&#27491;&#12434;&#21152;&#12360;&#12427;&#12392;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290;
	    </p>
<pre class="programlisting">
int
foommap(dev_t dev, int off, int prot)
{
        paddr_t pa;

        if (off &amp; PAGE_MASK)
                panic("foommap: offset not page aligned");

        if ((u_int)off &gt;= FOO_REGION1_MMAP_OFFSET &amp;&amp;
            (u_int)off &lt; (FOO_REGION1_MMAP_OFFSET + FOO_REGION1_SIZE)) {
                if ((vaddr_t)foo_object1 &amp; PAGE_MASK)
                        panic("foommap: foo_object1 not page aligned");
                if (pmap_extract(pmap_kernel(), foo_object1 +
                    (u_int)off - FOO_REGION1_MMAP_OFFSET, &amp;pa) == FALSE)
                        panic("foommap: foo_object1 page not mapped");
                return (atop(pa));
        }

        if ((u_int)off &gt;= FOO_REGION2_MMAP_OFFSET &amp;&amp;
            (u_int)off &lt; (FOO_REGION2_MMAP_OFFSET + FOO_REGION2_SIZE)) {
                if ((vaddr_t)foo_object2 &amp; PAGE_MASK)
                        panic("foommap: foo_object2 not page aligned");
                if (pmap_extract(pmap_kernel(), foo_object2 +
                    (u_int)off - FOO_REGION2_MMAP_OFFSET, &amp;pa) == FALSE)
                        panic("foommap: foo_object2 page not mapped");
                return (atop(pa));
        }

        /* Page not found. */
        return (-1);
}</pre>
      
	<h4 class="title">
<a name="accessing_a_kernel_structure_from_userland"></a>&#12518;&#12540;&#12470;&#12540;&#12521;&#12531;&#12489;&#12363;&#12425;&#12459;&#12540;&#12493;&#12523;&#12398;&#27083;&#36896;&#20307;&#12408;&#12450;&#12463;&#12475;&#12473;&#12377;&#12427; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>
	
	<p>&#33391;&#12356;&#20363;&#12364;  <code class="code">
	    <a href="http://cvsweb.NetBSD.org/bsdweb.cgi/src/usr.bin/vmstat/dkstats.c?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top"><code class="filename">src/usr.bin/vmstat/dkstats.c</code></a></code>
	  &#12395;&#12354;&#12426;&#12414;&#12377;&#12290;&#12371;&#12371;&#12391;&#12399;&#12487;&#12451;&#12473;&#12463;&#12398;&#32113;&#35336;&#24773;&#22577;&#12434;&#35501;&#12435;&#12391;&#12356;&#12414;&#12377;&#12290;</p>
      
	<h4 class="title">
<a name="sample_driver"></a>&#21442;&#32771;&#12395;&#12391;&#12365;&#12381;&#12358;&#12394;&#31777;&#21336;&#12394; PCI &#12489;&#12521;&#12452;&#12496;&#12540;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12363; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>
	<p><code class="filename">sys/dev/pci/puc.c</code> &#12434;&#21442;&#32771;&#12395;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;&#12371;&#12428;&#12399;&#12289;&#26368;&#12418;&#31777;&#21336;&#12394;&#12489;&#12521;&#12452;&#12496;&#12540;&#12398;
	  &#12402;&#12392;&#12388;&#12391;&#12377;&#12290;PUC &#12399;&#12289;&#12402;&#12392;&#12388;&#20197;&#19978;&#12398;&#12471;&#12522;&#12450;&#12523;&#12289;&#12497;&#12521;&#12524;&#12523;&#12509;&#12540;&#12488;&#12434;&#25345;&#12388;&#12487;&#12496;&#12452;&#12473;
	  &#12391;&#12289;&#36890;&#24120;&#12289;&#27161;&#28310;&#30340;&#12394;&#12481;&#12483;&#12503;&#12434;&#20351;&#29992;&#12375;&#12390;&#12356;&#12414;&#12377;(&#20363;&#12360;&#12400;&#12289;&#12471;&#12522;&#12450;&#12523;&#12398; 16550 UART)&#12290;
	  &#12489;&#12521;&#12452;&#12496;&#12540;&#12399;&#12289;&#21336;&#12395; &#12471;&#12522;&#12450;&#12523;&#12289;&#12354;&#12427;&#12356;&#12399;&#12497;&#12521;&#12524;&#12523;&#12467;&#12531;&#12488;&#12525;&#12540;&#12521;&#12540;&#12398;&#12524;&#12472;&#12473;&#12479;&#12540;
	  &#12398; I/O &#12450;&#12489;&#12524;&#12473;&#12434;&#12373;&#12364;&#12375;&#12289;&#12381;&#12428;&#12434;&#12471;&#12522;&#12450;&#12523;&#12289;&#12414;&#12383;&#12399;&#12497;&#12521;&#12524;&#12523;&#12489;&#12521;&#12452;&#12496;&#12540;&#12408;&#28193;&#12377;
	  &#12384;&#12369;&#12391;&#12377;&#12290;</p> 
      
	<h4 class="title">
<a name="other-related-links"></a>&#20182;&#12398;&#38306;&#36899;&#12377;&#12427;&#12522;&#12531;&#12463; (<a href="#misc">&#12488;&#12483;&#12503;</a>)
  </h4>
	
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?driver+9+NetBSD-6.0+i386">driver(9)</a> - &#12487;&#12496;&#12452;&#12473;&#12489;&#12521;&#12452;&#12496;&#12540;&#12364;&#21033;&#29992;&#12377;&#12427;
	    NetBSD &#12398;&#33258;&#21205;&#12467;&#12531;&#12501;&#12451;&#12462;&#12517;&#12524;&#12540;&#12471;&#12519;&#12531;&#12398;&#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12540;&#12473;</li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?autoconf+9+NetBSD-6.0+i386">autoconf(9)</a> - NetBSD &#12398;&#33258;&#21205;&#12467;&#12531;&#12501;&#12451;&#12462;&#12517;&#12524;&#12540;&#12471;&#12519;&#12531;&#12501;&#12524;&#12540;&#12512;&#12527;&#12540;&#12463;&#12395;&#12388;&#12356;&#12390;&#12398;
	    &#20840;&#33324;&#30340;&#12394;&#35500;&#26126;</li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?config+9+NetBSD-6.0+i386">config(9)</a> - &#33258;&#21205;&#12467;&#12531;&#12501;&#12451;&#12462;&#12517;&#12524;&#12540;&#12471;&#12519;&#12531;&#12501;&#12524;&#12540;&#12512;&#12527;&#12540;&#12463;&#12398;
	    &#12300;&#12487;&#12496;&#12452;&#12473;&#23450;&#32681;&#12301;&#35328;&#35486;</li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?bus_dma+9+NetBSD-6.0+i386">bus_dma(9)</a> - NetBSD &#12398;&#12496;&#12473;&#12392;&#12510;&#12471;&#12531;&#29420;&#31435;&#12394; DMA &#12501;&#12524;&#12540;&#12512;&#12527;&#12540;&#12463;&#12289;
	    &#12371;&#12428;&#12395;&#38306;&#12377;&#12427;<a class="ulink" href="../../../docs/kernel/bus_dma.pdf" target="_top">&#35542;&#25991;</a> (64k, PDF)</li>
<li class="listitem">
<a href="http://netbsd.gw.com/cgi-bin/man-cgi?bus_space+9+NetBSD-6.0+i386">bus_space(9)</a> - NetBSD
	    &#12398;&#12496;&#12473;&#12473;&#12506;&#12540;&#12473;&#12398;&#25805;&#20316;&#12398;&#12383;&#12417;&#12398;&#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12540;&#12473;</li>
<li class="listitem">
<a class="ulink" href="../../../docs/kernel/scsidma.html" target="_top">SCSI DMA
	      &#12399;&#12393;&#12398;&#12424;&#12358;&#12395;&#21205;&#20316;&#12377;&#12427;&#12363;</a> - Tohru Nishimura &#12395;&#12424;&#12427;</li>
<li class="listitem">
<a class="ulink" href="lazyfpu.html" target="_top">lazy FPU
	      &#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12473;&#12452;&#12483;&#12481;&#12399;&#12393;&#12398;&#12424;&#12358;&#12395;&#21205;&#20316;&#12377;&#12427;&#12363;</a> - Tohru Nishimura &#12395;&#12424;&#12427;</li>
<li class="listitem"><a class="ulink" href="../../../docs/kernel/converting-ethernet-drivers.html" target="_top">&#26132;&#12398; BSD &#12398;&#12452;&#12540;&#12469;&#12493;&#12483;&#12488;&#12489;&#12521;&#12452;&#12496;&#12540;&#12398; NetBSD-1.2D &#20197;&#38477;&#12408;&#12398;&#31227;&#26893;</a></li>
<li class="listitem"><a class="ulink" href="porting-freebsd-net.html" target="_top">FreeBSD &#12398;&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;&#12489;&#12521;&#12452;&#12496;&#12540;&#12434; NetBSD &#12395;&#31227;&#26893;&#12377;&#12427;&#12383;&#12417;&#12398;&#12513;&#12514;</a></li>
</ul></div>
      <hr>Back to  <em><a href="./">NetBSD &#12489;&#12461;&#12517;&#12513;&#12531;&#12486;&#12540;&#12471;&#12519;&#12531;: &#12459;&#12540;&#12493;&#12523;</a></em>
</div></div></div>
<div class="navfoot"></div>
<div id="footer"><div id="footerContent"><center>
<span class="footfeed"><a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">
	  &#36899;&#32097;</a> |
      </span><span class="footcopy"><a href="../../../about/disclaimer.html">
      &#20813;&#36012;&#20107;&#38917;</a> |

      <span class="copyright">Copyright © 1994-2012 The NetBSD Foundation, Inc. </span>ALL RIGHTS RESERVED.<br>NetBSD<sup>®</sup>&#12399;
	 NetBSD Foundation, Inc. &#12398;&#30331;&#37682;&#21830;&#27161;&#12391;&#12377;&#12290;</span>
</center></div></div>
</div></body>
</html>
