<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 4. Using pkgsrc</title>
<link rel="stylesheet" type="text/css" href="/global.css">
<meta name="generator" content="DocBook XSL Stylesheets VX.X.X">
<link rel="home" href="index.html" title="The pkgsrc guide">
<link rel="up" href="users-guide.html" title="Part I. The pkgsrc user's guide">
<link rel="prev" href="platforms.html" title="Chapter 3. Using pkgsrc on systems other than NetBSD">
<link rel="next" href="configuring.html" title="Chapter 5. Configuring pkgsrc">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 4. Using pkgsrc</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="platforms.html">Prev</a> </td>
<th width="60%" align="center">Part I. The pkgsrc user's guide</th>
<td width="20%" align="right"> <a accesskey="n" href="configuring.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" title="Chapter 4. Using pkgsrc">
<div class="titlepage"><div><div><h2 class="title">
<a name="using"></a>Chapter 4. Using pkgsrc</h2></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="using.html#using-pkg">4.1. Using binary packages</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="using.html#finding-binary-packages">4.1.1. Finding binary packages</a></span></dt>
<dt><span class="sect2"><a href="using.html#installing-binary-packages">4.1.2. Installing binary packages</a></span></dt>
<dt><span class="sect2"><a href="using.html#using.pkg_delete">4.1.3. Deinstalling packages</a></span></dt>
<dt><span class="sect2"><a href="using.html#using.pkg_info">4.1.4. Getting information about installed packages</a></span></dt>
<dt><span class="sect2"><a href="using.html#vulnerabilities">4.1.5. Checking for security vulnerabilities in installed packages</a></span></dt>
<dt><span class="sect2"><a href="using.html#pkg_versions">4.1.6. Finding if newer versions of your installed packages are in pkgsrc</a></span></dt>
<dt><span class="sect2"><a href="using.html#using.pkg_admin">4.1.7. Other administrative functions</a></span></dt>
<dt><span class="sect2"><a href="using.html#a-word-of-warning">4.1.8. A word of warning</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="using.html#building-packages-from-source">4.2. Building packages from source</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="using.html#requirements">4.2.1. Requirements</a></span></dt>
<dt><span class="sect2"><a href="using.html#fetching-distfiles">4.2.2. Fetching distfiles</a></span></dt>
<dt><span class="sect2"><a href="using.html#how-to-build-and-install">4.2.3. How to build and install</a></span></dt>
</dl></dd>
</dl>
</div>
<p>Basically, there are two ways of using pkgsrc. The first
is to only install the package tools and to use binary packages
that someone else has prepared. This is the <span class="quote">&#8220;<span class="quote">pkg</span>&#8221;</span>
in pkgsrc. The second way is to install the <span class="quote">&#8220;<span class="quote">src</span>&#8221;</span>
of pkgsrc, too. Then you are able to build your own packages,
and you can still use binary packages from someone else.</p>
<div class="sect1" title="4.1. Using binary packages">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="using-pkg"></a>4.1. Using binary packages</h2></div></div></div>
<p>On the <a class="ulink" href="ftp://ftp.NetBSD.org/" target="_top">ftp.NetBSD.org</a>
  server and its mirrors, there are collections of binary packages,
  ready to be installed. These binary packages have been built using the
  default settings for the directories, that is:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><code class="filename">/usr/pkg</code> for <code class="varname">LOCALBASE</code>, where most of the files are installed,</p></li>
<li class="listitem"><p><code class="filename">/usr/pkg/etc</code> for configuration files,</p></li>
<li class="listitem"><p><code class="filename">/var</code> for <code class="varname">VARBASE</code>, where those files are installed that may change after installation.</p></li>
</ul></div>
<p>If you cannot use these directories for whatever reasons (maybe
  because you're not root), you cannot use these binary packages, but
  have to build the packages yourself, which is explained in <a class="xref" href="platforms.html#bootstrapping-pkgsrc" title="3.2. Bootstrapping pkgsrc">Section 3.2, &#8220;Bootstrapping pkgsrc&#8221;</a>.</p>
<div class="sect2" title="4.1.1. Finding binary packages">
<div class="titlepage"><div><div><h3 class="title">
<a name="finding-binary-packages"></a>4.1.1. Finding binary packages</h3></div></div></div>
<p>To install binary packages, you first need to know from where
    to get them. The first place where you should look is on the main
    pkgsrc FTP server in the directory <a class="ulink" href="ftp://ftp.NetBSD.org/pub/pkgsrc/packages/" target="_top"><code class="filename">/pub/pkgsrc/packages</code></a>.</p>
<p>This directory contains binary packages for multiple
    platforms. First, select your operating system. (Ignore the
    directories with version numbers attached to it, they just exist for
    legacy reasons.) Then, select your hardware architecture, and in the
    third step, the OS version and the <span class="quote">&#8220;<span class="quote">version</span>&#8221;</span> of pkgsrc.</p>
<p>In this directory, you often find a file called
    <code class="filename">bootstrap.tar.gz</code> which contains the package
    management tools. If the file is missing, it is likely that your
    operating system already provides those tools. Download the file and
    extract it in the <code class="filename">/</code> directory. It will create
    the directories <code class="filename">/usr/pkg</code> (containing the tools
    for managing binary packages) and <code class="filename">/var/db/pkg</code>
    (the database of installed packages).</p>
</div>
<div class="sect2" title="4.1.2. Installing binary packages">
<div class="titlepage"><div><div><h3 class="title">
<a name="installing-binary-packages"></a>4.1.2. Installing binary packages</h3></div></div></div>
<p>In the directory from the last section, there is a
    subdirectory called <code class="filename">All</code>, which contains all the
    binary packages that are available for the platform, excluding those
    that may not be distributed via FTP or CDROM (depending on which
    medium you are using).</p>
<p>To install packages directly from an FTP or HTTP server, run
    the following commands in a Bourne-compatible shell (be sure to
    <span class="command"><strong>su</strong></span> to root first):</p>
<pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>PATH="/usr/pkg/sbin:$PATH"</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>PKG_PATH="ftp://ftp.NetBSD.org/pub/pkgsrc/packages/<em class="replaceable"><code>OPSYS</code></em>/<em class="replaceable"><code>ARCH</code></em>/<em class="replaceable"><code>VERSIONS</code></em>/All"</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export PATH PKG_PATH</code></strong>
</pre>
<p>Instead of URLs, you can also use local paths, for example if
    you are installing from a set of CDROMs, DVDs or an NFS-mounted
    repository. If you want to install packages from multiple sources,
    you can separate them by a semicolon in
    <code class="varname">PKG_PATH</code>.</p>
<p>After these preparations, installing a package is very
    easy:</p>
<pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>pkg_add openoffice2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pkg_add kde-3.5.7</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pkg_add ap2-php5-*</code></strong>
</pre>
<p>Note that any prerequisite packages needed to run the
    package in question will be installed, too, assuming they are
    present where you install from.</p>
<p>Adding packages might install vulnerable packages.
    Thus you should run <span class="command"><strong>pkg_admin audit</strong></span>
    regularly, especially after installing new packages, and verify
    that the vulnerabilities are acceptable for your configuration.</p>
<p>After you've installed packages, be sure to have
    <code class="filename">/usr/pkg/bin</code> and <code class="filename">/usr/pkg/sbin</code> in your
    <code class="varname">PATH</code> so you can actually start the just
    installed program.</p>
</div>
<div class="sect2" title="4.1.3. Deinstalling packages">
<div class="titlepage"><div><div><h3 class="title">
<a name="using.pkg_delete"></a>4.1.3. Deinstalling packages</h3></div></div></div>
<p>To deinstall a package, it does not matter whether it was
    installed from source code or from a binary package. The
    <span class="command"><strong>pkg_delete</strong></span> command does not know it anyway.
    To delete a package, you can just run <span class="command"><strong>pkg_delete
    <em class="replaceable"><code>package-name</code></em></strong></span>. The package
    name can be given with or without version number. Wildcards can
    also be used to deinstall a set of packages, for example
    <code class="literal">*emacs*</code>. Be sure to include them in quotes,
    so that the shell does not expand them before
    <code class="literal">pkg_delete</code> sees them.</p>
<p>The <code class="option">-r</code> option is very powerful: it
    removes all the packages that require the package in question
    and then removes the package itself. For example:

    </p>
<pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>pkg_delete -r jpeg</code></strong>
    </pre>
<p>

    will remove jpeg and all the packages that used it; this allows
    upgrading the jpeg package.</p>
</div>
<div class="sect2" title="4.1.4. Getting information about installed packages">
<div class="titlepage"><div><div><h3 class="title">
<a name="using.pkg_info"></a>4.1.4. Getting information about installed packages</h3></div></div></div>
<p>The <span class="command"><strong>pkg_info</strong></span> shows information about
    installed packages or binary package files.</p>
</div>
<div class="sect2" title="4.1.5. Checking for security vulnerabilities in installed packages">
<div class="titlepage"><div><div><h3 class="title">
<a name="vulnerabilities"></a>4.1.5. Checking for security vulnerabilities in installed packages</h3></div></div></div>
<p>
      The NetBSD Security-Officer and Packages Groups maintain a list of
      known security vulnerabilities to packages which are (or have been)
      included in pkgsrc.  The list is available from the NetBSD
      FTP site at <a class="ulink" href="ftp://ftp.NetBSD.org/pub/pkgsrc/distfiles/vulnerabilities" target="_top">ftp://ftp.NetBSD.org/pub/pkgsrc/distfiles/vulnerabilities</a>.
    </p>
<p>
      Through <span class="command"><strong>pkg_admin fetch-pkg-vulnerabilities</strong></span>,
      this list can be downloaded
      automatically, and a security audit of all packages installed on a system
      can take place.
    </p>
<p>
      There are two components to auditing.  The first
      step, <span class="command"><strong>pkg_admin fetch-pkg-vulnerabilities</strong></span>,
      is for downloading
      the list of vulnerabilities from the NetBSD FTP site.  The second
      step, <span class="command"><strong>pkg_admin audit</strong></span>, checks to see if any of your
      installed packages are vulnerable.  If a package is vulnerable, you
      will see output similar to the following:
    </p>
<pre class="screen">Package samba-2.0.9 has a local-root-shell vulnerability, see
    http://www.samba.org/samba/whatsnew/macroexploit.html</pre>
<p>
      You may wish to have the
      <a class="ulink" href="ftp://ftp.NetBSD.org/pub/pkgsrc/distfiles/vulnerabilities" target="_top">vulnerabilities</a>
      file downloaded daily so that
      it remains current.  This may be done by adding an appropriate entry
      to the root users <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?crontab+5+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">crontab</span>(5)</span></a> entry.  For example the entry
      </p>
<pre class="screen">
# download vulnerabilities file
0 3 * * * /usr/sbin/pkg_admin fetch-pkg-vulnerabilities &gt;/dev/null 2&gt;&amp;1
      </pre>
<p>
      will update the vulnerability list every day at 3AM. You may wish to do
      this more often than once a day.

      In addition, you may wish to run the package audit from the daily
      security script.  This may be accomplished by adding the following
      line to <code class="filename">/etc/security.local</code>:
      </p>
<pre class="screen">
/usr/sbin/pkg_admin audit
      </pre>
<p>
    </p>
</div>
<div class="sect2" title="4.1.6. Finding if newer versions of your installed packages are in pkgsrc">
<div class="titlepage"><div><div><h3 class="title">
<a name="pkg_versions"></a>4.1.6. Finding if newer versions of your installed packages are in pkgsrc</h3></div></div></div>
<p>
      Install <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/lintpkgsrc/README.html" target="_top"><code class="filename">pkgtools/lintpkgsrc</code></a> and run
      <span class="command"><strong>lintpkgsrc</strong></span> with the <span class="quote">&#8220;<span class="quote">-i</span>&#8221;</span>
      argument to check if your packages are up-to-date, e.g.
    </p>
<pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>lintpkgsrc -i</code></strong>
...
Version mismatch: 'tcsh' 6.09.00 vs 6.10.00
    </pre>
<p>You can then use <span class="command"><strong>make update</strong></span> to update the
    package on your system and rebuild any dependencies.
    </p>
</div>
<div class="sect2" title="4.1.7. Other administrative functions">
<div class="titlepage"><div><div><h3 class="title">
<a name="using.pkg_admin"></a>4.1.7. Other administrative functions</h3></div></div></div>
<p>The <span class="command"><strong>pkg_admin</strong></span> executes various
    administrative functions on the package system.</p>
</div>
<div class="sect2" title="4.1.8. A word of warning">
<div class="titlepage"><div><div><h3 class="title">
<a name="a-word-of-warning"></a>4.1.8. A word of warning</h3></div></div></div>
<p>Please pay very careful attention to the warnings
    expressed in the <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?pkg_add+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> manual page about the
    inherent dangers of installing binary packages which you did
    not create yourself, and the security holes that can be
    introduced onto your system by indiscriminate adding of such
    files.</p>
<p>The same warning of course applies to every package you
    install from source when you haven't completely read and
    understood the source code of the package, the compiler that
    is used to build the package and all the other tools that are
    involved.</p>
</div>
</div>
<div class="sect1" title="4.2. Building packages from source">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="building-packages-from-source"></a>4.2. Building packages from source</h2></div></div></div>
<p>After obtaining pkgsrc, the <code class="filename">pkgsrc</code>
  directory now contains a set of packages, organized into
  categories. You can browse the online index of packages, or run
  <span class="command"><strong>make readme</strong></span> from the <code class="filename">pkgsrc</code>
  directory to build local <code class="filename">README.html</code> files for
  all packages, viewable with any web browser such as <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/www/lynx/README.html" target="_top"><code class="filename">www/lynx</code></a> or <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/www/firefox/README.html" target="_top"><code class="filename">www/firefox</code></a>.</p>
<p>The default <span class="emphasis"><em>prefix</em></span> for installed packages
  is <code class="filename">/usr/pkg</code>. If you wish to change this, you
  should do so by setting <code class="varname">LOCALBASE</code> in
  <a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>. You should not try to use multiple
  different <code class="varname">LOCALBASE</code> definitions on the same
  system (inside a chroot is an exception). </p>
<p>The rest of this chapter assumes that the package is already
  in pkgsrc. If it is not, see <a class="xref" href="developers-guide.html" title="Part II. The pkgsrc developer's guide">Part II, &#8220;The pkgsrc developer's guide&#8221;</a> for
  instructions how to create your own packages.</p>
<div class="sect2" title="4.2.1. Requirements">
<div class="titlepage"><div><div><h3 class="title">
<a name="requirements"></a>4.2.1. Requirements</h3></div></div></div>
<p>To build packages from source, you need a working C
    compiler. On NetBSD, you need to install the
    <span class="quote">&#8220;<span class="quote">comp</span>&#8221;</span> and the <span class="quote">&#8220;<span class="quote">text</span>&#8221;</span> distribution
    sets. If you want to build X11-related packages, the
    <span class="quote">&#8220;<span class="quote">xbase</span>&#8221;</span> and <span class="quote">&#8220;<span class="quote">xcomp</span>&#8221;</span> distribution
    sets are required, too.</p>
</div>
<div class="sect2" title="4.2.2. Fetching distfiles">
<div class="titlepage"><div><div><h3 class="title">
<a name="fetching-distfiles"></a>4.2.2. Fetching distfiles</h3></div></div></div>
<p>The first step for building a package is downloading the
    distfiles (i.e. the unmodified source). If they have not yet been
    downloaded, pkgsrc will fetch them automatically.</p>
<p>If you have all files that you need in the
    <code class="filename">distfiles</code> directory,
    you don't need to connect. If the distfiles are on CD-ROM, you can
    mount the CD-ROM on <code class="filename">/cdrom</code> and add:
    </p>
<pre class="screen">DISTDIR=/cdrom/pkgsrc/distfiles</pre>
<p>
    to your <a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>.</p>
<p>By default a list of distribution sites will be randomly
    intermixed to prevent huge load on servers which holding popular
    packages (for example, SourceForge.net mirrors). Thus, every
    time when you need to fetch yet another distfile all the mirrors
    will be tried in new (random) order. You can turn this feature
    off by setting <code class="varname">MASTER_SORT_RANDOM=NO</code> (for
    <code class="varname">PKG_DEVELOPER</code>s it's already disabled).</p>
<p>You can overwrite some of the major distribution sites to
    fit to sites that are close to your own.  By setting one or two
    variables you can modify the order in which the master sites are
    accessed.  <code class="varname">MASTER_SORT</code> contains a whitespace
    delimited list of domain suffixes.
    <code class="varname">MASTER_SORT_REGEX</code> is even more flexible, it
    contains a whitespace delimited list of regular expressions.  It
    has higher priority than <code class="varname">MASTER_SORT</code>.  Have a
    look at <code class="filename">pkgsrc/mk/defaults/mk.conf</code> to find
    some examples.  This may save some of your bandwidth and
    time.</p>
<p>You can change these settings either in your shell's environment, or,
    if you want to keep the settings, by editing the
    <a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a> file,
    and adding the definitions there.</p>
<p>
      If a package depends on many other packages (such as
      <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/meta-pkgs/kde3/README.html" target="_top"><code class="filename">meta-pkgs/kde3</code></a>), the build process may
      alternate between periods of
      downloading source, and compiling. To ensure you have all the source
      downloaded initially you can run the command:
      </p>
<pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>make fetch-list | sh</code></strong></pre>
<p>
      which will output and run a set of shell commands to fetch the
      necessary files into the <code class="filename">distfiles</code> directory.  You can
      also choose to download the files manually.
    </p>
</div>
<div class="sect2" title="4.2.3. How to build and install">
<div class="titlepage"><div><div><h3 class="title">
<a name="how-to-build-and-install"></a>4.2.3. How to build and install</h3></div></div></div>
<p>
      Once the software has downloaded, any patches will be applied, then it
      will be compiled for you. This may take some time depending on your
      computer, and how many other packages the software depends on and their
      compile time.
    </p>
<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>If using bootstrap or pkgsrc on a non-NetBSD system,
    use the pkgsrc <span class="command"><strong>bmake</strong></span> command instead of
    <span class="quote">&#8220;<span class="quote">make</span>&#8221;</span> in the examples in this guide.</p>
</div>
<p>For example, type</p>
<pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>cd misc/figlet</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>make</code></strong>
    </pre>
<p>at the shell prompt to build the various components of the
    package.</p>
<p>The next stage is to actually install the newly compiled
    program onto your system. Do this by entering:

    </p>
<pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>make install</code></strong>
    </pre>
<p>

    while you are still in the directory for whatever package you
    are installing.</p>
<p>Installing the package on your system may require you to
    be root.  However, pkgsrc has a
    <span class="emphasis"><em>just-in-time-su</em></span> feature, which allows you
    to only become root for the actual installation step.</p>
<p>That's it, the software should now be installed and setup for use.
    You can now enter:

    </p>
<pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>make clean</code></strong>
    </pre>
<p>

    to remove the compiled files in the work directory, as you shouldn't need
    them any more. If other packages were also added to your system
    (dependencies) to allow your program to compile, you can tidy these up
    also with the command:</p>
<pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>make clean-depends</code></strong>
    </pre>
<p>Taking the figlet utility as an example, we can install it on our
    system by building as shown in <a class="xref" href="logs.html" title="Appendix B. Build logs">Appendix B, <i>Build logs</i></a>.</p>
<p>The program is installed under the default root of the
    packages tree - <code class="filename">/usr/pkg</code>. Should this not
    conform to your tastes, set the <code class="varname">LOCALBASE</code>
    variable in your environment, and it will use that value as the
    root of your packages tree. So, to use
    <code class="filename">/usr/local</code>, set
    <code class="varname">LOCALBASE=/usr/local</code> in your environment.
    Please note that you should use a directory which is dedicated to
    packages and not shared with other programs (i.e., do not try and
    use <code class="varname">LOCALBASE=/usr</code>).  Also, you should not try
    to add any of your own files or directories (such as
    <code class="filename">src/</code>, <code class="filename">obj/</code>, or
    <code class="filename">pkgsrc/</code>) below the
    <code class="varname">LOCALBASE</code> tree.  This is to prevent possible
    conflicts between programs and other files installed by the
    package system and whatever else may have been installed
    there.</p>
<p>Some packages look in <a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a> to
    alter some configuration options at build time.  Have a look at
    <code class="filename">pkgsrc/mk/defaults/mk.conf</code> to get an overview
    of what will be set there by default.  Environment variables such
    as <code class="varname">LOCALBASE</code> can be set in
    <a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a> to save having to remember to
    set them each time you want to use pkgsrc.</p>
<p>Occasionally, people want to <span class="quote">&#8220;<span class="quote">look under the
    covers</span>&#8221;</span> to see what is going on when a package is building
    or being installed. This may be for debugging purposes, or out of
    simple curiosity. A number of utility values have been added to
    help with this.</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<p>If you invoke the <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?make+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> command with
	<code class="varname">PKG_DEBUG_LEVEL=2</code>, then a huge amount of
	information will be displayed. For example,</p>
<pre class="screen"><strong class="userinput"><code>make patch PKG_DEBUG_LEVEL=2</code></strong></pre>
<p>will show all the commands that are invoked, up to and
	including the <span class="quote">&#8220;<span class="quote">patch</span>&#8221;</span> stage.</p>
</li>
<li class="listitem">
<p>If you want to know the value of a certain <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?make+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>
	definition, then the <code class="varname">VARNAME</code> definition
	should be used, in conjunction with the show-var
	target. e.g. to show the expansion of the <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?make+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>
	variable <code class="varname">LOCALBASE</code>:</p>
<pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>make show-var VARNAME=LOCALBASE</code></strong>
/usr/pkg
<code class="prompt">%</code>
	</pre>
</li>
</ol></div>
<p>If you want to install a binary package that you've either
    created yourself (see next section), that you put into
    pkgsrc/packages manually or that is located on a remote FTP
    server, you can use the "bin-install" target. This target will
    install a binary package - if available - via <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?pkg_add+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>,
    else do a <span class="command"><strong>make package</strong></span>.  The list of remote FTP
    sites searched is kept in the variable
    <code class="varname">BINPKG_SITES</code>, which defaults to
    ftp.NetBSD.org. Any flags that should be added to <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?pkg_add+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>
    can be put into <code class="varname">BIN_INSTALL_FLAGS</code>.  See
    <code class="filename">pkgsrc/mk/defaults/mk.conf</code> for more
    details.</p>
<p>A final word of warning: If you set up a system that has a
    non-standard setting for <code class="varname">LOCALBASE</code>, be sure to
    set that before any packages are installed, as you cannot use
    several directories for the same purpose. Doing so will result in
    pkgsrc not being able to properly detect your installed packages,
    and fail miserably. Note also that precompiled binary packages are
    usually built with the default <code class="varname">LOCALBASE</code> of
    <code class="filename">/usr/pkg</code>, and that you should
    <span class="emphasis"><em>not</em></span> install any if you use a non-standard
    <code class="varname">LOCALBASE</code>.</p>
</div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="platforms.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="users-guide.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="configuring.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 3. Using pkgsrc on systems other than NetBSD </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 5. Configuring pkgsrc</td>
</tr>
</table>
</div>
</body>
</html>
