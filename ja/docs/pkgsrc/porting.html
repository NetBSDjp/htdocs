<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 26. Porting pkgsrc</title>
<link rel="stylesheet" type="text/css" href="/global.css">
<meta name="generator" content="DocBook XSL Stylesheets VX.X.X">
<link rel="home" href="index.html" title="The pkgsrc guide">
<link rel="up" href="infrastructure.html" title="Part III. The pkgsrc infrastructure internals">
<link rel="prev" href="regression.html" title="Chapter 25. Regression tests">
<link rel="next" href="examples.html" title="Appendix A. A simple example package: bison">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 26. Porting pkgsrc</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="regression.html">Prev</a> </td>
<th width="60%" align="center">Part III. The pkgsrc infrastructure internals</th>
<td width="20%" align="right"> <a accesskey="n" href="examples.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" title="Chapter 26. Porting pkgsrc">
<div class="titlepage"><div><div><h2 class="title">
<a name="porting"></a>Chapter 26. Porting pkgsrc</h2></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="porting.html#porting.opsys">26.1. Porting pkgsrc to a new operating system</a></span></dt>
<dt><span class="sect1"><a href="porting.html#porting.compiler">26.2. Adding support for a new compiler</a></span></dt>
</dl>
</div>
<p>The pkgsrc system has already been ported to many
	operating systems, hardware architectures and compilers. This
	chapter explains the necessary steps to make pkgsrc even more
	portable.</p>
<div class="sect1" title="26.1. Porting pkgsrc to a new operating system">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="porting.opsys"></a>26.1. Porting pkgsrc to a new operating system</h2></div></div></div>
<p>To port pkgsrc to a new operating system (called
	<code class="literal">MyOS</code> in this example), you need to touch the
	following files:</p>
<div class="variablelist"><dl>
<dt><span class="term"><code class="filename">pkgtools/bootstrap-mk-files/files/mods/<em class="replaceable"><code>MyOS</code></em>.sys.mk</code></span></dt>
<dd><p>This file contains some basic definitions, for
	example the name of the C
	compiler.</p></dd>
<dt><span class="term"><code class="filename">mk/bsd.prefs.mk</code></span></dt>
<dd><p>Insert code that defines the variables
	<code class="varname">OPSYS</code>, <code class="varname">OS_VERSION</code>,
	<code class="varname">LOWER_OS_VERSION</code>,
	<code class="varname">LOWER_VENDOR</code>,
	<code class="varname">MACHINE_ARCH</code>, <code class="varname">OBJECT_FMT</code>,
	<code class="varname">APPEND_ELF</code>, and the other variables that
	appear in this file.</p></dd>
<dt><span class="term"><code class="filename">mk/platform/<em class="replaceable"><code>MyOS</code></em>.mk</code></span></dt>
<dd><p>This file contains the platform-specific
	definitions that are used by pkgsrc. Start by copying one of the
	other files and edit it to your
	needs.</p></dd>
<dt><span class="term"><code class="filename">mk/platform/<em class="replaceable"><code>MyOS</code></em>.pkg.dist</code></span></dt>
<dd><p>This file contains a list of directories,
	together with their permission bits and ownership. These
	directories will be created automatically with every package
	that explicitly sets <code class="varname">USE_MTREE</code>. This feature will
	be removed.</p></dd>
<dt><span class="term"><code class="filename">mk/platform/<em class="replaceable"><code>MyOS</code></em>.x11.dist</code></span></dt>
<dd><p>Just copy one of the pre-existing x11.dist files
	to your
	<code class="filename"><em class="replaceable"><code>MyOS</code></em>.x11.dist</code>.</p></dd>
<dt><span class="term"><code class="filename">mk/tools/bootstrap.mk</code></span></dt>
<dd><p>On some operating systems, the tools that are
	provided with the base system are not good enough for pkgsrc.
	For example, there are many versions of <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?sed+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">sed</span>(1)</span></a> that have a
	narrow limit on the line length they can process. Therefore
	pkgsrc brings its own tools, which can be enabled
	here.</p></dd>
<dt><span class="term"><code class="filename">mk/tools/tools.<em class="replaceable"><code>MyOS</code></em>.mk</code></span></dt>
<dd><p>This file defines the paths to all the tools
	that are needed by one or the other package in pkgsrc, as well
	as by pkgsrc itself. Find out where these tools are on your
	platform and add them.</p></dd>
</dl></div>
<p>Now, you should be able to build some basic packages, like
	<a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/lang/perl5/README.html" target="_top"><code class="filename">lang/perl5</code></a>, <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/shells/bash/README.html" target="_top"><code class="filename">shells/bash</code></a>.</p>
</div>
<div class="sect1" title="26.2. Adding support for a new compiler">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="porting.compiler"></a>26.2. Adding support for a new compiler</h2></div></div></div>
<p>TODO</p>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="regression.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="infrastructure.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="examples.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 25. Regression tests </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Appendix A. A simple example package: bison</td>
</tr>
</table>
</div>
</body>
</html>
