<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 9. Frequently Asked Questions</title>
<link rel="stylesheet" type="text/css" href="/global.css">
<meta name="generator" content="DocBook XSL Stylesheets VX.X.X">
<link rel="home" href="index.html" title="The pkgsrc guide">
<link rel="up" href="users-guide.html" title="Part I. The pkgsrc user's guide">
<link rel="prev" href="files.html" title="Chapter 8. Directory layout of the installed files">
<link rel="next" href="developers-guide.html" title="Part II. The pkgsrc developer's guide">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 9. Frequently Asked Questions</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="files.html">Prev</a> </td>
<th width="60%" align="center">Part I. The pkgsrc user's guide</th>
<td width="20%" align="right"> <a accesskey="n" href="developers-guide.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" title="Chapter 9. Frequently Asked Questions">
<div class="titlepage"><div><div><h2 class="title">
<a name="faq"></a>Chapter 9. Frequently Asked Questions</h2></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="faq.html#mailing-list-pointers">9.1. Are there any mailing lists for pkg-related discussion?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#pkgviews-docs">9.2. Where's the pkgviews documentation?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#faq-pkgtools">9.3. Utilities for package management (pkgtools)</a></span></dt>
<dt><span class="sect1"><a href="faq.html#non-root-pkgsrc">9.4. How to use pkgsrc as non-root</a></span></dt>
<dt><span class="sect1"><a href="faq.html#resume-transfers">9.5. How to resume transfers when fetching distfiles?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#x.org-from-pkgsrc">9.6. How can I install/use modular X.org from pkgsrc?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#fetch-behind-firewall">9.7. How to fetch files from behind a firewall</a></span></dt>
<dt><span class="sect1"><a href="faq.html#passive-ftp">9.8. How do I tell <span class="command"><strong>make fetch</strong></span> to do passive FTP?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#fetching-all-distfiles">9.9. How to fetch all distfiles at once</a></span></dt>
<dt><span class="sect1"><a href="faq.html#tmac.andoc-missing">9.10. What does <span class="quote">&#8220;<span class="quote">Don't know how to make
/usr/share/tmac/tmac.andoc</span>&#8221;</span> mean?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#bsd.own.mk-missing">9.11. What does <span class="quote">&#8220;<span class="quote">Could not find bsd.own.mk</span>&#8221;</span> mean?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#using-sudo-with-pkgsrc">9.12. Using 'sudo' with pkgsrc</a></span></dt>
<dt><span class="sect1"><a href="faq.html#faq.conf">9.13. How do I change the location of configuration files?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#audit-packages">9.14. Automated security checks</a></span></dt>
<dt><span class="sect1"><a href="faq.html#ufaq-cflags">9.15. Why do some packages ignore my <code class="varname">CFLAGS</code>?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#ufaq-fail">9.16. A package does not build.  What shall I do?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#faq.rcs-conflicts">9.17. What does <span class="quote">&#8220;<span class="quote">Makefile appears to contain unresolved cvs/rcs/??? merge conflicts</span>&#8221;</span> mean?</a></span></dt>
</dl>
</div>
<p>This section contains hints, tips &amp; tricks on special things in
pkgsrc that we didn't find a better place for in the previous chapters, and
it contains items for both pkgsrc users and developers.</p>
<div class="sect1" title="9.1. Are there any mailing lists for pkg-related discussion?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="mailing-list-pointers"></a>9.1. Are there any mailing lists for pkg-related discussion?</h2></div></div></div>
<p>The following mailing lists may be of interest to pkgsrc users:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a class="ulink" href="http://www.NetBSD.org/mailinglists/index.html#pkgsrc-users" target="_top">pkgsrc-users</a>:
	  This is a general purpose list for most issues regarding
	  pkgsrc, regardless of platform, e.g. soliciting user help
	  for pkgsrc configuration, unexpected build failures, using
	  particular packages, upgrading pkgsrc installations,
	  questions regarding the pkgsrc release branches, etc.  General announcements or
	  proposals for changes that impact the pkgsrc user community,
	  e.g. major infrastructure changes, new features, package
	  removals, etc., may also be posted.</p></li>
<li class="listitem"><p><a class="ulink" href="http://www.NetBSD.org/mailinglists/index.html#pkgsrc-bulk" target="_top">pkgsrc-bulk</a>:
	  A list where the results of pkgsrc bulk builds are sent and
	  discussed.</p></li>
<li class="listitem"><p><a class="ulink" href="http://www.NetBSD.org/mailinglists/index.html#pkgsrc-changes" target="_top">pkgsrc-changes</a>:
	  This list is for those who are interested in getting a
	  commit message for every change committed to pkgsrc. It is
	  also available in digest form, meaning one daily message
	  containing all commit messages for changes to the package
	  source tree in that 24 hour period.</p></li>
</ul></div>
<p>To subscribe, do:</p>
<pre class="programlisting">
<code class="prompt">%</code> echo subscribe <em class="replaceable"><code>listname</code></em> | mail majordomo@NetBSD.org
</pre>
<p>Archives for all these mailing lists are available from
<a class="ulink" href="http://mail-index.NetBSD.org/" target="_top">http://mail-index.NetBSD.org/</a>.</p>
</div>
<div class="sect1" title="9.2. Where's the pkgviews documentation?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="pkgviews-docs"></a>9.2. Where's the pkgviews documentation?</h2></div></div></div>
<p>Pkgviews is tightly integrated with buildlink.  You can find a
pkgviews User's guide in
<code class="filename">pkgsrc/mk/buildlink3/PKGVIEWS_UG</code>.</p>
</div>
<div class="sect1" title="9.3. Utilities for package management (pkgtools)">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="faq-pkgtools"></a>9.3. Utilities for package management (pkgtools)</h2></div></div></div>
<p>The directory <code class="filename">pkgsrc/pkgtools</code> contains
a number of useful utilities for both users and developers of pkgsrc.  This
section attempts only to make the reader aware of the utilities and when
they might be useful, and not to duplicate the documentation that comes
with each package.</p>
<p>Utilities used by pkgsrc (automatically installed when needed):</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/x11-links/README.html" target="_top"><code class="filename">pkgtools/x11-links</code></a>:
      Symlinks for use by buildlink.</p></li></ul></div>
<p>OS tool augmentation (automatically installed when needed):</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/digest/README.html" target="_top"><code class="filename">pkgtools/digest</code></a>:
      Calculates various kinds of checksums (including SHA1).</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/libnbcompat/README.html" target="_top"><code class="filename">pkgtools/libnbcompat</code></a>:
      Compatibility library for pkgsrc tools.</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/mtree/README.html" target="_top"><code class="filename">pkgtools/mtree</code></a>: Installed on
      non-BSD systems due to lack of native mtree.</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_install/README.html" target="_top"><code class="filename">pkgtools/pkg_install</code></a>:
      Up-to-date replacement for
      <code class="filename">/usr/sbin/pkg_install</code>, or for use on operating
      systems where pkg_install is not present.</p></li>
</ul></div>
<p>Utilities used by pkgsrc (not automatically installed):</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_tarup/README.html" target="_top"><code class="filename">pkgtools/pkg_tarup</code></a>:
      Create a binary package from an
      already-installed package.  Used by <span class="command"><strong>make replace</strong></span> to
      save the old package.</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/dfdisk/README.html" target="_top"><code class="filename">pkgtools/dfdisk</code></a>:
      Adds extra functionality to pkgsrc, allowing it to fetch distfiles
      from multiple locations. It currently supports the following
      methods: multiple CD-ROMs and network FTP/HTTP connections.</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/xpkgwedge/README.html" target="_top"><code class="filename">pkgtools/xpkgwedge</code></a>: Put X11
      packages someplace else (enabled by default).</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/devel/cpuflags/README.html" target="_top"><code class="filename">devel/cpuflags</code></a>: Determine
      the best compiler flags to optimise code for your current
      CPU and compiler. </p></li>
</ul></div>
<p>Utilities for keeping track of installed packages, being up to date,
etc:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_chk/README.html" target="_top"><code class="filename">pkgtools/pkg_chk</code></a>: Reports on
      packages whose installed versions do not match the latest pkgsrc
      entries.</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgdep/README.html" target="_top"><code class="filename">pkgtools/pkgdep</code></a>: Makes
      dependency graphs of packages, to aid in choosing a strategy for
      updating.</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgdepgraph/README.html" target="_top"><code class="filename">pkgtools/pkgdepgraph</code></a>: Makes
      graphs from the output of <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgdep/README.html" target="_top"><code class="filename">pkgtools/pkgdep</code></a> (uses graphviz).</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkglint/README.html" target="_top"><code class="filename">pkgtools/pkglint</code></a>: The
      pkglint(1) program checks a pkgsrc entry for errors.</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/lintpkgsrc/README.html" target="_top"><code class="filename">pkgtools/lintpkgsrc</code></a>: The lintpkgsrc(1) program
      does various checks on the complete pkgsrc system.</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgsurvey/README.html" target="_top"><code class="filename">pkgtools/pkgsurvey</code></a>: Report what
      packages you have installed.</p></li>
</ul></div>
<p>Utilities for people maintaining or creating individual packages:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgdiff/README.html" target="_top"><code class="filename">pkgtools/pkgdiff</code></a>: Automate
      making and maintaining patches for a package (includes pkgdiff,
      pkgvi, mkpatches, etc.).</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/rpm2pkg/README.html" target="_top"><code class="filename">pkgtools/rpm2pkg</code></a>,
      <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/url2pkg/README.html" target="_top"><code class="filename">pkgtools/url2pkg</code></a>: Aids in
      converting to pkgsrc.</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/gensolpkg/README.html" target="_top"><code class="filename">pkgtools/gensolpkg</code></a>: Convert
      pkgsrc to a Solaris package.</p></li>
</ul></div>
<p>Utilities for people maintaining pkgsrc (or: more obscure pkg
utilities)</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_comp/README.html" target="_top"><code class="filename">pkgtools/pkg_comp</code></a>: Build
      packages in a chrooted area.</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/libkver/README.html" target="_top"><code class="filename">pkgtools/libkver</code></a>: Spoof
      kernel version for chrooted cross builds.</p></li>
</ul></div>
</div>
<div class="sect1" title="9.4. How to use pkgsrc as non-root">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="non-root-pkgsrc"></a>9.4. How to use pkgsrc as non-root</h2></div></div></div>
<p>If you want to use pkgsrc as non-root user, you can set some
variables to make pkgsrc work under these conditions.  At the very least,
you need to set <code class="varname">UNPRIVILEGED</code> to <span class="quote">&#8220;<span class="quote">yes</span>&#8221;</span>; this
will turn on unprivileged mode and set multiple related variables to allow
installation of packages as non-root.</p>
<p>In case the defaults are not enough, you may want to tune some other
variables used.  For example, if the automatic user/group detection leads
to incorrect values (or not the ones you would like to use), you can change
them by setting <code class="varname">UNPRIVILEGED_USER</code> and
<code class="varname">UNPRIVILEGED_GROUP</code> respectively.</p>
<p>As regards bootstrapping, please note that the
<span class="command"><strong>bootstrap</strong></span> script will ease non-root configuration when
given the <span class="quote">&#8220;<span class="quote">--ignore-user-check</span>&#8221;</span> flag, as it will choose and
use multiple default directories under <code class="filename">~/pkg</code> as the
installation targets.  These directories can be overridden by the
<span class="quote">&#8220;<span class="quote">--prefix</span>&#8221;</span> flag provided by the script, as well as some others
that allow finer tuning of the tree layout.</p>
</div>
<div class="sect1" title="9.5. How to resume transfers when fetching distfiles?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="resume-transfers"></a>9.5. How to resume transfers when fetching distfiles?</h2></div></div></div>
<p>By default, resuming transfers in pkgsrc is disabled, but you can
enable this feature by adding the option
<code class="varname">PKG_RESUME_TRANSFERS=YES</code> into
<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>.  If, during a fetch step, an incomplete
distfile is found, pkgsrc will try to resume it.</p>
<p>You can also
use a different program than the default <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?ftp+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">ftp</span>(1)</span></a> by changing the
<code class="varname">FETCH_USING</code> variable.  You can specify the program by
using of ftp, fetch, wget or curl.  Alternatively, fetching can be disabled
by using the value manual.  A value of custom disables the system defaults
and dependency tracking for the fetch program.  In that case you have to
provide <code class="varname">FETCH_CMD</code>, <code class="varname">FETCH_BEFORE_ARGS</code>,
<code class="varname">FETCH_RESUME_ARGS</code>, <code class="varname">FETCH_OUTPUT_ARGS</code>,
<code class="varname">FETCH_AFTER_ARGS</code>.</p>
<p>For example, if you want to use
<code class="filename">wget</code> to download, you'll have to use something
like:</p>
<pre class="programlisting">
FETCH_USING=	wget
</pre>
</div>
<div class="sect1" title="9.6. How can I install/use modular X.org from pkgsrc?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="x.org-from-pkgsrc"></a>9.6. How can I install/use modular X.org from pkgsrc?</h2></div></div></div>
<p>If you want to use modular X.org from pkgsrc instead of your system's own X11
(<code class="filename">/usr/X11R6</code>, <code class="filename">/usr/openwin</code>, ...)
you will have to add the following line into
<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>:</p>
<pre class="programlisting">
X11_TYPE=modular
</pre>
<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>The DragonFly operating system defaults to using modular X.org from pkgsrc.
</p>
</div>
</div>
<div class="sect1" title="9.7. How to fetch files from behind a firewall">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="fetch-behind-firewall"></a>9.7. How to fetch files from behind a firewall</h2></div></div></div>
<p>If you are sitting behind a firewall which does not allow direct
connections to Internet hosts (i.e. non-NAT), you may specify the
relevant proxy hosts.  This is done using an environment variable in the
form of a URL, e.g. in Amdahl, the machine
<span class="quote">&#8220;<span class="quote">orpheus.amdahl.com</span>&#8221;</span> is one of the firewalls, and it uses
port 80 as the proxy port number.  So the proxy environment variables
are:</p>
<pre class="programlisting">
ftp_proxy=ftp://orpheus.amdahl.com:80/
http_proxy=http://orpheus.amdahl.com:80/
</pre>
</div>
<div class="sect1" title="9.8. How do I tell make fetch to do passive FTP?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="passive-ftp"></a>9.8. How do I tell <span class="command"><strong>make fetch</strong></span> to do passive FTP?</h2></div></div></div>
<p>This depends on which utility is used to retrieve distfiles.  From
<code class="filename">bsd.pkg.mk</code>, <code class="varname">FETCH_CMD</code> is assigned
the first available command from the following list:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><code class="filename">${LOCALBASE}/bin/ftp</code></p></li>
<li class="listitem"><p><code class="filename">/usr/bin/ftp</code></p></li>
</ul></div>
<p>On a default NetBSD installation, this will be
<code class="filename">/usr/bin/ftp</code>, which automatically tries passive
connections first, and falls back to active connections if the server
refuses to do passive.  For the other tools, add the following to your
<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a> file:
<code class="varname">PASSIVE_FETCH=1</code>.</p>
<p>Having that option present will prevent
<code class="filename">/usr/bin/ftp</code> from falling back to active
transfers.</p>
</div>
<div class="sect1" title="9.9. How to fetch all distfiles at once">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="fetching-all-distfiles"></a>9.9. How to fetch all distfiles at once</h2></div></div></div>
<p>You would like to download all the distfiles in a single batch
from work or university, where you can't run a <span class="command"><strong>make
fetch</strong></span>.  There is an archive of distfiles on <a class="ulink" href="ftp://ftp.NetBSD.org/pub/pkgsrc/distfiles/" target="_top">ftp.NetBSD.org</a>,
but downloading the entire directory may not be appropriate.</p>
<p>The answer here is to do a <span class="command"><strong>make fetch-list</strong></span> in
<code class="filename">/usr/pkgsrc</code> or one of its subdirectories, carry the
resulting list to your machine at work/school and use it there.  If you
don't have a NetBSD-compatible <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?ftp+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">ftp</span>(1)</span></a> (like tnftp) at work, don't
forget to set <code class="varname">FETCH_CMD</code> to something that fetches a
URL:</p>
<p>At home:</p>
<pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/pkgsrc</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>make fetch-list FETCH_CMD=wget DISTDIR=/tmp/distfiles &gt;/tmp/fetch.sh</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>scp /tmp/fetch.sh work:/tmp</code></strong></pre>
<p>At work:</p>
<pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sh /tmp/fetch.sh</code></strong></pre>
<p>then tar up <code class="filename">/tmp/distfiles</code> and take it
home.</p>
<p>If you have a machine running NetBSD, and you want to get
<span class="emphasis"><em>all</em></span> distfiles (even ones that aren't for your
machine architecture), you can do so by using the above-mentioned
<span class="command"><strong>make fetch-list</strong></span> approach, or fetch the distfiles
directly by running:</p>
<pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>make mirror-distfiles</code></strong></pre>
<p>If you even decide to ignore
<code class="varname">NO_{SRC,BIN}_ON_{FTP,CDROM}</code>, then you can get everything
by running:</p>
<pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>make fetch NO_SKIP=yes</code></strong></pre>
</div>
<div class="sect1" title="9.10. What does &#8220;Don't know how to make /usr/share/tmac/tmac.andoc&#8221; mean?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="tmac.andoc-missing"></a>9.10. What does <span class="quote">&#8220;<span class="quote">Don't know how to make
/usr/share/tmac/tmac.andoc</span>&#8221;</span> mean?</h2></div></div></div>
<p>When compiling the <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_install/README.html" target="_top"><code class="filename">pkgtools/pkg_install</code></a>
package, you get the error from make that it doesn't know how to make
<code class="filename">/usr/share/tmac/tmac.andoc</code>? This indicates that
you don't have installed the <span class="quote">&#8220;<span class="quote">text</span>&#8221;</span> set (nroff, ...) from
the NetBSD base distribution on your machine.  It is recommended to do
that to format man pages.</p>
<p>In the case of the <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_install/README.html" target="_top"><code class="filename">pkgtools/pkg_install</code></a> package, you
can get away with setting <code class="varname">NOMAN=YES</code> either in the
environment or in <a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>.</p>
</div>
<div class="sect1" title="9.11. What does &#8220;Could not find bsd.own.mk&#8221; mean?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="bsd.own.mk-missing"></a>9.11. What does <span class="quote">&#8220;<span class="quote">Could not find bsd.own.mk</span>&#8221;</span> mean?</h2></div></div></div>
<p>You didn't install the compiler set, <code class="filename">comp.tgz</code>,
when you installed your NetBSD machine.  Please get and install it, by
extracting it in <code class="filename">/</code>:</p>
<pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>tar --unlink -zxvpf .../comp.tgz</code></strong></pre>
<p><code class="filename">comp.tgz</code> is part of every NetBSD release.  Get
the one that corresponds to your release (determine via <span class="command"><strong>uname
-r</strong></span>).</p>
</div>
<div class="sect1" title="9.12. Using 'sudo' with pkgsrc">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="using-sudo-with-pkgsrc"></a>9.12. Using 'sudo' with pkgsrc</h2></div></div></div>
<p>When installing packages as non-root user and using the just-in-time
<a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?su+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> feature of pkgsrc, it can become annoying to type in the root
password for each required package installed.  To avoid this, the sudo
package can be used, which does password caching over a limited time.  To
use it, install sudo (either as binary package or from
<a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/security/sudo/README.html" target="_top"><code class="filename">security/sudo</code></a>) and then put the
following into your <a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>, somewhere
<span class="emphasis"><em>after</em></span> the definition of the
<code class="varname">LOCALBASE</code> variable:</p>
<pre class="programlisting">
.if exists(${LOCALBASE}/bin/sudo)
SU_CMD=        ${LOCALBASE}/bin/sudo /bin/sh -c
.endif
</pre>
</div>
<div class="sect1" title="9.13. How do I change the location of configuration files?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="faq.conf"></a>9.13. How do I change the location of configuration files?</h2></div></div></div>
<p>As the system administrator, you can choose where configuration files
are installed.  The default settings make all these files go into
<code class="filename">${PREFIX}/etc</code> or some of its subdirectories; this may
be suboptimal depending on your expectations (e.g., a read-only,
NFS-exported <code class="varname">PREFIX</code> with a need of per-machine
configuration of the provided packages).</p>
<p>In order to change the defaults, you can modify the
<code class="varname">PKG_SYSCONFBASE</code> variable (in
<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>) to point to your preferred configuration
directory; some common examples include <code class="filename">/etc</code> or
<code class="filename">/etc/pkg</code>.</p>
<p>Furthermore, you can change this value on a per-package basis by
setting the <code class="varname">PKG_SYSCONFDIR.${PKG_SYSCONFVAR}</code> variable.
<code class="varname">PKG_SYSCONFVAR</code>'s value usually matches the name of the
package you would like to modify, that is, the contents of
<code class="varname">PKGBASE</code>.</p>
<p>Note that after changing these settings, you must rebuild and
reinstall any affected packages.</p>
</div>
<div class="sect1" title="9.14. Automated security checks">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="audit-packages"></a>9.14. Automated security checks</h2></div></div></div>
<p>Please be aware that there can often be bugs in third-party software,
and some of these bugs can leave a machine vulnerable to exploitation by
attackers.  In an effort to lessen the exposure, the NetBSD packages team
maintains a database of known-exploits to packages which have at one time
been included in pkgsrc.  The database can be downloaded automatically, and
a security audit of all packages installed on a system can take place.  To
do this, refer to the following two tools (installed as part of the
<a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_install/README.html" target="_top"><code class="filename">pkgtools/pkg_install</code></a> package):</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<p><span class="command"><strong>pkg_admin fetch-pkg-vulnerabilities</strong></span>, an easy way to
    download a list of the security vulnerabilities information.  This list
    is kept up to date by the pkgsrc security team, and is distributed
    from the NetBSD ftp server:</p>
<p><a class="ulink" href="ftp://ftp.NetBSD.org/pkgsrc/distfiles/pkg-vulnerabilities" target="_top">ftp://ftp.NetBSD.org/pkgsrc/distfiles/pkg-vulnerabilities</a></p>
</li>
<li class="listitem"><p><span class="command"><strong>pkg_admin audit</strong></span>, an easy way to audit the
    current machine, checking each known vulnerability.  If a
    vulnerable package is installed, it will be shown by output to stdout,
    including a description of the type of vulnerability, and a URL
    containing more information.</p></li>
</ol></div>
<p>Use of these tools is strongly recommended!  After
<span class="quote">&#8220;<span class="quote">pkg_install</span>&#8221;</span> is installed, please read
the package's message, which you can get by running <strong class="userinput"><code>pkg_info -D
pkg_install</code></strong>.</p>
<p>If this package is installed, pkgsrc builds will use it to
perform a security check before building any package.  See <a class="xref" href="configuring.html#variables-affecting-build" title="5.2. Variables affecting the build process">Section 5.2, &#8220;Variables affecting the build process&#8221;</a> for ways to control this
check.</p>
</div>
<div class="sect1" title="9.15. Why do some packages ignore my CFLAGS?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="ufaq-cflags"></a>9.15. Why do some packages ignore my <code class="varname">CFLAGS</code>?</h2></div></div></div>
<p>When you add your own preferences to the
	<code class="varname">CFLAGS</code> variable in your
	<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>, these flags are passed in
	environment variables to the <code class="filename">./configure</code>
	scripts and to <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?make+1+NetBSD-current"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>. Some package authors ignore the
	<code class="varname">CFLAGS</code> from the environment variable by
	overriding them in the <code class="filename">Makefile</code>s of their
	package.</p>
<p>Currently there is no solution to this problem. If you
	really need the package to use your <code class="varname">CFLAGS</code>
	you should run <span class="command"><strong>make patch</strong></span> in the package
	directory and then inspect any <code class="filename">Makefile</code> and
	<code class="filename">Makefile.in</code> for whether they define
	<code class="varname">CFLAGS</code> explicitly. Usually you can remove
	these lines. But be aware that some <span class="quote">&#8220;<span class="quote">smart</span>&#8221;</span>
	programmers write so bad code that it only works for the
	specific combination of <code class="varname">CFLAGS</code> they have
	chosen.</p>
</div>
<div class="sect1" title="9.16. A package does not build. What shall I do?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="ufaq-fail"></a>9.16. A package does not build.  What shall I do?</h2></div></div></div>
<div class="procedure"><ol class="procedure" type="1">
<li class="step" title="Step 1"><p>Make sure that your copy of pkgsrc is consistent. A
	case that occurs often is that people only update pkgsrc in
	parts, because of performance reasons. Since pkgsrc is one large
	system, not a collection of many small systems, there are
	sometimes changes that only work when the whole pkgsrc tree is
	updated.</p></li>
<li class="step" title="Step 2"><p>Make sure that you don't have any CVS conflicts.
	Search for <span class="quote">&#8220;<span class="quote">&lt;&lt;&lt;&lt;&lt;&lt;</span>&#8221;</span> or
	<span class="quote">&#8220;<span class="quote">&gt;&gt;&gt;&gt;&gt;&gt;</span>&#8221;</span> in all your pkgsrc
	files.</p></li>
<li class="step" title="Step 3"><p>Make sure that you don't have old copies of the packages
	extracted. Run <span class="command"><strong>make clean clean-depends</strong></span> to
	verify this.</p></li>
<li class="step" title="Step 4"><p>If the problem still exists, write a mail to the
	<code class="literal">pkgsrc-users</code> mailing list.</p></li>
</ol></div>
</div>
<div class="sect1" title="9.17. What does &#8220;Makefile appears to contain unresolved cvs/rcs/??? merge conflicts&#8221; mean?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="faq.rcs-conflicts"></a>9.17. What does <span class="quote">&#8220;<span class="quote">Makefile appears to contain unresolved cvs/rcs/??? merge conflicts</span>&#8221;</span> mean?</h2></div></div></div>
<p>You have modified a file from pkgsrc, and someone else has
modified that same file afterwards in the CVS repository. Both changes
are in the same region of the file, so when you updated pkgsrc, the
<code class="literal">cvs</code> command marked the conflicting changes in the
file. Because of these markers, the file is no longer a valid
<code class="filename">Makefile</code>.</p>
<p>Have a look at that file, and if you don't need your local changes
anymore, you can remove that file and run <span class="command"><strong>cvs -q update
-dP</strong></span> in that directory to download the current version.</p>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="files.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="users-guide.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="developers-guide.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 8. Directory layout of the installed files </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Part II. The pkgsrc developer's guide</td>
</tr>
</table>
</div>
</body>
</html>
