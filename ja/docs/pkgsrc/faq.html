<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Chapter 9. よくある質問</title>
<link rel="stylesheet" type="text/css" href="/global.css">
<meta name="generator" content="DocBook XSL Stylesheets VX.X.X">
<link rel="home" href="index.html" title="The pkgsrc guide">
<link rel="up" href="users-guide.html" title="Part I. pkgsrc 利用者向けの手引き">
<link rel="prev" href="files.html" title="Chapter 8. インストールされたファイルのディレクトリー配置">
<link rel="next" href="developers-guide.html" title="Part II. pkgsrc 開発者向けの手引き">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 9. よくある質問</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="files.html">Prev</a> </td>
<th width="60%" align="center">Part I. pkgsrc 利用者向けの手引き</th>
<td width="20%" align="right"> <a accesskey="n" href="developers-guide.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" title="Chapter 9. よくある質問">
<div class="titlepage"><div><div><h2 class="title">
<a name="faq"></a>Chapter 9. よくある質問</h2></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="faq.html#mailing-list-pointers">9.1. pkgについて話しあうためのメーリングリストはありますか?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#pkgviews-docs">9.2. pkgviews のドキュメンテーションはどこにあるか?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#faq-pkgtools">9.3. パッケージ管理用ユーティリティー (pkgtools)</a></span></dt>
<dt><span class="sect1"><a href="faq.html#non-root-pkgsrc">9.4. pkgsrc を root 以外で使う方法</a></span></dt>
<dt><span class="sect1"><a href="faq.html#resume-transfers">9.5. distfile 取得時に、転送を再開する方法は?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#x.org-from-pkgsrc">9.6. pkgsrc の modular X.org をインストールあるいは使用する方法は?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#fetch-behind-firewall">9.7. 防火壁の内側からファイルを取得する方法</a></span></dt>
<dt><span class="sect1"><a href="faq.html#passive-ftp">9.8. どうすれば<span class="command"><strong>make fetch</strong></span>でpassive FTPを使用することができますか?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#fetching-all-distfiles">9.9. 一度にすべてのdistfileを取得する方法</a></span></dt>
<dt><span class="sect1"><a href="faq.html#tmac.andoc-missing">9.10. <span class="quote">“<span class="quote">Don't know how to make
/usr/share/tmac/tmac.andoc</span>”</span> ってどういうこと?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#bsd.own.mk-missing">9.11. <span class="quote">“<span class="quote">Could not find bsd.own.mk</span>”</span> ってどういうこと?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#using-sudo-with-pkgsrc">9.12. pkgsrcで'sudo'を使う</a></span></dt>
<dt><span class="sect1"><a href="faq.html#faq.conf">9.13. 設定ファイルの置き場所を変更する方法は?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#audit-packages">9.14. 自動セキュリティーチェック</a></span></dt>
<dt><span class="sect1"><a href="faq.html#ufaq-cflags">9.15. <code class="varname">CFLAGS</code> を無視するパッケージがあるのはなぜ?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#ufaq-fail">9.16. パッケージが構築できません。どうすればいい?</a></span></dt>
<dt><span class="sect1"><a href="faq.html#faq.rcs-conflicts">9.17. <span class="quote">“<span class="quote">Makefile appears to contain unresolved cvs/rcs/??? merge conflicts</span>”</span> ってどういうこと?</a></span></dt>
</dl>
</div>
<p>この節では、pkgsrc の特別な事柄に関する助言、技巧や要領のうち、
前章までに適当な掲載場所がなかったものを掲載しています。
ここでは、pkgsrc 利用者向けの情報と pkgsrc 開発者向けの情報を、どちらも掲載します。</p>
<div class="sect1" title="9.1. pkgについて話しあうためのメーリングリストはありますか?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="mailing-list-pointers"></a>9.1. pkgについて話しあうためのメーリングリストはありますか?</h2></div></div></div>
<p>pkgsrc の利用者向けに、以下のようなメーリングリストがあります。</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a class="ulink" href="http://www.NetBSD.org/mailinglists/index.html#pkgsrc-users" target="_top">pkgsrc-users</a>:
	  pkgsrc 関連の話題のほとんどをプラットフォームにかかわらず扱う汎用目的のメーリングリストです。
	  たとえば、pkgsrc の設定に関する助けの要請、
	  予期しない構築失敗、個々のパッケージの使用、
	  インストールした pkgsrc の更新、pkgsrc リリース枝に関する質問などです。
	  ここには、一般的なお知らせや、pkgsrc 利用者コミュニティーに影響のある変更
	  (たとえば、大規模な基盤の変更、新機能、パッケージ削除など)
	  の提案も投稿されることがあります。</p></li>
<li class="listitem"><p><a class="ulink" href="http://www.NetBSD.org/mailinglists/index.html#pkgsrc-bulk" target="_top">pkgsrc-bulk</a>:
	  pkgsrc のバルクビルドの結果が送付され、
	  その議論がおこなわれるメーリングリストです。</p></li>
<li class="listitem"><p><a class="ulink" href="http://www.NetBSD.org/mailinglists/index.html#pkgsrc-changes" target="_top">pkgsrc-changes</a>:
	  pkgsrc のすべての変更についての
	  commit メッセージが流れるメーリングリストです。
	  毎日、 24 時間分のすべての commit メッセージをまとめて送る、
	  ダイジェスト版もあります。</p></li>
</ul></div>
<p>参加するためには以下のようにして下さい。</p>
<pre class="programlisting">
<code class="prompt">%</code> echo subscribe <em class="replaceable"><code>listname</code></em> | mail majordomo@NetBSD.org
</pre>
<p>以上の各メーリングリストのアーカイブは
<a class="ulink" href="http://mail-index.NetBSD.org/" target="_top">http://mail-index.NetBSD.org/</a> から辿れます。</p>
</div>
<div class="sect1" title="9.2. pkgviews のドキュメンテーションはどこにあるか?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="pkgviews-docs"></a>9.2. pkgviews のドキュメンテーションはどこにあるか?</h2></div></div></div>
<p>pkgviews は buildlink に密接に統合されています。
pkgviews の利用者向けの手引きは
<code class="filename">pkgsrc/mk/buildlink3/PKGVIEWS_UG</code> にあります。</p>
</div>
<div class="sect1" title="9.3. パッケージ管理用ユーティリティー (pkgtools)">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="faq-pkgtools"></a>9.3. パッケージ管理用ユーティリティー (pkgtools)</h2></div></div></div>
<p><code class="filename">pkgsrc/pkgtools</code> ディレクトリー以下には、
pkgsrc の利用者および開発者それぞれにとって便利なユーティリティーがいくつもあります。
この節の目的は、このユーティリティーの存在と、
どんな場合に有用かを知っていただくことだけであり、
各パッケージの附属ドキュメントを引き写すことではありません。</p>
<p>pkgsrc が使用するユーティリティー (必要に応じて自動的にインストールされます):</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/x11-links/README.html" target="_top"><code class="filename">pkgtools/x11-links</code></a>:
      buildlink が使用するシンボリックリンクです。</p></li></ul></div>
<p>OS ツールの拡張 (必要に応じて自動的にインストールされます):</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/digest/README.html" target="_top"><code class="filename">pkgtools/digest</code></a>:
      各種チェックサム(SHA1 など) を計算します。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/libnbcompat/README.html" target="_top"><code class="filename">pkgtools/libnbcompat</code></a>:
      pkgsrc ツール用の互換ライブラリーです。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/mtree/README.html" target="_top"><code class="filename">pkgtools/mtree</code></a>: BSD 以外のシステムにはネイティブの
      mtree がないため、これがインストールされます。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_install/README.html" target="_top"><code class="filename">pkgtools/pkg_install</code></a>:
      <code class="filename">/usr/sbin/pkg_install</code>
      を最新版に置き換えます。または、
      pkg_install のないオペレーティングシステム用です。</p></li>
</ul></div>
<p>pkgsrc が使用するユーティリティー (自動ではインストールされません):</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_tarup/README.html" target="_top"><code class="filename">pkgtools/pkg_tarup</code></a>:
      インストールされているパッケージをもとに、
      バイナリーパッケージを作成します。 <span class="command"><strong>make replace</strong></span>
      が古いパッケージを保存するのに使います。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/dfdisk/README.html" target="_top"><code class="filename">pkgtools/dfdisk</code></a>:
      distfile を複数の場所から
      fetch できる機能を pkgsrc に追加します。現在のところ、
      以下の方法に対応しています: 複数の CD-ROM および FTP/HTTP
      のネットワーク接続。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/xpkgwedge/README.html" target="_top"><code class="filename">pkgtools/xpkgwedge</code></a>: X11 パッケージの場所を変えます
      (標準で有効となります)。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/devel/cpuflags/README.html" target="_top"><code class="filename">devel/cpuflags</code></a>: お使いの CPU とコンパイラー用にコードを最適化するための
      コンパイラーのフラグを考えてくれます。 </p></li>
</ul></div>
<p>インストールしたパッケージの追跡や最新への追従用などのユーティリティー:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_chk/README.html" target="_top"><code class="filename">pkgtools/pkg_chk</code></a>: インストールされているパッケージのバージョンが
      pkgsrc の最新バージョンと異なるものを報告します。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgdep/README.html" target="_top"><code class="filename">pkgtools/pkgdep</code></a>: パッケージ更新計画の策定を支援するため、
      パッケージの依存関係のグラフを作成します。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgdepgraph/README.html" target="_top"><code class="filename">pkgtools/pkgdepgraph</code></a>: <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgdep/README.html" target="_top"><code class="filename">pkgtools/pkgdep</code></a> の出力をもとに
      (graphviz を使って) 図表を作成します。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkglint/README.html" target="_top"><code class="filename">pkgtools/pkglint</code></a>: pkglint(1) プログラムは
      pkgsrc の個々のパッケージに誤りがないか検査します。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/lintpkgsrc/README.html" target="_top"><code class="filename">pkgtools/lintpkgsrc</code></a>: lintpkgsrc(1) プログラムは
      pkgsrc システム全体に対して各種の検査をおこないます。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgsurvey/README.html" target="_top"><code class="filename">pkgtools/pkgsurvey</code></a>:
      インストール済みのパッケージを報告します。</p></li>
</ul></div>
<p>個々のパッケージの保守や作成をする人のためのユーティリティー:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgdiff/README.html" target="_top"><code class="filename">pkgtools/pkgdiff</code></a>: パッケージ用のパッチの作成や保守を自動化します
      (pkgdiff, pkgvi, mkpatches, ...
      が含まれます)。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/rpm2pkg/README.html" target="_top"><code class="filename">pkgtools/rpm2pkg</code></a>,
      <a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/url2pkg/README.html" target="_top"><code class="filename">pkgtools/url2pkg</code></a>: pkgsrc
      への変換の補助ツールです。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/gensolpkg/README.html" target="_top"><code class="filename">pkgtools/gensolpkg</code></a>: pkgsrc を Solaris
      パッケージに変換します。</p></li>
</ul></div>
<p>pkgsrc を保守する人のためのユーティリティー (あるいは、もっと地味な pkg
ユーティリティー)</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_comp/README.html" target="_top"><code class="filename">pkgtools/pkg_comp</code></a>: chroot
      領域でパッケージを構築します。</p></li>
<li class="listitem"><p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/libkver/README.html" target="_top"><code class="filename">pkgtools/libkver</code></a>: chroot 環境でのクロス構築用に、
      カーネルのバージョンを誤魔化します。</p></li>
</ul></div>
</div>
<div class="sect1" title="9.4. pkgsrc を root 以外で使う方法">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="non-root-pkgsrc"></a>9.4. pkgsrc を root 以外で使う方法</h2></div></div></div>
<p>pkgsrc を root 以外のユーザーで使いたい場合は、いくつかの変数を設定すれば、
そのような環境で pkgsrc が動くようにすることができます。
最低限、<code class="varname">UNPRIVILEGED</code> を <span class="quote">“<span class="quote">yes</span>”</span>
に設定することが必要です。こうすると非特権モードに切り替わり、
関連のある複数の変数が設定されて、
root 以外のユーザーがパッケージをインストールできるようになります。</p>
<p>標準状態の非特権モードでは不十分な場合は、
他の変数を調節するとよいでしょう。たとえば、
ユーザーやグループの自動検出により正しくない (あるいは使いたくない)
値が検出される場合は、それぞれ、
<code class="varname">UNPRIVILEGED_USER</code> や
<code class="varname">UNPRIVILEGED_GROUP</code> を設定すれば変更することができます。</p>
<p>なお、ブートストラップについては、<span class="command"><strong>bootstrap</strong></span>
スクリプトに <span class="quote">“<span class="quote">--ignore-user-check</span>”</span> フラグを与えると、
標準で使われるインストール先が
<code class="filename">~/pkg</code> 以下の複数のディレクトリーになるため、
非 root 用の構成にしやすくなることを覚えておいてください。このディレクトリーは、
他のディレクトリーの配置が細かく調節可能であるのと同様に、
スクリプトに <span class="quote">“<span class="quote">--prefix</span>”</span>
フラグを与えて上書きすることができます。</p>
</div>
<div class="sect1" title="9.5. distfile 取得時に、転送を再開する方法は?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="resume-transfers"></a>9.5. distfile 取得時に、転送を再開する方法は?</h2></div></div></div>
<p>標準では、pkgsrc の転送再開機能は有効になっていませんが、
<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a> にオプション
<code class="varname">PKG_RESUME_TRANSFERS=YES</code> を追加すれば、
この機能を有効にすることができます。こうすると、fetch している最中に、
不完全な distfile があった場合、pkgsrc はそのファイルの残りの部分を取得しようとします。</p>
<p>また、
<code class="varname">FETCH_CMD</code> 変数を変更すれば、
標準である <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?ftp+1+NetBSD-5.0.1+i386"><span class="citerefentry"><span class="refentrytitle">ftp</span>(1)</span></a> 以外のプログラムを使うこともできます。
この変数値を ftp, fetch, wget または curl にすると、指定したプログラムを使うことができます。
このほか、変数値を manual にすると、取得をしないようにすることができます。
変数値を custom にすると、システム標準の設定を使わないようになり、
取得プログラムに対する依存性も追わないようになります。
この場合は、<code class="varname">FETCH_CMD</code>, <code class="varname">FETCH_BEFORE_ARGS</code>,
<code class="varname">FETCH_RESUME_ARGS</code>, <code class="varname">FETCH_OUTPUT_ARGS</code>,
<code class="varname">FETCH_AFTER_ARGS</code> の各変数を設定する必要があります。</p>
<p>たとえば、
ダウンロードに <code class="filename">wget</code>
を使いたい場合は、以下のような設定が必要です。</p>
<pre class="programlisting">
FETCH_USING=	wget
</pre>
</div>
<div class="sect1" title="9.6. pkgsrc の modular X.org をインストールあるいは使用する方法は?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="x.org-from-pkgsrc"></a>9.6. pkgsrc の modular X.org をインストールあるいは使用する方法は?</h2></div></div></div>
<p>システム附属の X11 (<code class="filename">/usr/X11R6</code>,
<code class="filename">/usr/openwin</code>, ...) ではなく pkgsrc の
modular X.org を使いたい場合は、<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>
に以下の行を追加する必要があります。</p>
<pre class="programlisting">
X11_TYPE=modular
</pre>
<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>DragonFly オペレーティングシステムは、標準で、
この pkgsrc の modular X.org の X11 の実装を使います。</p>
</div>
</div>
<div class="sect1" title="9.7. 防火壁の内側からファイルを取得する方法">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="fetch-behind-firewall"></a>9.7. 防火壁の内側からファイルを取得する方法</h2></div></div></div>
<p>もし、あなたが防火壁の内側にいて、インターネットのホストに直接接続できない
(つまりNATを使っていない)場合、適切なプロキシーホストを指定することができます。
これはURL形式の環境変数で指定します。例えば、Amdahlドメインにおいては、
<span class="quote">“<span class="quote">orpheus.amdahl.com</span>”</span> というマシンは防火壁のひとつで、プロキシーポート番号として、
80番のポートを使用します。この場合、proxy環境変数は以下のようになります。</p>
<pre class="programlisting">
ftp_proxy=ftp://orpheus.amdahl.com:80/
http_proxy=http://orpheus.amdahl.com:80/
</pre>
</div>
<div class="sect1" title="9.8. どうすればmake fetchでpassive FTPを使用することができますか?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="passive-ftp"></a>9.8. どうすれば<span class="command"><strong>make fetch</strong></span>でpassive FTPを使用することができますか?</h2></div></div></div>
<p>distfileの取得にどのユーティリティーを使っているかによります。
<code class="filename">bsd.pkg.mk</code>は、以下のリストのなかで利用可能なコマンドのうち、
最初のものを<code class="varname">FETCH_CMD</code>に割り当てます:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><code class="filename">${LOCALBASE}/bin/ftp</code></p></li>
<li class="listitem"><p><code class="filename">/usr/bin/ftp</code></p></li>
</ul></div>
<p>NetBSD のデフォルトのインストールでは、<code class="filename">/usr/bin/ftp</code>となり、これは自動的に、
最初はパッシブ接続を試みます。そして、サーバーがパッシブ接続を拒否した場合
は、アクティブ接続に切り替わります。これ以外のツールの場合は、
<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>に以下の設定を追加してください。
<code class="varname">PASSIVE_FETCH=1</code></p>
<p>これを設定すると、
<code class="filename">/usr/bin/ftp</code>
はアクティブ転送への切り替えをおこなわなくなります。</p>
</div>
<div class="sect1" title="9.9. 一度にすべてのdistfileを取得する方法">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="fetching-all-distfiles"></a>9.9. 一度にすべてのdistfileを取得する方法</h2></div></div></div>
<p><span class="command"><strong>make
fetch</strong></span>を実行できない職場や大学において、
一回のバッチ処理で、すべてのdistfileをダウンロードしたいと思うことがあるかもしれません。<a class="ulink" href="ftp://ftp.NetBSD.org/pub/pkgsrc/distfiles/" target="_top">ftp.NetBSD.org</a>
に distfile が置かれていますが、
このディレクトリーをまるごとダウンロードするのは不適切です。</p>
<p>現時点では、<span class="command"><strong>make fetch-list</strong></span>を
<code class="filename">/usr/pkgsrc</code>またはそのサブディレクトリーで実行し、
その結果のリストを職場や学校のマシンに持ってきて、使用してくださいとしかいえません。
NetBSD と互換な <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?ftp+1+NetBSD-5.0.1+i386"><span class="citerefentry"><span class="refentrytitle">ftp</span>(1)</span></a> (tnftpなど)が使えない場合は、
URLを指定して取得ができるコマンドを
<code class="varname">FETCH_CMD</code>に指定することを忘れないでください:</p>
<p>自宅で:</p>
<pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/pkgsrc</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>make fetch-list FETCH_CMD=wget DISTDIR=/tmp/distfiles &gt;/tmp/fetch.sh</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>scp /tmp/fetch.sh work:/tmp</code></strong></pre>
<p>職場で:</p>
<pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sh /tmp/fetch.sh</code></strong></pre>
<p>実行後、 <code class="filename">/tmp/distfiles</code> を
tar で固めて自宅に持って帰ります。</p>
<p>NetBSD で動いているマシンがあって、<span class="emphasis"><em>すべての</em></span>distfile
(そのマシンのアーキテクチャー向けではないものも含む)を取得したい場合は、
上述の<span class="command"><strong>make fetch-list</strong></span>の方法を使うか、
以下のようにしてdistfileを直接取得することができます。</p>
<pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>make mirror-distfiles</code></strong></pre>
<p><code class="varname">NO_{SRC,BIN}_ON_{FTP,CDROM}</code>
も無視したい場合は、
以下のようにしてすべてのものを取得することができます。</p>
<pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>make fetch NO_SKIP=yes</code></strong></pre>
</div>
<div class="sect1" title="9.10. “Don't know how to make /usr/share/tmac/tmac.andoc” ってどういうこと?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="tmac.andoc-missing"></a>9.10. <span class="quote">“<span class="quote">Don't know how to make
/usr/share/tmac/tmac.andoc</span>”</span> ってどういうこと?</h2></div></div></div>
<p><a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_install/README.html" target="_top"><code class="filename">pkgtools/pkg_install</code></a>パッケージのコンパイル時に、makeが
<code class="filename">/usr/share/tmac/tmac.andoc</code>
の作り方がわからないというエラーを出します。これは、そのマシンに
NetBSD の基本配布物の<span class="quote">“<span class="quote">text</span>”</span>セット(nroffなど)
がインストールされていないことを意味しています。マニュアルページの整形ができるようにするため、
<span class="quote">“<span class="quote">text</span>”</span>セットをインストールしてください。</p>
<p>この<a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_install/README.html" target="_top"><code class="filename">pkgtools/pkg_install</code></a>パッケージの事例は、
環境変数か<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>のどちらかで
<code class="varname">NOMAN=YES</code>を設定して回避することもできます。</p>
</div>
<div class="sect1" title="9.11. “Could not find bsd.own.mk” ってどういうこと?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="bsd.own.mk-missing"></a>9.11. <span class="quote">“<span class="quote">Could not find bsd.own.mk</span>”</span> ってどういうこと?</h2></div></div></div>
<p>NetBSD のインストール時にコンパイラー一式<code class="filename">comp.tgz</code>
をインストールしなかったからです。<code class="filename">comp.tgz</code>を入手し、
<code class="filename">/</code>で展開してインストールしてください:</p>
<pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>tar --unlink -zxvpf .../comp.tgz</code></strong></pre>
<p><code class="filename">comp.tgz</code>は NetBSD のどのリリースにも含まれていますので、
あなたがインストールしたリリース (<span class="command"><strong>uname
-r</strong></span>で調べられます) に合ったものを入手してください。</p>
</div>
<div class="sect1" title="9.12. pkgsrcで'sudo'を使う">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="using-sudo-with-pkgsrc"></a>9.12. pkgsrcで'sudo'を使う</h2></div></div></div>
<p>パッケージのインストールをroot以外のユーザーで実行し、
root権限が必要なところではpkgsrcの <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?su+1+NetBSD-5.0.1+i386"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> 機能を使う場合、
必要なパッケージをインストールするたびに
rootのパスワードを打つのは面倒かもしれません。これを避けるために、
パスワードを一定時間保持してくれるsudoパッケージを使うことができます。
sudoを使うには、sudoを(バイナリーパッケージ、または<a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/security/sudo/README.html" target="_top"><code class="filename">security/sudo</code></a>のいずれかから)
インストールしてから、<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a> の、
<code class="varname">LOCALBASE</code> 変数の定義より
<span class="emphasis"><em>後</em></span>の部分に、以下の内容を書いておきます。</p>
<pre class="programlisting">
.if exists(${LOCALBASE}/bin/sudo)
SU_CMD=        ${LOCALBASE}/bin/sudo /bin/sh -c
.endif
</pre>
</div>
<div class="sect1" title="9.13. 設定ファイルの置き場所を変更する方法は?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="faq.conf"></a>9.13. 設定ファイルの置き場所を変更する方法は?</h2></div></div></div>
<p>システム管理者は、設定ファイルがインストールされる場所を選ぶことができます。
標準の設定では、設定ファイルはすべて <code class="filename">${PREFIX}/etc</code>
またはそのサブディレクトリー以下にインストールされます。
設定ファイルのインストール先は、あなたの都合 (たとえば、
NFS でエクスポートされた読み込み専用の <code class="varname">PREFIX</code>
で、パッケージの設定をマシン毎にする必要がある場合)
にあわせて調整することができます。</p>
<p>標準の設定を変えるために、(<a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a>
で) <code class="varname">PKG_SYSCONFBASE</code> 変数を、
好みの設定用ディレクトリーを指すように変えることができます。
一般的な設定例としては、<code class="filename">/etc</code> や
<code class="filename">/etc/pkg</code> などがあります。</p>
<p>さらに、<code class="varname">PKG_SYSCONFDIR.${PKG_SYSCONFVAR}</code>
変数を設定することで、パッケージ毎に設定用ディレクトリーを変更することができます。
<code class="varname">PKG_SYSCONFVAR</code> の値は、通常は変更対象のパッケージ名に合わせたもの、
つまり、<code class="varname">PKGBASE</code> の値にします。</p>
<p>なお、この設定を変更した後は、影響を受けるパッケージをすべて再構築し、
再インストールする必要があります。</p>
</div>
<div class="sect1" title="9.14. 自動セキュリティーチェック">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="audit-packages"></a>9.14. 自動セキュリティーチェック</h2></div></div></div>
<p>サードパーティーのソフトウェアにはしばしばバグがあること、
そして、バグのなかにはマシンをアタッカーの攻撃に対して脆弱な状態にするものもあることに、
どうか注意してください。そのような攻撃にさらされることを減らすために、NetBSD
パッケージチームでは、pkgsrc化されたことのあるパッケージに関する既知の攻撃のデータベースを保守しています。
このデータベースを自動的にダウンロードして、
システムにインストールされている全パッケージのセキュリティー監査をおこなうことができます。
これをおこなうには、以下の二つのツール (<a href="ftp://ftp.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkg_install/README.html" target="_top"><code class="filename">pkgtools/pkg_install</code></a>
パッケージの一部としてインストールされます) を使います。</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<p><span class="command"><strong>pkg_admin fetch-pkg-vulnerabilities</strong></span>: セキュリティー脆弱性情報のリストの
    ダウンロードを簡単にできるようにするものです。この脆弱性情報のリストは、
    pkgsrc セキュリティーチームが最新の状態に保っており、
    NetBSD ftpサーバーで配布されています。</p>
<p><a class="ulink" href="ftp://ftp.NetBSD.org/pkgsrc/distfiles/pkg-vulnerabilities" target="_top">ftp://ftp.NetBSD.org/pkgsrc/distfiles/pkg-vulnerabilities</a></p>
</li>
<li class="listitem"><p><span class="command"><strong>pkg_admin audit</strong></span>: マシンの監査を簡単にできるようにするもので、
    既知の各脆弱性の確認をします。
    脆弱性のあるパッケージがインストールされていた場合、そのことを標準出力に出力します。
    この出力には、脆弱性の種類の説明と詳細情報のURLが含まれます。</p></li>
</ol></div>
<p>これらのツールを使うよう強くおすすめします。
<span class="quote">“<span class="quote">pkg_install</span>”</span> をインストールした後に、
パッケージのメッセージを読んでください。このメッセージは <strong class="userinput"><code>pkg_info -D
pkg_install</code></strong> を実行すれば表示できます。</p>
<p>このパッケージをインストールすると、pkgsrc
は各パッケージの構築前にこのパッケージを使ってセキュリティーのチェックをするようになります。
このチェックを制御する方法については<a class="xref" href="configuring.html#variables-affecting-build" title="5.2. 構築の過程に影響を及ぼす変数">Section 5.2, “構築の過程に影響を及ぼす変数”</a>をご覧ください。</p>
</div>
<div class="sect1" title="9.15. CFLAGS を無視するパッケージがあるのはなぜ?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="ufaq-cflags"></a>9.15. <code class="varname">CFLAGS</code> を無視するパッケージがあるのはなぜ?</h2></div></div></div>
<p><a class="link" href="configuring.html#mk.conf"><code class="filename">mk.conf</code></a> で
	<code class="varname">CFLAGS</code> 変数に独自の設定をした場合、
	設定されたフラグは環境変数によって <code class="filename">./configure</code>
	スクリプトに渡されてから <a class="citerefentry" href="http://netbsd.gw.com/cgi-bin/man-cgi?make+1+NetBSD-5.0.1+i386"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> に渡されます。
	パッケージの作者によっては、
	環境変数で渡された <code class="varname">CFLAGS</code> を、
	パッケージの <code class="filename">Makefile</code> で上書きして、
	無視するようにしていることがあります。</p>
<p>現在のところ、この問題の解決策はありません。
	独自の <code class="varname">CFLAGS</code> を使うことがどうしても必要な場合は、
	パッケージのディレクトリーで <span class="command"><strong>make patch</strong></span> を実行してから、
	<code class="filename">Makefile</code> と
	<code class="filename">Makefile.in</code> をすべて調べて、
	<code class="varname">CFLAGS</code> を明示的に定義していないかを調べてください。
	ふつうは、その部分を削除することができます。
	ただし、一部の<span class="quote">“<span class="quote">小賢しい</span>”</span>プログラマーは、
	彼らが選んだ特定の <code class="varname">CFLAGS</code>
	の組合せのもとでしか動作しないような、
	まずいコードを書いていることに注意してください。</p>
</div>
<div class="sect1" title="9.16. パッケージが構築できません。どうすればいい?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="ufaq-fail"></a>9.16. パッケージが構築できません。どうすればいい?</h2></div></div></div>
<div class="procedure"><ol class="procedure" type="1">
<li class="step" title="Step 1"><p>使っている pkgsrc ツリーの一貫性を確認します。
	この問題の原因としてありがちなのは、
	時間などを節約するために pkgsrc の一部だけを更新していたというものです。
	pkgsrc は小さなシステムの寄せ集めではなく、ひとつの大きなシステムですので、
	pkgsrc ツリー全体を更新しておかないと動かなくなるような変更が時々おこなわれます。</p></li>
<li class="step" title="Step 2"><p>CVS の衝突が起きていないことを確認します。
	pkgsrc のファイルすべてについて、
	<span class="quote">“<span class="quote">&lt;&lt;&lt;&lt;&lt;&lt;</span>”</span> や
	<span class="quote">“<span class="quote">&gt;&gt;&gt;&gt;&gt;&gt;</span>”</span> という文字列を検索します。</p></li>
<li class="step" title="Step 3"><p>古いパッケージが展開されていないことを確認します。
	これを確認するには、<span class="command"><strong>make clean clean-depends</strong></span>
	を実行します。</p></li>
<li class="step" title="Step 4"><p>以上の確認をおこなってもなお問題がある場合は、
	<code class="literal">pkgsrc-users</code> メーリングリストにメールを出してください。</p></li>
</ol></div>
</div>
<div class="sect1" title="9.17. “Makefile appears to contain unresolved cvs/rcs/??? merge conflicts” ってどういうこと?">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="faq.rcs-conflicts"></a>9.17. <span class="quote">“<span class="quote">Makefile appears to contain unresolved cvs/rcs/??? merge conflicts</span>”</span> ってどういうこと?</h2></div></div></div>
<p>あなたが pkgsrc のファイルに変更を加えており、かつ、
他の誰かが CVS リポジトリーにおいて同じファイルに変更を加えています。
この変更がいずれもファイル内の同じ箇所に対するものであるため、
あなたが pkgsrc を更新したときに、変更が衝突したという印を
<code class="literal">cvs</code> コマンドがファイルにつけたのです。
この印があるために、ファイルが妥当な
<code class="filename">Makefile</code> ではなくなっています。</p>
<p>ファイルの内容を見てください。あなたが独自に加えた変更がもはや不要であれば、
ファイルを削除してからそのディレクトリーで <span class="command"><strong>cvs -q update
-dP</strong></span> を実行し、最新版のファイルをダウンロードすることができます。</p>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="files.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="users-guide.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="developers-guide.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 8. インストールされたファイルのディレクトリー配置 </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Part II. pkgsrc 開発者向けの手引き</td>
</tr>
</table>
</div>
</body>
</html>
