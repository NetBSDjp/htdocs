<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Website XSL Stylesheet V2.6.0">
<link rel="home" href="../../../." title="Welcome to The NetBSD Project: Of course it runs NetBSD.">
<link rel="up" href="../../../ja/ports/sgimips/." title="NetBSD/sgimips">
<link rel="previous" href="../../../ja/ports/sgimips/." title="NetBSD/sgimips">
<link rel="next" href="../../../ja/ports/sh3/." title="NetBSD/sh3">
<link rel="stylesheet" href="../../../global.css" type="text/css">



<title>NetBSD/sgimips: よくある質問</title>
</head>
<body class="website"><div class="webpage">
<a name="ja-ports-sgimips-faq"></a><div id="top"><a href="#mainContent" class="doNotDisplay doNotPrint">本文へ飛ぶ。</a></div>
<div id="header">
<div class="topNavigation">
<span>» </span><a href="../../../docs/guide/en/">
	  ガイド</a> |
	<a href="http://man.NetBSD.org/">マニュアルページ</a> |
	<a href="../../../ja/mailinglists/">
	  メーリングリスト</a>と
	<a href="http://mail-index.NetBSD.org/">記事</a> |
	<a href="http://cvsweb.NetBSD.org/">CVS リポジトリー</a> |
	バグの<a href="http://www.NetBSD.org/cgi-bin/sendpr.cgi?gndb=netbsd">報告</a>
	と
	<a href="../../../ja/support/query-pr.html">
	 照会</a> |
	<a href="../../../ja/docs/software/packages.html">
	  ソフトウェアパッケージ
	</a>
</div>
<div class="centralHeader">
<a href="../../../ja/"><img alt='NetBSD プロジェクト "Of course it runs NetBSD"' width="506" height="90" src="../../../images/NetBSD-headerlogo.png"></a><div class="headerTools"><div id="headerSearch">
<div id="header-cse-search-form" style="width: 24%;">Google custom search</div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script><script type="text/javascript"> 
		  google.load('search', '1', {language : 'ja'});
		  google.setOnLoadCallback(function() {
		  var header_customSearchControl = new google.search.CustomSearchControl(
		  '016685087845965994609:5539h4dkepg');

		  header_customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
		  var header_options = new google.search.DrawOptions();
		  header_options.enableSearchboxOnly("http://google.com/cse?cx=016685087845965994609:5539h4dkepg");
		  header_customSearchControl.draw('header-cse-search-form', header_options);
		  }, true);
		</script><link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css">
</div></div>
</div>
<div class="navBar">
<span class="doNotDisplay">
	  案内:
	</span><a href="../../../ja/">
	  ホーム</a> | 
	<a href="../../../ja/about/">
	  概要</a> | 
	<a href="../../../ja/gallery/">
	  展示室</a> | 
	<a href="../../../ja/releases/">
	  ダウンロード</a> | 
	<a href="../../../ja/docs/">
	  ドキュメンテーション</a> | 
	<a href="../../../ja/support/">
	  サポート</a> | 
	<a href="../../../ja/community/">
	  コミュニティー</a> | 
	<a href="../../../ja/ports/">
	  機種</a>
</div>
</div>
<div id="content"><div class="fullWidth"><div class="rowOfBoxes">
<h1>NetBSD/sgimips: よくある質問</h1>
<h3 class="title"><a name="general">全般的な質問</a></h3>
<ul>
<li><a href="#serialconsole">Indy のシリアルコンソールに関して知っておく価値のある事柄</a></li>
<li><a href="#resetting-eaddr">IP22 その他で $eaddr をリセットする方法は ?</a></li>
<li><a href="#prom-tftp-client-failing">PROM tftp クライアントがデフォルトの設定の NetBSD の tftpd との組み合わせでうまく動きません</a></li>
<li><a href="#prom-issues">このほかにありそうな PROM の問題</a></li>
<li><a href="#sgivol">ブートローダーを (sgivol を使って) 更新する</a></li>
</ul>
<h3 class="title"><a name="other">他の情報源</a></h3>
<ul>
<li><a href="#on-site">NetBSD ドキュメンテーション</a></li>
<li><a href="#off-site">サイト外のドキュメンテーション</a></li>
</ul>
<hr>
<h3 class="title">全般的な質問</h3>
<h4 class="title">
<a name="serialconsole"></a>Indy のシリアルコンソールに関して知っておく価値のある事柄 (<a href="#general">top</a>)
  </h4>
<p>
この情報は他の機種にも適用できるかもしれないことに留意しておいてください。
マシンをシリアルコンソールでブートできるようにするため、
マシンを立ち上げるときはキーボードを外しておいてください。
シリアルコンソールは、デフォルトでは serial #1 で、 9600、 8N1 で動作します。
</p>
<p>
PROM モニターで "<code class="code">setenv console d</code>" とすることでコンソールを
serial #1 に、 "<code class="code">setenv console d2</code>" とすることで serial #2
にすることもできます (デフォルトは "<code class="code">g</code>" です) 。また、
コンソールの速度は "<code class="code">setenv dbaud &lt;bps&gt;</code>" で設定できます。
これらの PROM 変数を設定した後は、 "<code class="code">init</code>" するか、マシンを
リブートします。
</p>
<p>

IRIX をコンソールからブートした場合、シリアルコンソール上でのログインが
できなくなります。 /etc/inittab を編集して下記の行を追加することで、
ログインできるようになります。
</p>

<pre class="programlisting">st:23:respawn:/sbin/getty systty co_9600        # serial console - HF</pre>

<p>
このあと、忘れずに "<code class="code">init q</code>" して inittab を再読み込みしてください。
</p>
<p>

シリアルポートのピン配置は SPARC システムのシリアルポートと同じですので、
ハードウェアハンドシェーキング線を使わない用途に限れば、 Macintosh
のシリアルケーブルはシリアルコンソール用のケーブルとしてしっかり使えます。
詳細については、 <a class="ulink" href="../../docs/Hardware/Misc/serial.html" target="_top">NetBSD
シリアルポート入門</a>を参照してください。
</p>

<h4 class="title">
<a name="resetting-eaddr"></a>IP22 その他で $eaddr をリセットする方法は ? (<a href="#general">top</a>)
  </h4>
<p>
ここに示すのは、少なくとも Indy と、おそらく HPC3 を持つ他のマシンでも
使える、イーサネットアドレスの設定方法です。
</p>
<p>

一切の責任を持たないので…以下省略。
</p>
<p>

PROM プロンプトで:
</p>
<pre class="programlisting">dump -w -x 0xbfbe04e8</pre>
<p>

この出力の妥当性チェックとして、 'ec0: bad ethernet address'
エラーメッセージで示されるアドレスと一致するかどうか調べます。
もし一致していなければ、なにも上書きすべきではないでしょう。
</p>

<pre class="programlisting">fill -w -v 0xGG 0xbfbe04e8
fill -w -v 0xHH 0xbfbe04ec
fill -w -v 0xII 0xbfbe04f0
fill -w -v 0xJJ 0xbfbe04f4
fill -w -v 0xKK 0xbfbe04f8
fill -w -v 0xLL 0xbfbe04fc</pre>

<p>

ここで、 GG:HH:II:JJ:KK:LL が、予定しているイーサネットアドレスになるように
します。マシンに附属してきたアドレスを使うのがよいでしょう。
わからなければマシンの背面を調べてください。
</p>
<p>

電源を落とし、一分間待ってから電源を入れます。これで、 $eaddr 以外の
すべての変数は、 resetenv コマンドを使ったときのようにリセットされています。
</p>

<h4 class="title">
<a name="prom-tftp-client-failing"></a>PROM tftp クライアントがデフォルトの設定の NetBSD の tftpd との組み合わせでうまく動きません (<a href="#general">top</a>)
  </h4>
<p>

SGI マシンの PROM tftp クライアントは、デフォルトの設定の NetBSD の tftpd
との組み合わせで、うまく動作しないことがあります。そのマシンの PROM が
符号ビットの立ったポート番号に対応していないせいかもしれません。
これに対する次善策は、匿名コネクション用のポート番号の上限を
32767 にすることです。次のように調整すると解決するはずです:
</p>
<pre class="programlisting"># sysctl -w net.inet.ip.anonportmin=20000
# sysctl -w net.inet.ip.anonportmax=32767</pre>

<h4 class="title">
<a name="prom-issues"></a>このほかにありそうな PROM の問題 (<a href="#general">top</a>)
  </h4>
<p>

PROM バージョンやインストールされた OS (SASH) バージョンによる、
いくつかの問題があります:
</p>

<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"> 古いバージョンの SASH には、メモリーマップを誤って報告するという
     問題があります。ブート  (copyright message 以前でも) 時に、カーネルが
     UVM 絡みのメッセージとともに panic する場合は、 sash を介さずに
     PROM から直接カーネルをブートしてみてください  (IRIX 6.x
     にアップグレード前の (5.3 が動作している) I2
     にもこの問題があります) 。</li>
<li class="listitem"> もうひとつの古い PROM の問題 -- 古い PROM は ELF を扱えないため、
     ECOFF カーネルが必要かもしれません。これの回避策は sash (IRIX 5.x
     においてでも ELF を理解するようです) を使うことですが、
     問題 #1 を見てください。</li>
</ol></div>


<h4 class="title">
<a name="sgivol"></a>ブートローダーを (sgivol を使って) 更新する (<a href="#general">top</a>)
  </h4>
<p>
sysinst を使って NetBSD をインストールすると、ディスクの先頭部分が、
PROM がブートローダーを読み込むためなどのパーティション用として確保されます。
このパーティションは、ボリュームヘッダーと呼ばれます。
このパーティションには、最低限 3135 ブロックが必要です (<code class="filename">/usr/include/sys/bootblock.h</code>
の SGI_BOOT_BLOCK_SIZE_VOLHDR を参照)。disklabel の例を以下に示します。
パーティション <code class="code">i</code> がボリュームヘッダーとなっており、
これは SGI の流儀 (パーティション 8 を使う) と同様です。
</p>
<pre class="programlisting">
sgimips# disklabel sd0
# /dev/rsd0c:
type: SCSI
disk: mydisk
label: fictitious
flags:
bytes/sector: 512
sectors/track: 135
tracks/cylinder: 8
sectors/cylinder: 1080
cylinders: 4078
total sectors: 4404240
rpm: 7200
interleave: 0
trackskew: 0
cylinderskew: 0
headswitch: 0           # microseconds
track-to-track seek: 0  # microseconds
drivedata: 0

16 partitions:
#        size    offset     fstype [fsize bsize cpg/sgs]
 a:   3377306      3183     4.2BSD   1024  8192 45640  # (Cyl.      2*-    3130*)
 b:   1024000   3380489       swap                     # (Cyl.   3130*-    4078+)
 c:   4404489         0    unknown                     # (Cyl.      0 -    4078+)
 i:      3183         0    unknown                     # (Cyl.      0 -       2*)
</pre>
<p>
NetBSD のインストール後、sgivol ユーティリティー (/usr/mdec にあります)
を使って、このパーティションを操作することができます。まだセットアップされていない場合は、
以下のようにして、初期化する必要があります (注意: sysinst は適切にセットアップをおこないます)。
</p>
<pre class="programlisting">sgivol -i sd0</pre>
<p>
ブートローダーを更新する (あるいは、別機種のマシンにディスクを移した場合に変更する)
ためには、まず、既存のファイルを消去します。
</p>
<pre class="programlisting">sgivol -d boot sd0</pre>
<p>
次に、新しいブートローダーを、ボリュームヘッダーに
'boot' というファイル名でコピーします。
</p>
<pre class="programlisting">sgivol -w boot /usr/mdec/ip2xboot sd0</pre>
<p>
複数のブートローダーを (別々の名前にして) 置いておくこともできます。
別バージョンの NetBSD をブートする場合 (たとえば、新しい INSTALL
カーネルを使って NetBSD 3 から 5.0 にアップグレードする場合) には、
非常に便利です。というのも、bootinfo の変更により、
NetBSD 4.0 以前のカーネルは新しいブートローダーとの組合せでは動作しないからです。
</p>
<p>
ボリュームヘッダーの内容は、以下のコマンドを使って見ることができます。
</p>
<pre class="programlisting">sgivol sd0</pre>
<p>
出力例は以下のとおりです。
</p>
<pre class="programlisting">disklabel shows 4404240 sectors
checksum: 00000000
root part: 0
swap part: 1
bootfile: /netbsd

Volume header files:
sgilabel offset    2 blocks, length      512 bytes (1 blocks)
ide      offset    3 blocks, length   322048 bytes (629 blocks)
sash     offset  632 blocks, length   322048 bytes (629 blocks)
boot     offset 1261 blocks, length    53296 bytes (105 blocks)

SGI partitions:
 0:a blocks  3377306 first     3183 type  4 (BSD4.2)
 1:b blocks  1024000 first  3380489 type  3 (Raw)
 8:i blocks     3199 first        0 type  0 (Volume Header)
10:k blocks  4404489 first        0 type  6 (Volume)
</pre>
<p>
さらなる情報については、<a class="ulink" href="http://man.NetBSD.org/cgi-bin/man-cgi?boot+8.sgimips+NetBSD-current" target="_top">boot(8)</a>
および <a class="ulink" href="http://man.NetBSD.org/cgi-bin/man-cgi?sgivol+8.sgimips+NetBSD-current" target="_top">sgivol(8)</a>
マニュアルページをご覧ください。
</p>
<hr>
<h3 class="title">他の情報源</h3>
<h4 class="title">
<a name="on-site"></a>NetBSD ドキュメンテーション (<a href="#other">top</a>)
  </h4>

<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><a class="ulink" href="../../docs/network/netboot/" target="_top">Diskless NetBSD HOW-TO</a></li>
<li class="listitem"><a class="ulink" href="../../docs/Hardware/Misc/serial.html" target="_top">NetBSD
シリアルポート入門</a></li>
</ul></div>

<h4 class="title">
<a name="off-site"></a>サイト外のドキュメンテーション (<a href="#other">top</a>)
  </h4>

<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"> <a class="ulink" href="http://www.reputable.com/indytech.html" target="_top">Indy tech</a>
     サイトには、 SGI Indy ハードウェアに関する多くの情報があります。</li>
<li class="listitem"> <a class="ulink" href="http://techpubs.sgi.com/library/tpl/cgi-bin/init.cgi" target="_top">SGI
     techpubs library</a>
</li>
<li class="listitem"> <a class="ulink" href="http://techpubs.sgi.com/library/tpl/cgi-bin/browse.cgi?coll=hdwr&amp;db=bks&amp;cmd=toc&amp;pth=/SGI_EndUser/O2_OG" target="_top">O2
     Workstation Hardware Reference Guide</a>
</li>
<li class="listitem"> <a class="ulink" href="http://techpubs.sgi.com/library/tpl/cgi-bin/browse.cgi?coll=hdwr&amp;db=bks&amp;cmd=toc&amp;pth=/SGI_EndUser/Indigo2_OG" target="_top">Indigo2
     Workstation Owner's Guide</a>
</li>
<li class="listitem"> <a class="ulink" href="http://techpubs.sgi.com/library/tpl/cgi-bin/browse.cgi?coll=hdwr&amp;db=bks&amp;cmd=toc&amp;pth=/SGI_EndUser/Indy_OwnerGd" target="_top">Indy
     Workstation Owner's Guide</a>
</li>
<li class="listitem"> <a class="ulink" href="http://techpubs.sgi.com/library/tpl/cgi-bin/browse.cgi?coll=hdwr&amp;db=bks&amp;cmd=toc&amp;pth=/SGI_EndUser/Indigo_OG" target="_top">IRIS
     Indigo Workstation Owner's Guide</a>
</li>
<li class="listitem"> <a class="ulink" href="http://techpubs.sgi.com/library/tpl/cgi-bin/browse.cgi?coll=0650&amp;db=bks&amp;cmd=toc&amp;pth=/SGI_Developer/DevDriver_PG" target="_top">IRIX
     Device Driver Programmer's Guide</a>
</li>
</ul></div>
<hr>
<em><a href="./">NetBSD/sgimips Port Page</a></em> に戻る</div></div></div>
<div class="navfoot"></div>
<div id="footer"><center>
<span class="footfeed"><a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">
	  連絡</a> |
      </span><span class="footcopy"><a href="../../../ja/about/disclaimer.html">
      免責事項</a> |

      <span class="copyright">Copyright © 1994-2012 The NetBSD Foundation, Inc. </span>ALL RIGHTS RESERVED.<br>NetBSD<sup>®</sup> は The NetBSD
	Foundation, Inc. の登録商標です。</span>
</center></div>
</div></body>
</html>
