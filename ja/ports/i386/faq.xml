<?xml version="1.0" encoding="ISO-2022-JP"?>
<!DOCTYPE webpage
 PUBLIC "-//NetBSD//DTD Website-based NetBSD Extension//EN"
        "http://www.NetBSD.org/XML/htdocs/lang/share/xml/website-netbsd.dtd">

<webpage id="ja-ports-i386-faq">
<config param="desc" value="NetBSD/i386 Frequently Asked Questions"/>
<config param="cvstag" value="$NetBSD: faq.xml,v 1.3 2008/04/27 19:11:03 sborrill Exp $"/>
<!-- Based on english version: -->
<!-- NetBSD: faq.xml,v 1.3 2008/04/27 19:11:03 sborrill Exp   -->
<config param="rcsdate" value="$Date: 2008/04/27 19:11:03 $"/>
<head>

<!-- Copyright (c) 2006
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->

<title>NetBSD/i386  FAQ (よくある質問と回答集)</title>
</head>

<sect1 role="toc">

  <sect2 id="partitioning">
    <title>ディスクの分割/ブート</title>

    <sect3 id="boot-floppy-too-big">
      <title>ブートフロッピー(イメージ)が大き過ぎるのですが。</title>
      <para>
        もし boot.fs イメージを 'ascii' モード( Windows の FTP client や 
        Netscape のデフォルトになっています)でダウンロードした場合、newlines は
        改行/newline に変更されてしまい boot.fs イメージは壊れてしまいます
        (さらにフロッピーディスクにおさまらない大きさになります)。
      </para>
      <para>
        もし Windows の FTP client を使っているのならば、ブートイメージをダウンロードする前に
        'bin' とタイプして binary モードにする必要があります。
      </para>
      <para>
        もし、その他の方法を使用している場合は、boot.fs.gz ファイルをダウンロードし
        winzip を使って伸長したほうが簡単かも知れません。
      </para>
    </sect3>

    <sect3 id="540mb-bios-limit">
      <title>540MB BIOS limit があるマシンで大きなドライブを使用するには</title>
      <para>
        BIOS でジオメトリーとして 1024/16/63 を入力し、ブートパーティションが
        先頭の 540M に含まれていることを確認して下さい (これは、カーネルが
        BIOS から読み込まれるために必要です)。 そうすれば、NetBSD から
        ディスク全体を使用することが可能です。
      </para>
    </sect3>

    <sect3 id="determining_geometry">
      <title>"正しい" ディスクジオメトリーの決定法</title>
      <para>
        NetBSD はブートプログラムをロードするのに PC BIOS を用いています。
        これが正しく働くためには NetBSD と BIOS の両方でディスクジオメトリーが
        共通である(少なくともブートパーティションを含んでいる部分に関しては)ことが必要です。
      </para>
      <para>
        PCに搭載されている BIOS が扱えるディスクのシリンダー数、ヘッド数、セクター数には
        上限があります(<ulink url="#bios_disk_limits">表参照</ulink>)。(これは SCSIカード上の
        BIOS も含みます)。
      </para>
      <para>
        多くのディスクの本当のジオメトリーはこれらの制限値におさまらなくなってきたので、
        新しい BIOS はジオメトリーを制限内におさまり、かつ、全体の大きさが
        同じ(か少し小さく)なるように解釈しなおします。
      </para>
      <para>
        もし、ディスクに(DOS, Windows, pfdisk 等によって作成された)有効な DOS MBR 
        パーティションがあれば、それは "正しい" BIOS ジオメトリー を含んでいます。
        NetBSD は sysinst 中でこれを BIOS ジオメトリーとして用います。
        しかしながら、新しいディスクや MBR のセットアップが正しく行なわれていない
        ディスクでは、NetBSD は間違った BIOS ジオメトリーを使用してしまいます。
        理想としては、この情報はブートプログラムから渡されるべきでしょう。しかしながら
        BIOS ディスクを NetBSD ディスクにマッピングする確実な方法がありません。
        もっとも、現在の全然使えない状態を改善することは可能だとは思われます。
      </para>
      <para>
        "正しい"解釈され直したジオメトリーを決定する方法の一つは 'pfdisk' を
        用いることです。
      </para>
      <para>
        <orderedlist>
          <listitem>pfdisk を ftp.NetBSD.org (またはそのミラーサイト)からダウンロードします。<ulink
            url="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-1.6.1/i386/installation/misc/pfdisk.exe">/pub/NetBSD/NetBSD-1.6.1/i386/installation/misc/pfdisk.exe</ulink>.</listitem>
           <listitem>'<code>pfdisk <emphasis>0</emphasis></code>' を実行します。 (0 は最初のディスクを 1 は二番目のディスクを意味します)。</listitem>
           <listitem>'<code>list</code>' と入力し、</listitem>
           <listitem>ジオメトリーを記録した後、リブートをかけ、 NetBSD に用います。</listitem>
         </orderedlist>
       </para>
       <para>
         <emphasis role="bold"><anchor id="bios_disk_limits"/>BIOS disk parameter limits</emphasis>
       </para>
       <para>
         <table border="2" id="bios_disk_limits_table">
           <tr><th>パラメーター</th><th>ビット数</th><th>最大値</th></tr>
           <tr><td align="right">シリンダー数</td>
	       <td align="right">10</td><td align="right">1023</td></tr>
           <tr><td align="right">ヘッド数</td>
	       <td align="right">8</td><td align="right">255</td></tr>
           <tr><td align="right">1トラック当りのセクター数</td>
	       <td align="right">6</td><td align="right">63</td></tr>
         </table>
       </para>
       <para>
         (これにより、少なくとも BIOS が扱える最大の容量は 8Gbytes に制限されます。)
       </para>
     </sect3>

     <sect3 id="ms_partition">
       <title>マイクロソフトパーティションへのアクセス</title>
       <para>
         NetBSD は Microsoft の FAT, FAT32, NTFS4, NTFS5 を含む様々な異なる
         ファイルシステムをサポートしています(完全なリストは 
         &man.fstab.5; を参照して下さい)。
         現在のところ、 NTFS ファイルシステムのサポートは、読み出し動作のみ信頼性のあるものです。
         Long filename は FAT と NTFS の両方でサポートされています。
       </para>
       <para>
         他のファイルシステムにアクセスするためには、正しい "<code>disklabel</code>" を
         セットアップする必要があります。"<code>disklabel</code>" はシステムに対して
         どこにディスク上のデータを探しにいけば良いか教えます。
         正しい"<code>disklabel</code>"を用いれば、NetBSD で使用するために
         "<code>mount</code>" することができます。
       </para>
       <para>
         <emphasis role="bold">ディスクラベルの設定</emphasis>
       </para>
         <orderedlist>
           <listitem>ファイルシステムが含まれているディスクを決定する<html:br/>
             もし、一つの IDE/ST506 または SCSI ディスクしか持っていないのならば、
             これは <emphasis>wd0</emphasis> または <emphasis>sd0</emphasis> となります。複数のディスクを
             お持ちならば、"<code>dmesg | more</code>" の出力から該当するディスク名を
             決定して下さい。</listitem>
           <listitem>パーティションのサイズとオフセットの決定<html:br/>
             "<code>fdisk</code>" と入力すると、各パーティションのサイズとオフセットを
             見ることができます。出力は次のようになるでしょう:
             <programlisting>
NetBSD disklabel disk geometry:
cylinders: 16938 heads: 15 sectors/track: 63 (945 sectors/cylinder)

BIOS disk geometry:
cylinders: 1023 heads: 240 sectors/track: 63 (15120 sectors/cylinder)

Partition table:
0: sysid 7 (OS/2 HPFS or NTFS or QNX2 or Advanced UNIX)
    start 63, size 3190257 (1557 MB), flag 0x80
        beg: cylinder    0, head   1, sector  1
        end: cylinder  210, head 239, sector 63
1: sysid 169 (NetBSD)
    start 3193155, size 4096575 (2000 MB), flag 0x0
        beg: cylinder  211, head  45, sector  1
        end: cylinder  482, head  29, sector 63
2: sysid 6 (Primary 'big' DOS, 16-bit FAT (&gt; 32MB))
    start 7302960, size 4596480 (2244 MB), flag 0x0
        beg: cylinder  483, head   0, sector  1
        end: cylinder  786, head 239, sector 63
3: sysid 15 (Ext. partition - LBA)
    start 11899440, size 4097520 (2000 MB), flag 0x0
        beg: cylinder  787, head   0, sector  1
        end: cylinder 1023, head 239, sector 63
</programlisting>
           <para>
             この例ではディスクは次の4つのパーティションからなります:<html:br/>
             0. Windows NT 4.0 NTFS4 パーティション<html:br/>
             1. NetBSD ffs パーティション<html:br/>
             2. MS-DOS FAT パーティション<html:br/>
             3. "extended" パーティション中の Windows 2000 NTFS5
           </para>
         </listitem>
         <listitem>"<code>disklabel &lt;DISKNAME&gt;</code>"と入力する<html:br/>
           もしディスクが MS-DOS パーティションしか含んでいない場合、
           NetBSD は自動的に先頭の MS-DOS パーティションを含む '仮想'ディスクラベルを
           生成します。<html:br/>
           出力は次のようになるでしょう:
<programlisting>
# disklabel wd0
</programlisting>

           <emphasis>physical disk information</emphasis>

<programlisting>
8 partitions:
#        size   offset     fstype   [fsize bsize   cpg]
  a:   410130  3193155     4.2BSD     1024  8192    16   # (Cyl. 3379 - 3812)
  b:   409185  3603285       swap                        # (Cyl. 3813 - 4245)
  c:  4096575  3193155     unused        0     0         # (Cyl. 3379 - 7713)
  d: 16006410        0     unused        0     0         # (Cyl.    0 - 16937)
  e:  3274425  4012470     4.2BSD     2048 16384    32   # (Cyl. 4246 - 7710)
</programlisting>

           <para>
             もし、必要な fstype がすでに定義されていれば(すなわち MSDOS)、
             <ulink url="#ms_partition_mounting">パーティションのマウント</ulink>
             まで進んで下さい。
           </para>
           <para>
             もし、NetBSD のインストールが完了していないのならば、 &man.mbrlabel.8;コマンドを
             用いて、ディスクの<emphasis>fdisk</emphasis>パーティション情報とコア中の disklabel を
             同期させることができます。そうすれば、この情報を使うことにより BSD と
             他の OS のパーティション情報を含んだ新しい disklabel を生成することができます。
           </para>
         </listitem>
         <listitem>ディスクラベル編集の準備<html:br/>
            <emphasis>vi</emphasis>以外のエディターを用いたい場合は、
            "<code>setenv EDITOR &lt;YOUR_EDITOR&gt;</code>" 例えば "<code>setenv EDITOR
            pico</code>"
            と入力します。
         </listitem>
         <listitem>"<code>disklabel -e &lt;DISKNAME&gt;</code>" と入力して disklabel を編集します<html:br/>
           disklabel の最下部まで進めば label の編集準備は完了です。
           <para>
             必要なのは次の2点です:
           </para>
           <orderedlist>
             <listitem>使用されていない最初のアルファベット (この例では 'f')。</listitem>
             <listitem>fdisk で得られた 'start/size' の値 (例えば '63')。</listitem>
           </orderedlist>
           <para>
             一番下に NTFS のために次の行を加えます:
           </para>
<programlisting>
  &lt;PARTITION&gt;:   &lt;SIZE&gt;  &lt;OFFSET&gt;   NTFS
</programlisting>
           <para>
             上の例題の場合、適切な入力は次のようになります(fsize, bsize と cpg は
             ブランクのままです):
           </para>
<programlisting>
  f:  3190257       63       NTFS
</programlisting>
           <para>
             MSDOS のためには次のような行を加えます:
           </para>
<programlisting>
  &lt;PARTITION&gt;:   &lt;SIZE&gt;  &lt;OFFSET&gt;   MSDOS
</programlisting>
           <para>
             例題では次のようになります:
           </para>
<programlisting>
  g:  4596480  7302960      MSDOS
</programlisting>
           <para>
             パーティションについての注意: NetBSD/i386 は現在のところ、一つのディスク当たり
             8個のパーティション('a' - 'h') しかサポートしていません。また、パーティション
             テーブルの直前にある 'number of partitions' 行には、存在するパーティションの
             数以上の数字を指定する必要があります。
           </para>
         </listitem>
         <listitem>変更を保存し、ディスクラベルをチェックする<html:br/>
            エディターを終了し、 "<code>disklabel &lt;DISKNAME&gt;</code>" と入力して、
            新しいパーティションが存在するか確認して下さい。
         </listitem>
       </orderedlist>
       <para>
         <emphasis role="bold"><anchor id="ms_partition_mounting"/>ファイルシステムのマウント</emphasis>
       </para>
       <para>
         各々のディスクパーティションは '/dev' にデバイスエントリーを持っています。
         デバイスエントリーの形式は '/dev/'、ディスク名、パーティション文字 となっています。
         上記の例題では NTFS と MSDOS パーティションに対するデバイスエントリーはそれぞれ
         '/dev/wd0f' と '/dev/wd0g' となります。
       </para>

       <orderedlist>
         <listitem>それぞれのパーティションに対してマウントポイントを作成する<html:br/>
           "<code>mkdir &lt;MOUNTPOINT&gt;</code>", 例えば "<code>mkdir /msdos</code>" と
           "<code>mkdir /nt4</code>".</listitem>
         <listitem>ファイルシステムをマウントする<html:br/>
           "<code>mount -t &lt;TYPE&gt; &lt;DEVICE&gt; &lt;MOUNTPOINT&gt;</code>",
           例えば "<code>mount -t msdos /dev/wd0g /msdos</code>" と "<code>mount -t ntfs
           /dev/wd0f /nt4</code>".</listitem>
         <listitem>うまくいっていることを確認する<html:br/>
           "<code>ls &lt;MOUNTPOINT&gt;</code>", 例えば "<code>ls /msdos</code>" と "<code>ls
           /nt4</code>".</listitem>
         <listitem>ブート時に自動的にファイルシステムがマウントされるようにする<html:br/>
           もし、NetBSD の起動時に自動的にマウントされるようにしたいならば、
           <emphasis>/etc/fstab</emphasis> を編集し、次の形式の行を加えて下さい。
<programlisting>
    &lt;DEVICE&gt; &lt;MOUNTPOINT&gt;  msdos   rw
    &lt;DEVICE&gt; &lt;MOUNTPOINT&gt;  ntfs    rw
</programlisting>
           <para>
             上の例題の場合は
           </para>
<programlisting>
    /dev/wd0g /msdos  msdos   rw
    /dev/wd0f /nt4    ntfs    rw
</programlisting>
           <para>
             となります。
           </para>
         </listitem>
       </orderedlist>
     </sect3>

     <sect3 id="dual_boot">
       <title>NetBSD や DOS/Windows/その他の OS のメニューからの起動</title>
       <para>
         この部分は、すでにディスクのパーティションを切っていて、NetBSD と
         その他のあなたが使用するつもりの OS をインストールし終っていることを仮定しています。
         ここでは、OSBS ブートセレクターを用います。
       </para>
       <para>
         8GB より大きいディスクやパーティションを使う、あるいは NetBSD
         をディスクの先頭から 2GB より後の部分にインストールする場合は、
         <ulink url="#NB_bootmenu">NetBSD ブートメニュー</ulink>を直接使ってもよいかも
         しれません。
       </para>
       <orderedlist>
         <listitem>OSBS ブートセレクター をダウンロードします。
           これは ftp.NetBSD.org の <ulink
           url="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-1.5.2/i386/installation/misc/osbsbeta.exe">/pub/NetBSD/NetBSD-1.5.2/i386/installation/misc/osbsbeta.exe</ulink> にあります。</listitem>
         <listitem>OSBS を取り出します。
           osbsbeta.exe を DOS ディスクに保存し、実行します。
           実行により 'OS-BS\OSBS20B8.EXE' が取り出されます。</listitem>
         <listitem>'<code>OS-BS\OSBS20B8.EXE</code>' を実行します。</listitem>
         <listitem>'<code>Install</code>' -&gt; '<code>Boot menu</code>' を選びます。</listitem>
         <listitem>ブートメニューに加えたいそれぞれのパーティションに対して '<code>INSERT</code>'を押します。</listitem>
         <listitem>終れば、'<code>ESCAPE</code>' を押します。続いて、デフォルトでブートする OS の選択、
           ブート開始までの待機時間(10秒くらいが適当でしょう)、ブート時の start id の
           変更(通常は必要ありません) についての設定を行います。</listitem>
         <listitem>ブートメニューを保存し、終了します。</listitem>
         <listitem>フロッピーディスクからブートしていた場合は、それを取り除きます。</listitem>
       </orderedlist>
       <para>
         これで、マシンのブート時にブートメニューが出てくるようになったはずです。
       </para>
       <para>
         <anchor id="NB_bootmenu"/>NetBSD 1.4 以降では、もう一つの方法として新しい NetBSD のブートメニューも使用できます。
       </para>

       <orderedlist>
         <listitem>ブートメニューをインストールするために 'fdisk -i -c /usr/mdec/mbr_bootsel' を実行します。</listitem>
         <listitem>その後、対話的にブートメニューを設定するために 'fdisk -B' を実行します。
           (これはオプションではありません。)</listitem>
       </orderedlist>
       <para>
         &man.fdisk.8; のマニュアルも参照して下さい。
       </para>
     </sect3>

     <sect3 id="nt_boot">
       <title>Windows NT/2000/2003/XP のブートメニューに NetBSD を加える方法</title>
       <para>
         <emphasis role="bold">方法その 1) NetBSD の mbr コードを使う</emphasis>
       </para>
       <para>
         NetBSD の mbr コードは、必要に応じてブート時にオプションを変えられます。
         この方法を使う場合、動作してブート可能な状態にインストールした NetBSD が必要です。
         NetBSD の mbr コードは、NetBSD の fdisk コマンドを使って、
         空のファイルにインストールできます。
       </para>
       <para>
         以下の例では、Windows Server 2003 が disk 0 に、NetBSD 4.0
         が disk 1 にインストールされているものとします。
       </para>
<programlisting>
devel# rm -f nbmbr
devel# touch nbmbr
devel# fdisk -BF -c mbr_ext ./nbmbr
fdisk: primary partition table invalid, no magic in sector 0
fdisk: Cannot determine the number of heads
Update the bootcode from /usr/mdec/mbr_ext? [n] y

Boot selector configuration:
Timeout value (0 to 3600 seconds, -1 => never): [-1..3600 default: 10] 
Select the default boot option. Options are:

0: The first active partition
1: Harddisk 0
2: Harddisk 1
3: Harddisk 2
4: Harddisk 3
5: Harddisk 4
6: Harddisk 5
7: Harddisk 6
8: Harddisk 7
Default boot option: [0..8 default: 0] 2

We haven't written the MBR back to disk yet.  This is your last chance.
Should we write new partition table? [n] y
</programlisting>
       <para>
         nbmbr を C: ドライブにコピーし、以下の行を C:\boot.ini の最後に追加します。
       </para>
<programlisting>
c:\nbmbr="NetBSD disk 1"
</programlisting>
       <para>
         標準状態では、boot.ini は不可視になっています。boot.ini を編集するには、
         My Computer から C: ドライブを開き、Tools メニューから "Folder Options..." を選びます。
         しかるのちに、View タブをクリックし、"Hide protected
         operating system files (Recommended)" のチェックボックスのチェックを外します。
         最後に OK をクリックします。これで、boot.ini が見えるようになり、
         ダブルクリックすれば編集できるようになります。
       </para>
       <para>
         <emphasis role="bold">方法その 2) bootpart を使って、
         既存のコードをブートブロックにコピーする</emphasis>
       </para>
       <para>
         Windows を使って、bootpart を
         <ulink url="http://www.winimage.com/bootpart.htm">http://www.winimage.com/bootpart.htm</ulink>
         から入手し、zip アーカイブからファイルをハードディスクに展開します。
         コマンドプロンプトを使い、bootpart.exe のあるディレクトリーに移動します。
         一連の操作手順を以下に示します。
         以下の例では、Windows Server 2003 が disk 0 に、NetBSD 4.0
         が disk 1 にインストールされているものとします。
       </para>
       <para>
         最初に、bootpart を実行して、パーティション番号
         (ディスク番号をまたがった通し番号になります) を決めます。
         NetBSD のパーティションタイプは (十六進数で) a9
         であることにご注意ください。
       </para>
<programlisting>
C:\bootpa26>bootpart
Boot Partition 2.60 for WinNT/2K/XP (c)1995-2005 G. Vollant (info@winimage.com)
WEB : http://www.winimage.com and http://www.winimage.com/bootpart.htm
Add partition in the Windows NT/2000/XP Multi-boot loader
Run "bootpart /?" for more information

Physical number of disk 0 : b4dab4da
 0 : C:* type=7  (HPFS/NTFS), size= 19580368 KB, Lba Pos=63
Physical number of disk 1 : 7f4c256b
 1 : D:* type=a9 , size= 39121456 KB, Lba Pos=63
</programlisting>
       <para>
         ここではパーティション 1 をブートしたいので、以下のようにします。
       </para>
<programlisting>
C:\bootpa26>bootpart 1 \nbboot "NetBSD disk 1"
Boot Partition 2.60 for WinNT/2K/XP (c)1995-2005 G. Vollant (info@winimage.com)
WEB : http://www.winimage.com and http://www.winimage.com/bootpart.htm
Add partition in the Windows NT/2000/XP Multi-boot loader
Run "bootpart /?" for more information
          
Physical number of disk 0 : b4dab4da
 0 : C:* type=7  (HPFS/NTFS), size= 19580368 KB, Lba Pos=63
Physical number of disk 1 : 7f4c256b
 1 : D:* type=a9 , size= 39121456 KB, Lba Pos=63
C:\nbboot written
C:\BOOT.INI updated
</programlisting>
       <para>            
         これで、nbboot というブートブロックが C: ドライブのルートディレクトリーに作成され、
         boot.ini に "NetBSD disk 1" という項目が追加されました。
       </para>  
       <para>
         <emphasis role="bold">方法その 3) grub4dos を使う</emphasis>
       </para>
       <para>
         この方法の利点は、広範囲にわたる grub のオプションが使えることです。
         さらに、カーネルを NTFS からロードできるという利点もあります
         (必要があればですが。通常は、インストールされた
         NetBSD のルートディレクトリーからロードするだけでしょう)。
         たとえば、問題解決のために、
         NetBSD がインストールされていないマシンであっても、
         便利に使えるリカバリー用あるいはインストール用の
         NetBSD カーネルを使いたいということがあるかもしれません。
       </para>
       <para>
         最新版の grub4dos を
         <ulink url="http://sourceforge.net/projects/grub4dos">http://sourceforge.net/projects/grub4dos</ulink>
         からダウンロードし、zip アーカイブからファイルを展開します。
         grldr を Windows の C:\ にコピーし、以下のようにして
         c:\menu.lst を作成します (Windows と NetBSD のどちらで作成してもかまいません
         - 改行はどちらの流儀であっても OK です)。
       </para>
<programlisting>
timeout=5
console terminal
Title NetBSD on disk 1 (chainloader)
    root(hd1,0)
    chainloader +1
Title NetBSD install kernel
    kernel --type=netbsd /NETBSD_INSTALL_LARGE.gz
</programlisting>       			
       <para>
         MULTIBOOT 以外のカーネル (インストールカーネルなど) では、--type=netbsd が必要です。
         MULTIBOOT カーネルでは、このオプションはつけてはいけません。
       </para>
       <para>
         最後に、方法その 1) の説明と同様に、
         たとえば以下のような NetBSD 用の行を C:\boot.ini に追加します。
       </para>
<programlisting>
C:\gtldr="NetBSD GRUB"
</programlisting>                                
    </sect3>

    <sect3 id="fips">
      <title>全体が Dos/Windows で使用されているディスクに NetBSD をインストールする</title>
      <para>
        DOS/Windows によって全てのディスク領域が占有されているハードディスクでも、
        ディスクに空き容量がある場合ならば、DOS/Windows のパーティションを
        小さくし、2番目のパーティションを作成することで NetBSD をインストールすることが
        できます。
      </para>
      <para>
        これを行なうためには
      </para>
      <itemizedlist>
        <listitem>DOS パーティションの全てのデータを <emphasis>defrag</emphasis> を用いて
          パーティションの先頭に移動する。</listitem>
        <listitem>DOS パーティションの大きさを <emphasis>FIPS</emphasis> を用いて変更する。
          Fips は 次の場所から手に入れることができます。<ulink
          url="http://www.igd.fhg.de/~aschaefe/fips/">FIPS WWW サイト</ulink>.
          全ての付属ドキュメントを読む事を忘れないで下さい。</listitem>
        <listitem><ulink url="#dual_boot">上</ulink>で述べられている方法でブートローダーをインストールします。</listitem>
        <listitem>NetBSD をインストールします。</listitem>
      </itemizedlist>
    </sect3>

    <sect3 id="new_sysid">
      <title>'old NetBSD or FreeBSD' からパーティション sysid を変更する</title>
      <para>
        1.3.3 以降の NetBSD はデフォルトの パーティション sysid が 165 から 169 に
        変更されています。これは FreeBSD との衝突を避けるために行なわれました。
        1.3.3 (とそれ以降) のシステムは sysid が 165 のパーティションからもブートしますが、
        パーティションをオープンする度に警告を発します。
        ディスクパーティションを 165 から 169 に変更するためには
        次の手順に従って下さい。
      </para>
      <orderedlist>
        <listitem><emphasis role="bold">1.3.3 (かそれ以降) のブートフロッピーがあることを確認する</emphasis><html:br/>
           これは何かがうまくいかなかった時に備えるためです。インストール済みのシステムを
           フロッピーディスクからブートするには、フロッピーから起動して、
           カウントダウンが行なわれている間にスペースキーを押し、
           '<code><emphasis role="bold">boot hd0:</emphasis></code>' と入力します。</listitem>
        <listitem><emphasis role="bold">新しい ID を理解するブートブロックを使用していることの確認</emphasis><html:br/>
          もし、システムが 1.3.3 以降の sysinst を用いてインストールされているならば、
          問題ない<emphasis>はず</emphasis>です。そうでないならば、次のコマンドを実行して下さい。
          <itemizedlist>
            <listitem>'<code><emphasis role="bold">/usr/mdec/installboot biosboot.sym /dev/r{DISK}a</emphasis></code>'.</listitem>
          </itemizedlist>

          もしカーネルが '<code>options INSECURE</code>' 無しで作られている場合は
          シングルユーザーモードにするためにシャットダウンする必要があります。

          <itemizedlist>
            <listitem>'<code><emphasis role="bold">shutdown now</emphasis></code>'</listitem>
	    <listitem>shell の入力を求められたら ENTER を押します。</listitem>
	    <listitem>'<code><emphasis role="bold">fsck -p</emphasis></code>'</listitem>
	    <listitem>'<code><emphasis role="bold">mount -vat ffs</emphasis></code>'</listitem>
	    <listitem>'<code><emphasis role="bold">cd /usr/mdec ; ./installboot biosboot.sym
		/dev/r{DISK}a</emphasis></code>'</listitem>
          </itemizedlist>

          ここで {DISK} は 最初の ATA (IDE) ディスクに対しては <code>wd0</code>,
          最初の SCSI ディスクに対しては <code>sd0</code> などを意味します。</listitem>

        <listitem><emphasis role="bold">パーティション ID の変更</emphasis><html:br/>
          '<code><emphasis role="bold">fdisk {DISK}</emphasis></code>' を実行して下さい。
          一つのパーティションは次のようになっているはずです。
<programlisting>
X: sysid 165 (FreeBSD or 386BSD or old NetBSD)
</programlisting>
          ここで、X は 0, 1, 2, あるいはもっとも多そうな 3 です。
          '<code><emphasis role="bold">fdisk -u -X {DISK}</emphasis></code>' を実行します。

         <orderedlist>
           <listitem><code>Do you want to change our idea of what BIOS thinks? [n]</code>
	     に対して<code><emphasis role="bold">ENTER</emphasis></code>と入力。</listitem>
           <listitem><code>Do you want to change it? [n]</code>
	     に対して<code><emphasis role="bold">y ENTER</emphasis></code>と入力。</listitem>
           <listitem><code>Supply a decimal value for "sysid" [165]</code>
	     に対して<code><emphasis role="bold">169 ENTER</emphasis></code>と入力。</listitem>
           <listitem><code>Supply a decimal value for "start" [......]</code>
	     に対して<code><emphasis role="bold">ENTER</emphasis></code>と入力。</listitem>
           <listitem><code>Supply a decimal value for "size" [.......]</code>
	     に対して<code><emphasis role="bold">ENTER</emphasis></code>と入力。</listitem>
           <listitem><code>Explicitly specify beg/end address? [n]</code>
	     に対して<code><emphasis role="bold">ENTER</emphasis></code>と入力。</listitem>
           <listitem><code>Is this entry okay? [n]</code>
	     に対して<code><emphasis role="bold">y ENTER</emphasis></code>と入力。</listitem>
           <listitem><code>Should we write new partition table? [n]</code>
	     に対して<code><emphasis role="bold">y ENTER</emphasis></code>と入力。</listitem>
         </orderedlist>
       </listitem>
       <listitem><emphasis role="bold">全てが成功したか確認するためにリブートします</emphasis><html:br/>
         何か問題が起きた場合はブートフロッピーの fdisk を使って
         やり直すことが可能です。
       </listitem>
       <listitem><emphasis role="bold">NetBSD のパーティション ID を再度変更する必要はないはずですので、
         ご安心ください。</emphasis><html:br/>
       </listitem>
     </orderedlist>
   </sect3>

    <sect3 id="stale-lilo">
      <title>インストールした後、リブートすると <code><emphasis role="bold">LI</emphasis></code> しかでません</title>
      <para>
        古い LILO によって起こされる問題です。次のようにすれば対処できます:
      </para>

      <orderedlist>
        <listitem>sysinst フロッピーからブートします</listitem>
        <listitem>Utility メニューから '<code><emphasis role="bold">Run /bin/sh</emphasis></code>' を選んで
	  インストーラーから抜けます。</listitem>
        <listitem>'<code><emphasis role="bold">fdisk -if</emphasis></code>' と入力します</listitem>
        <listitem>Reboot</listitem>
      </orderedlist>
    </sect3>

    <sect3 id="dosboot">
      <title>dosboot.com がカーネルのロード後にマシンをリセットしてしまいます</title>
      <para>
        dosboot.com がカーネルのロード直後にマシンをリセットしている場合は、
        "himem.sys" がロードされていないことを確認してください。 "config.sys"
        をよく確かめてください!
      </para>
    </sect3>

    <sect3 id="dosprompt">
      <title>WinME マシンでブートフロッピーがなく Win98 CD しかない場合の、 DOS プロンプトへの入り方</title>
      <para>
        Windows Millennium Edition (Windows ME) がインストールされたマシンで、
        最近のラップトップにありがちなようにフロッピーブートができない場合、
        Windows 98 CD は (*本物の*) MS-DOS プロンプトに入るための立派な手段です。
        
        起動して CD-ROM サポートの要否を尋ねられたときに、 shift+F5 を押して、
        "highmem.sys" (上記参照) などのドライバーを一切ロードしないように
        することができます。
        これで、あらかじめ "<ulink
        url="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-1.5.2/i386/installation/misc/dosboot.com">dosboot.com</ulink>" (<ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-1.5.2/i386/installation/misc/dosboot.com"/> から入手可能) などのツールやカーネルを置いておいた
        C: ドライブにアクセスすることができます。
      </para>
    </sect3>

    <sect3 id="onefloppy">
      <title>フロッピー 1 枚の NetBSD システムの作り方</title>
      <para>
	最近、 Lex Wennmacher が <filename role="pkg">sysutils/fdgw</filename> パッケージを
	pkgsrc に追加しました。このパッケージは、フロッピー 1 枚の
	NetBSD システムを構築するためのツールです。これの応用例としては、
	PC をハードディスクを使わずに安価なルーターにすることが挙げられます。
      </para>
      <para>
	メイン NetBSD ftp サイトからは 2 種類のイメージがダウンロードできます。
	<ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/wennmach/adslrouter.img">ADSL ルーター</ulink>イメージを使うと、基本的な ADSL
	ルーターシステムが作れます。
	<ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/misc/wennmach/natbox.img">NAT ルーター</ulink>イメージは、簡単な NAT ルーターを作れるよう設計されています。
      </para>
      <para>
	これらのイメージは <code>dd</code> コマンドを使ってフロッピーに書き込めます。
	たとえば次のようにします。
	<blockquote><code>dd if=adslrouter.img of=/dev/rfd0a bs=18k</code></blockquote>
      </para>
      <para>
	これらフロッピー 1 枚の NetBSD システムはいずれも、適切な動作のために
	必要なファイルをすべて含んでいますが、若干のカスタマイズは必要です
	(たとえば、 IP アドレスと ipf フィルタールールの定義) 。詳細は、
	<ulink url="http://www.fml.org/software/fdgw/">深町賢一氏による
	fdgw ホームページ</ulink>を参照してください。
      </para>
    </sect3>
  </sect2>

  <sect2 id="specific-hardware">
    <title>特定のハードウェアの問題</title>

    <sect3 id="irq2or9">
      <title>IRQ 2 と IRQ 9</title>
      <para>
        IBM AT とその後継機 (全ての NetBSD が作動する PC を含みます) では
        さまざまなハードウェア上の理由のために IRQ 2 は IRQ 9 にマップされています。
        そのため、"IRQ 2" と設定されているカードを使うためには
        NetBSD のカーネルコンフィギュレーションファイルでは IRQ 9 を
        選択する必要があります。
      </para>
    </sect3>

    <sect3 id="ne200-device-timeout">
      <title>'<code>ne1: device time out</code>' という問題</title>
      <para>
        古いタイプの ISA カードは特定のアドレスと IRQ に設定されます。
        NetBSD は自動的にアドレスを検出することができますが、IRQ を決定する
        方法は不確実であり、自動設定テーブル(autoconfiguration table)には
        広く使われている値が決め打ちされています。もし、アドレスは正しく、
        IRQ が違っていた場合、デバイスは使用されたときに timeout を起こします。
        これは他の PCI, EISA や ISA-PnP バスに対しては影響しません。
      </para>
      <para>
        もし、この問題に遭遇した場合の解決方法は次の 3つです。
        <itemizedlist>
          <listitem>カーネルの設定 (<currentsrc>src/sys/arch/i386/conf/GENERIC</currentsrc>) と
	    一致するようにカードの設定を変更する。変更には、ジャンパー
	    スイッチや、DOS プログラムを使用します。通常 DOS プログラムは
	    カード購入時に付属しています。</listitem>
          <listitem>カード設定に合わせた新しいカーネルをコンパイルする。</listitem>
          <listitem>別のカードを購入する - 最新の PCI ベースの PC において、
	    ISA ネットワークカードは他のデバイスのパフォーマンスに
	    かなりの影響を与えます。- &man.fxp.4; (インテル社の etherexpress-pro) や
	    &man.tlp.4; (Tulip やその互換カード)などの PCI カードがおすすめです。</listitem>
          <listitem>&man.ddb.4;を用いたカーネル設定の手動変更
            <orderedlist>
	      <listitem>カーネルを '<code><emphasis role="bold">-d</emphasis></code>' オプションをつけてブートします。
	        (カウントダウンが 0 になる前に、スペースバーを押し、
	        '<code><emphasis role="bold">boot netbsd -d</emphasis></code>' と入力します。)</listitem>
	      <listitem><code><emphasis role="bold">x/xla loc,100</emphasis></code> と入力します。
	        出力の中の <code>0x280</code> を含む欄の offset を記録します。
	        GENERIC カーネルにはこのアドレスを持つ 3種類の ISA ネットワーク
	        カードが存在します。</listitem>
	      <listitem>使用するカードの正しいアドレスを設定する
	        <code><emphasis role="bold">w/l loc+&lt;offset&gt; &lt;address&gt;</emphasis></code>.</listitem>
	      <listitem>使用するカードに合うように IRQ を設定する
	        <code><emphasis role="bold">w/l loc+&lt;offset&gt;+0x10 &lt;irq&gt;</emphasis></code>.</listitem>
	      <listitem>ブートを続行する。</listitem>
            </orderedlist>
          </listitem>
        </itemizedlist>
      </para>
    </sect3>

    <sect3 id="usb-interrupt">
      <title>USB の問題 '<code>uhci0: couldn't map interrupt</code>'</title>
      <para>
        この問題は BIOS で (おそらく "PNP &amp; PCI Setup" というメニュー中の)
        "Allocate interrupt for USB" オプションが無効になっている場合に
        起こり得ます。有効にすると、多くの場合 NetBSD が起動する直前に
        BIOS は、IRQ の設定を含んだ 'Serial Controller'リストを表示します。
      </para>
    </sect3>

    <sect3 id="cyrix-486dlc-cache">
      <title> '<code>WARNING: CYRIX 486DLC CACHE UNCHANGED</code>' とは何ですか?</title>
      <para>
        このメッセージはカーネルが Cyrix 486DLC を検出したが、Cyrix の特別な
        キャッシュの設定が使用可能か判断できないために、キャッシュ設定を
        行わなかったことを意味します。これは 386 マザーボード用の 
        Cyrix '386/486 hybrid' アップグレードの場合にのみ該当し、
        Cyrix を含む全てのベンダーの 486(以降の cpu を含む)プロセッサーの場合には
        該当しないはずです。
      </para>
      <para>
        多くの 386 マザーボードは CPU のキャッシュ一貫性を保つ機能を備えていないため、
        バスに接続されたデバイスから bus hold 信号がアサートされた時 (これはバスマスタ
        トランザクションが進行中である可能性を示す) は常に、DLC のキャッシュを
        フラッシュしなければなりません。これはキャッシュ一貫性を完全に維持できる反面、
        速度低下の大きな要因になります。
      </para>
      <para>
        Cyrix 用キャッシュ設定のために次の2つのカーネルオプションが存在します:
      </para>

      <itemizedlist>
        <listitem><code><emphasis role="bold">options CYRIX_CACHE_WORKS</emphasis></code><html:br/>
          このオプションは CPU キャッシュを有効にしますが、
          外部バスの hold リクエスト時にはフラッシュするように指示します。
          486 よりは遅くなりますが、386(on-chip キャッシュがありません)よりは
          高速になります。このオプションはほとんどのマザーボードで
          動作するはずです。</listitem>

        <listitem><code><emphasis role="bold">options CYRIX_CACHE_REALLY_WORKS</emphasis></code><html:br/>
          このオプションは特別に 486DLC/486DRX 用にデザインされたマザーボードで
          のみ使用可能です。これらのマザーボードでは正しく完全にバスマスタリングが
          実装されており、キャッシュ一貫性を保つ機能がサポートされています。
          (あまり出回っていません。)このオプションは本物の 486 と同様に、
          バスの hold リクエスト時にフラッシュすることなく、キャッシュを
          完全に利用します。</listitem>
      </itemizedlist>
      <para>
        これら 2つが両方とも指定されていない場合、chip は BIOS の設定のまま
        動作します。ほとんどの BIOS はキャッシュオプションを指定しません。
        これは確実に動作する安全策ではありますが、パフォーマンスは最低となります。
        もし、486DLC/486DRX マザーボードや DLC/DRX タイプの BIOS ならば、
        自動的にパフォーマンスが良くなるような設定になっているはずです。
      </para>
      <para>
        これらのオプションは試してみる価値はあります。もしマザーボードが指定されたオプションを
        サポートしていない場合、ブート後すぐにシステムは動作しなくなります。
        そうなった場合は、カーネルの最適化を弱めればいいだけです。
        (もちろん、最適化していないカーネルを上書きしてはいけません。
        新しいカーネルがブートしなかったときに必要になります!)
      </para>
    </sect3>

    <sect3 id="vid_mem_conflict">
      <title>"setting tty flags" の直後にモニターが DPMS modeに落ちてしまうのですが</title>
      <para>
        少なくとも一人の人が、カーネルによってビデオカードが正しくプローブされないと
        報告しています。具体的には "setting tty flags" が表示された後、スクリーンが
        暗くなり、モニターがパワーセーブモードになってしまうという現象です。
        報告された原因はいくつかのビデオカードが DOS でいうところの COM4 と
        同じ I/O メモリーを使用していることでした。この理由により、
        NetBSD の com3 (これは DOS の COM4 にあたります) は GENERIC カーネルで
        有効になっていません。
      </para>
    </sect3>

    <sect3 id="pcmcia_modem_flow_control">
      <title>PCMCIA モデムが動かない</title>
      <para>
        もし、あなたのお持ちの PCMCIA モデムが動かないようでしたら、
        &man.com.4; デバイスをハードウェアフローコントロールモードで使用しているか
        どうかを確認して下さい。
        多くの PCMCIA モデムはハードウェアフローコントロールを用いている時だけ動きます。
      </para>
    </sect3>

    <sect3 id="via_epia_bootloader">
      <title>VIA EPIA ハードウェアへのインストール</title>
      <para>
        NetBSD のブートローダーは、現在、VIA C3 CPU を使ったある種のシステム、
        特に VIA EPIA シリーズの ITX ボードに対しては、壊れています。
        ブートの初期段階において、画面の同期が外れて、システムが固まります。
        この問題は、 1.6.2 より新しい NetBSD システムで発生します。
        このことは、<ulink
        url="http://www.NetBSD.org/cgi-bin/query-pr-single.pl?number=26007">PR/26007</ulink> に記録されています。
      </para>
      <para>
        回避策は、PR/26007 が解決するまでは
        1.6.2 のブートローダーを使うことです。
      </para>
      <para>
        これには二通りの方法があります。
      </para>
      <orderedlist>
        <listitem>
          <para> 予備のシステムがある場合:
            <itemizedlist>
              <listitem>
                <para>ハードディスクドライブを、別のマザーボードにつなぎ変えます</para>
              </listitem>
              <listitem><para>NetBSD 3.x をインストールします</para></listitem>
              <listitem><para>リブートします</para></listitem>
              <listitem><para>1.6.2 版の installboot を実行します。
                ide ドライブの場合は
                <programlisting>installboot > /usr/mdec1.6/biosboot.sym /dev/rwd0a</programlisting>
                でよいはずです。</para></listitem>
	      <listitem><para>ハードディスクドライブを Epia
                マザーボードに戻します</para>
              </listitem>
            </itemizedlist>
          </para>
        </listitem>
        <listitem>
          <para>予備のシステムがない場合は、
            まず 1.6.2 をインストールする必要があります:
            <itemizedlist>
              <listitem><para>最小限の 1.6.2 (Kernel + Base +
                etc) をインストールします</para></listitem>
              <listitem><para>root でログインして、3.0.1 の CD を挿入します
                <programlisting># mkdir /cdrom
# mount /dev/cd0a /cdrom
# mv /netbsd /netbsd.1.6.2
# cp /cdrom/i386/binary/kernel/netbsd-INSTALL.gz /netbsd
# shutdown -r now</programlisting></para></listitem>
               <listitem><para>これで、3.0.1 のインストールカーネルが、
                 ハードディスクから (CD からブートし直したのではないことを確認してください)
                 ブートしたはずです</para></listitem>
               <listitem><para>インストーラーが <quote>Do you want
                 to update the bootcode in the Master Boot Record to the latest
                 version of the NetBSD bootcode?</quote> と質問したら、
                 <quote>NO</quote> と答えます</para></listitem>
	       <listitem><para>インストーラーが
                  <quote>Would you like to install the normal set of
                   bootblocks or serial bootblock?</quote>  と質問したら、<quote>g:
                   Use existing bootblocks</quote> と答えます</para></listitem>
            </itemizedlist>
          </para>
        </listitem>
      </orderedlist>
      <para>年代ものの 1.6.2 は、<ulink
         url="ftp://ftp.NetBSD.org/pub/NetBSD-archive/NetBSD-1.6.2/i386/"/> にあります。</para>
    </sect3>
  </sect2>

  <sect2 id="x-system">
    <title>X Window System の実行</title>

    <sect3 id="x_needs_insecure_kernel">
      <title>X が INSECURE なカーネルか、シングルユーザーモードでしか起動しない</title>
      <para>
        '<code>options INSECURE</code>' が指定されていない場合、NetBSD は /dev/mem への
        直接アクセスを禁止します。もしもあなたのビデオカードが linear memory access が
        必要であったり、恩恵を受けることが出来るのならば、aperture ドライバーを
        <ulink url="../../docs/software/packages.html">NetBSD パッケージ
        コレクション</ulink> (<filename role="pkg">sysutils/aperture</filename> で
        "<code>make install</code>" します) からインストールするべきでしょう。
        これは、たとえ kernel の secure レベルが 0 より大きくても、X サーバーが
        VGA のフレームバッファーに直接アクセスすることを可能にします。
      </para>
    </sect3>

    <sect3 id="xf86mapvidmem-error">
      <title>X が実行できず "Fatal server error: xf86MapVidMem: Could not map /dev/vga (Invalid argument)" とのメッセージが出ます</title>
      <para>
        これは、<ulink url="#x_needs_insecure_kernel">上で説明した問題</ulink>
        の症状です。
      </para>
    </sect3>

    <sect3 id="x_and_ps2_mouse">
      <title>X が PS/2 mouse を認識しない</title>
      <para>
        1.3.3 までのデフォルトの NetBSD/i386 GENERIC カーネルには PS/2 マウスのサポートが
        含まれていません。PS/2 サポートを有効にするためには <ulink
        url="../../docs/kernel/#how_to_build_a_kernel">カーネルの
        再コンパイル</ulink>が必要となります。
        上記の説明にしたがってステージ 4 の &lt;MYCONF&gt;編集の際に次の行を探し
        先頭の '#' を取り除いてカーネルを作成して下さい。

<programlisting>
   '#pms0    at pckbd? irq 12'
</programlisting>

        これにより、ブート時にブートメッセージ中に 'pms0 at pc0' または
        'pms0 at vt0' という表示が含まれるようになります。
      </para>
      <para>
        XFree86 のセットアップを行なう時には、マウスデバイスとして 'wsmouse' を
        プロトコルとして 'wsmouse' を選択して下さい。
      </para>
    </sect3>

    <sect3 id="x_scroll_mouse">
      <title>ホイールマウスを有効にする方法は?</title>
      <para>
        ホイールマウス操作を使えるようにするには、 <code>/etc/XF86Config</code>
        設定ファイルを編集し、このファイルの
<programlisting>
   Section "InputDevice"
      Identifier  "Mouse1"
</programlisting>
        セクションに、
<programlisting>
   Option     "Buttons"       "5"
   Option     "ZAxisMapping"  "4 5"
</programlisting>
        を追加します。
      </para>
    </sect3>
  </sect2>

  <sect2 id="other">
    <title>その他の NetBSD/i386 FAQs</title>

    <sect3 id="netscape">
      <title>NetBSD/i386 で Netscape や Mozilla は使えますか</title>
      <para>
        はい。 Netscape ブラウザーは、バイナリーエミュレーションを使って NetBSD/i386 上で動作できます。
      </para>
      <para>
        Mozilla はソースコードが公開されており、 NetBSD でネイティブに動作するよう
        移植されています。また、 Mozilla のバイナリーパッケージが、 <ulink
        url="../../docs/software/packages.html">NetBSD パッケージコレクション</ulink>
        (<filename role="pkg">www/mozilla</filename> 参照) から利用可能です。
      </para>
      <para>
        Netscape Navigator (スタンドアローンなブラウザー) や Netscape Communicator
        を NetBSD/i386 で動かす最も簡単な方法は、 BSDi バイナリーエミュレーション
        または Linux バイナリーエミュレーションを使うことです。
        BSDi 版を動作させるために必要なことは、 BSDi エミュレーション用の
        カーネルオプションをカーネル設定ファイルに加えるだけです
        (標準でインストールされる <code>GENERIC</code> カーネルには、すでに含まれています) 。
        NetBSD/i386 での Linux エミュレーションでは、 /emul/linux 以下に
        Linux のライブラリーが必要です (&man.compat.linux.8; 参照) 。
        Linux 版は <ulink
        url="../../docs/software/packages.html">NetBSD パッケージ
        コレクション</ulink> から利用可能です;  <filename role="pkg">www/navigator</filename> または
        <filename role="pkg">www/communicator</filename> をインストールすると、このパッケージの依存関係によって
        /emul/linux が用意されます (または <filename role="pkg">emulators/suse_linux</filename>
        で "<code>make install</code>" することでもできます) 。
      </para>
      <para>
        Macromedia Flash のようなバイナリーのみによるプラグインを使いたい場合は、
        Linux 版の navigator / communicator を使う必要があります。
      </para>
    </sect3>

    <sect3 id="quake2">
      <title>NetBSD 上での GNU/LINUX 用の Quake II の実行</title>
      <para>
        すでに、<ulink url="./">NetBSD i386</ulink>が動いていることを仮定します。
        また、<ulink
        url="../../docs/kernel/#how_to_build_a_kernel">
        カーネルの再構築</ulink> の知識も必要です。
        この方法は NetBSD 1.4 (以降) ファミリー、
        <ulink url="http://www.idsoftware.com/games/quake/quake2/">Quake II</ulink>
        バージョン 3.20 と NetBSD の <ulink
        url="../../docs/software/packages.html">パッケージ</ulink>セット中の
        suse_* v6.4 <filename role="pkg">emulators</filename> を基にしています。
      </para>
      <para>
        他の (より新しい) バージョンでもおそらく同じように動くことでしょう。
      </para>
      <para>
        始める前の注意点:
      </para>

      <itemizedlist>
        <listitem>エミュレーション用のバイナリーと Quake II ゲーム本体のために
          かなりのディスク容量が必要です。</listitem>
        <listitem>おそらく全てを root としてインストールする必要があります。
          これは、あなたのシステム全体とセキュリティーを suse_* と ゲームの
          作者に委ねることを意味します。多くの個人で使用している場合には
          それほどの問題にならないかも知れませんが、全てはあなたの判断に
          委ねられます。
          私個人としては、これらの作者を信じない理由はありませんが、
          あなたのシステムが複雑であればあるほど、またコンポーネントを
          無条件で信じれば信じるほど、危険は大きくなることに注意してください。</listitem>
        <listitem>私が 8-bit モードの X サーバーで試したところ、Quake II がきちんと
          動作したグラフィックモードは ``ref_softx'' だけでした。
          OpenGL は``glide'' なしではうまくいかないみたいですが、
          私が持っているカード(STB Nitro 3D)では glide はサポートされていません。
          Direct video は動作するようですが、必要なライブラリーを
          私は持っていません。
          (これは結局、まずは X Window System の設定が<emphasis role="bold">必要</emphasis>と
          いうことになります。)
          ゲーム自体は 24-bit X でも動作しますが、グラフィックがおかしくなります。
          Quake II は標準サイズのウインドウを使用しますが、水平方向に 1/2 に
          押し縮められた状態にグラフィックがなってしまいます。この時、
          画面の右半分は真っ黒になってしまいます。</listitem>
       <listitem>ドキュメントによれば、Quake II を任意のユーザーが実行できるように
         設定できることになっています。
         しかしながら私はゲームを root で<emphasis role="bold">しか</emphasis>
         実行できませんでした。</listitem>
       <listitem>多くの人は Quake II サーバーを NetBSD で実行することに成功しています。
         しかし、私はネットワークモードでしか<emphasis role="bold">実行</emphasis>できていません。
         何が問題なのかは不明です。</listitem>
     </itemizedlist>
     <para>
       以上で全てです。あとは Quake II 付属の使用説明書を良く読んで下さい。
     </para>

     <orderedlist>
       <listitem>もしも、NetBSD 1.4 か 1.5 の GENERIC カーネルを使用して<emphasis role="bold">いない</emphasis>
         ならば、カーネルコンフィギュレーションファイル中で COMPAT_LINUX オプションを
         有効にして、カーネルを作り直し、リブートする必要があるかもしれません。</listitem>
      <listitem>あらかじめ、<ulink
         url="http://www.linux.org/">GNU/LINUX</ulink>-compatibility package
         をインストールしておく必要があります。
         <emphasis>注意: linux_* というパッケージは、必要なものを含んでいるわけでは
          <emphasis role="bold">ありません</emphasis>。でも、GNU/LINUX 版の BASH を
          パッケージから入れておきたいと思うはずです。
          (エミュレーションの動作形態として、エミュレーション中に動作する
          <emphasis role="bold">いくつかの</emphasis> shell を用意しておくことは
          便利なときがあります。でも、かならず用意しておく必要が
          あるわけでは<emphasis role="bold">ありません</emphasis>)</emphasis></listitem>
       <listitem>配布 CD を &man.mount.8; します。</listitem>
       <listitem>CD の ルートディレクトリーに移動します。</listitem>
       <listitem>&man.sh.1; を用いて <code>/bin/sh setup</code> を実行します。</listitem>
       <listitem>setup の途中で、``rpm'' についてたずねられる場面があります。
         rpm とは Red-Hat Package Manager の事で、これは NetBSD パッケージとして
         利用可能です。(rpm はもともと GNU/LINUX 用のコマンドです。)
         ところが、私がそれを使用するように指定したところ、setup スクリプトは
         利用しようとしませんでした。
         でもあわてないでください。
         私は単にデフォルトを選びました。
         こうすると、setup は &man.cpio.1; を用います。
         rpm を使わないならば、setup は cpio の存在する場所を尋ねてきます。
         NetBSD 1.4 ファミリーでは cpio は ``/usr/bin/cpio'' にあります。</listitem>
      <listitem>その他の点ではすべてがスムーズに進むはずです。
        CD は setup の最中に何度もスタートストップを繰り返すかもしれません。(私はそうでした)
        でも、これは問題ではありません。
        CD を見てみると、CD-ROM にはトラックが分断されて記録されているようなので
        マスター CD-ROM の作成に何らかの細工がされているのだと考えています。</listitem>
    </orderedlist>
    <para>
      助言と問題解決のヒント
    </para>

    <itemizedlist>
      <listitem>``ウィンドウの飾り'' (境界線その他もろもろ)
      の表示はお嫌いですか?
      ../quake2/config.cfg ファイルを見てください。
      horizontal offset(デフォルト値は 3) と vertical offset (22) という
      2つのオプションがあるはずです。
      これらを 0 に設定するとタイトルバーと境界線はなくなります。
      スクリーンの解像度と同じ解像度でゲームを実行する場合には、
      こうしておくと良いでしょう。</listitem>
      <listitem>このゲームは GNU/LINUX 用のものなので、Quake II を GNU/LINUX 
      ディレクトリーに移動したくなるかもしれません。
      (もし、setup スクリプトを GNU/LINUX BASH で実行していれば
      自動的にこうなりますが、NetBSD の sh を用いていれば、
      Quake II は /usr/local/games にインストールされます。)</listitem>
      <listitem>Quake II が ``pics/colormap.pcx'' ファイルがないというような
      エラーで実行できない場合、おそらく root で
      実行して<emphasis role="bold">いない</emphasis>のでしょう。
      root 以外が実行できるようにできるかもしれませんが、
      一番単純なのは ``su root'' をしてから、ゲームを実行してみることです。</listitem>
      </itemizedlist>
    </sect3>

    <sect3 id="windows_refund">
      <title>Windows を使わないのですが、払い戻しが受けられますか</title>
      <para>
        いくつかの PC システムは Microsoft Windows がプレインストールされた
        状態でしか手に入れることが出来ません。このようなシステムの価格には
        Windows ライセンスの値段が含まれています。もし、あなたが Windows を
        使用したくないのならば、Microsoft から払い戻しを受ける権利があるかも
        知れません。ただし、これは複雑で長い時間のかかるものとなるでしょう。
      </para>
      <para>
        もっとも良い方法は Windows を完全に含まない PC の再販ができる業者を探し、
        支援する事でしょう。
      </para>
    </sect3>

    <sect3 id="kgdb">
      <title>シリアルラインを用いた NetBSD のカーネルのデバッグ法</title>
      <para>
        <ulink url="../../docs/kernel/kgdb.html">KGDB HOWTO</ulink> を見てください。
      </para>
    </sect3>
  </sect2>
</sect1>

<sect2 id="other">
  <title>その他の情報</title>

  <itemizedlist>
    <listitem><ulink url="http://www.xfree86.org/help.html">XFree86 ドキュメンテーション</ulink>
    - X のインストールや設定に関する問題。</listitem>
<listitem><ulink url="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-1.5.2/i386/INSTALL.html">
    NetBSD 1.5.2 インストールノート</ulink> - サポートされているハードウェアおよびインストールの方法。</listitem>
<listitem><ulink url="../../../docs/elf.html">The NetBSD ELF FAQ</ulink>.
    NetBSD 1.5以降 i386 port は a.out ではなく、ELF 実行形式を使用します。</listitem>
<listitem><ulink url="../../../docs/guide/en/chap-cons.html#chap-cons-wscons">wscons
    ドキュメンテーション</ulink>.  NetBSDの機種非依存のワークステーションコンソールドライバー。
</listitem>
<listitem><ulink url="../../mailinglists/#port-i386">port-i386 メーリングリスト</ulink>
    - さらなる疑問がある場合は参加して下さい。</listitem>
<listitem><ulink url="../../docs/network/netboot/intro.i386.html">Netbooting
    NetBSD/i386</ulink> - フロッピーまたは DOS パーティションからのブート。</listitem>
<listitem><ulink url="../../docs/power-mgmt/">ラップトップの
    パワーマネジメント</ulink></listitem>
<listitem><ulink url="../../docs/">General NetBSD Documentation</ulink>
    - NetBSD/i386 に限らない質問</listitem>
<listitem>Luke Mewburn による *BSD のための
    <ulink url="http://www.mewburn.net/luke/papers/building-pcs.html">
    i386 ハードウェアの選び方ガイド</ulink></listitem>
<listitem>東芝による、 NetBSD を含む <ulink url="http://newsletter.toshiba-tro.de/main/">マシン/OS
     互換性データベース</ulink></listitem>
<listitem>Reed Media による、 <ulink url="http://www.reedmedia.net/misc/netbsd/laptops-and-netbsd.html">ラップトップと NetBSD</ulink> のリスト</listitem>
</itemizedlist>

</sect2>
</webpage>
