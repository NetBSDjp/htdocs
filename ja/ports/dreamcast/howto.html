<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Website XSL Stylesheet V2.6.0">
<link rel="stylesheet" href="global.css" type="text/css">



<title>NetBSD/dreamcast: NetBSD/dreamcast の使い方</title>
</head>
<body class="website"><div class="webpage">
<a name="ja-ports-dreamcast-howto"></a><div id="top"><a href="#mainContent" class="doNotDisplay doNotPrint">本文へ飛ぶ。</a></div>
<div id="header">
<div class="topNavigation">
<span>» </span><a href="../../../docs/guide/en/">
	  ガイド</a> |
	<a href="http://man.NetBSD.org/">マニュアルページ</a> |
	<a href="../../../ja/mailinglists/">
	  メーリングリスト</a>と
	<a href="http://mail-index.NetBSD.org/">記事</a> |
	<a href="http://cvsweb.NetBSD.org/">CVS リポジトリー</a> |
	バグの<a href="http://www.NetBSD.org/cgi-bin/sendpr.cgi?gndb=netbsd">報告</a>
	と
	<a href="../../../ja/support/query-pr.html">
	 照会</a> |
	<a href="../../../ja/docs/software/packages.html">
	  ソフトウェアパッケージ
	</a>
</div>
<div class="centralHeader">
<a href="../../../ja/"><img alt='NetBSD プロジェクト "Of course it runs NetBSD"' width="506" height="90" src="../../../images/NetBSD-headerlogo.png"></a><div class="headerTools"><div id="headerSearch"><form method="get" action="http://www.google.com/custom">
<input class="whiteOnBlack" type="text" name="q" onfocus="if(this.value==this.defaultValue ) this.value='';" size="12" maxlength="255" value="Search"><input type="hidden" name="cof" value="L:http://www.NetBSD.org/images/NetBSD-smaller.png;LH:200;LW:200;AH:center;AWFID:4f6b0499f0f58d2c;"><input type="hidden" name="domains" value="NetBSD.org"><input type="hidden" name="sitesearch" value="www.NetBSD.org"><input type="submit" value="検索">
</form></div></div>
</div>
<div class="navBar">
<span class="doNotDisplay">
	  案内:
	</span><a href="../../../ja/">
	  ホーム</a> | 
	<a href="../../../ja/about/">
	  概要</a> | 
	<a href="../../../ja/gallery/">
	  展示室</a> | 
	<a href="../../../ja/releases/">
	  ダウンロード</a> | 
	<a href="../../../ja/docs/">
	  ドキュメンテーション</a> | 
	<a href="../../../ja/support/">
	  サポート</a> | 
	<a href="../../../ja/community/">
	  コミュニティー</a> | 
	<a href="../../../ja/ports/">
	  機種</a>
</div>
</div>
<div id="content"><div class="fullWidth"><div class="rowOfBoxes">
<h1>NetBSD/dreamcast: NetBSD/dreamcast の使い方</h1>
<h3 class="title"><a name="howto"></a></h3>
<ul>
<li><a href="#introduction">序</a></li>
<li><a href="#requirements">必要なもの</a></li>
<li><a href="#bootable-kernel-cd">ブータブルカーネル CD を作る</a></li>
<li><a href="#prepare-nfs-server">NFS サーバー &amp; ファイルシステムの準備</a></li>
<li><a href="#try-it-out">やってみよう</a></li>
<li><a href="#finished">完了!</a></li>
</ul>
<hr>
<h3 class="title"></h3>
<h4 class="title">
<a name="introduction"></a>序 (<a href="#howto">top</a>)
  </h4>

<span class="emphasis"><em><span class="quote">“<span class="quote">NetBSD を動かすために Dreamcast を買ったところです。どうしたらいい?</span>”</span></em></span>

<p>
何が問題なのかさえわかっていれば、 Sega Dreamcast で NetBSD を動くように
するのはいたって簡単なことです。このドキュメントは、 DC/NetBSD 初心者に加えて
NetBSD 初心者も対象としています。ただし、ある程度の UNIX 的な知識は
前提としています。このドキュメントに載せた情報は、
<a class="ulink" href="http://mail-index.NetBSD.org/port-dreamcast/" target="_top">port-dreamcast
メーリングリストのアーカイブ</a>、 Marcus Comstedt のホームページ <a class="ulink" href="http://mc.pp.se/dc/" target="_top">http://mc.pp.se/dc/</a> 、 BeTips.net <a class="ulink" href="http://www.betips.net" target="_top">http://www.betips.net</a> 、
<a class="ulink" href="http://members.wri.com/josht/dreamcast/dreamcast.html" target="_top">Josh Tolbert's Dreamcast How-to</a>、
および筆者個人の試行錯誤の結果から選りすぐりました。
</p>

<p>
システムをまともに使うためには書き込み可能なファイルシステムが必要なので、
この HOWTO では Dreamcast をネットブートさせることに集中します。 CD
からのブートはテスト用には便利ですし、
<span class="quote">“<span class="quote">ただのお遊び</span>”</span>でそうしたい人たちもいるので、
CD からのブートに関する簡単な説明もしておきます。
</p>

<h4 class="title">
<a name="requirements"></a>必要なもの (<a href="#howto">top</a>)
  </h4>

<p>
下記のものが必要です:

</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">Dreamcast ゲーム機 (2000 年 9 月以前に製造されたものをおすすめします
    (それより後に製造されたものでも動いたとの情報もありますので、
    メーリングリストのアーカイブで確認してください))
  </li>
<li class="listitem">Dreamcast キーボード
  </li>
<li class="listitem">オプション - Dreamcast マウス (本稿執筆時点ではドライバーがありません。
    あなたが書いてみませんか?)
  </li>
<li class="listitem">Windows が動いている PC
  </li>
<li class="listitem">NetBSD が動いている PC (Linux や他の *BSD でもよいはずです。
    BeOS は <a class="ulink" href="#prepare-nfs-server" target="_top">step 3</a> が行なえません)
  </li>
<li class="listitem">ブランク CD-R (CD-RW は Dreamcast では読めません)
  </li>
<li class="listitem">
<a class="ulink" href="http://members.wri.com/josht/dreamcast/dreamcast-kernel.tar.gz" target="_top">
    Josh のサイト</a> (または <a class="ulink" href="http://www.schnarff.com/netbsd/dreamcast-kernel.tar.gz" target="_top">ミラー</a>)
    で配布されているブート可能な NetBSD カーネル。
  </li>
<li class="listitem">
<span class="quote">“<span class="quote">mkhybrid</span>”</span> と CD を焼くためのプログラム (筆者は BeOS で CD Burner
    を使っていますが、ふつうは <span class="quote">“<span class="quote">cdrecord</span>”</span> でしょう)
  </li>
</ul></div>
<p>
</p>

<h4 class="title">
<a name="bootable-kernel-cd"></a>ブータブルカーネル CD を作る (<a href="#howto">top</a>)
  </h4>

<p>
</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">ダウンロードしたカーネルを適当な場所に展開します。 audio.raw と
    kernel.raw というファイルがあるはずです。
  </li>
<li class="listitem">最初に audio.raw をオーディオトラックとして焼きます。残りのセッション用に
    ディスクをオープンしたままにしておいてください。 cdrecord
    では以下のようにします:
    <pre class="programlisting"># cdrecord dev=0,1,0 -multi -audio audio.raw</pre>
    もちろん、この dev=0,1,0 は、お使いのシステムに合った値に変える必要が
    あります。これは cdrecord -scanbus で調べられます。
  </li>
<li class="listitem">kernel.raw をデータとして焼きます。 cdrecord では以下のようにします:
    <pre class="programlisting"># cdrecord dev=0,1,0 -multi -xa1 netbsd-kernel.raw</pre>
    この "-xa1" オプションは、 cdrecord 2.01 で "-xa" に変わりました。
    CD-R を XA mode 2 form 1, 2048 バイト毎セクターで焼くために必要なオプションは、
    cdrecord のマニュアルページに書いてあります。お使いのバージョンの
    cdrecord で "-xa1" でも "-xa" でもうまくいかない場合は、
    "-xa2" も試してみてください。
  </li>
</ul></div>
<p>
</p>

<p>
テスト CD を焼く場合:
</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">ダウンロードしたイメージを DiscJuggler を使って焼きます。この CD を
      Dreamcast に入れて電源を入れた際にブートメッセージが出れば、その
      Dreamcast は使えるということです; もしそのマシンが 2002 年 9 月より後に
      製造されたものである場合は、 <a class="ulink" href="http://www.NetBSD.org/cgi-bin/subscribe_list.pl?list=port-dreamcast" target="_top">メーリングリスト</a>でお知らせください。
  </li>
<li class="listitem">CD 上にファイルシステムを作ってテストしたい場合:
    <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
<a class="ulink" href="http://www.NetBSD.org" target="_top">http://www.NetBSD.org</a> から
	HPCSH tarball を取ってきて、適当な場所に置きます
      </li>
<li class="listitem">
<code class="filename">/home/dreamcast/dev/</code> で
	<pre class="programlisting"># sh MAKEDEV all</pre>
	を実行します
      </li>
<li class="listitem">この配布物を CD に焼くため、 mkhybrid でイメージを作ります:
	<pre class="programlisting"># mkhybrid -o DCBSD.img -V DCNetBSD -a -r /home/dreamcast/</pre>
        <code class="option">-V</code> はボリュームラベル、 <code class="option">-a</code>
        はこのディレクトリー以下の全ファイル、 <code class="option">-r</code> は
        Rock Ridge 拡張 (必須ではないが、指定しても問題はない) を意味します。
      </li>
<li class="listitem">DiscJuggler CD を Dreamcast に入れて電源を入れます。ルート FS
	を尋ねるプロンプトでは <span class="quote">“<span class="quote">gdrom</span>”</span> と打ち込みます;
	ダンプデバイスを尋ねられたら <span class="quote">“<span class="quote">Enter</span>”</span> を押します。
      </li>
<li class="listitem">ブート CD を、さきほど作ったファイルシステム CD に入れ換えます
      </li>
<li class="listitem">ファイルシステムを尋ねるプロンプトで <span class="quote">“<span class="quote">cd9660</span>”</span> と打ち込みます;
	これでシングルユーザーモードに入るはずです。
      </li>
</ul></div>
  </li>
</ul></div>
<p>
</p>


<h4 class="title">
<a name="prepare-nfs-server"></a>NFS サーバー &amp; ファイルシステムの準備 (<a href="#howto">top</a>)
  </h4>

<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">Josh のサイトから<a class="ulink" href="http://members.wri.com/josht/dreamcast/dreamcast-world.tar.gz" target="_top">
      world ファイル</a>を取ってきます。
  </li>
<li class="listitem">このファイルを、お使いの *BSD/Linux PC の適当な場所に展開します。
      
  </li>
<li class="listitem">
<code class="filename">/etc/exports</code> ファイルを用意します (書式については
      <a href="http://netbsd.gw.com/cgi-bin/man-cgi?exports+5+NetBSD-5.1+i386">exports(5)</a> マニュアルを参照) 。 Josh のサイトに<a class="ulink" href="http://members.wri.com/josht/dreamcast/exports.txt" target="_top">例</a>
      があります。以下の点に注意してください:
    <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
<code class="option">-maproot=0</code> します。さもないと、
	Dreamcast はファイルシステムをマウントできません。
      </li>
<li class="listitem">共有可能なネットワークかホストを指定します; さもないと、
	全世界から書き込み可能になってしまい、
        危険です。
      </li>
</ul></div>
  </li>
<li class="listitem">mountd と nfsd が動いていることを確認します; 動いていれば、
      <pre class="programlisting">ps aux | grep '(mount|nfs)'d</pre>
      でそれらが表示されます。表示されない場合、
      それらを起動するため、 root で <span class="quote">“<span class="quote">mountd</span>”</span> と
      <span class="quote">“<span class="quote">nfsd</span>”</span> を実行します;
      今後のブート時にこれらを自動的に起動するようにするため、
      <code class="filename">/etc/rc.conf</code> を編集して、
      <code class="literal">nfs_server=YES</code>, <code class="literal">lockd=YES</code>,
      <code class="literal">statd=YES</code> を書きます。
  </li>
<li class="listitem">
<code class="filename">/etc/dhcpd.conf</code> を設定します
      (このファイルの書式は man <a href="http://netbsd.gw.com/cgi-bin/man-cgi?dhcpd.conf+5+NetBSD-5.1+i386">dhcpd.conf(5)</a> 参照) 。<a class="ulink" href="http://members.wri.com/josht/dreamcast/dhcpd.conf" target="_top">設定例</a>が
      Josh のサイトにあります。このほか <a class="ulink" href="http://www.schnarff.com/netbsd/dhcpd.conf" target="_top">Alex Kirk のサイト</a>にも例があります。
      <code class="filename">dhcpd.conf</code>
      を書くときには以下の点に注意してください:
    <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">host セクションに Dreamcast の MAC アドレスを指定 *しなければ
          なりません* 。 MAC アドレスは BBA を見ればわかります;
          ステッカーに書いてあります。
      </li>
<li class="listitem">root-path オプションは、 
          world ファイルを展開した場所にする必要があります。
      </li>
<li class="listitem">domain-name-servers などのオプションは厳密には必要ありませんが、
          書いておいたほうが簡単になります。
      </li>
</ul></div>
  </li>
<li class="listitem">dhcpd が動いていることを確認します; 動いていなければ
      <pre class="programlisting"># sh /etc/rc.d/dhcpd start</pre>
      します。いつでも DHCP が動くようにするため、
      <code class="filename">/etc/rc.conf</code> を編集して
      <code class="literal">dhcpd=YES</code> を書いておきます。
  </li>
<li class="listitem">
<code class="filename">/home/dreamcast/dev/</code> で
     MAKEDEV スクリプトを実行します。これで、
      他の必要なデバイスとともにコンソールが作られます。
    <pre class="programlisting"># sh MAKEDEV all</pre>
  </li>
<li class="listitem">Dreamcast 用のスワップファイルを作ります。任意のサイズにできますが、
    経験上は 32-64MB が最適です (小さすぎると使い物になりませんし、
    大きすぎると保守のために過大な物理 RAM を占有します) 。
    スワップファイルは Dreamcast のルートとしてエクスポートする
    ディレクトリーの下に置くようにします。
    <pre class="programlisting"># dd if=/dev/zero of=swap bs=32k count=1024 </pre> (サイズが 32MB の場合)
  </li>
<li class="listitem">
<code class="filename">/home/dreamcast/etc/fstab</code> (または Dreamcast のルートとなる場所の
    etc/fstab ファイル) を編集し、適切なファイルシステムをマウントするようにします:
    <pre class="programlisting">
        192.168.2.69:/home/alex/dreamcast/dc / nfs rw,auto 0 0
	/swap none swap sw 0 0
	/kern /kern kernfs rw
	/proc /proc procfs rw 0 0
	/dev/gdrom0c /mnt/gdrom cd9660 ro,noauto 0 0
    </pre> 
  </li>
</ul></div>


<h4 class="title">
<a name="try-it-out"></a>やってみよう (<a href="#howto">top</a>)
  </h4>

<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">CD を Dreamcast に入れて電源を入れます。 CD が正しく作れていれば、
      見慣れた NetBSD のブートアップシーケンスが始まります。
      もし、 2000 年 9 月より後に製造された Dreamcast
      でこれに成功したら、 <a class="ulink" href="http://www.NetBSD.org/cgi-bin/subscribe_list.pl?list=port-dreamcast" target="_top">メーリングリスト</a>でお知らせください。
  </li>
<li class="listitem">問題が起きた場合、
    <code class="filename">/etc/exports</code> か <code class="filename">/etc/dhcpd.conf</code>
    がおかしいのかもしれません。まずはこれらにくだらない間違いがないか、
    再確認するとよいでしょう─私たちもそういう間違いをするので、気にしないように。
    説明なしにエラーが出た場合は、
    <code class="filename">/usr/src/sys/sys/errno.h</code> を見ると簡単な説明があります。
  </li>
<li class="listitem">行き詰まったら、<a class="ulink" href="http://mail-index.NetBSD.org/port-dreamcast/" target="_top">メーリングリストのアーカイブを見ましょう</a>。
    これは役立ちます。検索したい場合は Google の Advanced Search を使うのが最善です;
    ドメインを
    mail-index.NetBSD.org に絞り、検索語に
    <span class="quote">“<span class="quote">dreamcast</span>”</span> を含めるようにします。
  </li>
<li class="listitem">それでもうまくいかなければ、<a class="ulink" href="http://www.NetBSD.org/cgi-bin/subscribe_list.pl?list=port-dreamcast" target="_top">メーリングリスト</a>に投稿してください。
    問題の詳細を書き、関連するエラーメッセージ/設定ファイル/ログファイルを
    (サイズが小さければ) 引用してください。
  </li>
</ul></div>


<h4 class="title">
<a name="finished"></a>完了! (<a href="#howto">top</a>)
  </h4>

カスタムカーネルをいろいろ作って遊びたい場合は、 Josh の <a class="ulink" href="http://members.wri.com/josht/dreamcast/ipslave.html" target="_top">IP Slave ページ</a>
にある説明を読むことをおすすめします。
このページでは、カーネルを作るたびに CD
を焼かなくてもすむ方法について、説明しています。
</div></div></div>
<div class="navfoot"></div>
<div id="footer"><center>
<span class="footfeed"><a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">
	  連絡</a> |
      </span><span class="footcopy"><a href="../../../ja/about/disclaimer.html">
      免責事項</a> |

      <span class="copyright">Copyright © 1994-2011 The NetBSD Foundation, Inc. </span>ALL RIGHTS RESERVED.<br>NetBSD<sup>®</sup> は The NetBSD
	Foundation, Inc. の登録商標です。</span>
</center></div>
</div></body>
</html>
