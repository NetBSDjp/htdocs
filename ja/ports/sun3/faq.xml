<?xml version="1.0"?>
<!DOCTYPE webpage
 PUBLIC "-//NetBSD//DTD Website-based NetBSD Extension//EN"
        "http://www.NetBSD.org/XML/htdocs/lang/share/xml/website-netbsd.dtd">

<webpage id="ports-sun3-faq">
    <config param="desc" value="NetBSD/sun3"/>
    <config param="cvstag" value="$NetBSD: faq.xml,v 1.2 2007/06/09 19:18:14 dsieger Exp $"/>
    <config param="rcsdate" value="$Date: 2007/06/09 19:18:14 $"/>
    <head>
        <!-- Copyright (c) 1994-2003
	The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED. -->

        <title>NetBSD/sun3 Frequently Asked Questions</title>
    </head>


    <sect1 role="toc">
        <title>NetBSD/sun3 Frequently Asked Questions</title>

        <sect2 id="general">
            <title>General Questions</title>

            <sect3 id="le0-not-multicast-capable">
                <title>No multicast or IPv6 - "<code>le0: not multicast capable</code>" </title>
                <para> The LANCE revision C chips used in
                    some sun3s (not the sun3x) have a bug which sometimes results in garbage
                    inserted where the first bits should be, with the correct bits shifted later. So
                    instead of the destination MAC address at the beginning, you get something
                    random looking. </para>
                <para> The work-around is to examine the beginning of the packet and throw away
                    anything that's not for us (my MAC or broadcast). Unfortunately this prevents
                    the use of multicast. </para>
                <para> The LANCE Rev. C chip was probably only used in the 3/50, so on other sun3
                    machines you should be able to <ulink
                        url="../../docs/kernel/#how_to_build_a_kernel">build a
                    kernel</ulink> without the line:</para>
                <programlisting>options LANCE_REVC_BUG</programlisting>
            </sect3>

            <sect3 id="3-80-esp-endless-reset">
                <title>Running diskless 3/80 with ESP driver - <code>"esp: SCSI bus reset."</code> </title>
                <para>
                    This message is a symptom of a bug in the
                    esp driver on diskless systems. The ESP (Emulex SCSI Processor) driver in
                    NetBSD/sun3x has a bug that causes it to enter an endless loop when it probes an
                    empty SCSI bus. To work around this problem, use a kernel which does not have
                    the esp device driver, or plug in at least one powered SCSI device into the bus.
                    (Sorry, we don't have a pre-compiled esp-less kernel for you yet!) </para>
            </sect3>

            <sect3 id="sunos_compat">
                <title>SunOS 4.1 Compatibility</title>
                <para> NetBSD/Sun3 features extensive binary compatibility with SunOS 4.1.x
                    programs. Static SunOS executables will run without any extra setup. </para>
                <para> To run dynamic executables, you'll need to provide the dynamic libraries that
                    came with your SunOS installation. SunOS programs that will
                    <emphasis>not</emphasis> work include those that use the SunOS kvm library,
                    certain (low-level) disk manipulation utilities, and programs making explicit
                    use of Sun's STREAMS subsystem. Check the &man.compat.sunos.8; manual page
                    for more details. </para>
            </sect3>

            <sect3 id="boot-devices">
                <title>Booting SCSI devices at different targets</title>
                <para> All sun3 and sun3x monitors support booting from SCSI devices. Most users
                    will be familiar with booting from the monitor device <code>sd(0,0,0)</code>,
                    which they know means booting the SCSI disk at target zero. However, determining
                    the monitor device name for booting an arbitrary SCSI device can be confusing. </para>
                <para> A monitor boot device takes the form
                        <emphasis>dev</emphasis><code>(</code><emphasis>cntrl</emphasis><code>,</code><emphasis>unit</emphasis><code>,</code><emphasis>part</emphasis><code>)</code>.
                        <emphasis>dev</emphasis> is two letters, and <emphasis>cntrl</emphasis>,
                        <emphasis>unit</emphasis>, and <emphasis>part</emphasis> are hexadecimal
                    numbers. </para>
                <para> For SCSI disks and CD-ROMs, <emphasis>dev</emphasis> is <code>sd</code>. For
                    SCSI tapes, <emphasis>dev</emphasis> is <code>st</code>. </para>
                <para> For all SCSI devices, <emphasis>cntrl</emphasis> is the number of the SCSI
                    controller the device is attached to. For a machine with a single SCSI
                    controller, <emphasis>cntrl</emphasis> is <code>0</code>. </para>
                <para> For all SCSI devices, <emphasis>unit</emphasis> identifies the SCSI target
                    and logical unit number of the device. Exactly how the SCSI target and logical
                    unit number are combined into the single number <emphasis>unit</emphasis>
                    depends on your machine type and ROM revision, and whether or not the device is
                    a disk, CD-ROM, or tape. Use the tables below to figure out how
                    <emphasis>unit</emphasis> works on your machine. </para>
                <para> For SCSI disks and CD-ROMs, <emphasis>part</emphasis> selects the partition
                    to boot on that disk or CD-ROM. The first partition is <code>0</code>, the
                    second partition is <code>1</code>, etc. Normally, <emphasis>part</emphasis> is
                        <code>0</code>, since the first partition on a disk is usually the bootable
                    one. Common exceptions are booting a miniroot that has been written to the swap
                    partition, in which case <emphasis>part</emphasis> is <code>1</code>, or booting
                    a CD-ROM that contains different bootable partitions for different
                    architectures, in which case you have to know which partition boots your
                    architecture. </para>
                <para> For SCSI tapes, <emphasis>part</emphasis> selects the tape segment (also
                    called "tape file") to boot. The first tape segment is <code>0</code>, the
                    second tape segment is <code>1</code>, etc. You will need to know which tape
                    segment is bootable for your architecture in order to give the right
                        <emphasis>part</emphasis>. </para>
                <para> Finally, these are the tables that demonstrate how <emphasis>unit</emphasis>
                    works on various machines. They list <code>sd</code> monitor devices for disks
                    and CD-ROMs, and <code>st</code> monitor devices for tapes, all at different
                    SCSI targets. These tables assume that you want the first SCSI controller
                        <code>0</code>, and the first partition or first tape segment
                    <code>0</code>. Also, because many Sun 3 models use the same CPU board, to keep
                    these tables simple Sun's CPU board code names are used wherever possible. </para>

                <informaltable id="hw_model">
                    <tgroup cols="4">
                        <thead>
                            <row>
                                <entry>Model</entry>
                                <entry>CPU</entry>
                                <entry>Model</entry>
                                <entry>CPU</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>3/75</entry>
                                <entry>
                                    <emphasis>Carrera</emphasis>
                                </entry>
                                <entry>3/140</entry>
                                <entry>
                                    <emphasis>Carrera</emphasis>
                                </entry>
                            </row>
                            <row>
                                <entry>3/150</entry>
                                <entry>
                                    <emphasis>Carrera</emphasis>
                                </entry>
                                <entry>3/160</entry>
                                <entry>
                                    <emphasis>Carrera</emphasis>
                                </entry>
                            </row>
                            <row>
                                <entry>3/180</entry>
                                <entry>
                                    <emphasis>Carrera</emphasis>
                                </entry>
                                <entry>&nbsp;</entry>
                                <entry>&nbsp;</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </informaltable>
                <para> </para>

                <informaltable id="hw_cpu_rom">

                    <tgroup cols="9" align="center">
                        <colspec colnum="1" colname="col1" colwidth="1*"/>
                        <colspec colnum="2" colname="col2" colwidth="1*"/>
                        <colspec colnum="3" colname="col3" colwidth="1*"/>
                        <colspec colnum="4" colname="col4" colwidth="1*"/>
                        <colspec colnum="5" colname="col5" colwidth="1*"/>
                        <colspec colnum="6" colname="col6" colwidth="1*"/>
                        <colspec colnum="7" colname="col7" colwidth="1*"/>
                        <colspec colnum="8" colname="col8" colwidth="1*"/>
                        <colspec colnum="9" colname="col9" colwidth="1*"/>
                        <thead>
                            <row>
                                <entry morerows="1">CPU/rev ROM</entry>
                                <entry namest="col2" nameend="col9" align="center">Monitor device to
                                    boot the disk or CD-ROM at target</entry>
                            </row>
                            <row>
                                <entry>0</entry>
                                <entry>1</entry>
                                <entry>2</entry>
                                <entry>3</entry>
                                <entry>4</entry>
                                <entry>5</entry>
                                <entry>6</entry>
                                <entry>7</entry>
                            </row>
                        </thead>
                        <tbody>

                            <row>
                                <entry>3/60 rev 1.9 <emphasis>Carrera</emphasis> rev 2.7</entry>
                                <entry>
                                    <code>sd(0,0,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,4,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,8,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,C,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,10,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,14,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,18,0)</code>
                                </entry>
                                <entry>N/A</entry>
                            </row>
                            <row>
                                <entry>3/80 rev 2.9.2</entry>
                                <entry>
                                    <code>sd(0,0,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,8,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,10,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,18,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,20,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,28,0)</code>
                                </entry>
                                <entry>
                                    <code>sd(0,30,0)</code>
                                </entry>
                                <entry>N/A</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </informaltable>
                <para> </para>


                <informaltable id="cpu_monitor">
                    <tgroup cols="9">
                        <colspec colnum="1" colname="col1" colwidth="1*"/>
                        <colspec colnum="2" colname="col2" colwidth="1*"/>
                        <colspec colnum="3" colname="col3" colwidth="1*"/>
                        <colspec colnum="4" colname="col4" colwidth="1*"/>
                        <colspec colnum="5" colname="col5" colwidth="1*"/>
                        <colspec colnum="6" colname="col6" colwidth="1*"/>
                        <colspec colnum="7" colname="col7" colwidth="1*"/>
                        <colspec colnum="8" colname="col8" colwidth="1*"/>
                        <colspec colnum="9" colname="col9" colwidth="1*"/>
                        <thead>
                            <row>
                                <entry morerows="1">CPU/rev ROM</entry>
                                <entry namest="col2" nameend="col9" align="center">Monitor device to
                                    boot the tape at target</entry>
                            </row>
                            <row>
                                <entry>0</entry>
                                <entry>1</entry>
                                <entry>2</entry>
                                <entry>3</entry>
                                <entry>4</entry>
                                <entry>5</entry>
                                <entry>6</entry>
                                <entry>7</entry>
                            </row>
                        </thead>
                        <tbody>
                            
                            <row>
                                <entry>3/60 rev 1.9</entry>
                                <entry>???</entry>
                                <entry>
                                    <code>st(0,8,0)</code>
                                </entry>
                                <entry>
                                    <code>st(0,10,0)</code>
                                </entry>
                                <entry>
                                    <code>st(0,18,0)</code>
                                </entry>
                                <entry>
                                    <code>st(0,0,0)</code>
                                </entry>
                                <entry>
                                    <code>st(0,28,0)</code>
                                </entry>
                                <entry>
                                    <code>st(0,30,0)</code>
                                </entry>
                                <entry>N/A</entry>
                            </row>
                            <row>
                                <entry>3/80 rev 2.9.2</entry>
                                <entry>???</entry>
                                <entry>
                                    <code>st(0,8,0)</code>
                                </entry>
                                <entry>
                                    <code>st(0,10,0)</code>
                                </entry>
                                <entry>
                                    <code>st(0,18,0)</code>
                                </entry>
                                <entry>
                                    <code>st(0,0,0)</code>
                                </entry>
                                <entry>
                                    <code>st(0,28,0)</code>
                                </entry>
                                <entry>
                                    <code>st(0,30,0)</code>
                                </entry>
                                <entry>N/A</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </informaltable>
                <para> The above tables also assume that you want SCSI logical unit number zero. The
                    SCSI specification allows one SCSI target to contain different logical units
                    (also called LUNs). Virtually no SCSI devices make use of this feature, and have
                    only a single LUN, zero. However, if you know you have a disk at a LUN other
                    than zero (early Sun SCSI disk setups do), you can add the LUN number to the
                        <emphasis>unit</emphasis> value, noting that <emphasis>unit</emphasis> is a
                    hexadecimal number. </para>
            </sect3>

            <sect3 id="sun3x-history">
                <title>History of NetBSD/sun3x</title>
                <para> The sun3x port of NetBSD was initiated by two independent groups of
                    developers. The first group, headed by Gordon Ross and Jeremy Cooper, began work
                    in March of 1996 with the (then) current sun3 port and the intent to create a
                    new pmap system that was not based on the hp300 m68k code. Their work is the
                    officially supported version of NetBSD/sun3x. </para>
                <para> The second group, headed by Tsubai Masanari, also began with the sun3
                    distribution but instead choose to use the traditional hp300 m68k pmap. This
                    approach allowed them to get a fully running system in a matter of weeks. They
                    were the first to successfully integrate the SPARC Enhanced SCSI Processor
                    driver into the kernel, proving that the Sun3x was indeed half SPARC, half Sun3. </para>
                <para> Although the currently supported NetBSD/sun3x is based on Gordon and Jeremy's
                    work, they are indebted to the second group for their innovation. </para>
                <para> Between NetBSD 1.3 and 1.4 NetBSD/sun3x was merged into NetBSD/sun3. They
                    build separate kernels, but share the same userland, and kernel build tree.
                </para>
            </sect3>
        </sect2>

        <sect2 id="info_sources">
            <title>Other sources of information</title>
	    <sect3 id="info_sources1">

            <itemizedlist>
                <listitem>
                    <para><ulink url="http://www.sunhelp.com/">SunHELP</ulink> - much sun related
                        information</para>
                </listitem>
                <listitem>
                    <para><ulink url="http://www.mso.anu.edu.au/~kim/faq/hardfaq.html">Sun Hardware
                            Reference FAQ</ulink> - overview of Sun hardware over the years</para>
                </listitem>
                <listitem>
                    <para><ulink url="http://www.squirrel.com/squirrel/sun-nvram-hostid.faq.html"
                            >Sun NVRAM/Hostid FAQ</ulink> - if your machine PROM's battery has gone
                        dead</para>
                </listitem>
                <listitem>
                    <para><ulink url="http://www.pimpworks.org/sun/cdrom.html">Sun CD-ROM
                        FAQ</ulink> - lists which CD-ROM drives can boot a Sun</para>
                </listitem>
                <listitem>
                    <para><ulink
                            url="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-&release.latest;/sun3/INSTALL.html"
                            > NetBSD &release.latest; install notes</ulink> - supported hardware
                        and how to install.</para>
                </listitem>
                <listitem>
                    <para><ulink url="../../mailinglists/#port-sun3"> port-sun3 mail list</ulink> -
                        if you have any additional questions please subscribe.</para>
                </listitem>
                <listitem>
                    <para><ulink url="../../docs/network/netboot/">Diskless NetBSD
                        HOW-TO</ulink>.</para>
                </listitem>
                <listitem>
                    <para>The <ulink url="http://www.sun3arc.org/">Sun3 Archive</ulink> has lots of
                        information about Sun3 hardware, PROM images, etc.</para>
                </listitem>
                <listitem>
                    <para><ulink url="http://www.obsolyte.com/sun3/">Techrat's Sun 3/160
                        pages</ulink> contains information on Techrat's 3/160, hardware information,
                        lots of pictures of old Sun hardware, and links to various FAQs and
                    things.</para>
                </listitem>
                <listitem>
                    <para><ulink url="../../docs/">General NetBSD Documentation</ulink> -
                        for questions not specific to NetBSD/sun3.</para>
                </listitem>
            </itemizedlist>
	    </sect3>
        </sect2>
    </sect1>

    <parentsec url="./" text="NetBSD/sun3 Port Page"/>
</webpage>
