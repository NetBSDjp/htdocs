<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<!--
  Copyright (c) 2002-2006
  The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.
-->
<link rev="made" href="mailto:www@NetBSD.org">
<title>NetBSD SIMH HOW-TO</title>
</head>

<body bgcolor="#ffffff" text="#000000">

<h1>NetBSD SIMH HOW-TO</h1>

<p>
  This guide is intended to help you install NetBSD on the SIMH VAX
  emulator.
</p>

<ol>
  <li>
    Install the simulator from <a
    href="http://simh.trailing-edge.com/">SIMH home page</a>.
    There is a <a href="ftp://ftp.NetBSD.org/pub/NetBSD/packages/pkgsrc/emulators/simh/README.html">package</a> available to make life simple.
  </li>
  <li>
    Get a NetBSD/vax CD ISO image, for example <a
    href="ftp://ftp.NetBSD.org/pub/NetBSD/iso/2.0/vaxcd.iso">NetBSD
    2.0</a>.
  </li>
  <li>
    Start the emulator program (<code>/usr/pkg/bin/simh-vax</code>).
  </li>
  <li>
    At the emulator prompt, type
<pre>
        load -r /usr/pkg/share/simh/ka655.bin
        set cpu 64m
        set rq0 ra92
        at rq0 netbsd.dsk
        set rq1 cdrom
        at rq1 /path/to/vaxcd.iso
        at xq0 name-of-network-interface-on-host
        boot cpu
</pre>
    This will configure the emulated VAX with an RA92 disk (/dev/ra0*),
    and the CD image masquerading as an RD54 disk (/dev/ra1*).
    See the SIMH documentation for other options.
  </li>
  <li>
    At the VMB prompt, type
<pre>
        boot dua1:
</pre>
    to boot off the CD.
  </li>
  <li>
    Proceed with a normal NetBSD install.  You may not want to install
    the X11 stuff, since SIMH doesn't emulate a frame buffer. Once the
    install program prompts you to mount the CD drive and defaults to
    /dev/cd0a you should change this to /dev/ra1a.
  <li>
    After a considerable amount of time, the installation finishes, and
    you may shut down or reboot.
  </li>
  <li>
    You can now type <code>q</code> at the emulator prompt to exit
    the emulator.
  </li>
  <li>
    Enter these lines
<pre>
        load -r /usr/pkg/share/simh/ka655.bin
        set cpu 64m
        set rq0 ra92
        at rq0 netbsd.dsk
        at xq0 name-of-network-interface-on-host
        boot cpu
</pre>
    into a file, say <code>netbsd-boot</code>.
  </li>
  <li>
    Restart the emulator like so:
<pre>
        /usr/pkg/bin/simh-vax netbsd-boot
</pre>
  </li>
  <li>
    At the VMB prompt, type
<pre>
        boot dua0:
</pre>
    to boot off the disk.
  </li>
  <li>
    Welcome to NetBSD!
  </li>
</ol>

<p>
  If you are interested in helping this document cover other NetBSD
  ports, or have any other comments or suggestions, please contact
  Lars Brinkhoff <a
  href="mailto:lars.spam@nocrew.org">&lt;lars.spam@nocrew.org&gt;</a>,
  or the <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">NetBSD WWW group</a>.
</p>

<h2>Acknowledgements</h2>

<p>
  The initial version of this HOW-TO was written by <a
  href="http://lars.nocrew.org/">Lars Brinkhoff</a>.  Some of the
  information in this page was derived from an email sent by
  <a href="mailto:mirian@cosmic.com">Mirian Crzig Lennox</a> .
</p>

<hr>

<table width="100%"><tbody><tr><td>
  <table><tbody><tr><td>
    <a href="../../"><img src="../../images/NetBSD-flag.png" border="0
    " width="90" height="90" alt=""></a> 
  </td><td>
    <a href="../../"><img src="../../images/empty.gif" border="0"
    width="1" height="1" alt="NetBSD ">Home Page</a>
  </td></tr></tbody></table>
</td><td>
  <table><tbody><tr><td> 
    <a href="../../Documentation/"><img
	src="../../images/NetBSD-flag.png" border="0"
	width="90" height="90" alt=""></a>
  </td><td>
    <a href="../../Documentation/"><img
	src="../../images/empty.gif" border="0"
	width="1" height="1" alt="NetBSD ">Documentation top level</a>
  </td></tr></tbody></table>
</td></tr></tbody></table>

<hr>

<address>
  <small>
    <a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">(Contact us)</a>
    $NetBSD: emulator-howto.html,v 1.1 2007/06/09 13:33:15 dsieger Exp $<br>
    <a href="../../Misc/disclaimer.html">Copyright &copy; 2002-2003
    The NetBSD Foundation, Inc.  ALL RIGHTS RESERVED.</a>
  </small>
</address>

</body>
</html>

