<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Website XSL Stylesheet V2.6.0">
<link rel="home" href="../../../." title="Welcome to The NetBSD Project: Of course it runs NetBSD.">
<link rel="up" href="../../../ja/ports/macppc/." title="NetBSD/macppc">
<link rel="previous" href="../../../ja/ports/macppc/x11.html" title="NetBSD/macppc X11 FAQ">
<link rel="next" href="../../../ja/ports/mipsco/." title="NetBSD/mipsco">
<link rel="first" href="../../../ja/ports/macppc/faq.html" title="NetBSD/macppc よくある質問">
<link rel="stylesheet" href="../../../global.css" type="text/css">



<title>NetBSD/macppc 過去のよくある質問</title>
</head>
<body class="website"><div class="webpage">
<a name="ja-ports-macppc-oldfaq"></a><div id="top"><a href="#mainContent" class="doNotDisplay doNotPrint">本文へ飛ぶ。</a></div>
<div id="header">
<div class="topNavigation">
<span>» </span><a href="../../../docs/guide/en/">
	  ガイド</a> |
	<a href="http://man.NetBSD.org/">マニュアルページ</a> |
	<a href="../../../ja/mailinglists/">
	  メーリングリスト</a>と
	<a href="http://mail-index.NetBSD.org/">記事</a> |
	<a href="http://cvsweb.NetBSD.org/">CVS リポジトリー</a> |
	バグの<a href="http://www.NetBSD.org/cgi-bin/sendpr.cgi?gndb=netbsd">報告</a>
	と
	<a href="../../../ja/support/query-pr.html">
	 照会</a> |
	<a href="../../../ja/docs/software/packages.html">
	  ソフトウェアパッケージ
	</a>
</div>
<div class="centralHeader">
<a href="../../../ja/"><img alt='NetBSD プロジェクト "Of course it runs NetBSD"' width="506" height="90" src="../../../images/NetBSD-headerlogo.png"></a><div class="headerTools"><div id="headerSearch"><form method="get" action="http://www.google.com/custom">
<input class="whiteOnBlack" type="text" name="q" onfocus="if(this.value==this.defaultValue ) this.value='';" size="12" maxlength="255" value="Search"><input type="hidden" name="cof" value="L:http://www.NetBSD.org/images/NetBSD-smaller.png;LH:200;LW:200;AH:center;AWFID:4f6b0499f0f58d2c;"><input type="hidden" name="domains" value="NetBSD.org"><input type="hidden" name="sitesearch" value="www.NetBSD.org"><input type="submit" value="検索">
</form></div></div>
</div>
<div class="navBar">
<span class="doNotDisplay">
	  案内:
	</span><a href="../../../ja/">
	  ホーム</a> | 
	<a href="../../../ja/about/">
	  概要</a> | 
	<a href="../../../ja/gallery/">
	  展示室</a> | 
	<a href="../../../ja/releases/">
	  ダウンロード</a> | 
	<a href="../../../ja/docs/">
	  ドキュメンテーション</a> | 
	<a href="../../../ja/support/">
	  サポート</a> | 
	<a href="../../../ja/community/">
	  コミュニティー</a> | 
	<a href="../../../ja/ports/">
	  機種</a>
</div>
</div>
<div id="content"><div class="fullWidth"><div class="rowOfBoxes">
<h1>NetBSD/macppc 過去のよくある質問</h1>
<h2 class="title">NetBSD/macppc 過去のよくある質問</h2>
<h3 class="title"><a name="intro">序</a></h3>
<ul><li><a href="#about">この FAQ について</a></li></ul>
<h3 class="title"><a name="general">全般的な情報</a></h3>
<ul>
<li><a href="#usb-keyboard-problems">USB キーボードの問題</a></li>
<li><a href="#cannot-allocate-vm-panic">panic: startup: cannot allocate VM for buffers</a></li>
<li><a href="#wdc-lost-interrupt">wdc0:0:1: lost interrupt</a></li>
<li><a href="#pciide-lost-interrupt">pciide0:0:0: lost interrupt</a></li>
<li><a href="#mesh-fifo">Panic: mesh: FIFO != 0</a></li>
<li><a href="#bm0-device-timeouts">device timeouts on bm0 と言われます</a></li>
<li><a href="#old-ofw-load-base">"load-base" の設定の問題</a></li>
<li><a href="#pb418">PowerBook (FireWire)、 PowerBook G4 (Titanium) と BootROM 4.1.8</a></li>
<li><a href="#power-off">ほえ〜、マシンの電源が落ちます!</a></li>
<li><a href="#old-nodisk">ディスクはどこに行った? (あるいは、 sysinst が I can not find any hard disk for use by NetBSD と言う)</a></li>
</ul>
<h3 class="title"><a name="other_info">他の情報源</a></h3>
<ul>
<li><a href="#other_info_general">全般的な情報</a></li>
<li><a href="#other_info_additional">追加情報</a></li>
</ul>
<hr>
<h3 class="title">序</h3>
<h4 class="title">
<a name="about"></a>この FAQ について (<a href="#intro">top</a>)
  </h4>
<p>
このよくある質問 (および回答) 文書では、 NetBSD/macppc の 1.6
リリース以前の問題を取り上げています。</p>

<p>修正ずみと書かれている問題に遭遇したり、さらなる情報、質問、回答があれば、
<code class="email">&lt;<a class="email" href="mailto:port-macppc@NetBSD.org">port-macppc@NetBSD.org</a>&gt;</code> までメールを
(訳註: 英語で) 送ってください。</p>

<hr>
<h3 class="title">全般的な情報</h3>
<h4 class="title">
<a name="usb-keyboard-problems"></a>USB キーボードの問題 (<a href="#general">top</a>)
  </h4>
<p>
USB キーボードには二種類の問題があります。一方の問題は NetBSD 1.4.3
リリース後に現れたもので、一部の iMac (ボンダイブルー) と一部の
PowerMacintosh G3 (青白) マシンでのみ起こります。
この問題は NetBSD 1.6 で直ったようです。</p>
<p>
もう一方の問題は USB キーボードを持つすべての機種で起こるものですが、
NetBSD 1.5 リリース前に修正済です。</p>

<div class="sect4" title="iMac (ボンダイブルー) と PowerMacintosh G3 (青白) の問題:">
<div class="titlepage"><div><div><h5 class="title">
<a name="imac"></a>iMac (ボンダイブルー) と PowerMacintosh G3 (青白)
の問題:</h5></div></div></div>

<p>
PowerMacintosh G3 (青白) の問題の説明と回避策については、
Bob Nestor によるメーリングリストへの
<a class="ulink" href="http://mail-index.NetBSD.org/port-macppc/2001/06/11/0009.html" target="_top">記事</a>
を見てください。この回避策は iMac (ボンダイブルー) には通用しませんが、
Rob Gridley によれば、マウスを外すとブートしてキーボードが使えるとのことです。
また、問題報告
<a class="ulink" href="http://www.NetBSD.org/cgi-bin/query-pr-single.pl?number=12894" target="_top">port-macppc/12894</a>
も見てください。
</p>
<p>
手短にいえば、彼の勧める回避策は次のとおりです:
</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>USB キーボードを外し、 ADB キーボードとマウスをつなぐ</p></li>
<li class="listitem"><p>ADB キーボードをつないだ状態で NetBSD をブートする</p></li>
<li class="listitem"><p>ADB キーボードで、 root、 swap、ファイルシステムの回答を入力</p></li>
<li class="listitem"><p>システムがシェルプロンプトまで達したら (マルチユーザーの場合は
    ログインしたら)、 ADB を外し、 USB キーボードをつなぐ</p></li>
</ol></div>
<p>
これで USB が利用可能になり、システムが使えるようになります。
ADB は外す前から死んでいることがわかるでしょう。
また、 USB は外してブート<span class="bold"><strong>しなければなりません</strong></span>。さもないと動作しません。
</p>
<p>
このほか、 NetBSD 1.4.3 は、この二機種でも問題なく動作し、
この USB の問題は起こりません。</p>
</div>

<div class="sect4" title="NetBSD 1.5 より前でキーの打鍵が繰り返される問題:">
<div class="titlepage"><div><div><h5 class="title">
<a name="repeating_kepress"></a>NetBSD 1.5 より前でキーの打鍵が繰り返される問題:</h5></div></div></div>

<p>
カーネルによっては、 USB キーボードの最初の打鍵が何度も繰り返される
という問題があります。このため、インストールのさい <code class="code">(I)nstall,
(S)hell or (H)alt ?</code> という質問が繰り返されます。
この問題を回避するため、最初に shift キーを押してください。</p>
<p>
最近の機種では、 NetBSD がデバイスを設定後にシングルユーザーモードに入る前に
ハングすることがあります。
おすすめの回避策は、 USB デバイス (特にハブ) をすべて外し、
マウスをキーボードに挿し、キーボードを Mac 本体背面に直接つなぐことです。</p>
</div>

<h4 class="title">
<a name="cannot-allocate-vm-panic"></a><code class="code">panic: startup: cannot allocate VM for buffers</code> (<a href="#general">top</a>)
  </h4>
<p>
この問題は NetBSD 1.5 では修正されているはずです。</p>

<p>
RAM をたくさん積んだマシンでは、カーネルがバッファーキャッシュを
割り当てようとする際、カーネルがカーネル VM から逸脱することがあります。
次のいずれかで回避できます:</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>RAM をいくつか外す</p></li>
<li class="listitem"><p><a class="ulink" href="../../docs/kernel/#how_to_build_a_kernel" target="_top">カーネルコンフィギュレーション</a>に
    <code class="code">options BUFPAGES=800</code> を加える</p></li>
</ol></div>

<h4 class="title">
<a name="wdc-lost-interrupt"></a><code class="code">wdc0:0:1: lost interrupt</code> (<a href="#general">top</a>)
  </h4>
<p>
この問題は、 ATA4 ドライブをサポートする新しい機種上の NetBSD 1.5.2
で起こります。残念ながら、簡単な回避策はありません。助けが必要なら
<code class="email">&lt;<a class="email" href="mailto:port-macppc@NetBSD.org">port-macppc@NetBSD.org</a>&gt;</code> 投稿してください。</p>

<p>これは、 BootROM 4.1.9 にアップグレードした iBook (Dual USB) と
iMac (Summer 2000) で報告されています。</p>

<p>この問題は NetBSD 1.5.3 以降では起こりません。</p>

<h4 class="title">
<a name="pciide-lost-interrupt"></a><code class="code">pciide0:0:0: lost interrupt</code> (<a href="#general">top</a>)
  </h4>
<p>
この問題は NetBSD 1.5.1 以降では修正済です。</p>

<p>
NetBSD の CMD 646 IDE コントローラーの初期化コードは、
Open Firmware による設定のいくつかを完全に解除しません。
Open Firmware は IDE コントローラーを 0646U2 モードに設定し、
いくつかの割り込みの設定を変更しているのです。
MI pciide ドライバーは、このような状況に対処できず、<span class="quote">“<span class="quote">lost
interrupt</span>”</span> というメッセージがたくさん出るのです。</p>

<p> この場合、 Open Firmware を使ってブートローダー (つまり <span class="command"><strong>ofwboot.xcf</strong></span>) 
やカーネルをそのハードドライブからロードすると、
NetBSD ではそのドライブを使えません。</p>

<p> 次善策としては、カーネルを別のブート可能なバスに移し、
それから CMD 646 IDE バスにつないだドライブを
NetBSD ファイルシステムにマウントするという方法があります。
キーフレーズは<span class="quote">“<span class="quote">別のブート可能なバス</span>”</span>です。
この問題を持つ G3 や G4 の機種には、もうひとつの IDE バス
(と追加の SCSI バス) があります。
通常は、ハードドライブはこの問題があるバスにつながれており、
一方、CD-ROM や Zip のドライブは別のバスにつながれていて問題なく動作します。</p>

<p>
遅い IDE バスのプロトコルを使うことにはなりますが、
ハードドライブを CD-ROM がつながっているバスに移し
(マスター / スレーブのジャンパーに注意してください) 、
この問題を回避するという方法もあります。</p>

<h4 class="title">
<a name="mesh-fifo"></a><code class="code">Panic: mesh: FIFO != 0</code> (<a href="#general">top</a>)
  </h4>
<p>
このバグは NetBSD 1.5 以降では現れません。
</p>
<p>
これは、 SCSI ケーブルやデバイスに問題がある場合に起こります。
内蔵と外付けの終端抵抗を確認してください。
ケーブルの長さと品質を確認してください。
不要なデバイスを全部外してみてください。
</p>
<p>
この問題は、 SCSI の世界のよい住人とはいえない
MESH SCSI バス上の Zip ドライブがある場合、しばしば起こります。
</p>
<p>
Mac OS からリブートして NetBSD をブートするのでなければ、
MESH ドライバーはより信頼できるようになるという人もいます。
(つまり、 Mac OS を動かしている場合、再起動ではなくシステム終了をしてから、
電源を入れて NetBSD をブートしてください。)
</p>
<p>
M L Riechers はこのトピックに関して、たいへん徹底的な
<a class="ulink" href="http://mail-index.NetBSD.org/port-macppc/2000/08/02/0029.html" target="_top">
記事</a>を投稿しています。
</p>
<p>
健闘を祈ります。
</p>

<h4 class="title">
<a name="bm0-device-timeouts"></a>device timeouts on bm0 と言われます (<a href="#general">top</a>)
  </h4>
<p>
この問題は NetBSD 1.5 以降では修正済です。
</p>
<p>
10Mb のハブを介す (bm0 を強制的に 100Mb/s から 10Mb/s にする) と、
この問題を回避できるようです。
</p>

<h4 class="title">
<a name="old-ofw-load-base"></a>"load-base" の設定の問題 (<a href="#general">top</a>)
  </h4>
<p>
Open Firmware の環境変数 <code class="varname">load-base</code> は、 Open Firmware
がブートローダーを <code class="code">boot-device</code> からロードするアドレスです。
XCOFF バイナリーがメモリー上にロードされるアドレスです。
これによる作用は、 Open Firmware のバージョンや <code class="code">boot-device</code>
によってさまざまです。 <code class="varname">load-base</code> が不適切な値に設定された場合、
<code class="code"><a class="ulink" href="faq.html#ofw-claim-failed" target="_top">CLAIM
failed</a></code> という症状が出ます。
</p>

<div class="sect4" title="Open Firmware 3">
<div class="titlepage"><div><div><h5 class="title">
<a name="ofw3"></a>Open Firmware 3</h5></div></div></div>

<p>
<span class="bold"><strong><code class="varname">load-base</code> の値を変えてはいけません</strong></span>。
Open Firmware 3 の機種は書き換え可能なファームウェアを持っていますが、
<code class="varname">load-base</code> を変更すると、フラッシュ BootROM を上書きして
マシンを壊してしまう (Apple での高価な修理が必要になる) ことがわかりました。
<span class="bold"><strong>Open Firmware 3 な機種で <code class="varname">load-base</code> を変更してはなりません。</strong></span>
Apple は Open Firmware 3 を、ブートのために <code class="varname">load-base</code>
の値を変更する必要はないようにしています。</p>
</div>

<div class="sect4" title="Open Firmware 1.0.5, 1.1.22, 2.0.x, and 2.4">
<div class="titlepage"><div><div><h5 class="title">
<a name="older_ofw"></a>Open Firmware 1.0.5, 1.1.22, 2.0.x, and 2.4</h5></div></div></div>

<p>これらのシステムでの <code class="varname">load-base</code> のデフォルト値は 4000 ですが、
これは私たちにとって都合がよくありません。 <a class="ulink" href="SystemDisk-tutorial/" target="_top">System Disk</a> は <code class="varname">load-base</code> を 600000 に設定しますが、 NetBSD 1.5.3 以降
にはこれがちょうどよい値です。 mkLinux はこれとは異なる値を使いますが、
これでは NetBSD/macppc のブートはできないかもしれません。 NetBSD 1.5.3 以降を
使っている方は、ここから先を読んでも混乱するだけなので、ここで読むのをやめて
とにかく 600000 という値に設定してください。</p>

<p><code class="varname">load-base</code> は、 <code class="code">ofwboot.xcf</code> と <code class="code">ofwboot</code> とでは
異なった扱われ方をされます。 <code class="code">ofwboot.xcf</code> は、 MS-DOS フロッピー、
ISO CD-R 、およびネットブートの際に使われる XCOFF ブートローダーです。
<code class="code">ofwboot</code> は、インストールフロッピー、インストール CD-R イメージ、
<span class="application">sysinst</span> や <span class="application">installboot</span> によって用意されたハードドライブ上の
"partition zero" ブートローダーです。</p>

<p><code class="code">ofwboot</code> は 600000 を使うよう設定されています。このため、
<code class="varname">load-base</code> は 600000 に設定します。</p>

<p>NetBSD 1.5.3 以降の <code class="code">ofwboot.xcf</code> は 640000 を使うよう設定されています。
Apple の Open FIrmware の特性上、 <code class="varname">load-base</code> のアドレスは、
<code class="code">ofwboot.xcf</code> が使うアドレスとは異なっている必要があります。
このため、 <code class="varname">load-base</code> は 600000 に設定します。この値は、
Mac OS X のブート用としても適切な値です。</p>

<p>1.5.3 より前のバージョンの NetBSD の <code class="code">ofwboot.xcf</code> は 600000
を使うよう設定されています。このため、このブートローダーを使ってブートする
場合は、 <code class="varname">load-base</code> を 640000 にするか、
そうでなければ新しいバージョンの <code class="code">ofwboot.xcf</code> を入手します。</p>

<p>お使いのマシンが、 Open Firmware 1.0.5、 1.1.22、 2.0.x または 2.4
であることが間違いないなら (<a class="ulink" href="faq.html#ofw-version" target="_top">私の機種の
Open Firmware のバージョンは?</a> 参照) 、 <code class="varname">load-base</code>
を適切に設定するために次のコマンドを実行します</p>

<pre class="programlisting">0 &gt; setenv load-base 600000
0 &gt; reset-all</pre>

<p>
正しく設定されたか、 <code class="code">printenv</code>
コマンドで再確認すべきです。</p>
</div>

<h4 class="title">
<a name="pb418"></a>PowerBook (FireWire)、 PowerBook G4 (Titanium) と BootROM 4.1.8 (<a href="#general">top</a>)
  </h4>
<p>
ここに掲げた 2 機種では、 <a class="ulink" href="faq.html#ofw-version" target="_top">BootROM</a> バージョン 4.1.8
以降を持っている場合、 NetBSD 1.5.x 以前のブートに失敗します。</p>
<p>
この問題は  NetBSD 1.6 およびそれ以降で修正済です。</p>

<h4 class="title">
<a name="power-off"></a>ほえ〜、マシンの電源が落ちます! (<a href="#general">top</a>)
  </h4>
<p>
これは、最近のラップトップ (iBook、 PowerBook (FireWire)、それ以降の一部の機種)
で NetBSD 1.5 またはそれ以降を使ったことが原因かもしれません。</p>
<p>
page up キーシーケンス (<code class="code">FN-uparrow</code>) は NetBSD 1.5.1 と 1.5
カーネルを panic させます。これは NetBSD 1.5.2 以降で修正済です。</p>
<p>
<span class="quote">“<span class="quote">brightness</span>”</span> キー (F1 および F2) は、マシンの電源を切って、
時計を狂わせます。
<code class="code">abtn</code> オプションを外してカーネルを再構築する必要があります。
下記の行を、
<a class="ulink" href="../../docs/kernel/#how_to_build_a_kernel" target="_top">
カーネルコンフィギュレーション</a>から削除してください:</p>

<pre class="programlisting">#abtn*  at adb?</pre>

<h4 class="title">
<a name="old-nodisk"></a>ディスクはどこに行った? (あるいは、 sysinst が <code class="code">I can not find any hard disk for use by NetBSD</code> と言う) (<a href="#general">top</a>)
  </h4>
<p>
うむ、よい質問です!</p>

<p>おおもとの原因は、 NetBSD がハードドライブを見つけなかったことです
(より内部的にいえば、ドライブコントローラーを見つけなかったということです) 。
これが起きる原因は、さまざまです。</p>

<p>ATA4 をサポートする最近の機種を使っており、かつ/または、
最近の FirmWare update (2001 年後半) をインストールしており、かつ
NetBSD 1.5.2 を使おうとする場合、
<a class="ulink" href="#wdc-lost-interrupt" target="_top"><code class="code">wdc0:0:1: lost interrupt</code></a> の問題があるかもしれません。</p>

<p>NetBSD 1.5.1 のインストールカーネルイメージは、
PowerMacintosh G3 (青白) の IDE コントローラーをサポートしていません。
本番のカーネルはサポートしていますが。</p>
<hr>
<h3 class="title">他の情報源</h3>
<h4 class="title">
<a name="other_info_general"></a>全般的な情報 (<a href="#other_info">top</a>)
  </h4>

<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
      <p><a class="ulink" href="faq.html" target="_top">NetBSD/macppc Frequently Asked
        Questions</a></p>
</li>
<li class="listitem">
      <p><a class="ulink" href="SystemDisk-tutorial/" target="_top">NetBSD/macppc System Disk
        チュートリアル</a></p>
</li>
<li class="listitem">
      <p><a class="ulink" href="models.html" target="_top">NetBSD/macppc 機種対応ページ</a></p>
</li>
<li class="listitem">
      <p><a class="ulink" href="nvedit.html" target="_top">NetBSD/macppc nvedit HOW-TO</a>,
        NVRAMRC の内容の編集方法の案内</p>
</li>
<li class="listitem">
      <p><a class="ulink" href="partitioning.html" target="_top">NetBSD/macppc パーティショニング HOW-TO</a></p>
</li>
<li class="listitem">
      <p><a class="ulink" href="x11.html" target="_top">NetBSD/macppc X11 FAQ</a></p>
</li>
<li class="listitem">
      <p><a class="ulink" href="../../docs/elf.html" target="_top">NetBSD ELF FAQ</a></p>
</li>
<li class="listitem">
      <p>NetBSD のプラットフォーム独立なワークステーションコンソールドライバー
        についての <a class="ulink" href="../../../docs/guide/en/chap-cons.html#chap-cons-wscons" target="_top">wscons
        ドキュメンテーション</a></p>
</li>
</ul></div>

<h4 class="title">
<a name="other_info_additional"></a>追加情報 (<a href="#other_info">top</a>)
  </h4>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<p><a class="ulink" href="../../mailinglists/#port-macppc" target="_top"> port-macppc メーリングリスト</a>
    - さらなる質問があれば参加してください。</p>
</li>
<li class="listitem"><p><a class="ulink" href="../../docs/network/netboot/" target="_top">Diskless NetBSD HOW-TO</a>.</p></li>
<li class="listitem"><p><a class="ulink" href="../../docs/Hardware/Misc/serial.html" target="_top">NetBSD
シリアルポート入門</a></p></li>
<li class="listitem"><p><a class="ulink" href="../../docs/" target="_top">NetBSD 一般のドキュメンテーション</a>
    - NetBSD/macppc 特有でない質問向け。</p></li>
</ul></div>
<hr>
<em><a href="./">NetBSD/macppc ポートのページ</a></em> に戻る</div></div></div>
<div class="navfoot"></div>
<div id="footer"><center>
<span class="footfeed"><a href="http://www.NetBSD.org/cgi-bin/feedback.cgi">
	  連絡</a> |
      </span><span class="footcopy"><a href="../../../ja/about/disclaimer.html">
      免責事項</a> |

      <span class="copyright">Copyright © 1994-2011 The NetBSD Foundation, Inc. </span>ALL RIGHTS RESERVED.<br>NetBSD<sup>®</sup> は The NetBSD
	Foundation, Inc. の登録商標です。</span>
</center></div>
</div></body>
</html>
