
cdevsw/bdevsw

device-major 構文は、sys/arch/<arch>/<arch>/devsw.<arch> というファイルに記述。それを sys/arch/<arch>/<arch>/files.<arch> から include する。書き忘れて tech-kern で誤解された。

config(8) を実行すると、../compile/<config>/ioconf.c にcdevsw/bdevsw の情報が出力される。

出力されるもの
    extern struct bdevsw <prefix>_bdevsw;
    extern struct cdevsw <prefix>_cdevsw;
    struct cdevsw *cdevsw0[];（cdevsw の初期テーブル）
    struct bdevsw *bdevsw0[];（bdevsw の初期テーブル）
    int ncdevsw, nbdevsw;（テーブルのサイズ）
    struct cdevsw **cdevsw;（起動時は cdevsw0 が入っている）
    struct bdevsw **bdevsw;（起動時は bdevsw0 が入っている）
    int devsw_chr2blktbl0[];（chr と blk の初期変換表）
    int *devsw_chr2blktbl;（起動時は devsw_chr2blktbl0 が入っている）

