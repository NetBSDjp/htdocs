
第一の砦（cdevsw/bdevsw をなんとかしよう）

現状
cdevsw[], bdevsw[] - ただの配列
エントリは open, close などがずらずら（マクロで隠す）
NXXX で有効／無効が決定される

改良点
各ドライバが cdevsw/bdevsw でひとまとめにしてもっておく
cdevsw/bdevsw のテーブルはその構造体へのポインタを保持する
NXXX は config(8) が生成するんだから config(8) が走った時点で有効／無効が決定可能なはず。これを使おう

bdevsw/cdevsw の統一は今回はあえて先送りした。当初のまえかわ実装では、統一するという前提であったが、やはりインパクト／影響がでかい。
統一するかどうかはもっと議論した方がよいだろう。その結果統一することになっても今回の変更が影響するようなことはない。当初その方向でやってたくらいだから。

