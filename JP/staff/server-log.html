<HTML>
<HEAD>
<TITLE>JP.NetBSD.ORG server log</TITLE>
</HEAD>

<BODY>
<H1>JP.NetBSD.ORG計算機上での作業記録その他</H1>

<H2>pigu.iri.co.jpでの作業記録</H2>
<UL>分類
  <LI><A HREF="#mailinglist">Mailing List</A></LI>
  <LI><A HREF="#ftp">ftp</A></LI>
  <LI><A HREF="#rsync">rsync</A></LI>
  <LI><A HREF="#news">news</A></LI>
  <LI><A HREF="#anoncvs">anoncvs</A></LI>
  <LI><A HREF="#httpd">httpd</A></LI>
</UL>

<H2><A NAME="mailinglist">[Mailing List]</A></H2>
<UL>まだindexからlinkとかは張らない
 <LI>MHonARCでML archiveのhtml化(www-changes-ja) 1999/2/26 - ichiro<br>
 	<A HREF="http://www.jp.netbsd.org/ja/JP/ml/www-changes-ja/index.html">http://www.jp.netbsd.org/ja/JP/ml/www-changes-ja/index.html</A><br>
 	テスト的にwww-changes-jaをhtml化. html&search対象MailingListの選定は??</LI>
 <LI>MHonARCでML archiveのhtml化 1999/4/26 - ichiro</LI>
    <UL>
	<LI><A HREF="http://www.jp.netbsd.org/ja/JP/ml/admin-ja/index.html">http://www.jp.netbsd.org/ja/JP/ml/admin-ja/index.html</A>
	<LI><A HREF="http://www.jp.netbsd.org/ja/JP/ml/announce-ja/index.html">http://www.jp.netbsd.org/ja/JP/ml/announce-ja/index.html</A>
	<LI><A HREF="http://www.jp.netbsd.org/ja/JP/ml/hpcmips-changes-ja/index.html">http://www.jp.netbsd.org/ja/JP/ml/hpcmips-changes-ja/index.html</A>
	<LI><A HREF="http://www.jp.netbsd.org/ja/JP/ml/port-mips-ja/index.html">http://www.jp.netbsd.org/ja/JP/ml/port-mips-ja/index.html</A>
	<LI><A HREF="http://www.jp.netbsd.org/ja/JP/ml/port-powerpc-ja/index.html">http://www.jp.netbsd.org/ja/JP/ml/port-powerpc-ja/index.html</A>
	<LI><A HREF="http://www.jp.netbsd.org/ja/JP/ml/tech-pkg-ja/index.html">http://www.jp.netbsd.org/ja/JP/ml/tech-pkg-ja/index.html</A>
	<LI><A HREF="http://www.jp.netbsd.org/ja/JP/ml/staff/index.html">http://www.jp.netbsd.org/ja/JP/ml/staff/index.html</A>
		staff-mlはとりあえずアクセス制限付<br>
    </UL>	
 <LI>Namazu<A HREF="http://www.jp.netbsd.org/ja/JP/ml/search.html">全文検索</A> 1999/4/26 - ichiro</LI>

 <LI>Mailing List 作成方法
    <UL>
    <LI>オープンなmlの場合(設定が異なる場合は、ezmlm-makeのoptionを変更する)
    <PRE>
su; csh;
setenv NEWML メーリングリスト名
~ezmlm/ezmlm-make -aiklnpr -5 staff@jp.netbsd.org \
	/var/mlist/ml/${NEWML} \
	/var/qmail/alias/.qmail-${NEWML} \
	${NEWML} jp.netbsd.org
cd /var/mlist/ml/port-mips-ja
tar cf - charset header* msgsize sequence | ( cd ../${NEWML}; tar xpvf -)
cd ..
chown -R alias ${NEWML}
chmod 711 ${NEWML}
chmod 755 ${NEWML}/archive

su -m alias
~ezmlm/ezmlm-sub /var/mlist/ml/${NEWML} ${NEWML}-html@pigu.iri.co.jp
echo "|/usr/local/bin/nkf -mlj | /usr/local/bin/mlist2html /var/mlist/html ${NEWML} || exit 0" > /var/qmail/alias/.qmail-${NEWML}-html
mkdir /var/mlist/html/${NEWML}
chmod 755 /var/mlist/html/${NEWML}
cp /var/mlist/html/.[fh]* /var/mlist/html/${NEWML}
    </PRE>
    <LI>投稿者を参加者に制限する場合<BR>
この場合はenvelope-fromを見て制限するので使用に注意すること。
    <PRE>
~ezmlm/ezmlm-make -aiklnpru /var/mlist/ml/${NEWML} \
	/var/qmail/alias/.qmail-${NEWML} \
	${NEWML} jp.netbsd.org
すでに作成されたMLの場合はoptionに'e'を加える。
~ezmlm/ezmlm-make -eaiklnpru /var/mlist/ml/${NEWML}
    <LI>htdocs/JP の ml.html と search.html、
        localsrc/namazu-index の NMZ.foot.ja と etc/daily.sh に
	作成したmailing listを追加する。
    <LI>annount-ja,members-jaなどに告知。htdocs/JP の index.html,news.htmlに追加
    </UL>
</UL>

<H2><A NAME="ftp">[ftp]</A></H2>
<UL>
 <LI>
</UL>

<H2><A NAME="rsync">[rsync]</A></H2>
<UL>
 <LI>
</UL>

<H2><A NAME="news">[news]</A></H2>
<UL>
 <LI>
</UL>

<H2><A NAME="anoncvs">[anoncvs]</A></H2>
<UL>
  <LI>CVS Repository
  <TABLE>
    <TR><TH>cvs.netbsd.org <TD>/ftp/pub/NetBSD-cvs
	<TD>~mirror/etc/mirror.anoncvsでrsync
	<TD>/cvs/cvsroot
    <TR><TH>jp.netbsd.org <TD>/ftp/pub/NetBSD-jp/cvs
	<TD>moguからrsync
	<TD>/cvs/jproot
  </TABLE>
  <LI>anoncvs serverは localsrc/pserver + patched cvs-1.10。<BR>
	inetdよりpserver起動後 /ftpにchrootして user anoncvsで動作。<BR>
	/ftp/cvs/{cvsroot,jproot}
  <LI>cvswebは localsrc/cvsweb。README.piguのように/var/wwwに置く。<BR>
	cp -p /var/www/cvsweb/cvsweb.cgi /var/www/cgi-bin
</UL>

<H2><A NAME="httpd">[httpd]</A></H2>
<UL>
 <LI>apache 1.3.3 導入 (1998/11/2 - kawamoto)<BR>
   pkgではなく、ソースからコンパイル（あまり理由なし）。<BR>
   <TT>./configure --prefix=/var/www --compat</TT>
 <LI>apache 1.3.4 (1999/1/29 - kawamoto)<BR>
   <TT>./configure --prefix=/var/www --with-layout=Apache</TT>
 <LI>apache 1.3.6 (1999/4/14 - kawamoto)
 <LI>基本設定
 <UL>
  <LI>/var/wwwの下にインストール。
  <LI>設定ファイルは/etc/www/の下（/var/www/confからのシンボリックリンク）。
  <LI>web documentsは/htdocsの下。/htdocsの内容もどこかに書かないと。
  <LI>/var/www/bin/dailyがroot権限で0時0分に実行される。ログファイルのrotate。
  <LI>/etc/www/crontabという内容がhttpd権限で2時間ごとに実行される。
      cvs update。
 </UL>
 <LI>cvsweb.netbsd.org追加 (1998/8/23 - kawamoto)
 <UL>
  <LI>VirtualHostを設定。
      cvsweb.netbsd.orgの時は、/から/cgi-bin/cvsweb.cgiへRedirect。
 </UL>
 <LI>VirtualHost設定時の注意点
 <UL>
  <LI>&lt;VirtualHost ...&gt; &lt;/VirtualHost&gt;へ入れる項目は、
      外では定義しないこと。入れるなら全部入れる。
 </UL>
 <LI>mod_rewriteを追加 (1998/8/25 - kawamoto)
 <UL>
  <LI>src/Configuration.tmplのAddModule .../mod_rewrite.oを生かす。
  <LI>/ja/以下で/ja/JP/以外について、ファイル存在チェックのルールを追加。
 </UL>
</UL>

<H2>pigu.iri.co.jpのアカウント申請</H2>
<UL>
  <LI>admin-jaで作業内容を申告する</LI>
  <LI>su rootに必要なpasswd entry or skeyを渡す</LI>
  <LI>pigu -> moguのsshは、UsePriviledgedPort noする</LI>
</UL>

<H5>
$Id: server-log.html,v 1.14 2000/03/21 14:38:49 sakamoto Exp $
</H5>
</BODY>
</HTML>
