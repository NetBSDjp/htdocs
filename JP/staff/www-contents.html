<HTML>
<HEAD>
<TITLE>WWWコンテンツ</TITLE>
</HEAD>

<BODY>
<H2>WWWコンテンツの管理</H2>
<UL>
  <LI>日本独自コンテンツとwww.netbsd.orgの日本語訳は
    CVS(<A HREF="XXX">CVSの使い方</A>)で管理する。
  <LI>モジュールは htdocs。
  <LI>以下の環境変数を設定することにより、ローカルマシン上で作業をすることができる。
    <PRE>
      % setenv CVS_RSH ssh
      % setenv CVSROOT :ext:your_login_name@mogu.iri.co.jp:/cvsroot
    </PRE>
  <LI>更新時には www-changes-ja@jp.netbsd.org に更新情報が流れる。
</UL>

<H2>WWWコンテンツの配置</H2>
<UL>
  <LI><A HREF="http://www.netbsd.org/">http://www.netbsd.org/</A>の
    ミラーは<A HREF="http://www.jp.netbsd.org/">http://www.jp.netbsd.org/</A>
    以下で参照できる。但し<A HREF="http://www.jp.netbsd.org/"
    >http://www.jp.netbsd.org/</A> は、
    <A HREF="http://www.jp.netbsd.org/ja/JP/index.html"
    >http://www.jp.netbsd.org/ja/JP/index.html</A> にリダイレクトされる。
  <LI>日本語訳は、オリジナルと同じ構成で htdocs/ja/ 以下に作成する。<BR>
    <A HREF="http://www.jp.netbsd.org/ja/"
    >http://www.jp.netbsd.org/ja/</A> 以下で参照できる
  <LI>日本語の独自コンテンツは htdocs/JP/ 以下に作成する。<BR>
    <A HREF="http://www.jp.netbsd.org/ja/JP/"
    >http://www.jp.netbsd.org/ja/JP/</A> 以下で参照できる
</UL>

<H2>www.netbsd.org 日本語訳</H2>
翻訳
<UL>
  <LI>翻訳する前に <A HREF="translation-assign.txt">
    htdocs/JP/staff/translation-assign.txt</A> の
    翻訳するファイルの担当者欄に名前を記入すること。
    このとき、査読者の欄は空欄とする。
    またwww-changes-jaでの翻訳担当宣言もこのファイルに反映させる。
    誰が行っても良い。
    web page と完全に同期をとっているわけではないので、翻訳するファイルが
    このファイルに記述されていないこともある。この場合、適当に追加、ソート
    する。
  <P>
  <LI>翻訳が終了したら、もしくはwww-changes-jaに訳文がmailされたら、
    <A HREF="translation-assign.txt">translation-assign.txt</A> の査読者
    の欄を、空欄から 「<B>NOT-YET</B>」 に変更する。
    <P>訳文は<A HREF="#CVS">CVS手続き</A>に従いcommitする。
</UL>

<P>
査読
<UL>
  <LI>査読が終了したら、もしくはwww-changes-jaに査読結果がmailされたら、
    査読結果を commit する。その際 <A HREF="translation-assign.txt">
    translation-assign.txt</A> の査読者の欄に、カンマで区切って名前を
    記入すること。
  </UL>

<P>
オリジナル更新時
<UL>
  <LI>新規翻訳時と同様に行います。
  <LI>更新分の査読が必要ないと判断した場合は、
    <A HREF="translation-assign.txt">
    translation-assign.txt</A>は変更する必要はありません。
  <LI>> pigu(web サーバー) の /htdocs/www.jp.netbsd.org/ja ディレクトリにはあるが
    /htdocs/www.netbsd.org/htdocs ディレクトリにないような場合、
    <A HREF="http://www.jp.netbsd.org/ja/JP/Project/www-ja/status/">
    翻訳状況</A> の最後の「移動/削除/list2htmlで生成されている原文」
    に入ります。

</UL>

<H2><A NAME="CVS">www.netbsd.org 日本語訳 CVS手続き</A></H2>

CVSリポジトリにアクセスできない人の翻訳ファイルや修正点は
以下の担当者がリポジトリに反映する。ただし、www-changes-ja を講読していて、
かつリポジトリにアクセスできる人は、誰でも反映して良い。
(担当者は、誰も反映しなかった場合の最後の砦という意味に過ぎないので注意)

<UL>
<LI>sakamoto@jp.netbsd.org
</UL>

<P>
新規およびオリジナル更新時には以下の手続きで、
オリジナルのimportと訳文のcommitを行う。

<OL>
    <LI>念のため、mogu 上でリポジトリを一時的にバックアップする<BR>
      <CODE>tar zcf ~/ja-bak.tar.gz -C /cvsroot htdocs/ja</CODE>
    <LI>翻訳したいオリジナルファイルだけをカレントディレクトリに置く
    <LI><CODE>CVSROOT,CVS_RSH</CODE>などを設定後、<BR>
      <CODE>cvs import -I \! -ko <I>DIR</I> <I>VENDOR</I> <I>RELEASE</I>
      </CODE><BR>
      で登録

      <P><TABLE BORDER=1>
        <TR>
          <TH>DIR
          <TD>オリジナルのディレクトリパスの頭に ja/を付ける
            <BR>(http://www.netbsd.org/hoge/piyo.htmlの場合は
            <B>htdocs/ja/hoge</B> になります)。
        <TR>
          <TH>VENDOR
          <TD><B>TNF</B> を指定(The NetBSD Foundation)。
        <TR>
          <TH>RELEASE
          <TD><B>date-1999-01-10</B> というようにimportする日を指定します
            (1999/07/01にimportする場合は date-1999-07-01)。
      </TABLE>
      <BR>例: <CODE>cvs import -I \! -ko htdocs/ja/hoge TNF date-1999-01-10
      </CODE>

    <LI>checkout後、オリジナルファイルの上に和訳を上書きしcommit。
</OL>

<P>
listファイルをcommitした後は、working dirでmakeしてhtmlファイルを生成し、
commitすること。htmlファイルのimportは必要ない。
またMakefileがない場合はオリジナルからimportすること。

<P>
mogu のリポジトリに commit された訳文は
以下の担当者が cvs.netbsd.org のリポジトリに反映する。ただし、www-changes-ja を講読していて、
かつ cvs.netbsd.org のリポジトリにアクセスできる人は、誰でも反映して良い。
(担当者は、誰も反映しなかった場合の最後の砦という意味に過ぎないので注意)

<UL>
<LI>sakamoto@netbsd.org
</UL>


<H2>未解決の問題</H2>
<UL>
  <LI>翻訳の際にJNUG(Japan NetBSD Users' Group)の copyright notice を足すべきか?
  <LI>査読完了の判断。および、完了時の作業。
  <LI>URL の修正<BR>
      www-changes-ja に流れた Message-Id: &lt;
      20000225192910O.kawamoto@es.osaka-u.ac.jp&gt; の urlcheck.pl
      を使い翻訳した HTML ファイルの URL が正しいかどうかをチェック
      し、urlconv.plで書きかえる(urlcheck.pl を使用するには、XXXが
      必要)。このスクリプトを使用するのは、www.jp.netbsd.org では 
      mod_rewrite が使えるが、www.netbsd.org では使用できないからで
      ある。mogu で urlcheck.pl を定期的に実行して www-changes-ja 
      にメイルする予定だが当面は任意のタイミングで誰かがチェックを
      おこなう。(注意: pkgsrc あるいは最新の HTML-Parser パッケージ
      では urlcheck.pl は動作しない)
</UL>
</BODY>
</HTML>
