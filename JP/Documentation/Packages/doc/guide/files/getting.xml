<!-- $NetBSD: getting.xml,v 1.6 2005/11/20 10:02:31 rillig Exp $ -->
<!-- Based on english version: -->
<!-- NetBSD: getting.xml,v 1.6 2005/11/20 10:02:31 rillig Exp   -->

<chapter id="getting">
  <title>どこからpkgsrcを得て、どうやって最新に保つか</title>

  <para>pkgsrcには三つの入手方法があります。tarファイル、SUP経由、そしてCVS経由です。
    ここではこの三つとも説明します。</para>

  <sect1 id="as-tar-file">
    <title>tar ファイル</title>
    
    <para>pkgsrc を入手するためには、pkgsrc.tar.gzファイルを
      <ulink
      url="ftp://ftp.NetBSD.org/pub/NetBSD/NetBSD-current/tar_files/pkgsrc.tar.gz">ftp.NetBSD.org</ulink>
      から取得し、<filename>/usr/pkgsrc</filename>に展開する必要があります。</para> 
  
  </sect1>

  <sect1 id="via-sup">
    <title>SUP 経由</title>
    
    <para>tar ファイルのかわりに、ソフトウェア更新プロトコル(Software Update Protocol) SUPを使い
      pkgsrcを入手することもできます。まず、supfileの中に</para>
  
<programlisting>
    release=pkgsrc
</programlisting>
  
    <para>という
      行があることを確認してください。例えば、<filename>/usr/share/examples/supfiles</filename>を見て
      ください。それから<filename>/usr/pkgsrc</filename>ディレクトリーが存在することを確認してください。
      後は
      <command>sup -v <replaceable>/path/to/your/supfile</replaceable></command>
      を実行するだけです。</para>
  </sect1>

  <sect1 id="via-cvs">
    <title>CVS 経由</title>
    
    <para>CVS経由でpkgsrcを入手するためには、<quote>cvs</quote>がインストールされていることが必要です。
      pkgsrcを初めて(完全に)チェックアウトする際は、以下の手順を踏みます:</para>
  
    <screen>&cprompt; <userinput>setenv CVSROOT anoncvs@anoncvs.NetBSD.org:/cvsroot</userinput>
&cprompt; <userinput>setenv CVS_RSH ssh</userinput>
&cprompt; <userinput>cd /usr</userinput>
&cprompt; <userinput>cvs checkout -P pkgsrc</userinput></screen>
  
    <para>こうすると、<filename>/usr</filename>以下に<filename>pkgsrc</filename>ディレクトリーが作られ、
      <filename>/usr/pkgsrc</filename>以下に全パッ
      ケージのソースが入った状態になります。一旦チェックアウトしたpkgsrcを更新す
      るには、
      <varname>CVS_RSH</varname>を上のように設定してから、以下のようにします:</para>
  
    <screen>&cprompt; <userinput>cd /usr/pkgsrc</userinput>
&cprompt; <userinput>cvs -q update -dP</userinput></screen>
  
    <para>また、pkgsrcの階層構造を、使用中の状態で複数持つことも常にできます - すべて
      の作業は、pkgsrcツリーに対する相対位置で実行されます。</para>
  </sect1>

  <sect1 id="uptodate-cvs">
    <title>CVS を使って pkgsrc を最新の状態に保つ</title>

      <para>お使いの pkgsrc ツリーに <filename>CVS</filename>
      ディレクトリーがたくさんある場合は、&man.cvs.1; プログラムを使って
      pkgsrc ツリーを更新することができます。まず、pkgsrc の最上層のディレクトリーに
      <command>cd</command> します。次に、<command>cvs -q update
      -dP</command> を実行します。これで更新が完了します。</para>

      <para>うまくいかない場合で、ファイル
      <filename>CVS/Root</filename> に <quote>:pserver:</quote>
      と書かれている場合は、NetBSD の CVS サーバーを使えるようにするために <command>cvs
      login</command> を一回実行する必要があります。すると、
      <command>cvs</command> ユーティリティーがパスワードを尋ねてくるので、
      <quote>anoncvs</quote> とだけ入力します。この後、
      上述の手順での更新をもう一度試してみてください。</para>
  </sect1>
</chapter>
