<!-- $NetBSD: ftp-layout.xml,v 1.4 2005/10/23 11:25:58 rillig Exp $ -->
<!-- Based on english version: -->
<!-- NetBSD: ftp-layout.xml,v 1.4 2005/10/23 11:25:58 rillig Exp   -->

<appendix id="ftp-layout">
  <title>FTPサーバーのパッケージアーカイブのレイアウト</title>

  <para>ftp.NetBSD.org上のコンパイル済みのバイナリーパッケージのレイアウト</para>

<!-- BEWARE! Use no tabs here, only spaces! -->
<programlisting>
    /pub/NetBSD/packages/
        distfiles/

        # 固められていない pkgsrc ツリー
        pkgsrc-current -> /pub/NetBSD/NetBSD-current/pkgsrc
        pkgsrc-2003Q4 -> N/A
        pkgsrc-2004Q1/pkgsrc

        # pkgsrc アーカイブ
        pkgsrc-current.tar.gz -> ../NetBSD-current/tar_files/pkgsrc.tar.gz
        pkgsrc-2003Q4.tar.gz -> N/A
        pkgsrc-2004Q1.tar.gz -> N/A

        # pkgsrc-release/OS-release/arch 別のパッケージアーカイブ
        pkgsrc-2003Q4/
            NetBSD-1.6.2/
                i386/
                    All/
                    archivers/
                        foo -> ../All/foo
                    ...
        pkgsrc-2004Q1/
            NetBSD-1.6.2/
                i386/
                    All/
                    ...
            NetBSD-2.0/
                i386/
                    All/
                    ...
            SunOS-5.9/
                sparc/
                    All/
                    ...
                x86/
                    All/
                    ...

        # os-release 別のパッケージアーカイブの、便利なリンク
        NetBSD-1.6.2 -> 1.6.2
        1.6.2/
            i386 -> ../pkgsrc-2004Q1/NetBSD-1.6.2/i386
            m68k/
                All/
                archivers/
                    foo -> ../All/foo
                ...
            amiga -> m68k
            atari -> m68k
            ...

        2.0 -> NetBSD-2.0       # 過去との互換のため
        NetBSD-2.0/
            i386 -> ../pkgsrc-2004Q1/NetBSD-2.0/i386
        SunOS-5.9/
            sparc -> ../pkgsrc-2004Q1/SunOS-5.9/sparc
            x86 -> ../pkgsrc-2004Q1/SunOS-5.9/x86
</programlisting>

  <para>
    作成方法:</para>

  <orderedlist>
    <listitem>
      <para> バルクビルドを実行します。<xref linkend="bulkbuild"/>を参照してください。</para>
    </listitem>

    <listitem>
      <para> /usr/pkgsrc/packages を、以下の場所にアップロードします。</para>

<programlisting>
    ftp://ftp.NetBSD.org/pub/NetBSD/packages/\
        pkgsrc-2004Q4/\             # pkgsrc-branch
        `uname -s`-`uname -r`/\     # OS & version
        `uname -p`                  # architecture
</programlisting>

    </listitem>

    <listitem>
      <para> 必要に応じて、<command>ln -s `uname -m` `uname
      -p`</command> (amiga -> m68k, ...) のようなシンボリックリンクを張ります。</para>
    </listitem>
  </orderedlist>

</appendix>
