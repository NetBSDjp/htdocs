<!-- $NetBSD: files.xml,v 1.4 2006/11/23 11:44:47 yyamano Exp $ -->
<!-- Based on english version: -->
<!-- NetBSD: files.xml,v 1.4 2006/11/23 11:44:47 yyamano Exp   -->

<chapter id="files">
<title>インストールされたファイルのディレクトリー配置</title>

<para>pkgsrc を使ってインストールされたファイルは、ベースシステムの
<filename>/usr</filename> ディレクトリー以下と似た配置で体系化されていますが、
細かい点がいくらか異なっています。これは、pkgsrc がもともと FreeBSD
から派生したものであり、FreeBSD のファイルシステム階層に準じていたからです。
その後は NetBSD の影響を大きく受けています。
ただし、pkgsrc をどのオペレーティングシステムで使っているかにかかわらず、
pkgsrc の配置は同じになると思っていただいて結構です。</para>

<para>pkgsrc 用のルートディレクトリーは、主に四つあり、いずれも
<filename>bootstrap/bootstrap</filename> スクリプトで設定可能です。
pkgsrc を root としてインストールした場合の、
標準の場所は以下のとおりです。</para>

<programlisting>
    LOCALBASE=              /usr/pkg
    PKG_SYSCONFBASE=        /usr/pkg/etc
    VARBASE=                /var
    PKG_DBDIR=              /var/db/pkg
</programlisting>

<para>非特権モード (pkgsrc を root 以外のユーザーとしてインストールした場合)
での、標準の場所は以下のとおりです。</para>

<programlisting>
    LOCALBASE=              ${HOME}/pkg
    PKG_SYSCONFBASE=        ${HOME}/pkg/etc
    VARBASE=                ${HOME}/pkg/var
    PKG_DBDIR=              ${HOME}/pkg/var/db/pkg
</programlisting>

<para>この四つのディレクトリーの使用目的とその内容は、
以下で説明します。</para>

<itemizedlist>

<listitem><para><varname>LOCALBASE</varname> は、ベースシステムの
<filename>/usr</filename> ディレクトリーに対応します。
ファイルがインストールされる場所として<quote>主たる</quote>ディレクトリーであり、
<filename>bin</filename>,
<filename>include</filename>, <filename>lib</filename>,
<filename>share</filename>,
<filename>sbin</filename> などのよく知られたサブディレクトリーがあります。</para></listitem>

<listitem><para><varname>VARBASE</varname> は、ベースシステムの
<filename>/var</filename> に対応します。
一部のプログラム (特に、ゲームとネットワークデーモン) は、
通常の操作時に、このディレクトリーへの書き込み権限を持っている必要があります。</para></listitem>

<listitem><para><varname>PKG_SYSCONFDIR</varname> は、ベースシステムの
<filename>/etc</filename> に対応します。
pkgsrc 自体の設定ファイル <filename>mk.conf</filename> のほか、
個々のパッケージの設定ファイルを含みます。</para></listitem>

</itemizedlist>

<sect1 id="files.localbase">
<title><literal>${LOCALBASE}</literal> 以下のファイルシステム配置</title>

<para>pkgsrc を通常にインストールした場合、<filename>${LOCALBASE}</filename>
以下には以下のディレクトリーが存在します。</para>

<variablelist>

<varlistentry><term><filename>bin</filename></term>
<listitem><para>エンドユーザーが直接使うことを前提とした、
実行形式のプログラムを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>emul</filename></term>
<listitem><para>特に NetBSD 用の、
他の各種オペレーティングシステムのエミュレーション層用のファイルを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>etc</filename> (<filename>${PKG_SYSCONFDIR}</filename>
の通常の場所)</term><listitem><para>設定ファイルを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>include</filename></term>
<listitem><para>C および C++
プログラミング言語用のヘッダーを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>info</filename></term>
<listitem><para>各種パッケージの
GNU info ファイルを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>lib</filename></term>
<listitem><para>静的共有ライブラリーを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>libdata</filename></term>
<listitem><para>インストール後に変更されることがないデータファイルを含みます。
変更されることのあるデータファイルは
<filename>${VARBASE}</filename> 以下に置かれます。</para></listitem></varlistentry>

<varlistentry><term><filename>libexec</filename></term>
<listitem><para>補助プログラムやネットワークデーモンなど、
エンドユーザーが直接使うことを前提としないプログラムを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>libexec/cgi-bin</filename></term>
<listitem><para>web サーバーが
CGI スクリプトとして実行することを前提としたプログラムを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>man</filename> (<filename>${PKGMANDIR}</filename>
の通常の値)</term><listitem><para>マニュアルページ形式の短いドキュメンテーションを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>sbin</filename></term>
<listitem><para>スーパーユーザーだけが使うことを前提としたプログラムを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>share</filename></term>
<listitem><para>インストール後に変更されることがないプラットフォーム独立のデータファイルを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>share/doc</filename></term>
<listitem><para>パッケージに附属するドキュメンテーションファイルを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>share/examples</filename></term>
<listitem><para>パッケージに附属する例ファイルを含みます。
設定ファイルの原本も、インストール時にここに保存されたうえで
<filename>${PKG_SYSCONFDIR}</filename>
へコピーされます。</para></listitem></varlistentry>

<varlistentry><term><filename>share/examples/rc.d</filename></term>
<listitem><para>rc.d
スクリプトファイルの原本を含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>var</filename> (<filename>${VARBASE}</filename>
の通常の場所)</term> <listitem><para>インストール後に変更されることのあるファイルを含みます。</para></listitem></varlistentry>

</variablelist>
</sect1>

<sect1 id="files.varbase">
<title><literal>${VARBASE}</literal> 以下のファイルシステム配置</title>

<variablelist>

<varlistentry><term><filename>db/pkg</filename> (<filename>${PKG_DBDIR}</filename>
の通常の場所)</term><listitem><para>現在インストールされているパッケージに関する情報を含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>games</filename></term>
<listitem><para>最高得点ファイルを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>log</filename></term>
<listitem><para>ログファイルを含みます。</para></listitem></varlistentry>

<varlistentry><term><filename>run</filename></term>
<listitem><para>現在実行されているデーモンに関する情報ファイルを含みます。</para></listitem></varlistentry>

</variablelist>

</sect1>
</chapter>
