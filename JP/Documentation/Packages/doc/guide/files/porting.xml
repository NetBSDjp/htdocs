<!-- $NetBSD: porting.xml,v 1.4 2007/04/19 16:54:58 joerg Exp $ -->
<!-- Based on english version: -->
<!-- NetBSD: porting.xml,v 1.4 2007/04/19 16:54:58 joerg Exp   -->

<chapter id="porting"> <?dbhtml filename="porting.html"?>
<title>pkgsrc を移植する</title>

	<para>pkgsrc システムはすでに、多くのオペレーティングシステム、
	ハードウェアアーキテクチャー、およびコンパイラーに移植されています。
	本章では、pkgsrc
	の移植性をさらに高めるために必要な手順を説明します。</para>

<sect1 id="porting.opsys">
<title>pkgsrc を未対応のオペレーティングシステムに新たに移植する</title>

	<para>pkgsrc を未対応のオペレーティングシステム (以下、
	<literal>MyOS</literal> とします) に移植するには、
	以下のファイルを作成あるいは修正する必要があります。</para>

	<variablelist>

	<varlistentry><term><filename>pkgtools/bootstrap-mk-files/files/mods/<replaceable>MyOS</replaceable>.sys.mk</filename></term>
	<listitem><para>このファイルには、いくつかの基本的な定義、
	たとえば C
	コンパイラーの名前が含まれています。</para></listitem></varlistentry>

	<varlistentry><term><filename>mk/bsd.prefs.mk</filename></term>
	<listitem><para><varname>OPSYS</varname>, <varname>OS_VERSION</varname>,
	<varname>LOWER_OS_VERSION</varname>,
	<varname>LOWER_VENDOR</varname>,
	<varname>MACHINE_ARCH</varname>, <varname>OBJECT_FMT</varname>,
	<varname>APPEND_ELF</varname> の各変数、
	その他このファイルに書かれている各変数を定義するコードを追加します。</para></listitem></varlistentry>

	<varlistentry><term><filename>mk/platform/<replaceable>MyOS</replaceable>.mk</filename></term>
	<listitem><para>このファイルには、
	pkgsrc が使用するプラットフォーム固有の定義が含まれています。
	まず他のプラットフォーム用のファイルのいずれかをコピーしてから、
	必要に応じて編集します。</para></listitem></varlistentry>

	<varlistentry><term><filename>mk/platform/<replaceable>MyOS</replaceable>.pkg.dist</filename></term>
	<listitem><para>このファイルには、ディレクトリーを並べたリストが、
	パーミッションビットと所有権とともに含まれています。
	ここに含まれるディレクトリーは、明示的に <varname>USE_MTREE</varname>
	を設定している各パッケージのインストールに際して、
	自動的に作成されます。この機能は、
	廃止が予定されています。</para></listitem></varlistentry>

	<varlistentry><term><filename>mk/platform/<replaceable>MyOS</replaceable>.x11.dist</filename></term>
	<listitem><para>既存の x11.dist ファイルのいずれかを、
	<filename><replaceable>MyOS</replaceable>.x11.dist</filename>
	にコピーするだけです。</para></listitem></varlistentry>

	<varlistentry><term><filename>mk/tools/bootstrap.mk</filename></term>
	<listitem><para>プラットフォームによっては、ベースシステム附属のツールが
	pkgsrc で使うには不十分なことがあります。
	たとえば &man.sed.1; には、
	処理可能な行長が短く制限されているバージョンがたくさんあります。
	したがって、pkgsrc では別途ツールを用意しており、
	このファイルで有効化することができます。</para></listitem></varlistentry>

	<varlistentry><term><filename>mk/tools/tools.<replaceable>MyOS</replaceable>.mk</filename></term>
	<listitem><para>このファイルでは、
	pkgsrc 自身が必要とするツールおよび、別のツールや
	pkgsrc のパッケージが必要とするツールすべてのパスを定義しています。
	これらのツールが移植対象のプラットフォームではどこにあるかを調べて、
	書き足します。</para></listitem></varlistentry>

	</variablelist>

	<para>これで、<filename role="pkg">lang/perl5</filename> や <filename
	role="pkg">shells/bash</filename> のような、
	いくつかの基本的なパッケージが構築できるようになったはずです。</para>

</sect1>

<sect1 id="porting.compiler">
<title>未対応のコンパイラーに新たに対応させる</title>

	<para>TODO</para>

</sect1>

</chapter>
